const kpe=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const d of document.querySelectorAll('link[rel="modulepreload"]'))l(d);new MutationObserver(d=>{for(const g of d)if(g.type==="childList")for(const _ of g.addedNodes)_.tagName==="LINK"&&_.rel==="modulepreload"&&l(_)}).observe(document,{childList:!0,subtree:!0});function i(d){const g={};return d.integrity&&(g.integrity=d.integrity),d.referrerpolicy&&(g.referrerPolicy=d.referrerpolicy),d.crossorigin==="use-credentials"?g.credentials="include":d.crossorigin==="anonymous"?g.credentials="omit":g.credentials="same-origin",g}function l(d){if(d.ep)return;d.ep=!0;const g=i(d);fetch(d.href,g)}};kpe();/**
 * @license
 * Copyright 2010-2022 Three.js Authors
 * SPDX-License-Identifier: MIT
 */const WL="142",i0={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},o0={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},Tpe=0,Mte=1,Mpe=2,ure=1,dre=2,m1=3,T0=0,Xs=1,Zh=2,Ppe=1,qd=0,S0=1,Pte=2,Cte=3,Ate=4,Cpe=5,_0=100,Ape=101,Ipe=102,Ite=103,Dte=104,Dpe=200,Ope=201,Rpe=202,Lpe=203,fre=204,hre=205,zpe=206,Npe=207,Fpe=208,jpe=209,Bpe=210,Upe=0,Vpe=1,Hpe=2,TL=3,Gpe=4,Wpe=5,qpe=6,Kpe=7,pre=0,Xpe=1,$pe=2,Qc=0,Zpe=1,Ype=2,Jpe=3,Qpe=4,eme=5,mre=300,M0=301,P0=302,ML=303,PL=304,cP=306,C0=1e3,Ja=1001,sP=1002,Qi=1003,CL=1004,AL=1005,ea=1006,gre=1007,R0=1008,Yh=1009,tme=1010,nme=1011,vre=1012,rme=1013,Hh=1014,Gd=1015,x1=1016,ime=1017,ome=1018,E0=1020,ame=1021,sme=1022,Ks=1023,lme=1024,cme=1025,qh=1026,A0=1027,ume=1028,dme=1029,fme=1030,hme=1031,pme=1033,G4=33776,W4=33777,q4=33778,K4=33779,Ote=35840,Rte=35841,Lte=35842,zte=35843,mme=36196,Nte=37492,Fte=37496,jte=37808,Bte=37809,Ute=37810,Vte=37811,Hte=37812,Gte=37813,Wte=37814,qte=37815,Kte=37816,Xte=37817,$te=37818,Zte=37819,Yte=37820,Jte=37821,Qte=36492,w1=2300,I0=2301,X4=2302,ene=2400,tne=2401,nne=2402,gme=2500,vme=2501,yme=1,yre=2,Jh=3e3,br=3001,bme=3200,_me=3201,qL=0,xme=1,Yc="srgb",Gh="srgb-linear",$4=7680,wme=519,IL=35044,rne="300 es",DL=1035;class np{addEventListener(t,i){this._listeners===void 0&&(this._listeners={});const l=this._listeners;l[t]===void 0&&(l[t]=[]),l[t].indexOf(i)===-1&&l[t].push(i)}hasEventListener(t,i){if(this._listeners===void 0)return!1;const l=this._listeners;return l[t]!==void 0&&l[t].indexOf(i)!==-1}removeEventListener(t,i){if(this._listeners===void 0)return;const d=this._listeners[t];if(d!==void 0){const g=d.indexOf(i);g!==-1&&d.splice(g,1)}}dispatchEvent(t){if(this._listeners===void 0)return;const l=this._listeners[t.type];if(l!==void 0){t.target=this;const d=l.slice(0);for(let g=0,_=d.length;g<_;g++)d[g].call(this,t);t.target=null}}}const po=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];let ine=1234567;const b1=Math.PI/180,S1=180/Math.PI;function $s(){const w=Math.random()*4294967295|0,t=Math.random()*4294967295|0,i=Math.random()*4294967295|0,l=Math.random()*4294967295|0;return(po[w&255]+po[w>>8&255]+po[w>>16&255]+po[w>>24&255]+"-"+po[t&255]+po[t>>8&255]+"-"+po[t>>16&15|64]+po[t>>24&255]+"-"+po[i&63|128]+po[i>>8&255]+"-"+po[i>>16&255]+po[i>>24&255]+po[l&255]+po[l>>8&255]+po[l>>16&255]+po[l>>24&255]).toLowerCase()}function go(w,t,i){return Math.max(t,Math.min(i,w))}function KL(w,t){return(w%t+t)%t}function Sme(w,t,i,l,d){return l+(w-t)*(d-l)/(i-t)}function Eme(w,t,i){return w!==t?(i-w)/(t-w):0}function _1(w,t,i){return(1-i)*w+i*t}function kme(w,t,i,l){return _1(w,t,1-Math.exp(-i*l))}function Tme(w,t=1){return t-Math.abs(KL(w,t*2)-t)}function Mme(w,t,i){return w<=t?0:w>=i?1:(w=(w-t)/(i-t),w*w*(3-2*w))}function Pme(w,t,i){return w<=t?0:w>=i?1:(w=(w-t)/(i-t),w*w*w*(w*(w*6-15)+10))}function Cme(w,t){return w+Math.floor(Math.random()*(t-w+1))}function Ame(w,t){return w+Math.random()*(t-w)}function Ime(w){return w*(.5-Math.random())}function Dme(w){w!==void 0&&(ine=w);let t=ine+=1831565813;return t=Math.imul(t^t>>>15,t|1),t^=t+Math.imul(t^t>>>7,t|61),((t^t>>>14)>>>0)/4294967296}function Ome(w){return w*b1}function Rme(w){return w*S1}function OL(w){return(w&w-1)===0&&w!==0}function bre(w){return Math.pow(2,Math.ceil(Math.log(w)/Math.LN2))}function lP(w){return Math.pow(2,Math.floor(Math.log(w)/Math.LN2))}function Lme(w,t,i,l,d){const g=Math.cos,_=Math.sin,b=g(i/2),M=_(i/2),I=g((t+l)/2),F=_((t+l)/2),j=g((t-l)/2),B=_((t-l)/2),K=g((l-t)/2),te=_((l-t)/2);switch(d){case"XYX":w.set(b*F,M*j,M*B,b*I);break;case"YZY":w.set(M*B,b*F,M*j,b*I);break;case"ZXZ":w.set(M*j,M*B,b*F,b*I);break;case"XZX":w.set(b*F,M*te,M*K,b*I);break;case"YXY":w.set(M*K,b*F,M*te,b*I);break;case"ZYZ":w.set(M*te,M*K,b*F,b*I);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+d)}}function zme(w,t){switch(t.constructor){case Float32Array:return w;case Uint16Array:return w/65535;case Uint8Array:return w/255;case Int16Array:return Math.max(w/32767,-1);case Int8Array:return Math.max(w/127,-1);default:throw new Error("Invalid component type.")}}function Nme(w,t){switch(t.constructor){case Float32Array:return w;case Uint16Array:return Math.round(w*65535);case Uint8Array:return Math.round(w*255);case Int16Array:return Math.round(w*32767);case Int8Array:return Math.round(w*127);default:throw new Error("Invalid component type.")}}var Fme=Object.freeze({__proto__:null,DEG2RAD:b1,RAD2DEG:S1,generateUUID:$s,clamp:go,euclideanModulo:KL,mapLinear:Sme,inverseLerp:Eme,lerp:_1,damp:kme,pingpong:Tme,smoothstep:Mme,smootherstep:Pme,randInt:Cme,randFloat:Ame,randFloatSpread:Ime,seededRandom:Dme,degToRad:Ome,radToDeg:Rme,isPowerOfTwo:OL,ceilPowerOfTwo:bre,floorPowerOfTwo:lP,setQuaternionFromProperEuler:Lme,normalize:Nme,denormalize:zme});class Rn{constructor(t=0,i=0){Rn.prototype.isVector2=!0,this.x=t,this.y=i}get width(){return this.x}set width(t){this.x=t}get height(){return this.y}set height(t){this.y=t}set(t,i){return this.x=t,this.y=i,this}setScalar(t){return this.x=t,this.y=t,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setComponent(t,i){switch(t){case 0:this.x=i;break;case 1:this.y=i;break;default:throw new Error("index is out of range: "+t)}return this}getComponent(t){switch(t){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+t)}}clone(){return new this.constructor(this.x,this.y)}copy(t){return this.x=t.x,this.y=t.y,this}add(t,i){return i!==void 0?(console.warn("THREE.Vector2: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(t,i)):(this.x+=t.x,this.y+=t.y,this)}addScalar(t){return this.x+=t,this.y+=t,this}addVectors(t,i){return this.x=t.x+i.x,this.y=t.y+i.y,this}addScaledVector(t,i){return this.x+=t.x*i,this.y+=t.y*i,this}sub(t,i){return i!==void 0?(console.warn("THREE.Vector2: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(t,i)):(this.x-=t.x,this.y-=t.y,this)}subScalar(t){return this.x-=t,this.y-=t,this}subVectors(t,i){return this.x=t.x-i.x,this.y=t.y-i.y,this}multiply(t){return this.x*=t.x,this.y*=t.y,this}multiplyScalar(t){return this.x*=t,this.y*=t,this}divide(t){return this.x/=t.x,this.y/=t.y,this}divideScalar(t){return this.multiplyScalar(1/t)}applyMatrix3(t){const i=this.x,l=this.y,d=t.elements;return this.x=d[0]*i+d[3]*l+d[6],this.y=d[1]*i+d[4]*l+d[7],this}min(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this}max(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this}clamp(t,i){return this.x=Math.max(t.x,Math.min(i.x,this.x)),this.y=Math.max(t.y,Math.min(i.y,this.y)),this}clampScalar(t,i){return this.x=Math.max(t,Math.min(i,this.x)),this.y=Math.max(t,Math.min(i,this.y)),this}clampLength(t,i){const l=this.length();return this.divideScalar(l||1).multiplyScalar(Math.max(t,Math.min(i,l)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(t){return this.x*t.x+this.y*t.y}cross(t){return this.x*t.y-this.y*t.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}distanceTo(t){return Math.sqrt(this.distanceToSquared(t))}distanceToSquared(t){const i=this.x-t.x,l=this.y-t.y;return i*i+l*l}manhattanDistanceTo(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)}setLength(t){return this.normalize().multiplyScalar(t)}lerp(t,i){return this.x+=(t.x-this.x)*i,this.y+=(t.y-this.y)*i,this}lerpVectors(t,i,l){return this.x=t.x+(i.x-t.x)*l,this.y=t.y+(i.y-t.y)*l,this}equals(t){return t.x===this.x&&t.y===this.y}fromArray(t,i=0){return this.x=t[i],this.y=t[i+1],this}toArray(t=[],i=0){return t[i]=this.x,t[i+1]=this.y,t}fromBufferAttribute(t,i,l){return l!==void 0&&console.warn("THREE.Vector2: offset has been removed from .fromBufferAttribute()."),this.x=t.getX(i),this.y=t.getY(i),this}rotateAround(t,i){const l=Math.cos(i),d=Math.sin(i),g=this.x-t.x,_=this.y-t.y;return this.x=g*l-_*d+t.x,this.y=g*d+_*l+t.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class Qa{constructor(){Qa.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix3: the constructor no longer reads arguments. use .set() instead.")}set(t,i,l,d,g,_,b,M,I){const F=this.elements;return F[0]=t,F[1]=d,F[2]=b,F[3]=i,F[4]=g,F[5]=M,F[6]=l,F[7]=_,F[8]=I,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(t){const i=this.elements,l=t.elements;return i[0]=l[0],i[1]=l[1],i[2]=l[2],i[3]=l[3],i[4]=l[4],i[5]=l[5],i[6]=l[6],i[7]=l[7],i[8]=l[8],this}extractBasis(t,i,l){return t.setFromMatrix3Column(this,0),i.setFromMatrix3Column(this,1),l.setFromMatrix3Column(this,2),this}setFromMatrix4(t){const i=t.elements;return this.set(i[0],i[4],i[8],i[1],i[5],i[9],i[2],i[6],i[10]),this}multiply(t){return this.multiplyMatrices(this,t)}premultiply(t){return this.multiplyMatrices(t,this)}multiplyMatrices(t,i){const l=t.elements,d=i.elements,g=this.elements,_=l[0],b=l[3],M=l[6],I=l[1],F=l[4],j=l[7],B=l[2],K=l[5],te=l[8],X=d[0],O=d[3],W=d[6],we=d[1],R=d[4],se=d[7],me=d[2],ze=d[5],ee=d[8];return g[0]=_*X+b*we+M*me,g[3]=_*O+b*R+M*ze,g[6]=_*W+b*se+M*ee,g[1]=I*X+F*we+j*me,g[4]=I*O+F*R+j*ze,g[7]=I*W+F*se+j*ee,g[2]=B*X+K*we+te*me,g[5]=B*O+K*R+te*ze,g[8]=B*W+K*se+te*ee,this}multiplyScalar(t){const i=this.elements;return i[0]*=t,i[3]*=t,i[6]*=t,i[1]*=t,i[4]*=t,i[7]*=t,i[2]*=t,i[5]*=t,i[8]*=t,this}determinant(){const t=this.elements,i=t[0],l=t[1],d=t[2],g=t[3],_=t[4],b=t[5],M=t[6],I=t[7],F=t[8];return i*_*F-i*b*I-l*g*F+l*b*M+d*g*I-d*_*M}invert(){const t=this.elements,i=t[0],l=t[1],d=t[2],g=t[3],_=t[4],b=t[5],M=t[6],I=t[7],F=t[8],j=F*_-b*I,B=b*M-F*g,K=I*g-_*M,te=i*j+l*B+d*K;if(te===0)return this.set(0,0,0,0,0,0,0,0,0);const X=1/te;return t[0]=j*X,t[1]=(d*I-F*l)*X,t[2]=(b*l-d*_)*X,t[3]=B*X,t[4]=(F*i-d*M)*X,t[5]=(d*g-b*i)*X,t[6]=K*X,t[7]=(l*M-I*i)*X,t[8]=(_*i-l*g)*X,this}transpose(){let t;const i=this.elements;return t=i[1],i[1]=i[3],i[3]=t,t=i[2],i[2]=i[6],i[6]=t,t=i[5],i[5]=i[7],i[7]=t,this}getNormalMatrix(t){return this.setFromMatrix4(t).invert().transpose()}transposeIntoArray(t){const i=this.elements;return t[0]=i[0],t[1]=i[3],t[2]=i[6],t[3]=i[1],t[4]=i[4],t[5]=i[7],t[6]=i[2],t[7]=i[5],t[8]=i[8],this}setUvTransform(t,i,l,d,g,_,b){const M=Math.cos(g),I=Math.sin(g);return this.set(l*M,l*I,-l*(M*_+I*b)+_+t,-d*I,d*M,-d*(-I*_+M*b)+b+i,0,0,1),this}scale(t,i){const l=this.elements;return l[0]*=t,l[3]*=t,l[6]*=t,l[1]*=i,l[4]*=i,l[7]*=i,this}rotate(t){const i=Math.cos(t),l=Math.sin(t),d=this.elements,g=d[0],_=d[3],b=d[6],M=d[1],I=d[4],F=d[7];return d[0]=i*g+l*M,d[3]=i*_+l*I,d[6]=i*b+l*F,d[1]=-l*g+i*M,d[4]=-l*_+i*I,d[7]=-l*b+i*F,this}translate(t,i){const l=this.elements;return l[0]+=t*l[2],l[3]+=t*l[5],l[6]+=t*l[8],l[1]+=i*l[2],l[4]+=i*l[5],l[7]+=i*l[8],this}equals(t){const i=this.elements,l=t.elements;for(let d=0;d<9;d++)if(i[d]!==l[d])return!1;return!0}fromArray(t,i=0){for(let l=0;l<9;l++)this.elements[l]=t[l+i];return this}toArray(t=[],i=0){const l=this.elements;return t[i]=l[0],t[i+1]=l[1],t[i+2]=l[2],t[i+3]=l[3],t[i+4]=l[4],t[i+5]=l[5],t[i+6]=l[6],t[i+7]=l[7],t[i+8]=l[8],t}clone(){return new this.constructor().fromArray(this.elements)}}function _re(w){for(let t=w.length-1;t>=0;--t)if(w[t]>65535)return!0;return!1}function E1(w){return document.createElementNS("http://www.w3.org/1999/xhtml",w)}function Kh(w){return w<.04045?w*.0773993808:Math.pow(w*.9478672986+.0521327014,2.4)}function iP(w){return w<.0031308?w*12.92:1.055*Math.pow(w,.41666)-.055}const Z4={[Yc]:{[Gh]:Kh},[Gh]:{[Yc]:iP}},Vs={legacyMode:!0,get workingColorSpace(){return Gh},set workingColorSpace(w){console.warn("THREE.ColorManagement: .workingColorSpace is readonly.")},convert:function(w,t,i){if(this.legacyMode||t===i||!t||!i)return w;if(Z4[t]&&Z4[t][i]!==void 0){const l=Z4[t][i];return w.r=l(w.r),w.g=l(w.g),w.b=l(w.b),w}throw new Error("Unsupported color space conversion.")},fromWorkingColorSpace:function(w,t){return this.convert(w,this.workingColorSpace,t)},toWorkingColorSpace:function(w,t){return this.convert(w,t,this.workingColorSpace)}},xre={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},Ti={r:0,g:0,b:0},Hs={h:0,s:0,l:0},RM={h:0,s:0,l:0};function Y4(w,t,i){return i<0&&(i+=1),i>1&&(i-=1),i<1/6?w+(t-w)*6*i:i<1/2?t:i<2/3?w+(t-w)*6*(2/3-i):w}function LM(w,t){return t.r=w.r,t.g=w.g,t.b=w.b,t}class Fn{constructor(t,i,l){return this.isColor=!0,this.r=1,this.g=1,this.b=1,i===void 0&&l===void 0?this.set(t):this.setRGB(t,i,l)}set(t){return t&&t.isColor?this.copy(t):typeof t=="number"?this.setHex(t):typeof t=="string"&&this.setStyle(t),this}setScalar(t){return this.r=t,this.g=t,this.b=t,this}setHex(t,i=Yc){return t=Math.floor(t),this.r=(t>>16&255)/255,this.g=(t>>8&255)/255,this.b=(t&255)/255,Vs.toWorkingColorSpace(this,i),this}setRGB(t,i,l,d=Gh){return this.r=t,this.g=i,this.b=l,Vs.toWorkingColorSpace(this,d),this}setHSL(t,i,l,d=Gh){if(t=KL(t,1),i=go(i,0,1),l=go(l,0,1),i===0)this.r=this.g=this.b=l;else{const g=l<=.5?l*(1+i):l+i-l*i,_=2*l-g;this.r=Y4(_,g,t+1/3),this.g=Y4(_,g,t),this.b=Y4(_,g,t-1/3)}return Vs.toWorkingColorSpace(this,d),this}setStyle(t,i=Yc){function l(g){g!==void 0&&parseFloat(g)<1&&console.warn("THREE.Color: Alpha component of "+t+" will be ignored.")}let d;if(d=/^((?:rgb|hsl)a?)\(([^\)]*)\)/.exec(t)){let g;const _=d[1],b=d[2];switch(_){case"rgb":case"rgba":if(g=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(b))return this.r=Math.min(255,parseInt(g[1],10))/255,this.g=Math.min(255,parseInt(g[2],10))/255,this.b=Math.min(255,parseInt(g[3],10))/255,Vs.toWorkingColorSpace(this,i),l(g[4]),this;if(g=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(b))return this.r=Math.min(100,parseInt(g[1],10))/100,this.g=Math.min(100,parseInt(g[2],10))/100,this.b=Math.min(100,parseInt(g[3],10))/100,Vs.toWorkingColorSpace(this,i),l(g[4]),this;break;case"hsl":case"hsla":if(g=/^\s*(\d*\.?\d+)\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(b)){const M=parseFloat(g[1])/360,I=parseInt(g[2],10)/100,F=parseInt(g[3],10)/100;return l(g[4]),this.setHSL(M,I,F,i)}break}}else if(d=/^\#([A-Fa-f\d]+)$/.exec(t)){const g=d[1],_=g.length;if(_===3)return this.r=parseInt(g.charAt(0)+g.charAt(0),16)/255,this.g=parseInt(g.charAt(1)+g.charAt(1),16)/255,this.b=parseInt(g.charAt(2)+g.charAt(2),16)/255,Vs.toWorkingColorSpace(this,i),this;if(_===6)return this.r=parseInt(g.charAt(0)+g.charAt(1),16)/255,this.g=parseInt(g.charAt(2)+g.charAt(3),16)/255,this.b=parseInt(g.charAt(4)+g.charAt(5),16)/255,Vs.toWorkingColorSpace(this,i),this}return t&&t.length>0?this.setColorName(t,i):this}setColorName(t,i=Yc){const l=xre[t.toLowerCase()];return l!==void 0?this.setHex(l,i):console.warn("THREE.Color: Unknown color "+t),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(t){return this.r=t.r,this.g=t.g,this.b=t.b,this}copySRGBToLinear(t){return this.r=Kh(t.r),this.g=Kh(t.g),this.b=Kh(t.b),this}copyLinearToSRGB(t){return this.r=iP(t.r),this.g=iP(t.g),this.b=iP(t.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(t=Yc){return Vs.fromWorkingColorSpace(LM(this,Ti),t),go(Ti.r*255,0,255)<<16^go(Ti.g*255,0,255)<<8^go(Ti.b*255,0,255)<<0}getHexString(t=Yc){return("000000"+this.getHex(t).toString(16)).slice(-6)}getHSL(t,i=Gh){Vs.fromWorkingColorSpace(LM(this,Ti),i);const l=Ti.r,d=Ti.g,g=Ti.b,_=Math.max(l,d,g),b=Math.min(l,d,g);let M,I;const F=(b+_)/2;if(b===_)M=0,I=0;else{const j=_-b;switch(I=F<=.5?j/(_+b):j/(2-_-b),_){case l:M=(d-g)/j+(d<g?6:0);break;case d:M=(g-l)/j+2;break;case g:M=(l-d)/j+4;break}M/=6}return t.h=M,t.s=I,t.l=F,t}getRGB(t,i=Gh){return Vs.fromWorkingColorSpace(LM(this,Ti),i),t.r=Ti.r,t.g=Ti.g,t.b=Ti.b,t}getStyle(t=Yc){return Vs.fromWorkingColorSpace(LM(this,Ti),t),t!==Yc?`color(${t} ${Ti.r} ${Ti.g} ${Ti.b})`:`rgb(${Ti.r*255|0},${Ti.g*255|0},${Ti.b*255|0})`}offsetHSL(t,i,l){return this.getHSL(Hs),Hs.h+=t,Hs.s+=i,Hs.l+=l,this.setHSL(Hs.h,Hs.s,Hs.l),this}add(t){return this.r+=t.r,this.g+=t.g,this.b+=t.b,this}addColors(t,i){return this.r=t.r+i.r,this.g=t.g+i.g,this.b=t.b+i.b,this}addScalar(t){return this.r+=t,this.g+=t,this.b+=t,this}sub(t){return this.r=Math.max(0,this.r-t.r),this.g=Math.max(0,this.g-t.g),this.b=Math.max(0,this.b-t.b),this}multiply(t){return this.r*=t.r,this.g*=t.g,this.b*=t.b,this}multiplyScalar(t){return this.r*=t,this.g*=t,this.b*=t,this}lerp(t,i){return this.r+=(t.r-this.r)*i,this.g+=(t.g-this.g)*i,this.b+=(t.b-this.b)*i,this}lerpColors(t,i,l){return this.r=t.r+(i.r-t.r)*l,this.g=t.g+(i.g-t.g)*l,this.b=t.b+(i.b-t.b)*l,this}lerpHSL(t,i){this.getHSL(Hs),t.getHSL(RM);const l=_1(Hs.h,RM.h,i),d=_1(Hs.s,RM.s,i),g=_1(Hs.l,RM.l,i);return this.setHSL(l,d,g),this}equals(t){return t.r===this.r&&t.g===this.g&&t.b===this.b}fromArray(t,i=0){return this.r=t[i],this.g=t[i+1],this.b=t[i+2],this}toArray(t=[],i=0){return t[i]=this.r,t[i+1]=this.g,t[i+2]=this.b,t}fromBufferAttribute(t,i){return this.r=t.getX(i),this.g=t.getY(i),this.b=t.getZ(i),t.normalized===!0&&(this.r/=255,this.g/=255,this.b/=255),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}Fn.NAMES=xre;let a0;class wre{static getDataURL(t){if(/^data:/i.test(t.src)||typeof HTMLCanvasElement=="undefined")return t.src;let i;if(t instanceof HTMLCanvasElement)i=t;else{a0===void 0&&(a0=E1("canvas")),a0.width=t.width,a0.height=t.height;const l=a0.getContext("2d");t instanceof ImageData?l.putImageData(t,0,0):l.drawImage(t,0,0,t.width,t.height),i=a0}return i.width>2048||i.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",t),i.toDataURL("image/jpeg",.6)):i.toDataURL("image/png")}static sRGBToLinear(t){if(typeof HTMLImageElement!="undefined"&&t instanceof HTMLImageElement||typeof HTMLCanvasElement!="undefined"&&t instanceof HTMLCanvasElement||typeof ImageBitmap!="undefined"&&t instanceof ImageBitmap){const i=E1("canvas");i.width=t.width,i.height=t.height;const l=i.getContext("2d");l.drawImage(t,0,0,t.width,t.height);const d=l.getImageData(0,0,t.width,t.height),g=d.data;for(let _=0;_<g.length;_++)g[_]=Kh(g[_]/255)*255;return l.putImageData(d,0,0),i}else if(t.data){const i=t.data.slice(0);for(let l=0;l<i.length;l++)i instanceof Uint8Array||i instanceof Uint8ClampedArray?i[l]=Math.floor(Kh(i[l]/255)*255):i[l]=Kh(i[l]);return{data:i,width:t.width,height:t.height}}else return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),t}}class Sre{constructor(t=null){this.isSource=!0,this.uuid=$s(),this.data=t,this.version=0}set needsUpdate(t){t===!0&&this.version++}toJSON(t){const i=t===void 0||typeof t=="string";if(!i&&t.images[this.uuid]!==void 0)return t.images[this.uuid];const l={uuid:this.uuid,url:""},d=this.data;if(d!==null){let g;if(Array.isArray(d)){g=[];for(let _=0,b=d.length;_<b;_++)d[_].isDataTexture?g.push(J4(d[_].image)):g.push(J4(d[_]))}else g=J4(d);l.url=g}return i||(t.images[this.uuid]=l),l}}function J4(w){return typeof HTMLImageElement!="undefined"&&w instanceof HTMLImageElement||typeof HTMLCanvasElement!="undefined"&&w instanceof HTMLCanvasElement||typeof ImageBitmap!="undefined"&&w instanceof ImageBitmap?wre.getDataURL(w):w.data?{data:Array.from(w.data),width:w.width,height:w.height,type:w.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let jme=0;class Fo extends np{constructor(t=Fo.DEFAULT_IMAGE,i=Fo.DEFAULT_MAPPING,l=Ja,d=Ja,g=ea,_=R0,b=Ks,M=Yh,I=1,F=Jh){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:jme++}),this.uuid=$s(),this.name="",this.source=new Sre(t),this.mipmaps=[],this.mapping=i,this.wrapS=l,this.wrapT=d,this.magFilter=g,this.minFilter=_,this.anisotropy=I,this.format=b,this.internalFormat=null,this.type=M,this.offset=new Rn(0,0),this.repeat=new Rn(1,1),this.center=new Rn(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new Qa,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.encoding=F,this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1,this.needsPMREMUpdate=!1}get image(){return this.source.data}set image(t){this.source.data=t}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return new this.constructor().copy(this)}copy(t){return this.name=t.name,this.source=t.source,this.mipmaps=t.mipmaps.slice(0),this.mapping=t.mapping,this.wrapS=t.wrapS,this.wrapT=t.wrapT,this.magFilter=t.magFilter,this.minFilter=t.minFilter,this.anisotropy=t.anisotropy,this.format=t.format,this.internalFormat=t.internalFormat,this.type=t.type,this.offset.copy(t.offset),this.repeat.copy(t.repeat),this.center.copy(t.center),this.rotation=t.rotation,this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrix.copy(t.matrix),this.generateMipmaps=t.generateMipmaps,this.premultiplyAlpha=t.premultiplyAlpha,this.flipY=t.flipY,this.unpackAlignment=t.unpackAlignment,this.encoding=t.encoding,this.userData=JSON.parse(JSON.stringify(t.userData)),this.needsUpdate=!0,this}toJSON(t){const i=t===void 0||typeof t=="string";if(!i&&t.textures[this.uuid]!==void 0)return t.textures[this.uuid];const l={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(t).uuid,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,type:this.type,encoding:this.encoding,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return JSON.stringify(this.userData)!=="{}"&&(l.userData=this.userData),i||(t.textures[this.uuid]=l),l}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(t){if(this.mapping!==mre)return t;if(t.applyMatrix3(this.matrix),t.x<0||t.x>1)switch(this.wrapS){case C0:t.x=t.x-Math.floor(t.x);break;case Ja:t.x=t.x<0?0:1;break;case sP:Math.abs(Math.floor(t.x)%2)===1?t.x=Math.ceil(t.x)-t.x:t.x=t.x-Math.floor(t.x);break}if(t.y<0||t.y>1)switch(this.wrapT){case C0:t.y=t.y-Math.floor(t.y);break;case Ja:t.y=t.y<0?0:1;break;case sP:Math.abs(Math.floor(t.y)%2)===1?t.y=Math.ceil(t.y)-t.y:t.y=t.y-Math.floor(t.y);break}return this.flipY&&(t.y=1-t.y),t}set needsUpdate(t){t===!0&&(this.version++,this.source.needsUpdate=!0)}}Fo.DEFAULT_IMAGE=null;Fo.DEFAULT_MAPPING=mre;class Er{constructor(t=0,i=0,l=0,d=1){Er.prototype.isVector4=!0,this.x=t,this.y=i,this.z=l,this.w=d}get width(){return this.z}set width(t){this.z=t}get height(){return this.w}set height(t){this.w=t}set(t,i,l,d){return this.x=t,this.y=i,this.z=l,this.w=d,this}setScalar(t){return this.x=t,this.y=t,this.z=t,this.w=t,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setZ(t){return this.z=t,this}setW(t){return this.w=t,this}setComponent(t,i){switch(t){case 0:this.x=i;break;case 1:this.y=i;break;case 2:this.z=i;break;case 3:this.w=i;break;default:throw new Error("index is out of range: "+t)}return this}getComponent(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+t)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(t){return this.x=t.x,this.y=t.y,this.z=t.z,this.w=t.w!==void 0?t.w:1,this}add(t,i){return i!==void 0?(console.warn("THREE.Vector4: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(t,i)):(this.x+=t.x,this.y+=t.y,this.z+=t.z,this.w+=t.w,this)}addScalar(t){return this.x+=t,this.y+=t,this.z+=t,this.w+=t,this}addVectors(t,i){return this.x=t.x+i.x,this.y=t.y+i.y,this.z=t.z+i.z,this.w=t.w+i.w,this}addScaledVector(t,i){return this.x+=t.x*i,this.y+=t.y*i,this.z+=t.z*i,this.w+=t.w*i,this}sub(t,i){return i!==void 0?(console.warn("THREE.Vector4: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(t,i)):(this.x-=t.x,this.y-=t.y,this.z-=t.z,this.w-=t.w,this)}subScalar(t){return this.x-=t,this.y-=t,this.z-=t,this.w-=t,this}subVectors(t,i){return this.x=t.x-i.x,this.y=t.y-i.y,this.z=t.z-i.z,this.w=t.w-i.w,this}multiply(t){return this.x*=t.x,this.y*=t.y,this.z*=t.z,this.w*=t.w,this}multiplyScalar(t){return this.x*=t,this.y*=t,this.z*=t,this.w*=t,this}applyMatrix4(t){const i=this.x,l=this.y,d=this.z,g=this.w,_=t.elements;return this.x=_[0]*i+_[4]*l+_[8]*d+_[12]*g,this.y=_[1]*i+_[5]*l+_[9]*d+_[13]*g,this.z=_[2]*i+_[6]*l+_[10]*d+_[14]*g,this.w=_[3]*i+_[7]*l+_[11]*d+_[15]*g,this}divideScalar(t){return this.multiplyScalar(1/t)}setAxisAngleFromQuaternion(t){this.w=2*Math.acos(t.w);const i=Math.sqrt(1-t.w*t.w);return i<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=t.x/i,this.y=t.y/i,this.z=t.z/i),this}setAxisAngleFromRotationMatrix(t){let i,l,d,g;const M=t.elements,I=M[0],F=M[4],j=M[8],B=M[1],K=M[5],te=M[9],X=M[2],O=M[6],W=M[10];if(Math.abs(F-B)<.01&&Math.abs(j-X)<.01&&Math.abs(te-O)<.01){if(Math.abs(F+B)<.1&&Math.abs(j+X)<.1&&Math.abs(te+O)<.1&&Math.abs(I+K+W-3)<.1)return this.set(1,0,0,0),this;i=Math.PI;const R=(I+1)/2,se=(K+1)/2,me=(W+1)/2,ze=(F+B)/4,ee=(j+X)/4,fe=(te+O)/4;return R>se&&R>me?R<.01?(l=0,d=.707106781,g=.707106781):(l=Math.sqrt(R),d=ze/l,g=ee/l):se>me?se<.01?(l=.707106781,d=0,g=.707106781):(d=Math.sqrt(se),l=ze/d,g=fe/d):me<.01?(l=.707106781,d=.707106781,g=0):(g=Math.sqrt(me),l=ee/g,d=fe/g),this.set(l,d,g,i),this}let we=Math.sqrt((O-te)*(O-te)+(j-X)*(j-X)+(B-F)*(B-F));return Math.abs(we)<.001&&(we=1),this.x=(O-te)/we,this.y=(j-X)/we,this.z=(B-F)/we,this.w=Math.acos((I+K+W-1)/2),this}min(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this.w=Math.min(this.w,t.w),this}max(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this.w=Math.max(this.w,t.w),this}clamp(t,i){return this.x=Math.max(t.x,Math.min(i.x,this.x)),this.y=Math.max(t.y,Math.min(i.y,this.y)),this.z=Math.max(t.z,Math.min(i.z,this.z)),this.w=Math.max(t.w,Math.min(i.w,this.w)),this}clampScalar(t,i){return this.x=Math.max(t,Math.min(i,this.x)),this.y=Math.max(t,Math.min(i,this.y)),this.z=Math.max(t,Math.min(i,this.z)),this.w=Math.max(t,Math.min(i,this.w)),this}clampLength(t,i){const l=this.length();return this.divideScalar(l||1).multiplyScalar(Math.max(t,Math.min(i,l)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(t){return this.x*t.x+this.y*t.y+this.z*t.z+this.w*t.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(t){return this.normalize().multiplyScalar(t)}lerp(t,i){return this.x+=(t.x-this.x)*i,this.y+=(t.y-this.y)*i,this.z+=(t.z-this.z)*i,this.w+=(t.w-this.w)*i,this}lerpVectors(t,i,l){return this.x=t.x+(i.x-t.x)*l,this.y=t.y+(i.y-t.y)*l,this.z=t.z+(i.z-t.z)*l,this.w=t.w+(i.w-t.w)*l,this}equals(t){return t.x===this.x&&t.y===this.y&&t.z===this.z&&t.w===this.w}fromArray(t,i=0){return this.x=t[i],this.y=t[i+1],this.z=t[i+2],this.w=t[i+3],this}toArray(t=[],i=0){return t[i]=this.x,t[i+1]=this.y,t[i+2]=this.z,t[i+3]=this.w,t}fromBufferAttribute(t,i,l){return l!==void 0&&console.warn("THREE.Vector4: offset has been removed from .fromBufferAttribute()."),this.x=t.getX(i),this.y=t.getY(i),this.z=t.getZ(i),this.w=t.getW(i),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class Qh extends np{constructor(t,i,l={}){super(),this.isWebGLRenderTarget=!0,this.width=t,this.height=i,this.depth=1,this.scissor=new Er(0,0,t,i),this.scissorTest=!1,this.viewport=new Er(0,0,t,i);const d={width:t,height:i,depth:1};this.texture=new Fo(d,l.mapping,l.wrapS,l.wrapT,l.magFilter,l.minFilter,l.format,l.type,l.anisotropy,l.encoding),this.texture.isRenderTargetTexture=!0,this.texture.flipY=!1,this.texture.generateMipmaps=l.generateMipmaps!==void 0?l.generateMipmaps:!1,this.texture.internalFormat=l.internalFormat!==void 0?l.internalFormat:null,this.texture.minFilter=l.minFilter!==void 0?l.minFilter:ea,this.depthBuffer=l.depthBuffer!==void 0?l.depthBuffer:!0,this.stencilBuffer=l.stencilBuffer!==void 0?l.stencilBuffer:!1,this.depthTexture=l.depthTexture!==void 0?l.depthTexture:null,this.samples=l.samples!==void 0?l.samples:0}setSize(t,i,l=1){(this.width!==t||this.height!==i||this.depth!==l)&&(this.width=t,this.height=i,this.depth=l,this.texture.image.width=t,this.texture.image.height=i,this.texture.image.depth=l,this.dispose()),this.viewport.set(0,0,t,i),this.scissor.set(0,0,t,i)}clone(){return new this.constructor().copy(this)}copy(t){this.width=t.width,this.height=t.height,this.depth=t.depth,this.viewport.copy(t.viewport),this.texture=t.texture.clone(),this.texture.isRenderTargetTexture=!0;const i=Object.assign({},t.texture.image);return this.texture.source=new Sre(i),this.depthBuffer=t.depthBuffer,this.stencilBuffer=t.stencilBuffer,t.depthTexture!==null&&(this.depthTexture=t.depthTexture.clone()),this.samples=t.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class Ere extends Fo{constructor(t=null,i=1,l=1,d=1){super(null),this.isDataArrayTexture=!0,this.image={data:t,width:i,height:l,depth:d},this.magFilter=Qi,this.minFilter=Qi,this.wrapR=Ja,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class Bme extends Fo{constructor(t=null,i=1,l=1,d=1){super(null),this.isData3DTexture=!0,this.image={data:t,width:i,height:l,depth:d},this.magFilter=Qi,this.minFilter=Qi,this.wrapR=Ja,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class Zs{constructor(t=0,i=0,l=0,d=1){this.isQuaternion=!0,this._x=t,this._y=i,this._z=l,this._w=d}static slerp(t,i,l,d){return console.warn("THREE.Quaternion: Static .slerp() has been deprecated. Use qm.slerpQuaternions( qa, qb, t ) instead."),l.slerpQuaternions(t,i,d)}static slerpFlat(t,i,l,d,g,_,b){let M=l[d+0],I=l[d+1],F=l[d+2],j=l[d+3];const B=g[_+0],K=g[_+1],te=g[_+2],X=g[_+3];if(b===0){t[i+0]=M,t[i+1]=I,t[i+2]=F,t[i+3]=j;return}if(b===1){t[i+0]=B,t[i+1]=K,t[i+2]=te,t[i+3]=X;return}if(j!==X||M!==B||I!==K||F!==te){let O=1-b;const W=M*B+I*K+F*te+j*X,we=W>=0?1:-1,R=1-W*W;if(R>Number.EPSILON){const me=Math.sqrt(R),ze=Math.atan2(me,W*we);O=Math.sin(O*ze)/me,b=Math.sin(b*ze)/me}const se=b*we;if(M=M*O+B*se,I=I*O+K*se,F=F*O+te*se,j=j*O+X*se,O===1-b){const me=1/Math.sqrt(M*M+I*I+F*F+j*j);M*=me,I*=me,F*=me,j*=me}}t[i]=M,t[i+1]=I,t[i+2]=F,t[i+3]=j}static multiplyQuaternionsFlat(t,i,l,d,g,_){const b=l[d],M=l[d+1],I=l[d+2],F=l[d+3],j=g[_],B=g[_+1],K=g[_+2],te=g[_+3];return t[i]=b*te+F*j+M*K-I*B,t[i+1]=M*te+F*B+I*j-b*K,t[i+2]=I*te+F*K+b*B-M*j,t[i+3]=F*te-b*j-M*B-I*K,t}get x(){return this._x}set x(t){this._x=t,this._onChangeCallback()}get y(){return this._y}set y(t){this._y=t,this._onChangeCallback()}get z(){return this._z}set z(t){this._z=t,this._onChangeCallback()}get w(){return this._w}set w(t){this._w=t,this._onChangeCallback()}set(t,i,l,d){return this._x=t,this._y=i,this._z=l,this._w=d,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(t){return this._x=t.x,this._y=t.y,this._z=t.z,this._w=t.w,this._onChangeCallback(),this}setFromEuler(t,i){if(!(t&&t.isEuler))throw new Error("THREE.Quaternion: .setFromEuler() now expects an Euler rotation rather than a Vector3 and order.");const l=t._x,d=t._y,g=t._z,_=t._order,b=Math.cos,M=Math.sin,I=b(l/2),F=b(d/2),j=b(g/2),B=M(l/2),K=M(d/2),te=M(g/2);switch(_){case"XYZ":this._x=B*F*j+I*K*te,this._y=I*K*j-B*F*te,this._z=I*F*te+B*K*j,this._w=I*F*j-B*K*te;break;case"YXZ":this._x=B*F*j+I*K*te,this._y=I*K*j-B*F*te,this._z=I*F*te-B*K*j,this._w=I*F*j+B*K*te;break;case"ZXY":this._x=B*F*j-I*K*te,this._y=I*K*j+B*F*te,this._z=I*F*te+B*K*j,this._w=I*F*j-B*K*te;break;case"ZYX":this._x=B*F*j-I*K*te,this._y=I*K*j+B*F*te,this._z=I*F*te-B*K*j,this._w=I*F*j+B*K*te;break;case"YZX":this._x=B*F*j+I*K*te,this._y=I*K*j+B*F*te,this._z=I*F*te-B*K*j,this._w=I*F*j-B*K*te;break;case"XZY":this._x=B*F*j-I*K*te,this._y=I*K*j-B*F*te,this._z=I*F*te+B*K*j,this._w=I*F*j+B*K*te;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+_)}return i!==!1&&this._onChangeCallback(),this}setFromAxisAngle(t,i){const l=i/2,d=Math.sin(l);return this._x=t.x*d,this._y=t.y*d,this._z=t.z*d,this._w=Math.cos(l),this._onChangeCallback(),this}setFromRotationMatrix(t){const i=t.elements,l=i[0],d=i[4],g=i[8],_=i[1],b=i[5],M=i[9],I=i[2],F=i[6],j=i[10],B=l+b+j;if(B>0){const K=.5/Math.sqrt(B+1);this._w=.25/K,this._x=(F-M)*K,this._y=(g-I)*K,this._z=(_-d)*K}else if(l>b&&l>j){const K=2*Math.sqrt(1+l-b-j);this._w=(F-M)/K,this._x=.25*K,this._y=(d+_)/K,this._z=(g+I)/K}else if(b>j){const K=2*Math.sqrt(1+b-l-j);this._w=(g-I)/K,this._x=(d+_)/K,this._y=.25*K,this._z=(M+F)/K}else{const K=2*Math.sqrt(1+j-l-b);this._w=(_-d)/K,this._x=(g+I)/K,this._y=(M+F)/K,this._z=.25*K}return this._onChangeCallback(),this}setFromUnitVectors(t,i){let l=t.dot(i)+1;return l<Number.EPSILON?(l=0,Math.abs(t.x)>Math.abs(t.z)?(this._x=-t.y,this._y=t.x,this._z=0,this._w=l):(this._x=0,this._y=-t.z,this._z=t.y,this._w=l)):(this._x=t.y*i.z-t.z*i.y,this._y=t.z*i.x-t.x*i.z,this._z=t.x*i.y-t.y*i.x,this._w=l),this.normalize()}angleTo(t){return 2*Math.acos(Math.abs(go(this.dot(t),-1,1)))}rotateTowards(t,i){const l=this.angleTo(t);if(l===0)return this;const d=Math.min(1,i/l);return this.slerp(t,d),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(t){return this._x*t._x+this._y*t._y+this._z*t._z+this._w*t._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let t=this.length();return t===0?(this._x=0,this._y=0,this._z=0,this._w=1):(t=1/t,this._x=this._x*t,this._y=this._y*t,this._z=this._z*t,this._w=this._w*t),this._onChangeCallback(),this}multiply(t,i){return i!==void 0?(console.warn("THREE.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead."),this.multiplyQuaternions(t,i)):this.multiplyQuaternions(this,t)}premultiply(t){return this.multiplyQuaternions(t,this)}multiplyQuaternions(t,i){const l=t._x,d=t._y,g=t._z,_=t._w,b=i._x,M=i._y,I=i._z,F=i._w;return this._x=l*F+_*b+d*I-g*M,this._y=d*F+_*M+g*b-l*I,this._z=g*F+_*I+l*M-d*b,this._w=_*F-l*b-d*M-g*I,this._onChangeCallback(),this}slerp(t,i){if(i===0)return this;if(i===1)return this.copy(t);const l=this._x,d=this._y,g=this._z,_=this._w;let b=_*t._w+l*t._x+d*t._y+g*t._z;if(b<0?(this._w=-t._w,this._x=-t._x,this._y=-t._y,this._z=-t._z,b=-b):this.copy(t),b>=1)return this._w=_,this._x=l,this._y=d,this._z=g,this;const M=1-b*b;if(M<=Number.EPSILON){const K=1-i;return this._w=K*_+i*this._w,this._x=K*l+i*this._x,this._y=K*d+i*this._y,this._z=K*g+i*this._z,this.normalize(),this._onChangeCallback(),this}const I=Math.sqrt(M),F=Math.atan2(I,b),j=Math.sin((1-i)*F)/I,B=Math.sin(i*F)/I;return this._w=_*j+this._w*B,this._x=l*j+this._x*B,this._y=d*j+this._y*B,this._z=g*j+this._z*B,this._onChangeCallback(),this}slerpQuaternions(t,i,l){return this.copy(t).slerp(i,l)}random(){const t=Math.random(),i=Math.sqrt(1-t),l=Math.sqrt(t),d=2*Math.PI*Math.random(),g=2*Math.PI*Math.random();return this.set(i*Math.cos(d),l*Math.sin(g),l*Math.cos(g),i*Math.sin(d))}equals(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._w===this._w}fromArray(t,i=0){return this._x=t[i],this._y=t[i+1],this._z=t[i+2],this._w=t[i+3],this._onChangeCallback(),this}toArray(t=[],i=0){return t[i]=this._x,t[i+1]=this._y,t[i+2]=this._z,t[i+3]=this._w,t}fromBufferAttribute(t,i){return this._x=t.getX(i),this._y=t.getY(i),this._z=t.getZ(i),this._w=t.getW(i),this}_onChange(t){return this._onChangeCallback=t,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class Ne{constructor(t=0,i=0,l=0){Ne.prototype.isVector3=!0,this.x=t,this.y=i,this.z=l}set(t,i,l){return l===void 0&&(l=this.z),this.x=t,this.y=i,this.z=l,this}setScalar(t){return this.x=t,this.y=t,this.z=t,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setZ(t){return this.z=t,this}setComponent(t,i){switch(t){case 0:this.x=i;break;case 1:this.y=i;break;case 2:this.z=i;break;default:throw new Error("index is out of range: "+t)}return this}getComponent(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+t)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(t){return this.x=t.x,this.y=t.y,this.z=t.z,this}add(t,i){return i!==void 0?(console.warn("THREE.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(t,i)):(this.x+=t.x,this.y+=t.y,this.z+=t.z,this)}addScalar(t){return this.x+=t,this.y+=t,this.z+=t,this}addVectors(t,i){return this.x=t.x+i.x,this.y=t.y+i.y,this.z=t.z+i.z,this}addScaledVector(t,i){return this.x+=t.x*i,this.y+=t.y*i,this.z+=t.z*i,this}sub(t,i){return i!==void 0?(console.warn("THREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(t,i)):(this.x-=t.x,this.y-=t.y,this.z-=t.z,this)}subScalar(t){return this.x-=t,this.y-=t,this.z-=t,this}subVectors(t,i){return this.x=t.x-i.x,this.y=t.y-i.y,this.z=t.z-i.z,this}multiply(t,i){return i!==void 0?(console.warn("THREE.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead."),this.multiplyVectors(t,i)):(this.x*=t.x,this.y*=t.y,this.z*=t.z,this)}multiplyScalar(t){return this.x*=t,this.y*=t,this.z*=t,this}multiplyVectors(t,i){return this.x=t.x*i.x,this.y=t.y*i.y,this.z=t.z*i.z,this}applyEuler(t){return t&&t.isEuler||console.error("THREE.Vector3: .applyEuler() now expects an Euler rotation rather than a Vector3 and order."),this.applyQuaternion(one.setFromEuler(t))}applyAxisAngle(t,i){return this.applyQuaternion(one.setFromAxisAngle(t,i))}applyMatrix3(t){const i=this.x,l=this.y,d=this.z,g=t.elements;return this.x=g[0]*i+g[3]*l+g[6]*d,this.y=g[1]*i+g[4]*l+g[7]*d,this.z=g[2]*i+g[5]*l+g[8]*d,this}applyNormalMatrix(t){return this.applyMatrix3(t).normalize()}applyMatrix4(t){const i=this.x,l=this.y,d=this.z,g=t.elements,_=1/(g[3]*i+g[7]*l+g[11]*d+g[15]);return this.x=(g[0]*i+g[4]*l+g[8]*d+g[12])*_,this.y=(g[1]*i+g[5]*l+g[9]*d+g[13])*_,this.z=(g[2]*i+g[6]*l+g[10]*d+g[14])*_,this}applyQuaternion(t){const i=this.x,l=this.y,d=this.z,g=t.x,_=t.y,b=t.z,M=t.w,I=M*i+_*d-b*l,F=M*l+b*i-g*d,j=M*d+g*l-_*i,B=-g*i-_*l-b*d;return this.x=I*M+B*-g+F*-b-j*-_,this.y=F*M+B*-_+j*-g-I*-b,this.z=j*M+B*-b+I*-_-F*-g,this}project(t){return this.applyMatrix4(t.matrixWorldInverse).applyMatrix4(t.projectionMatrix)}unproject(t){return this.applyMatrix4(t.projectionMatrixInverse).applyMatrix4(t.matrixWorld)}transformDirection(t){const i=this.x,l=this.y,d=this.z,g=t.elements;return this.x=g[0]*i+g[4]*l+g[8]*d,this.y=g[1]*i+g[5]*l+g[9]*d,this.z=g[2]*i+g[6]*l+g[10]*d,this.normalize()}divide(t){return this.x/=t.x,this.y/=t.y,this.z/=t.z,this}divideScalar(t){return this.multiplyScalar(1/t)}min(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this}max(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this}clamp(t,i){return this.x=Math.max(t.x,Math.min(i.x,this.x)),this.y=Math.max(t.y,Math.min(i.y,this.y)),this.z=Math.max(t.z,Math.min(i.z,this.z)),this}clampScalar(t,i){return this.x=Math.max(t,Math.min(i,this.x)),this.y=Math.max(t,Math.min(i,this.y)),this.z=Math.max(t,Math.min(i,this.z)),this}clampLength(t,i){const l=this.length();return this.divideScalar(l||1).multiplyScalar(Math.max(t,Math.min(i,l)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(t){return this.x*t.x+this.y*t.y+this.z*t.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(t){return this.normalize().multiplyScalar(t)}lerp(t,i){return this.x+=(t.x-this.x)*i,this.y+=(t.y-this.y)*i,this.z+=(t.z-this.z)*i,this}lerpVectors(t,i,l){return this.x=t.x+(i.x-t.x)*l,this.y=t.y+(i.y-t.y)*l,this.z=t.z+(i.z-t.z)*l,this}cross(t,i){return i!==void 0?(console.warn("THREE.Vector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead."),this.crossVectors(t,i)):this.crossVectors(this,t)}crossVectors(t,i){const l=t.x,d=t.y,g=t.z,_=i.x,b=i.y,M=i.z;return this.x=d*M-g*b,this.y=g*_-l*M,this.z=l*b-d*_,this}projectOnVector(t){const i=t.lengthSq();if(i===0)return this.set(0,0,0);const l=t.dot(this)/i;return this.copy(t).multiplyScalar(l)}projectOnPlane(t){return Q4.copy(this).projectOnVector(t),this.sub(Q4)}reflect(t){return this.sub(Q4.copy(t).multiplyScalar(2*this.dot(t)))}angleTo(t){const i=Math.sqrt(this.lengthSq()*t.lengthSq());if(i===0)return Math.PI/2;const l=this.dot(t)/i;return Math.acos(go(l,-1,1))}distanceTo(t){return Math.sqrt(this.distanceToSquared(t))}distanceToSquared(t){const i=this.x-t.x,l=this.y-t.y,d=this.z-t.z;return i*i+l*l+d*d}manhattanDistanceTo(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)+Math.abs(this.z-t.z)}setFromSpherical(t){return this.setFromSphericalCoords(t.radius,t.phi,t.theta)}setFromSphericalCoords(t,i,l){const d=Math.sin(i)*t;return this.x=d*Math.sin(l),this.y=Math.cos(i)*t,this.z=d*Math.cos(l),this}setFromCylindrical(t){return this.setFromCylindricalCoords(t.radius,t.theta,t.y)}setFromCylindricalCoords(t,i,l){return this.x=t*Math.sin(i),this.y=l,this.z=t*Math.cos(i),this}setFromMatrixPosition(t){const i=t.elements;return this.x=i[12],this.y=i[13],this.z=i[14],this}setFromMatrixScale(t){const i=this.setFromMatrixColumn(t,0).length(),l=this.setFromMatrixColumn(t,1).length(),d=this.setFromMatrixColumn(t,2).length();return this.x=i,this.y=l,this.z=d,this}setFromMatrixColumn(t,i){return this.fromArray(t.elements,i*4)}setFromMatrix3Column(t,i){return this.fromArray(t.elements,i*3)}setFromEuler(t){return this.x=t._x,this.y=t._y,this.z=t._z,this}equals(t){return t.x===this.x&&t.y===this.y&&t.z===this.z}fromArray(t,i=0){return this.x=t[i],this.y=t[i+1],this.z=t[i+2],this}toArray(t=[],i=0){return t[i]=this.x,t[i+1]=this.y,t[i+2]=this.z,t}fromBufferAttribute(t,i,l){return l!==void 0&&console.warn("THREE.Vector3: offset has been removed from .fromBufferAttribute()."),this.x=t.getX(i),this.y=t.getY(i),this.z=t.getZ(i),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const t=(Math.random()-.5)*2,i=Math.random()*Math.PI*2,l=Math.sqrt(1-t**2);return this.x=l*Math.cos(i),this.y=l*Math.sin(i),this.z=t,this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const Q4=new Ne,one=new Zs;class rp{constructor(t=new Ne(1/0,1/0,1/0),i=new Ne(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=t,this.max=i}set(t,i){return this.min.copy(t),this.max.copy(i),this}setFromArray(t){let i=1/0,l=1/0,d=1/0,g=-1/0,_=-1/0,b=-1/0;for(let M=0,I=t.length;M<I;M+=3){const F=t[M],j=t[M+1],B=t[M+2];F<i&&(i=F),j<l&&(l=j),B<d&&(d=B),F>g&&(g=F),j>_&&(_=j),B>b&&(b=B)}return this.min.set(i,l,d),this.max.set(g,_,b),this}setFromBufferAttribute(t){let i=1/0,l=1/0,d=1/0,g=-1/0,_=-1/0,b=-1/0;for(let M=0,I=t.count;M<I;M++){const F=t.getX(M),j=t.getY(M),B=t.getZ(M);F<i&&(i=F),j<l&&(l=j),B<d&&(d=B),F>g&&(g=F),j>_&&(_=j),B>b&&(b=B)}return this.min.set(i,l,d),this.max.set(g,_,b),this}setFromPoints(t){this.makeEmpty();for(let i=0,l=t.length;i<l;i++)this.expandByPoint(t[i]);return this}setFromCenterAndSize(t,i){const l=zh.copy(i).multiplyScalar(.5);return this.min.copy(t).sub(l),this.max.copy(t).add(l),this}setFromObject(t,i=!1){return this.makeEmpty(),this.expandByObject(t,i)}clone(){return new this.constructor().copy(this)}copy(t){return this.min.copy(t.min),this.max.copy(t.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(t){return this.isEmpty()?t.set(0,0,0):t.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(t){return this.isEmpty()?t.set(0,0,0):t.subVectors(this.max,this.min)}expandByPoint(t){return this.min.min(t),this.max.max(t),this}expandByVector(t){return this.min.sub(t),this.max.add(t),this}expandByScalar(t){return this.min.addScalar(-t),this.max.addScalar(t),this}expandByObject(t,i=!1){t.updateWorldMatrix(!1,!1);const l=t.geometry;if(l!==void 0)if(i&&l.attributes!=null&&l.attributes.position!==void 0){const g=l.attributes.position;for(let _=0,b=g.count;_<b;_++)zh.fromBufferAttribute(g,_).applyMatrix4(t.matrixWorld),this.expandByPoint(zh)}else l.boundingBox===null&&l.computeBoundingBox(),eL.copy(l.boundingBox),eL.applyMatrix4(t.matrixWorld),this.union(eL);const d=t.children;for(let g=0,_=d.length;g<_;g++)this.expandByObject(d[g],i);return this}containsPoint(t){return!(t.x<this.min.x||t.x>this.max.x||t.y<this.min.y||t.y>this.max.y||t.z<this.min.z||t.z>this.max.z)}containsBox(t){return this.min.x<=t.min.x&&t.max.x<=this.max.x&&this.min.y<=t.min.y&&t.max.y<=this.max.y&&this.min.z<=t.min.z&&t.max.z<=this.max.z}getParameter(t,i){return i.set((t.x-this.min.x)/(this.max.x-this.min.x),(t.y-this.min.y)/(this.max.y-this.min.y),(t.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(t){return!(t.max.x<this.min.x||t.min.x>this.max.x||t.max.y<this.min.y||t.min.y>this.max.y||t.max.z<this.min.z||t.min.z>this.max.z)}intersectsSphere(t){return this.clampPoint(t.center,zh),zh.distanceToSquared(t.center)<=t.radius*t.radius}intersectsPlane(t){let i,l;return t.normal.x>0?(i=t.normal.x*this.min.x,l=t.normal.x*this.max.x):(i=t.normal.x*this.max.x,l=t.normal.x*this.min.x),t.normal.y>0?(i+=t.normal.y*this.min.y,l+=t.normal.y*this.max.y):(i+=t.normal.y*this.max.y,l+=t.normal.y*this.min.y),t.normal.z>0?(i+=t.normal.z*this.min.z,l+=t.normal.z*this.max.z):(i+=t.normal.z*this.max.z,l+=t.normal.z*this.min.z),i<=-t.constant&&l>=-t.constant}intersectsTriangle(t){if(this.isEmpty())return!1;this.getCenter(c1),zM.subVectors(this.max,c1),s0.subVectors(t.a,c1),l0.subVectors(t.b,c1),c0.subVectors(t.c,c1),zd.subVectors(l0,s0),Nd.subVectors(c0,l0),Nh.subVectors(s0,c0);let i=[0,-zd.z,zd.y,0,-Nd.z,Nd.y,0,-Nh.z,Nh.y,zd.z,0,-zd.x,Nd.z,0,-Nd.x,Nh.z,0,-Nh.x,-zd.y,zd.x,0,-Nd.y,Nd.x,0,-Nh.y,Nh.x,0];return!tL(i,s0,l0,c0,zM)||(i=[1,0,0,0,1,0,0,0,1],!tL(i,s0,l0,c0,zM))?!1:(NM.crossVectors(zd,Nd),i=[NM.x,NM.y,NM.z],tL(i,s0,l0,c0,zM))}clampPoint(t,i){return i.copy(t).clamp(this.min,this.max)}distanceToPoint(t){return zh.copy(t).clamp(this.min,this.max).sub(t).length()}getBoundingSphere(t){return this.getCenter(t.center),t.radius=this.getSize(zh).length()*.5,t}intersect(t){return this.min.max(t.min),this.max.min(t.max),this.isEmpty()&&this.makeEmpty(),this}union(t){return this.min.min(t.min),this.max.max(t.max),this}applyMatrix4(t){return this.isEmpty()?this:(Gc[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(t),Gc[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(t),Gc[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(t),Gc[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(t),Gc[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(t),Gc[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(t),Gc[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(t),Gc[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(t),this.setFromPoints(Gc),this)}translate(t){return this.min.add(t),this.max.add(t),this}equals(t){return t.min.equals(this.min)&&t.max.equals(this.max)}}const Gc=[new Ne,new Ne,new Ne,new Ne,new Ne,new Ne,new Ne,new Ne],zh=new Ne,eL=new rp,s0=new Ne,l0=new Ne,c0=new Ne,zd=new Ne,Nd=new Ne,Nh=new Ne,c1=new Ne,zM=new Ne,NM=new Ne,Fh=new Ne;function tL(w,t,i,l,d){for(let g=0,_=w.length-3;g<=_;g+=3){Fh.fromArray(w,g);const b=d.x*Math.abs(Fh.x)+d.y*Math.abs(Fh.y)+d.z*Math.abs(Fh.z),M=t.dot(Fh),I=i.dot(Fh),F=l.dot(Fh);if(Math.max(-Math.max(M,I,F),Math.min(M,I,F))>b)return!1}return!0}const Ume=new rp,ane=new Ne,FM=new Ne,nL=new Ne;class L0{constructor(t=new Ne,i=-1){this.center=t,this.radius=i}set(t,i){return this.center.copy(t),this.radius=i,this}setFromPoints(t,i){const l=this.center;i!==void 0?l.copy(i):Ume.setFromPoints(t).getCenter(l);let d=0;for(let g=0,_=t.length;g<_;g++)d=Math.max(d,l.distanceToSquared(t[g]));return this.radius=Math.sqrt(d),this}copy(t){return this.center.copy(t.center),this.radius=t.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(t){return t.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(t){return t.distanceTo(this.center)-this.radius}intersectsSphere(t){const i=this.radius+t.radius;return t.center.distanceToSquared(this.center)<=i*i}intersectsBox(t){return t.intersectsSphere(this)}intersectsPlane(t){return Math.abs(t.distanceToPoint(this.center))<=this.radius}clampPoint(t,i){const l=this.center.distanceToSquared(t);return i.copy(t),l>this.radius*this.radius&&(i.sub(this.center).normalize(),i.multiplyScalar(this.radius).add(this.center)),i}getBoundingBox(t){return this.isEmpty()?(t.makeEmpty(),t):(t.set(this.center,this.center),t.expandByScalar(this.radius),t)}applyMatrix4(t){return this.center.applyMatrix4(t),this.radius=this.radius*t.getMaxScaleOnAxis(),this}translate(t){return this.center.add(t),this}expandByPoint(t){nL.subVectors(t,this.center);const i=nL.lengthSq();if(i>this.radius*this.radius){const l=Math.sqrt(i),d=(l-this.radius)*.5;this.center.add(nL.multiplyScalar(d/l)),this.radius+=d}return this}union(t){return this.center.equals(t.center)===!0?FM.set(0,0,1).multiplyScalar(t.radius):FM.subVectors(t.center,this.center).normalize().multiplyScalar(t.radius),this.expandByPoint(ane.copy(t.center).add(FM)),this.expandByPoint(ane.copy(t.center).sub(FM)),this}equals(t){return t.center.equals(this.center)&&t.radius===this.radius}clone(){return new this.constructor().copy(this)}}const Wc=new Ne,rL=new Ne,jM=new Ne,Fd=new Ne,iL=new Ne,BM=new Ne,oL=new Ne;class XL{constructor(t=new Ne,i=new Ne(0,0,-1)){this.origin=t,this.direction=i}set(t,i){return this.origin.copy(t),this.direction.copy(i),this}copy(t){return this.origin.copy(t.origin),this.direction.copy(t.direction),this}at(t,i){return i.copy(this.direction).multiplyScalar(t).add(this.origin)}lookAt(t){return this.direction.copy(t).sub(this.origin).normalize(),this}recast(t){return this.origin.copy(this.at(t,Wc)),this}closestPointToPoint(t,i){i.subVectors(t,this.origin);const l=i.dot(this.direction);return l<0?i.copy(this.origin):i.copy(this.direction).multiplyScalar(l).add(this.origin)}distanceToPoint(t){return Math.sqrt(this.distanceSqToPoint(t))}distanceSqToPoint(t){const i=Wc.subVectors(t,this.origin).dot(this.direction);return i<0?this.origin.distanceToSquared(t):(Wc.copy(this.direction).multiplyScalar(i).add(this.origin),Wc.distanceToSquared(t))}distanceSqToSegment(t,i,l,d){rL.copy(t).add(i).multiplyScalar(.5),jM.copy(i).sub(t).normalize(),Fd.copy(this.origin).sub(rL);const g=t.distanceTo(i)*.5,_=-this.direction.dot(jM),b=Fd.dot(this.direction),M=-Fd.dot(jM),I=Fd.lengthSq(),F=Math.abs(1-_*_);let j,B,K,te;if(F>0)if(j=_*M-b,B=_*b-M,te=g*F,j>=0)if(B>=-te)if(B<=te){const X=1/F;j*=X,B*=X,K=j*(j+_*B+2*b)+B*(_*j+B+2*M)+I}else B=g,j=Math.max(0,-(_*B+b)),K=-j*j+B*(B+2*M)+I;else B=-g,j=Math.max(0,-(_*B+b)),K=-j*j+B*(B+2*M)+I;else B<=-te?(j=Math.max(0,-(-_*g+b)),B=j>0?-g:Math.min(Math.max(-g,-M),g),K=-j*j+B*(B+2*M)+I):B<=te?(j=0,B=Math.min(Math.max(-g,-M),g),K=B*(B+2*M)+I):(j=Math.max(0,-(_*g+b)),B=j>0?g:Math.min(Math.max(-g,-M),g),K=-j*j+B*(B+2*M)+I);else B=_>0?-g:g,j=Math.max(0,-(_*B+b)),K=-j*j+B*(B+2*M)+I;return l&&l.copy(this.direction).multiplyScalar(j).add(this.origin),d&&d.copy(jM).multiplyScalar(B).add(rL),K}intersectSphere(t,i){Wc.subVectors(t.center,this.origin);const l=Wc.dot(this.direction),d=Wc.dot(Wc)-l*l,g=t.radius*t.radius;if(d>g)return null;const _=Math.sqrt(g-d),b=l-_,M=l+_;return b<0&&M<0?null:b<0?this.at(M,i):this.at(b,i)}intersectsSphere(t){return this.distanceSqToPoint(t.center)<=t.radius*t.radius}distanceToPlane(t){const i=t.normal.dot(this.direction);if(i===0)return t.distanceToPoint(this.origin)===0?0:null;const l=-(this.origin.dot(t.normal)+t.constant)/i;return l>=0?l:null}intersectPlane(t,i){const l=this.distanceToPlane(t);return l===null?null:this.at(l,i)}intersectsPlane(t){const i=t.distanceToPoint(this.origin);return i===0||t.normal.dot(this.direction)*i<0}intersectBox(t,i){let l,d,g,_,b,M;const I=1/this.direction.x,F=1/this.direction.y,j=1/this.direction.z,B=this.origin;return I>=0?(l=(t.min.x-B.x)*I,d=(t.max.x-B.x)*I):(l=(t.max.x-B.x)*I,d=(t.min.x-B.x)*I),F>=0?(g=(t.min.y-B.y)*F,_=(t.max.y-B.y)*F):(g=(t.max.y-B.y)*F,_=(t.min.y-B.y)*F),l>_||g>d||((g>l||l!==l)&&(l=g),(_<d||d!==d)&&(d=_),j>=0?(b=(t.min.z-B.z)*j,M=(t.max.z-B.z)*j):(b=(t.max.z-B.z)*j,M=(t.min.z-B.z)*j),l>M||b>d)||((b>l||l!==l)&&(l=b),(M<d||d!==d)&&(d=M),d<0)?null:this.at(l>=0?l:d,i)}intersectsBox(t){return this.intersectBox(t,Wc)!==null}intersectTriangle(t,i,l,d,g){iL.subVectors(i,t),BM.subVectors(l,t),oL.crossVectors(iL,BM);let _=this.direction.dot(oL),b;if(_>0){if(d)return null;b=1}else if(_<0)b=-1,_=-_;else return null;Fd.subVectors(this.origin,t);const M=b*this.direction.dot(BM.crossVectors(Fd,BM));if(M<0)return null;const I=b*this.direction.dot(iL.cross(Fd));if(I<0||M+I>_)return null;const F=-b*Fd.dot(oL);return F<0?null:this.at(F/_,g)}applyMatrix4(t){return this.origin.applyMatrix4(t),this.direction.transformDirection(t),this}equals(t){return t.origin.equals(this.origin)&&t.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}}class cr{constructor(){cr.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix4: the constructor no longer reads arguments. use .set() instead.")}set(t,i,l,d,g,_,b,M,I,F,j,B,K,te,X,O){const W=this.elements;return W[0]=t,W[4]=i,W[8]=l,W[12]=d,W[1]=g,W[5]=_,W[9]=b,W[13]=M,W[2]=I,W[6]=F,W[10]=j,W[14]=B,W[3]=K,W[7]=te,W[11]=X,W[15]=O,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new cr().fromArray(this.elements)}copy(t){const i=this.elements,l=t.elements;return i[0]=l[0],i[1]=l[1],i[2]=l[2],i[3]=l[3],i[4]=l[4],i[5]=l[5],i[6]=l[6],i[7]=l[7],i[8]=l[8],i[9]=l[9],i[10]=l[10],i[11]=l[11],i[12]=l[12],i[13]=l[13],i[14]=l[14],i[15]=l[15],this}copyPosition(t){const i=this.elements,l=t.elements;return i[12]=l[12],i[13]=l[13],i[14]=l[14],this}setFromMatrix3(t){const i=t.elements;return this.set(i[0],i[3],i[6],0,i[1],i[4],i[7],0,i[2],i[5],i[8],0,0,0,0,1),this}extractBasis(t,i,l){return t.setFromMatrixColumn(this,0),i.setFromMatrixColumn(this,1),l.setFromMatrixColumn(this,2),this}makeBasis(t,i,l){return this.set(t.x,i.x,l.x,0,t.y,i.y,l.y,0,t.z,i.z,l.z,0,0,0,0,1),this}extractRotation(t){const i=this.elements,l=t.elements,d=1/u0.setFromMatrixColumn(t,0).length(),g=1/u0.setFromMatrixColumn(t,1).length(),_=1/u0.setFromMatrixColumn(t,2).length();return i[0]=l[0]*d,i[1]=l[1]*d,i[2]=l[2]*d,i[3]=0,i[4]=l[4]*g,i[5]=l[5]*g,i[6]=l[6]*g,i[7]=0,i[8]=l[8]*_,i[9]=l[9]*_,i[10]=l[10]*_,i[11]=0,i[12]=0,i[13]=0,i[14]=0,i[15]=1,this}makeRotationFromEuler(t){t&&t.isEuler||console.error("THREE.Matrix4: .makeRotationFromEuler() now expects a Euler rotation rather than a Vector3 and order.");const i=this.elements,l=t.x,d=t.y,g=t.z,_=Math.cos(l),b=Math.sin(l),M=Math.cos(d),I=Math.sin(d),F=Math.cos(g),j=Math.sin(g);if(t.order==="XYZ"){const B=_*F,K=_*j,te=b*F,X=b*j;i[0]=M*F,i[4]=-M*j,i[8]=I,i[1]=K+te*I,i[5]=B-X*I,i[9]=-b*M,i[2]=X-B*I,i[6]=te+K*I,i[10]=_*M}else if(t.order==="YXZ"){const B=M*F,K=M*j,te=I*F,X=I*j;i[0]=B+X*b,i[4]=te*b-K,i[8]=_*I,i[1]=_*j,i[5]=_*F,i[9]=-b,i[2]=K*b-te,i[6]=X+B*b,i[10]=_*M}else if(t.order==="ZXY"){const B=M*F,K=M*j,te=I*F,X=I*j;i[0]=B-X*b,i[4]=-_*j,i[8]=te+K*b,i[1]=K+te*b,i[5]=_*F,i[9]=X-B*b,i[2]=-_*I,i[6]=b,i[10]=_*M}else if(t.order==="ZYX"){const B=_*F,K=_*j,te=b*F,X=b*j;i[0]=M*F,i[4]=te*I-K,i[8]=B*I+X,i[1]=M*j,i[5]=X*I+B,i[9]=K*I-te,i[2]=-I,i[6]=b*M,i[10]=_*M}else if(t.order==="YZX"){const B=_*M,K=_*I,te=b*M,X=b*I;i[0]=M*F,i[4]=X-B*j,i[8]=te*j+K,i[1]=j,i[5]=_*F,i[9]=-b*F,i[2]=-I*F,i[6]=K*j+te,i[10]=B-X*j}else if(t.order==="XZY"){const B=_*M,K=_*I,te=b*M,X=b*I;i[0]=M*F,i[4]=-j,i[8]=I*F,i[1]=B*j+X,i[5]=_*F,i[9]=K*j-te,i[2]=te*j-K,i[6]=b*F,i[10]=X*j+B}return i[3]=0,i[7]=0,i[11]=0,i[12]=0,i[13]=0,i[14]=0,i[15]=1,this}makeRotationFromQuaternion(t){return this.compose(Vme,t,Hme)}lookAt(t,i,l){const d=this.elements;return ba.subVectors(t,i),ba.lengthSq()===0&&(ba.z=1),ba.normalize(),jd.crossVectors(l,ba),jd.lengthSq()===0&&(Math.abs(l.z)===1?ba.x+=1e-4:ba.z+=1e-4,ba.normalize(),jd.crossVectors(l,ba)),jd.normalize(),UM.crossVectors(ba,jd),d[0]=jd.x,d[4]=UM.x,d[8]=ba.x,d[1]=jd.y,d[5]=UM.y,d[9]=ba.y,d[2]=jd.z,d[6]=UM.z,d[10]=ba.z,this}multiply(t,i){return i!==void 0?(console.warn("THREE.Matrix4: .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead."),this.multiplyMatrices(t,i)):this.multiplyMatrices(this,t)}premultiply(t){return this.multiplyMatrices(t,this)}multiplyMatrices(t,i){const l=t.elements,d=i.elements,g=this.elements,_=l[0],b=l[4],M=l[8],I=l[12],F=l[1],j=l[5],B=l[9],K=l[13],te=l[2],X=l[6],O=l[10],W=l[14],we=l[3],R=l[7],se=l[11],me=l[15],ze=d[0],ee=d[4],fe=d[8],Te=d[12],Y=d[1],qe=d[5],Tt=d[9],xt=d[13],Ke=d[2],_e=d[6],Qe=d[10],Ge=d[14],yt=d[3],ft=d[7],gt=d[11],zt=d[15];return g[0]=_*ze+b*Y+M*Ke+I*yt,g[4]=_*ee+b*qe+M*_e+I*ft,g[8]=_*fe+b*Tt+M*Qe+I*gt,g[12]=_*Te+b*xt+M*Ge+I*zt,g[1]=F*ze+j*Y+B*Ke+K*yt,g[5]=F*ee+j*qe+B*_e+K*ft,g[9]=F*fe+j*Tt+B*Qe+K*gt,g[13]=F*Te+j*xt+B*Ge+K*zt,g[2]=te*ze+X*Y+O*Ke+W*yt,g[6]=te*ee+X*qe+O*_e+W*ft,g[10]=te*fe+X*Tt+O*Qe+W*gt,g[14]=te*Te+X*xt+O*Ge+W*zt,g[3]=we*ze+R*Y+se*Ke+me*yt,g[7]=we*ee+R*qe+se*_e+me*ft,g[11]=we*fe+R*Tt+se*Qe+me*gt,g[15]=we*Te+R*xt+se*Ge+me*zt,this}multiplyScalar(t){const i=this.elements;return i[0]*=t,i[4]*=t,i[8]*=t,i[12]*=t,i[1]*=t,i[5]*=t,i[9]*=t,i[13]*=t,i[2]*=t,i[6]*=t,i[10]*=t,i[14]*=t,i[3]*=t,i[7]*=t,i[11]*=t,i[15]*=t,this}determinant(){const t=this.elements,i=t[0],l=t[4],d=t[8],g=t[12],_=t[1],b=t[5],M=t[9],I=t[13],F=t[2],j=t[6],B=t[10],K=t[14],te=t[3],X=t[7],O=t[11],W=t[15];return te*(+g*M*j-d*I*j-g*b*B+l*I*B+d*b*K-l*M*K)+X*(+i*M*K-i*I*B+g*_*B-d*_*K+d*I*F-g*M*F)+O*(+i*I*j-i*b*K-g*_*j+l*_*K+g*b*F-l*I*F)+W*(-d*b*F-i*M*j+i*b*B+d*_*j-l*_*B+l*M*F)}transpose(){const t=this.elements;let i;return i=t[1],t[1]=t[4],t[4]=i,i=t[2],t[2]=t[8],t[8]=i,i=t[6],t[6]=t[9],t[9]=i,i=t[3],t[3]=t[12],t[12]=i,i=t[7],t[7]=t[13],t[13]=i,i=t[11],t[11]=t[14],t[14]=i,this}setPosition(t,i,l){const d=this.elements;return t.isVector3?(d[12]=t.x,d[13]=t.y,d[14]=t.z):(d[12]=t,d[13]=i,d[14]=l),this}invert(){const t=this.elements,i=t[0],l=t[1],d=t[2],g=t[3],_=t[4],b=t[5],M=t[6],I=t[7],F=t[8],j=t[9],B=t[10],K=t[11],te=t[12],X=t[13],O=t[14],W=t[15],we=j*O*I-X*B*I+X*M*K-b*O*K-j*M*W+b*B*W,R=te*B*I-F*O*I-te*M*K+_*O*K+F*M*W-_*B*W,se=F*X*I-te*j*I+te*b*K-_*X*K-F*b*W+_*j*W,me=te*j*M-F*X*M-te*b*B+_*X*B+F*b*O-_*j*O,ze=i*we+l*R+d*se+g*me;if(ze===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const ee=1/ze;return t[0]=we*ee,t[1]=(X*B*g-j*O*g-X*d*K+l*O*K+j*d*W-l*B*W)*ee,t[2]=(b*O*g-X*M*g+X*d*I-l*O*I-b*d*W+l*M*W)*ee,t[3]=(j*M*g-b*B*g-j*d*I+l*B*I+b*d*K-l*M*K)*ee,t[4]=R*ee,t[5]=(F*O*g-te*B*g+te*d*K-i*O*K-F*d*W+i*B*W)*ee,t[6]=(te*M*g-_*O*g-te*d*I+i*O*I+_*d*W-i*M*W)*ee,t[7]=(_*B*g-F*M*g+F*d*I-i*B*I-_*d*K+i*M*K)*ee,t[8]=se*ee,t[9]=(te*j*g-F*X*g-te*l*K+i*X*K+F*l*W-i*j*W)*ee,t[10]=(_*X*g-te*b*g+te*l*I-i*X*I-_*l*W+i*b*W)*ee,t[11]=(F*b*g-_*j*g-F*l*I+i*j*I+_*l*K-i*b*K)*ee,t[12]=me*ee,t[13]=(F*X*d-te*j*d+te*l*B-i*X*B-F*l*O+i*j*O)*ee,t[14]=(te*b*d-_*X*d-te*l*M+i*X*M+_*l*O-i*b*O)*ee,t[15]=(_*j*d-F*b*d+F*l*M-i*j*M-_*l*B+i*b*B)*ee,this}scale(t){const i=this.elements,l=t.x,d=t.y,g=t.z;return i[0]*=l,i[4]*=d,i[8]*=g,i[1]*=l,i[5]*=d,i[9]*=g,i[2]*=l,i[6]*=d,i[10]*=g,i[3]*=l,i[7]*=d,i[11]*=g,this}getMaxScaleOnAxis(){const t=this.elements,i=t[0]*t[0]+t[1]*t[1]+t[2]*t[2],l=t[4]*t[4]+t[5]*t[5]+t[6]*t[6],d=t[8]*t[8]+t[9]*t[9]+t[10]*t[10];return Math.sqrt(Math.max(i,l,d))}makeTranslation(t,i,l){return this.set(1,0,0,t,0,1,0,i,0,0,1,l,0,0,0,1),this}makeRotationX(t){const i=Math.cos(t),l=Math.sin(t);return this.set(1,0,0,0,0,i,-l,0,0,l,i,0,0,0,0,1),this}makeRotationY(t){const i=Math.cos(t),l=Math.sin(t);return this.set(i,0,l,0,0,1,0,0,-l,0,i,0,0,0,0,1),this}makeRotationZ(t){const i=Math.cos(t),l=Math.sin(t);return this.set(i,-l,0,0,l,i,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(t,i){const l=Math.cos(i),d=Math.sin(i),g=1-l,_=t.x,b=t.y,M=t.z,I=g*_,F=g*b;return this.set(I*_+l,I*b-d*M,I*M+d*b,0,I*b+d*M,F*b+l,F*M-d*_,0,I*M-d*b,F*M+d*_,g*M*M+l,0,0,0,0,1),this}makeScale(t,i,l){return this.set(t,0,0,0,0,i,0,0,0,0,l,0,0,0,0,1),this}makeShear(t,i,l,d,g,_){return this.set(1,l,g,0,t,1,_,0,i,d,1,0,0,0,0,1),this}compose(t,i,l){const d=this.elements,g=i._x,_=i._y,b=i._z,M=i._w,I=g+g,F=_+_,j=b+b,B=g*I,K=g*F,te=g*j,X=_*F,O=_*j,W=b*j,we=M*I,R=M*F,se=M*j,me=l.x,ze=l.y,ee=l.z;return d[0]=(1-(X+W))*me,d[1]=(K+se)*me,d[2]=(te-R)*me,d[3]=0,d[4]=(K-se)*ze,d[5]=(1-(B+W))*ze,d[6]=(O+we)*ze,d[7]=0,d[8]=(te+R)*ee,d[9]=(O-we)*ee,d[10]=(1-(B+X))*ee,d[11]=0,d[12]=t.x,d[13]=t.y,d[14]=t.z,d[15]=1,this}decompose(t,i,l){const d=this.elements;let g=u0.set(d[0],d[1],d[2]).length();const _=u0.set(d[4],d[5],d[6]).length(),b=u0.set(d[8],d[9],d[10]).length();this.determinant()<0&&(g=-g),t.x=d[12],t.y=d[13],t.z=d[14],Gs.copy(this);const I=1/g,F=1/_,j=1/b;return Gs.elements[0]*=I,Gs.elements[1]*=I,Gs.elements[2]*=I,Gs.elements[4]*=F,Gs.elements[5]*=F,Gs.elements[6]*=F,Gs.elements[8]*=j,Gs.elements[9]*=j,Gs.elements[10]*=j,i.setFromRotationMatrix(Gs),l.x=g,l.y=_,l.z=b,this}makePerspective(t,i,l,d,g,_){_===void 0&&console.warn("THREE.Matrix4: .makePerspective() has been redefined and has a new signature. Please check the docs.");const b=this.elements,M=2*g/(i-t),I=2*g/(l-d),F=(i+t)/(i-t),j=(l+d)/(l-d),B=-(_+g)/(_-g),K=-2*_*g/(_-g);return b[0]=M,b[4]=0,b[8]=F,b[12]=0,b[1]=0,b[5]=I,b[9]=j,b[13]=0,b[2]=0,b[6]=0,b[10]=B,b[14]=K,b[3]=0,b[7]=0,b[11]=-1,b[15]=0,this}makeOrthographic(t,i,l,d,g,_){const b=this.elements,M=1/(i-t),I=1/(l-d),F=1/(_-g),j=(i+t)*M,B=(l+d)*I,K=(_+g)*F;return b[0]=2*M,b[4]=0,b[8]=0,b[12]=-j,b[1]=0,b[5]=2*I,b[9]=0,b[13]=-B,b[2]=0,b[6]=0,b[10]=-2*F,b[14]=-K,b[3]=0,b[7]=0,b[11]=0,b[15]=1,this}equals(t){const i=this.elements,l=t.elements;for(let d=0;d<16;d++)if(i[d]!==l[d])return!1;return!0}fromArray(t,i=0){for(let l=0;l<16;l++)this.elements[l]=t[l+i];return this}toArray(t=[],i=0){const l=this.elements;return t[i]=l[0],t[i+1]=l[1],t[i+2]=l[2],t[i+3]=l[3],t[i+4]=l[4],t[i+5]=l[5],t[i+6]=l[6],t[i+7]=l[7],t[i+8]=l[8],t[i+9]=l[9],t[i+10]=l[10],t[i+11]=l[11],t[i+12]=l[12],t[i+13]=l[13],t[i+14]=l[14],t[i+15]=l[15],t}}const u0=new Ne,Gs=new cr,Vme=new Ne(0,0,0),Hme=new Ne(1,1,1),jd=new Ne,UM=new Ne,ba=new Ne,sne=new cr,lne=new Zs;class P1{constructor(t=0,i=0,l=0,d=P1.DefaultOrder){this.isEuler=!0,this._x=t,this._y=i,this._z=l,this._order=d}get x(){return this._x}set x(t){this._x=t,this._onChangeCallback()}get y(){return this._y}set y(t){this._y=t,this._onChangeCallback()}get z(){return this._z}set z(t){this._z=t,this._onChangeCallback()}get order(){return this._order}set order(t){this._order=t,this._onChangeCallback()}set(t,i,l,d=this._order){return this._x=t,this._y=i,this._z=l,this._order=d,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(t){return this._x=t._x,this._y=t._y,this._z=t._z,this._order=t._order,this._onChangeCallback(),this}setFromRotationMatrix(t,i=this._order,l=!0){const d=t.elements,g=d[0],_=d[4],b=d[8],M=d[1],I=d[5],F=d[9],j=d[2],B=d[6],K=d[10];switch(i){case"XYZ":this._y=Math.asin(go(b,-1,1)),Math.abs(b)<.9999999?(this._x=Math.atan2(-F,K),this._z=Math.atan2(-_,g)):(this._x=Math.atan2(B,I),this._z=0);break;case"YXZ":this._x=Math.asin(-go(F,-1,1)),Math.abs(F)<.9999999?(this._y=Math.atan2(b,K),this._z=Math.atan2(M,I)):(this._y=Math.atan2(-j,g),this._z=0);break;case"ZXY":this._x=Math.asin(go(B,-1,1)),Math.abs(B)<.9999999?(this._y=Math.atan2(-j,K),this._z=Math.atan2(-_,I)):(this._y=0,this._z=Math.atan2(M,g));break;case"ZYX":this._y=Math.asin(-go(j,-1,1)),Math.abs(j)<.9999999?(this._x=Math.atan2(B,K),this._z=Math.atan2(M,g)):(this._x=0,this._z=Math.atan2(-_,I));break;case"YZX":this._z=Math.asin(go(M,-1,1)),Math.abs(M)<.9999999?(this._x=Math.atan2(-F,I),this._y=Math.atan2(-j,g)):(this._x=0,this._y=Math.atan2(b,K));break;case"XZY":this._z=Math.asin(-go(_,-1,1)),Math.abs(_)<.9999999?(this._x=Math.atan2(B,I),this._y=Math.atan2(b,g)):(this._x=Math.atan2(-F,K),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+i)}return this._order=i,l===!0&&this._onChangeCallback(),this}setFromQuaternion(t,i,l){return sne.makeRotationFromQuaternion(t),this.setFromRotationMatrix(sne,i,l)}setFromVector3(t,i=this._order){return this.set(t.x,t.y,t.z,i)}reorder(t){return lne.setFromEuler(this),this.setFromQuaternion(lne,t)}equals(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._order===this._order}fromArray(t){return this._x=t[0],this._y=t[1],this._z=t[2],t[3]!==void 0&&(this._order=t[3]),this._onChangeCallback(),this}toArray(t=[],i=0){return t[i]=this._x,t[i+1]=this._y,t[i+2]=this._z,t[i+3]=this._order,t}_onChange(t){return this._onChangeCallback=t,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}toVector3(){console.error("THREE.Euler: .toVector3() has been removed. Use Vector3.setFromEuler() instead")}}P1.DefaultOrder="XYZ";P1.RotationOrders=["XYZ","YZX","ZXY","XZY","YXZ","ZYX"];class kre{constructor(){this.mask=1}set(t){this.mask=(1<<t|0)>>>0}enable(t){this.mask|=1<<t|0}enableAll(){this.mask=-1}toggle(t){this.mask^=1<<t|0}disable(t){this.mask&=~(1<<t|0)}disableAll(){this.mask=0}test(t){return(this.mask&t.mask)!==0}isEnabled(t){return(this.mask&(1<<t|0))!==0}}let Gme=0;const cne=new Ne,d0=new Zs,qc=new cr,VM=new Ne,u1=new Ne,Wme=new Ne,qme=new Zs,une=new Ne(1,0,0),dne=new Ne(0,1,0),fne=new Ne(0,0,1),Kme={type:"added"},hne={type:"removed"};class yi extends np{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:Gme++}),this.uuid=$s(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=yi.DefaultUp.clone();const t=new Ne,i=new P1,l=new Zs,d=new Ne(1,1,1);function g(){l.setFromEuler(i,!1)}function _(){i.setFromQuaternion(l,void 0,!1)}i._onChange(g),l._onChange(_),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:t},rotation:{configurable:!0,enumerable:!0,value:i},quaternion:{configurable:!0,enumerable:!0,value:l},scale:{configurable:!0,enumerable:!0,value:d},modelViewMatrix:{value:new cr},normalMatrix:{value:new Qa}}),this.matrix=new cr,this.matrixWorld=new cr,this.matrixAutoUpdate=yi.DefaultMatrixAutoUpdate,this.matrixWorldNeedsUpdate=!1,this.layers=new kre,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeRender(){}onAfterRender(){}applyMatrix4(t){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(t),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(t){return this.quaternion.premultiply(t),this}setRotationFromAxisAngle(t,i){this.quaternion.setFromAxisAngle(t,i)}setRotationFromEuler(t){this.quaternion.setFromEuler(t,!0)}setRotationFromMatrix(t){this.quaternion.setFromRotationMatrix(t)}setRotationFromQuaternion(t){this.quaternion.copy(t)}rotateOnAxis(t,i){return d0.setFromAxisAngle(t,i),this.quaternion.multiply(d0),this}rotateOnWorldAxis(t,i){return d0.setFromAxisAngle(t,i),this.quaternion.premultiply(d0),this}rotateX(t){return this.rotateOnAxis(une,t)}rotateY(t){return this.rotateOnAxis(dne,t)}rotateZ(t){return this.rotateOnAxis(fne,t)}translateOnAxis(t,i){return cne.copy(t).applyQuaternion(this.quaternion),this.position.add(cne.multiplyScalar(i)),this}translateX(t){return this.translateOnAxis(une,t)}translateY(t){return this.translateOnAxis(dne,t)}translateZ(t){return this.translateOnAxis(fne,t)}localToWorld(t){return t.applyMatrix4(this.matrixWorld)}worldToLocal(t){return t.applyMatrix4(qc.copy(this.matrixWorld).invert())}lookAt(t,i,l){t.isVector3?VM.copy(t):VM.set(t,i,l);const d=this.parent;this.updateWorldMatrix(!0,!1),u1.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?qc.lookAt(u1,VM,this.up):qc.lookAt(VM,u1,this.up),this.quaternion.setFromRotationMatrix(qc),d&&(qc.extractRotation(d.matrixWorld),d0.setFromRotationMatrix(qc),this.quaternion.premultiply(d0.invert()))}add(t){if(arguments.length>1){for(let i=0;i<arguments.length;i++)this.add(arguments[i]);return this}return t===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",t),this):(t&&t.isObject3D?(t.parent!==null&&t.parent.remove(t),t.parent=this,this.children.push(t),t.dispatchEvent(Kme)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",t),this)}remove(t){if(arguments.length>1){for(let l=0;l<arguments.length;l++)this.remove(arguments[l]);return this}const i=this.children.indexOf(t);return i!==-1&&(t.parent=null,this.children.splice(i,1),t.dispatchEvent(hne)),this}removeFromParent(){const t=this.parent;return t!==null&&t.remove(this),this}clear(){for(let t=0;t<this.children.length;t++){const i=this.children[t];i.parent=null,i.dispatchEvent(hne)}return this.children.length=0,this}attach(t){return this.updateWorldMatrix(!0,!1),qc.copy(this.matrixWorld).invert(),t.parent!==null&&(t.parent.updateWorldMatrix(!0,!1),qc.multiply(t.parent.matrixWorld)),t.applyMatrix4(qc),this.add(t),t.updateWorldMatrix(!1,!0),this}getObjectById(t){return this.getObjectByProperty("id",t)}getObjectByName(t){return this.getObjectByProperty("name",t)}getObjectByProperty(t,i){if(this[t]===i)return this;for(let l=0,d=this.children.length;l<d;l++){const _=this.children[l].getObjectByProperty(t,i);if(_!==void 0)return _}}getWorldPosition(t){return this.updateWorldMatrix(!0,!1),t.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(t){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(u1,t,Wme),t}getWorldScale(t){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(u1,qme,t),t}getWorldDirection(t){this.updateWorldMatrix(!0,!1);const i=this.matrixWorld.elements;return t.set(i[8],i[9],i[10]).normalize()}raycast(){}traverse(t){t(this);const i=this.children;for(let l=0,d=i.length;l<d;l++)i[l].traverse(t)}traverseVisible(t){if(this.visible===!1)return;t(this);const i=this.children;for(let l=0,d=i.length;l<d;l++)i[l].traverseVisible(t)}traverseAncestors(t){const i=this.parent;i!==null&&(t(i),i.traverseAncestors(t))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(t){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||t)&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,t=!0);const i=this.children;for(let l=0,d=i.length;l<d;l++)i[l].updateMatrixWorld(t)}updateWorldMatrix(t,i){const l=this.parent;if(t===!0&&l!==null&&l.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),i===!0){const d=this.children;for(let g=0,_=d.length;g<_;g++)d[g].updateWorldMatrix(!1,!0)}}toJSON(t){const i=t===void 0||typeof t=="string",l={};i&&(t={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},l.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});const d={};d.uuid=this.uuid,d.type=this.type,this.name!==""&&(d.name=this.name),this.castShadow===!0&&(d.castShadow=!0),this.receiveShadow===!0&&(d.receiveShadow=!0),this.visible===!1&&(d.visible=!1),this.frustumCulled===!1&&(d.frustumCulled=!1),this.renderOrder!==0&&(d.renderOrder=this.renderOrder),JSON.stringify(this.userData)!=="{}"&&(d.userData=this.userData),d.layers=this.layers.mask,d.matrix=this.matrix.toArray(),this.matrixAutoUpdate===!1&&(d.matrixAutoUpdate=!1),this.isInstancedMesh&&(d.type="InstancedMesh",d.count=this.count,d.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(d.instanceColor=this.instanceColor.toJSON()));function g(b,M){return b[M.uuid]===void 0&&(b[M.uuid]=M.toJSON(t)),M.uuid}if(this.isScene)this.background&&(this.background.isColor?d.background=this.background.toJSON():this.background.isTexture&&(d.background=this.background.toJSON(t).uuid)),this.environment&&this.environment.isTexture&&(d.environment=this.environment.toJSON(t).uuid);else if(this.isMesh||this.isLine||this.isPoints){d.geometry=g(t.geometries,this.geometry);const b=this.geometry.parameters;if(b!==void 0&&b.shapes!==void 0){const M=b.shapes;if(Array.isArray(M))for(let I=0,F=M.length;I<F;I++){const j=M[I];g(t.shapes,j)}else g(t.shapes,M)}}if(this.isSkinnedMesh&&(d.bindMode=this.bindMode,d.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(g(t.skeletons,this.skeleton),d.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){const b=[];for(let M=0,I=this.material.length;M<I;M++)b.push(g(t.materials,this.material[M]));d.material=b}else d.material=g(t.materials,this.material);if(this.children.length>0){d.children=[];for(let b=0;b<this.children.length;b++)d.children.push(this.children[b].toJSON(t).object)}if(this.animations.length>0){d.animations=[];for(let b=0;b<this.animations.length;b++){const M=this.animations[b];d.animations.push(g(t.animations,M))}}if(i){const b=_(t.geometries),M=_(t.materials),I=_(t.textures),F=_(t.images),j=_(t.shapes),B=_(t.skeletons),K=_(t.animations),te=_(t.nodes);b.length>0&&(l.geometries=b),M.length>0&&(l.materials=M),I.length>0&&(l.textures=I),F.length>0&&(l.images=F),j.length>0&&(l.shapes=j),B.length>0&&(l.skeletons=B),K.length>0&&(l.animations=K),te.length>0&&(l.nodes=te)}return l.object=d,l;function _(b){const M=[];for(const I in b){const F=b[I];delete F.metadata,M.push(F)}return M}}clone(t){return new this.constructor().copy(this,t)}copy(t,i=!0){if(this.name=t.name,this.up.copy(t.up),this.position.copy(t.position),this.rotation.order=t.rotation.order,this.quaternion.copy(t.quaternion),this.scale.copy(t.scale),this.matrix.copy(t.matrix),this.matrixWorld.copy(t.matrixWorld),this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrixWorldNeedsUpdate=t.matrixWorldNeedsUpdate,this.layers.mask=t.layers.mask,this.visible=t.visible,this.castShadow=t.castShadow,this.receiveShadow=t.receiveShadow,this.frustumCulled=t.frustumCulled,this.renderOrder=t.renderOrder,this.userData=JSON.parse(JSON.stringify(t.userData)),i===!0)for(let l=0;l<t.children.length;l++){const d=t.children[l];this.add(d.clone())}return this}}yi.DefaultUp=new Ne(0,1,0);yi.DefaultMatrixAutoUpdate=!0;const Ws=new Ne,Kc=new Ne,aL=new Ne,Xc=new Ne,f0=new Ne,h0=new Ne,pne=new Ne,sL=new Ne,lL=new Ne,cL=new Ne;class Jc{constructor(t=new Ne,i=new Ne,l=new Ne){this.a=t,this.b=i,this.c=l}static getNormal(t,i,l,d){d.subVectors(l,i),Ws.subVectors(t,i),d.cross(Ws);const g=d.lengthSq();return g>0?d.multiplyScalar(1/Math.sqrt(g)):d.set(0,0,0)}static getBarycoord(t,i,l,d,g){Ws.subVectors(d,i),Kc.subVectors(l,i),aL.subVectors(t,i);const _=Ws.dot(Ws),b=Ws.dot(Kc),M=Ws.dot(aL),I=Kc.dot(Kc),F=Kc.dot(aL),j=_*I-b*b;if(j===0)return g.set(-2,-1,-1);const B=1/j,K=(I*M-b*F)*B,te=(_*F-b*M)*B;return g.set(1-K-te,te,K)}static containsPoint(t,i,l,d){return this.getBarycoord(t,i,l,d,Xc),Xc.x>=0&&Xc.y>=0&&Xc.x+Xc.y<=1}static getUV(t,i,l,d,g,_,b,M){return this.getBarycoord(t,i,l,d,Xc),M.set(0,0),M.addScaledVector(g,Xc.x),M.addScaledVector(_,Xc.y),M.addScaledVector(b,Xc.z),M}static isFrontFacing(t,i,l,d){return Ws.subVectors(l,i),Kc.subVectors(t,i),Ws.cross(Kc).dot(d)<0}set(t,i,l){return this.a.copy(t),this.b.copy(i),this.c.copy(l),this}setFromPointsAndIndices(t,i,l,d){return this.a.copy(t[i]),this.b.copy(t[l]),this.c.copy(t[d]),this}setFromAttributeAndIndices(t,i,l,d){return this.a.fromBufferAttribute(t,i),this.b.fromBufferAttribute(t,l),this.c.fromBufferAttribute(t,d),this}clone(){return new this.constructor().copy(this)}copy(t){return this.a.copy(t.a),this.b.copy(t.b),this.c.copy(t.c),this}getArea(){return Ws.subVectors(this.c,this.b),Kc.subVectors(this.a,this.b),Ws.cross(Kc).length()*.5}getMidpoint(t){return t.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(t){return Jc.getNormal(this.a,this.b,this.c,t)}getPlane(t){return t.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(t,i){return Jc.getBarycoord(t,this.a,this.b,this.c,i)}getUV(t,i,l,d,g){return Jc.getUV(t,this.a,this.b,this.c,i,l,d,g)}containsPoint(t){return Jc.containsPoint(t,this.a,this.b,this.c)}isFrontFacing(t){return Jc.isFrontFacing(this.a,this.b,this.c,t)}intersectsBox(t){return t.intersectsTriangle(this)}closestPointToPoint(t,i){const l=this.a,d=this.b,g=this.c;let _,b;f0.subVectors(d,l),h0.subVectors(g,l),sL.subVectors(t,l);const M=f0.dot(sL),I=h0.dot(sL);if(M<=0&&I<=0)return i.copy(l);lL.subVectors(t,d);const F=f0.dot(lL),j=h0.dot(lL);if(F>=0&&j<=F)return i.copy(d);const B=M*j-F*I;if(B<=0&&M>=0&&F<=0)return _=M/(M-F),i.copy(l).addScaledVector(f0,_);cL.subVectors(t,g);const K=f0.dot(cL),te=h0.dot(cL);if(te>=0&&K<=te)return i.copy(g);const X=K*I-M*te;if(X<=0&&I>=0&&te<=0)return b=I/(I-te),i.copy(l).addScaledVector(h0,b);const O=F*te-K*j;if(O<=0&&j-F>=0&&K-te>=0)return pne.subVectors(g,d),b=(j-F)/(j-F+(K-te)),i.copy(d).addScaledVector(pne,b);const W=1/(O+X+B);return _=X*W,b=B*W,i.copy(l).addScaledVector(f0,_).addScaledVector(h0,b)}equals(t){return t.a.equals(this.a)&&t.b.equals(this.b)&&t.c.equals(this.c)}}let Xme=0;class Vl extends np{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:Xme++}),this.uuid=$s(),this.name="",this.type="Material",this.blending=S0,this.side=T0,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.blendSrc=fre,this.blendDst=hre,this.blendEquation=_0,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=TL,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=wme,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=$4,this.stencilZFail=$4,this.stencilZPass=$4,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(t){this._alphaTest>0!=t>0&&this.version++,this._alphaTest=t}onBuild(){}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(t){if(t!==void 0)for(const i in t){const l=t[i];if(l===void 0){console.warn("THREE.Material: '"+i+"' parameter is undefined.");continue}if(i==="shading"){console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=l===Ppe;continue}const d=this[i];if(d===void 0){console.warn("THREE."+this.type+": '"+i+"' is not a property of this material.");continue}d&&d.isColor?d.set(l):d&&d.isVector3&&l&&l.isVector3?d.copy(l):this[i]=l}}toJSON(t){const i=t===void 0||typeof t=="string";i&&(t={textures:{},images:{}});const l={metadata:{version:4.5,type:"Material",generator:"Material.toJSON"}};l.uuid=this.uuid,l.type=this.type,this.name!==""&&(l.name=this.name),this.color&&this.color.isColor&&(l.color=this.color.getHex()),this.roughness!==void 0&&(l.roughness=this.roughness),this.metalness!==void 0&&(l.metalness=this.metalness),this.sheen!==void 0&&(l.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(l.sheenColor=this.sheenColor.getHex()),this.sheenRoughness!==void 0&&(l.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(l.emissive=this.emissive.getHex()),this.emissiveIntensity&&this.emissiveIntensity!==1&&(l.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(l.specular=this.specular.getHex()),this.specularIntensity!==void 0&&(l.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(l.specularColor=this.specularColor.getHex()),this.shininess!==void 0&&(l.shininess=this.shininess),this.clearcoat!==void 0&&(l.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(l.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(l.clearcoatMap=this.clearcoatMap.toJSON(t).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(l.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(t).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(l.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(t).uuid,l.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.iridescence!==void 0&&(l.iridescence=this.iridescence),this.iridescenceIOR!==void 0&&(l.iridescenceIOR=this.iridescenceIOR),this.iridescenceThicknessRange!==void 0&&(l.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(l.iridescenceMap=this.iridescenceMap.toJSON(t).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(l.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(t).uuid),this.map&&this.map.isTexture&&(l.map=this.map.toJSON(t).uuid),this.matcap&&this.matcap.isTexture&&(l.matcap=this.matcap.toJSON(t).uuid),this.alphaMap&&this.alphaMap.isTexture&&(l.alphaMap=this.alphaMap.toJSON(t).uuid),this.lightMap&&this.lightMap.isTexture&&(l.lightMap=this.lightMap.toJSON(t).uuid,l.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(l.aoMap=this.aoMap.toJSON(t).uuid,l.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(l.bumpMap=this.bumpMap.toJSON(t).uuid,l.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(l.normalMap=this.normalMap.toJSON(t).uuid,l.normalMapType=this.normalMapType,l.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(l.displacementMap=this.displacementMap.toJSON(t).uuid,l.displacementScale=this.displacementScale,l.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(l.roughnessMap=this.roughnessMap.toJSON(t).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(l.metalnessMap=this.metalnessMap.toJSON(t).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(l.emissiveMap=this.emissiveMap.toJSON(t).uuid),this.specularMap&&this.specularMap.isTexture&&(l.specularMap=this.specularMap.toJSON(t).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(l.specularIntensityMap=this.specularIntensityMap.toJSON(t).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(l.specularColorMap=this.specularColorMap.toJSON(t).uuid),this.envMap&&this.envMap.isTexture&&(l.envMap=this.envMap.toJSON(t).uuid,this.combine!==void 0&&(l.combine=this.combine)),this.envMapIntensity!==void 0&&(l.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(l.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(l.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(l.gradientMap=this.gradientMap.toJSON(t).uuid),this.transmission!==void 0&&(l.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(l.transmissionMap=this.transmissionMap.toJSON(t).uuid),this.thickness!==void 0&&(l.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(l.thicknessMap=this.thicknessMap.toJSON(t).uuid),this.attenuationDistance!==void 0&&(l.attenuationDistance=this.attenuationDistance),this.attenuationColor!==void 0&&(l.attenuationColor=this.attenuationColor.getHex()),this.size!==void 0&&(l.size=this.size),this.shadowSide!==null&&(l.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(l.sizeAttenuation=this.sizeAttenuation),this.blending!==S0&&(l.blending=this.blending),this.side!==T0&&(l.side=this.side),this.vertexColors&&(l.vertexColors=!0),this.opacity<1&&(l.opacity=this.opacity),this.transparent===!0&&(l.transparent=this.transparent),l.depthFunc=this.depthFunc,l.depthTest=this.depthTest,l.depthWrite=this.depthWrite,l.colorWrite=this.colorWrite,l.stencilWrite=this.stencilWrite,l.stencilWriteMask=this.stencilWriteMask,l.stencilFunc=this.stencilFunc,l.stencilRef=this.stencilRef,l.stencilFuncMask=this.stencilFuncMask,l.stencilFail=this.stencilFail,l.stencilZFail=this.stencilZFail,l.stencilZPass=this.stencilZPass,this.rotation!==void 0&&this.rotation!==0&&(l.rotation=this.rotation),this.polygonOffset===!0&&(l.polygonOffset=!0),this.polygonOffsetFactor!==0&&(l.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(l.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth!==void 0&&this.linewidth!==1&&(l.linewidth=this.linewidth),this.dashSize!==void 0&&(l.dashSize=this.dashSize),this.gapSize!==void 0&&(l.gapSize=this.gapSize),this.scale!==void 0&&(l.scale=this.scale),this.dithering===!0&&(l.dithering=!0),this.alphaTest>0&&(l.alphaTest=this.alphaTest),this.alphaToCoverage===!0&&(l.alphaToCoverage=this.alphaToCoverage),this.premultipliedAlpha===!0&&(l.premultipliedAlpha=this.premultipliedAlpha),this.wireframe===!0&&(l.wireframe=this.wireframe),this.wireframeLinewidth>1&&(l.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(l.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(l.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&&(l.flatShading=this.flatShading),this.visible===!1&&(l.visible=!1),this.toneMapped===!1&&(l.toneMapped=!1),this.fog===!1&&(l.fog=!1),JSON.stringify(this.userData)!=="{}"&&(l.userData=this.userData);function d(g){const _=[];for(const b in g){const M=g[b];delete M.metadata,_.push(M)}return _}if(i){const g=d(t.textures),_=d(t.images);g.length>0&&(l.textures=g),_.length>0&&(l.images=_)}return l}clone(){return new this.constructor().copy(this)}copy(t){this.name=t.name,this.blending=t.blending,this.side=t.side,this.vertexColors=t.vertexColors,this.opacity=t.opacity,this.transparent=t.transparent,this.blendSrc=t.blendSrc,this.blendDst=t.blendDst,this.blendEquation=t.blendEquation,this.blendSrcAlpha=t.blendSrcAlpha,this.blendDstAlpha=t.blendDstAlpha,this.blendEquationAlpha=t.blendEquationAlpha,this.depthFunc=t.depthFunc,this.depthTest=t.depthTest,this.depthWrite=t.depthWrite,this.stencilWriteMask=t.stencilWriteMask,this.stencilFunc=t.stencilFunc,this.stencilRef=t.stencilRef,this.stencilFuncMask=t.stencilFuncMask,this.stencilFail=t.stencilFail,this.stencilZFail=t.stencilZFail,this.stencilZPass=t.stencilZPass,this.stencilWrite=t.stencilWrite;const i=t.clippingPlanes;let l=null;if(i!==null){const d=i.length;l=new Array(d);for(let g=0;g!==d;++g)l[g]=i[g].clone()}return this.clippingPlanes=l,this.clipIntersection=t.clipIntersection,this.clipShadows=t.clipShadows,this.shadowSide=t.shadowSide,this.colorWrite=t.colorWrite,this.precision=t.precision,this.polygonOffset=t.polygonOffset,this.polygonOffsetFactor=t.polygonOffsetFactor,this.polygonOffsetUnits=t.polygonOffsetUnits,this.dithering=t.dithering,this.alphaTest=t.alphaTest,this.alphaToCoverage=t.alphaToCoverage,this.premultipliedAlpha=t.premultipliedAlpha,this.visible=t.visible,this.toneMapped=t.toneMapped,this.userData=JSON.parse(JSON.stringify(t.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(t){t===!0&&this.version++}}class Wh extends Vl{constructor(t){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new Fn(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=pre,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.fog=t.fog,this}}const vi=new Ne,HM=new Rn;class xa{constructor(t,i,l){if(Array.isArray(t))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,this.name="",this.array=t,this.itemSize=i,this.count=t!==void 0?t.length/i:0,this.normalized=l===!0,this.usage=IL,this.updateRange={offset:0,count:-1},this.version=0}onUploadCallback(){}set needsUpdate(t){t===!0&&this.version++}setUsage(t){return this.usage=t,this}copy(t){return this.name=t.name,this.array=new t.array.constructor(t.array),this.itemSize=t.itemSize,this.count=t.count,this.normalized=t.normalized,this.usage=t.usage,this}copyAt(t,i,l){t*=this.itemSize,l*=i.itemSize;for(let d=0,g=this.itemSize;d<g;d++)this.array[t+d]=i.array[l+d];return this}copyArray(t){return this.array.set(t),this}copyColorsArray(t){const i=this.array;let l=0;for(let d=0,g=t.length;d<g;d++){let _=t[d];_===void 0&&(console.warn("THREE.BufferAttribute.copyColorsArray(): color is undefined",d),_=new Fn),i[l++]=_.r,i[l++]=_.g,i[l++]=_.b}return this}copyVector2sArray(t){const i=this.array;let l=0;for(let d=0,g=t.length;d<g;d++){let _=t[d];_===void 0&&(console.warn("THREE.BufferAttribute.copyVector2sArray(): vector is undefined",d),_=new Rn),i[l++]=_.x,i[l++]=_.y}return this}copyVector3sArray(t){const i=this.array;let l=0;for(let d=0,g=t.length;d<g;d++){let _=t[d];_===void 0&&(console.warn("THREE.BufferAttribute.copyVector3sArray(): vector is undefined",d),_=new Ne),i[l++]=_.x,i[l++]=_.y,i[l++]=_.z}return this}copyVector4sArray(t){const i=this.array;let l=0;for(let d=0,g=t.length;d<g;d++){let _=t[d];_===void 0&&(console.warn("THREE.BufferAttribute.copyVector4sArray(): vector is undefined",d),_=new Er),i[l++]=_.x,i[l++]=_.y,i[l++]=_.z,i[l++]=_.w}return this}applyMatrix3(t){if(this.itemSize===2)for(let i=0,l=this.count;i<l;i++)HM.fromBufferAttribute(this,i),HM.applyMatrix3(t),this.setXY(i,HM.x,HM.y);else if(this.itemSize===3)for(let i=0,l=this.count;i<l;i++)vi.fromBufferAttribute(this,i),vi.applyMatrix3(t),this.setXYZ(i,vi.x,vi.y,vi.z);return this}applyMatrix4(t){for(let i=0,l=this.count;i<l;i++)vi.fromBufferAttribute(this,i),vi.applyMatrix4(t),this.setXYZ(i,vi.x,vi.y,vi.z);return this}applyNormalMatrix(t){for(let i=0,l=this.count;i<l;i++)vi.fromBufferAttribute(this,i),vi.applyNormalMatrix(t),this.setXYZ(i,vi.x,vi.y,vi.z);return this}transformDirection(t){for(let i=0,l=this.count;i<l;i++)vi.fromBufferAttribute(this,i),vi.transformDirection(t),this.setXYZ(i,vi.x,vi.y,vi.z);return this}set(t,i=0){return this.array.set(t,i),this}getX(t){return this.array[t*this.itemSize]}setX(t,i){return this.array[t*this.itemSize]=i,this}getY(t){return this.array[t*this.itemSize+1]}setY(t,i){return this.array[t*this.itemSize+1]=i,this}getZ(t){return this.array[t*this.itemSize+2]}setZ(t,i){return this.array[t*this.itemSize+2]=i,this}getW(t){return this.array[t*this.itemSize+3]}setW(t,i){return this.array[t*this.itemSize+3]=i,this}setXY(t,i,l){return t*=this.itemSize,this.array[t+0]=i,this.array[t+1]=l,this}setXYZ(t,i,l,d){return t*=this.itemSize,this.array[t+0]=i,this.array[t+1]=l,this.array[t+2]=d,this}setXYZW(t,i,l,d,g){return t*=this.itemSize,this.array[t+0]=i,this.array[t+1]=l,this.array[t+2]=d,this.array[t+3]=g,this}onUpload(t){return this.onUploadCallback=t,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const t={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return this.name!==""&&(t.name=this.name),this.usage!==IL&&(t.usage=this.usage),(this.updateRange.offset!==0||this.updateRange.count!==-1)&&(t.updateRange=this.updateRange),t}}class Tre extends xa{constructor(t,i,l){super(new Uint16Array(t),i,l)}}class Mre extends xa{constructor(t,i,l){super(new Uint32Array(t),i,l)}}class No extends xa{constructor(t,i,l){super(new Float32Array(t),i,l)}}let $me=0;const Ya=new cr,uL=new yi,p0=new Ne,_a=new rp,d1=new rp,zi=new Ne;class es extends np{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:$me++}),this.uuid=$s(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(t){return Array.isArray(t)?this.index=new(_re(t)?Mre:Tre)(t,1):this.index=t,this}getAttribute(t){return this.attributes[t]}setAttribute(t,i){return this.attributes[t]=i,this}deleteAttribute(t){return delete this.attributes[t],this}hasAttribute(t){return this.attributes[t]!==void 0}addGroup(t,i,l=0){this.groups.push({start:t,count:i,materialIndex:l})}clearGroups(){this.groups=[]}setDrawRange(t,i){this.drawRange.start=t,this.drawRange.count=i}applyMatrix4(t){const i=this.attributes.position;i!==void 0&&(i.applyMatrix4(t),i.needsUpdate=!0);const l=this.attributes.normal;if(l!==void 0){const g=new Qa().getNormalMatrix(t);l.applyNormalMatrix(g),l.needsUpdate=!0}const d=this.attributes.tangent;return d!==void 0&&(d.transformDirection(t),d.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(t){return Ya.makeRotationFromQuaternion(t),this.applyMatrix4(Ya),this}rotateX(t){return Ya.makeRotationX(t),this.applyMatrix4(Ya),this}rotateY(t){return Ya.makeRotationY(t),this.applyMatrix4(Ya),this}rotateZ(t){return Ya.makeRotationZ(t),this.applyMatrix4(Ya),this}translate(t,i,l){return Ya.makeTranslation(t,i,l),this.applyMatrix4(Ya),this}scale(t,i,l){return Ya.makeScale(t,i,l),this.applyMatrix4(Ya),this}lookAt(t){return uL.lookAt(t),uL.updateMatrix(),this.applyMatrix4(uL.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(p0).negate(),this.translate(p0.x,p0.y,p0.z),this}setFromPoints(t){const i=[];for(let l=0,d=t.length;l<d;l++){const g=t[l];i.push(g.x,g.y,g.z||0)}return this.setAttribute("position",new No(i,3)),this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new rp);const t=this.attributes.position,i=this.morphAttributes.position;if(t&&t.isGLBufferAttribute){console.error('THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set "mesh.frustumCulled" to "false".',this),this.boundingBox.set(new Ne(-1/0,-1/0,-1/0),new Ne(1/0,1/0,1/0));return}if(t!==void 0){if(this.boundingBox.setFromBufferAttribute(t),i)for(let l=0,d=i.length;l<d;l++){const g=i[l];_a.setFromBufferAttribute(g),this.morphTargetsRelative?(zi.addVectors(this.boundingBox.min,_a.min),this.boundingBox.expandByPoint(zi),zi.addVectors(this.boundingBox.max,_a.max),this.boundingBox.expandByPoint(zi)):(this.boundingBox.expandByPoint(_a.min),this.boundingBox.expandByPoint(_a.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new L0);const t=this.attributes.position,i=this.morphAttributes.position;if(t&&t.isGLBufferAttribute){console.error('THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set "mesh.frustumCulled" to "false".',this),this.boundingSphere.set(new Ne,1/0);return}if(t){const l=this.boundingSphere.center;if(_a.setFromBufferAttribute(t),i)for(let g=0,_=i.length;g<_;g++){const b=i[g];d1.setFromBufferAttribute(b),this.morphTargetsRelative?(zi.addVectors(_a.min,d1.min),_a.expandByPoint(zi),zi.addVectors(_a.max,d1.max),_a.expandByPoint(zi)):(_a.expandByPoint(d1.min),_a.expandByPoint(d1.max))}_a.getCenter(l);let d=0;for(let g=0,_=t.count;g<_;g++)zi.fromBufferAttribute(t,g),d=Math.max(d,l.distanceToSquared(zi));if(i)for(let g=0,_=i.length;g<_;g++){const b=i[g],M=this.morphTargetsRelative;for(let I=0,F=b.count;I<F;I++)zi.fromBufferAttribute(b,I),M&&(p0.fromBufferAttribute(t,I),zi.add(p0)),d=Math.max(d,l.distanceToSquared(zi))}this.boundingSphere.radius=Math.sqrt(d),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const t=this.index,i=this.attributes;if(t===null||i.position===void 0||i.normal===void 0||i.uv===void 0){console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}const l=t.array,d=i.position.array,g=i.normal.array,_=i.uv.array,b=d.length/3;this.hasAttribute("tangent")===!1&&this.setAttribute("tangent",new xa(new Float32Array(4*b),4));const M=this.getAttribute("tangent").array,I=[],F=[];for(let Y=0;Y<b;Y++)I[Y]=new Ne,F[Y]=new Ne;const j=new Ne,B=new Ne,K=new Ne,te=new Rn,X=new Rn,O=new Rn,W=new Ne,we=new Ne;function R(Y,qe,Tt){j.fromArray(d,Y*3),B.fromArray(d,qe*3),K.fromArray(d,Tt*3),te.fromArray(_,Y*2),X.fromArray(_,qe*2),O.fromArray(_,Tt*2),B.sub(j),K.sub(j),X.sub(te),O.sub(te);const xt=1/(X.x*O.y-O.x*X.y);!isFinite(xt)||(W.copy(B).multiplyScalar(O.y).addScaledVector(K,-X.y).multiplyScalar(xt),we.copy(K).multiplyScalar(X.x).addScaledVector(B,-O.x).multiplyScalar(xt),I[Y].add(W),I[qe].add(W),I[Tt].add(W),F[Y].add(we),F[qe].add(we),F[Tt].add(we))}let se=this.groups;se.length===0&&(se=[{start:0,count:l.length}]);for(let Y=0,qe=se.length;Y<qe;++Y){const Tt=se[Y],xt=Tt.start,Ke=Tt.count;for(let _e=xt,Qe=xt+Ke;_e<Qe;_e+=3)R(l[_e+0],l[_e+1],l[_e+2])}const me=new Ne,ze=new Ne,ee=new Ne,fe=new Ne;function Te(Y){ee.fromArray(g,Y*3),fe.copy(ee);const qe=I[Y];me.copy(qe),me.sub(ee.multiplyScalar(ee.dot(qe))).normalize(),ze.crossVectors(fe,qe);const xt=ze.dot(F[Y])<0?-1:1;M[Y*4]=me.x,M[Y*4+1]=me.y,M[Y*4+2]=me.z,M[Y*4+3]=xt}for(let Y=0,qe=se.length;Y<qe;++Y){const Tt=se[Y],xt=Tt.start,Ke=Tt.count;for(let _e=xt,Qe=xt+Ke;_e<Qe;_e+=3)Te(l[_e+0]),Te(l[_e+1]),Te(l[_e+2])}}computeVertexNormals(){const t=this.index,i=this.getAttribute("position");if(i!==void 0){let l=this.getAttribute("normal");if(l===void 0)l=new xa(new Float32Array(i.count*3),3),this.setAttribute("normal",l);else for(let B=0,K=l.count;B<K;B++)l.setXYZ(B,0,0,0);const d=new Ne,g=new Ne,_=new Ne,b=new Ne,M=new Ne,I=new Ne,F=new Ne,j=new Ne;if(t)for(let B=0,K=t.count;B<K;B+=3){const te=t.getX(B+0),X=t.getX(B+1),O=t.getX(B+2);d.fromBufferAttribute(i,te),g.fromBufferAttribute(i,X),_.fromBufferAttribute(i,O),F.subVectors(_,g),j.subVectors(d,g),F.cross(j),b.fromBufferAttribute(l,te),M.fromBufferAttribute(l,X),I.fromBufferAttribute(l,O),b.add(F),M.add(F),I.add(F),l.setXYZ(te,b.x,b.y,b.z),l.setXYZ(X,M.x,M.y,M.z),l.setXYZ(O,I.x,I.y,I.z)}else for(let B=0,K=i.count;B<K;B+=3)d.fromBufferAttribute(i,B+0),g.fromBufferAttribute(i,B+1),_.fromBufferAttribute(i,B+2),F.subVectors(_,g),j.subVectors(d,g),F.cross(j),l.setXYZ(B+0,F.x,F.y,F.z),l.setXYZ(B+1,F.x,F.y,F.z),l.setXYZ(B+2,F.x,F.y,F.z);this.normalizeNormals(),l.needsUpdate=!0}}merge(t,i){if(!(t&&t.isBufferGeometry)){console.error("THREE.BufferGeometry.merge(): geometry not an instance of THREE.BufferGeometry.",t);return}i===void 0&&(i=0,console.warn("THREE.BufferGeometry.merge(): Overwriting original geometry, starting at offset=0. Use BufferGeometryUtils.mergeBufferGeometries() for lossless merge."));const l=this.attributes;for(const d in l){if(t.attributes[d]===void 0)continue;const _=l[d].array,b=t.attributes[d],M=b.array,I=b.itemSize*i,F=Math.min(M.length,_.length-I);for(let j=0,B=I;j<F;j++,B++)_[B]=M[j]}return this}normalizeNormals(){const t=this.attributes.normal;for(let i=0,l=t.count;i<l;i++)zi.fromBufferAttribute(t,i),zi.normalize(),t.setXYZ(i,zi.x,zi.y,zi.z)}toNonIndexed(){function t(b,M){const I=b.array,F=b.itemSize,j=b.normalized,B=new I.constructor(M.length*F);let K=0,te=0;for(let X=0,O=M.length;X<O;X++){b.isInterleavedBufferAttribute?K=M[X]*b.data.stride+b.offset:K=M[X]*F;for(let W=0;W<F;W++)B[te++]=I[K++]}return new xa(B,F,j)}if(this.index===null)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const i=new es,l=this.index.array,d=this.attributes;for(const b in d){const M=d[b],I=t(M,l);i.setAttribute(b,I)}const g=this.morphAttributes;for(const b in g){const M=[],I=g[b];for(let F=0,j=I.length;F<j;F++){const B=I[F],K=t(B,l);M.push(K)}i.morphAttributes[b]=M}i.morphTargetsRelative=this.morphTargetsRelative;const _=this.groups;for(let b=0,M=_.length;b<M;b++){const I=_[b];i.addGroup(I.start,I.count,I.materialIndex)}return i}toJSON(){const t={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(t.uuid=this.uuid,t.type=this.type,this.name!==""&&(t.name=this.name),Object.keys(this.userData).length>0&&(t.userData=this.userData),this.parameters!==void 0){const M=this.parameters;for(const I in M)M[I]!==void 0&&(t[I]=M[I]);return t}t.data={attributes:{}};const i=this.index;i!==null&&(t.data.index={type:i.array.constructor.name,array:Array.prototype.slice.call(i.array)});const l=this.attributes;for(const M in l){const I=l[M];t.data.attributes[M]=I.toJSON(t.data)}const d={};let g=!1;for(const M in this.morphAttributes){const I=this.morphAttributes[M],F=[];for(let j=0,B=I.length;j<B;j++){const K=I[j];F.push(K.toJSON(t.data))}F.length>0&&(d[M]=F,g=!0)}g&&(t.data.morphAttributes=d,t.data.morphTargetsRelative=this.morphTargetsRelative);const _=this.groups;_.length>0&&(t.data.groups=JSON.parse(JSON.stringify(_)));const b=this.boundingSphere;return b!==null&&(t.data.boundingSphere={center:b.center.toArray(),radius:b.radius}),t}clone(){return new this.constructor().copy(this)}copy(t){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const i={};this.name=t.name;const l=t.index;l!==null&&this.setIndex(l.clone(i));const d=t.attributes;for(const I in d){const F=d[I];this.setAttribute(I,F.clone(i))}const g=t.morphAttributes;for(const I in g){const F=[],j=g[I];for(let B=0,K=j.length;B<K;B++)F.push(j[B].clone(i));this.morphAttributes[I]=F}this.morphTargetsRelative=t.morphTargetsRelative;const _=t.groups;for(let I=0,F=_.length;I<F;I++){const j=_[I];this.addGroup(j.start,j.count,j.materialIndex)}const b=t.boundingBox;b!==null&&(this.boundingBox=b.clone());const M=t.boundingSphere;return M!==null&&(this.boundingSphere=M.clone()),this.drawRange.start=t.drawRange.start,this.drawRange.count=t.drawRange.count,this.userData=t.userData,t.parameters!==void 0&&(this.parameters=Object.assign({},t.parameters)),this}dispose(){this.dispatchEvent({type:"dispose"})}}const mne=new cr,m0=new XL,dL=new L0,Bd=new Ne,Ud=new Ne,Vd=new Ne,fL=new Ne,hL=new Ne,pL=new Ne,GM=new Ne,WM=new Ne,qM=new Ne,KM=new Rn,XM=new Rn,$M=new Rn,mL=new Ne,ZM=new Ne;class vo extends yi{constructor(t=new es,i=new Wh){super(),this.isMesh=!0,this.type="Mesh",this.geometry=t,this.material=i,this.updateMorphTargets()}copy(t,i){return super.copy(t,i),t.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=t.morphTargetInfluences.slice()),t.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},t.morphTargetDictionary)),this.material=t.material,this.geometry=t.geometry,this}updateMorphTargets(){const i=this.geometry.morphAttributes,l=Object.keys(i);if(l.length>0){const d=i[l[0]];if(d!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let g=0,_=d.length;g<_;g++){const b=d[g].name||String(g);this.morphTargetInfluences.push(0),this.morphTargetDictionary[b]=g}}}}raycast(t,i){const l=this.geometry,d=this.material,g=this.matrixWorld;if(d===void 0||(l.boundingSphere===null&&l.computeBoundingSphere(),dL.copy(l.boundingSphere),dL.applyMatrix4(g),t.ray.intersectsSphere(dL)===!1)||(mne.copy(g).invert(),m0.copy(t.ray).applyMatrix4(mne),l.boundingBox!==null&&m0.intersectsBox(l.boundingBox)===!1))return;let _;const b=l.index,M=l.attributes.position,I=l.morphAttributes.position,F=l.morphTargetsRelative,j=l.attributes.uv,B=l.attributes.uv2,K=l.groups,te=l.drawRange;if(b!==null)if(Array.isArray(d))for(let X=0,O=K.length;X<O;X++){const W=K[X],we=d[W.materialIndex],R=Math.max(W.start,te.start),se=Math.min(b.count,Math.min(W.start+W.count,te.start+te.count));for(let me=R,ze=se;me<ze;me+=3){const ee=b.getX(me),fe=b.getX(me+1),Te=b.getX(me+2);_=YM(this,we,t,m0,M,I,F,j,B,ee,fe,Te),_&&(_.faceIndex=Math.floor(me/3),_.face.materialIndex=W.materialIndex,i.push(_))}}else{const X=Math.max(0,te.start),O=Math.min(b.count,te.start+te.count);for(let W=X,we=O;W<we;W+=3){const R=b.getX(W),se=b.getX(W+1),me=b.getX(W+2);_=YM(this,d,t,m0,M,I,F,j,B,R,se,me),_&&(_.faceIndex=Math.floor(W/3),i.push(_))}}else if(M!==void 0)if(Array.isArray(d))for(let X=0,O=K.length;X<O;X++){const W=K[X],we=d[W.materialIndex],R=Math.max(W.start,te.start),se=Math.min(M.count,Math.min(W.start+W.count,te.start+te.count));for(let me=R,ze=se;me<ze;me+=3){const ee=me,fe=me+1,Te=me+2;_=YM(this,we,t,m0,M,I,F,j,B,ee,fe,Te),_&&(_.faceIndex=Math.floor(me/3),_.face.materialIndex=W.materialIndex,i.push(_))}}else{const X=Math.max(0,te.start),O=Math.min(M.count,te.start+te.count);for(let W=X,we=O;W<we;W+=3){const R=W,se=W+1,me=W+2;_=YM(this,d,t,m0,M,I,F,j,B,R,se,me),_&&(_.faceIndex=Math.floor(W/3),i.push(_))}}}}function Zme(w,t,i,l,d,g,_,b){let M;if(t.side===Xs?M=l.intersectTriangle(_,g,d,!0,b):M=l.intersectTriangle(d,g,_,t.side!==Zh,b),M===null)return null;ZM.copy(b),ZM.applyMatrix4(w.matrixWorld);const I=i.ray.origin.distanceTo(ZM);return I<i.near||I>i.far?null:{distance:I,point:ZM.clone(),object:w}}function YM(w,t,i,l,d,g,_,b,M,I,F,j){Bd.fromBufferAttribute(d,I),Ud.fromBufferAttribute(d,F),Vd.fromBufferAttribute(d,j);const B=w.morphTargetInfluences;if(g&&B){GM.set(0,0,0),WM.set(0,0,0),qM.set(0,0,0);for(let te=0,X=g.length;te<X;te++){const O=B[te],W=g[te];O!==0&&(fL.fromBufferAttribute(W,I),hL.fromBufferAttribute(W,F),pL.fromBufferAttribute(W,j),_?(GM.addScaledVector(fL,O),WM.addScaledVector(hL,O),qM.addScaledVector(pL,O)):(GM.addScaledVector(fL.sub(Bd),O),WM.addScaledVector(hL.sub(Ud),O),qM.addScaledVector(pL.sub(Vd),O)))}Bd.add(GM),Ud.add(WM),Vd.add(qM)}w.isSkinnedMesh&&(w.boneTransform(I,Bd),w.boneTransform(F,Ud),w.boneTransform(j,Vd));const K=Zme(w,t,i,l,Bd,Ud,Vd,mL);if(K){b&&(KM.fromBufferAttribute(b,I),XM.fromBufferAttribute(b,F),$M.fromBufferAttribute(b,j),K.uv=Jc.getUV(mL,Bd,Ud,Vd,KM,XM,$M,new Rn)),M&&(KM.fromBufferAttribute(M,I),XM.fromBufferAttribute(M,F),$M.fromBufferAttribute(M,j),K.uv2=Jc.getUV(mL,Bd,Ud,Vd,KM,XM,$M,new Rn));const te={a:I,b:F,c:j,normal:new Ne,materialIndex:0};Jc.getNormal(Bd,Ud,Vd,te.normal),K.face=te}return K}class z0 extends es{constructor(t=1,i=1,l=1,d=1,g=1,_=1){super(),this.type="BoxGeometry",this.parameters={width:t,height:i,depth:l,widthSegments:d,heightSegments:g,depthSegments:_};const b=this;d=Math.floor(d),g=Math.floor(g),_=Math.floor(_);const M=[],I=[],F=[],j=[];let B=0,K=0;te("z","y","x",-1,-1,l,i,t,_,g,0),te("z","y","x",1,-1,l,i,-t,_,g,1),te("x","z","y",1,1,t,l,i,d,_,2),te("x","z","y",1,-1,t,l,-i,d,_,3),te("x","y","z",1,-1,t,i,l,d,g,4),te("x","y","z",-1,-1,t,i,-l,d,g,5),this.setIndex(M),this.setAttribute("position",new No(I,3)),this.setAttribute("normal",new No(F,3)),this.setAttribute("uv",new No(j,2));function te(X,O,W,we,R,se,me,ze,ee,fe,Te){const Y=se/ee,qe=me/fe,Tt=se/2,xt=me/2,Ke=ze/2,_e=ee+1,Qe=fe+1;let Ge=0,yt=0;const ft=new Ne;for(let gt=0;gt<Qe;gt++){const zt=gt*qe-xt;for(let kt=0;kt<_e;kt++){const Rt=kt*Y-Tt;ft[X]=Rt*we,ft[O]=zt*R,ft[W]=Ke,I.push(ft.x,ft.y,ft.z),ft[X]=0,ft[O]=0,ft[W]=ze>0?1:-1,F.push(ft.x,ft.y,ft.z),j.push(kt/ee),j.push(1-gt/fe),Ge+=1}}for(let gt=0;gt<fe;gt++)for(let zt=0;zt<ee;zt++){const kt=B+zt+_e*gt,Rt=B+zt+_e*(gt+1),Yt=B+(zt+1)+_e*(gt+1),Jt=B+(zt+1)+_e*gt;M.push(kt,Rt,Jt),M.push(Rt,Yt,Jt),yt+=6}b.addGroup(K,yt,Te),K+=yt,B+=Ge}}static fromJSON(t){return new z0(t.width,t.height,t.depth,t.widthSegments,t.heightSegments,t.depthSegments)}}function D0(w){const t={};for(const i in w){t[i]={};for(const l in w[i]){const d=w[i][l];d&&(d.isColor||d.isMatrix3||d.isMatrix4||d.isVector2||d.isVector3||d.isVector4||d.isTexture||d.isQuaternion)?t[i][l]=d.clone():Array.isArray(d)?t[i][l]=d.slice():t[i][l]=d}}return t}function mo(w){const t={};for(let i=0;i<w.length;i++){const l=D0(w[i]);for(const d in l)t[d]=l[d]}return t}const Yme={clone:D0,merge:mo};var Jme=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,Qme=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`;class ep extends Vl{constructor(t){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.vertexShader=Jme,this.fragmentShader=Qme,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,t!==void 0&&(t.attributes!==void 0&&console.error("THREE.ShaderMaterial: attributes should now be defined in THREE.BufferGeometry instead."),this.setValues(t))}copy(t){return super.copy(t),this.fragmentShader=t.fragmentShader,this.vertexShader=t.vertexShader,this.uniforms=D0(t.uniforms),this.defines=Object.assign({},t.defines),this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.fog=t.fog,this.lights=t.lights,this.clipping=t.clipping,this.extensions=Object.assign({},t.extensions),this.glslVersion=t.glslVersion,this}toJSON(t){const i=super.toJSON(t);i.glslVersion=this.glslVersion,i.uniforms={};for(const d in this.uniforms){const _=this.uniforms[d].value;_&&_.isTexture?i.uniforms[d]={type:"t",value:_.toJSON(t).uuid}:_&&_.isColor?i.uniforms[d]={type:"c",value:_.getHex()}:_&&_.isVector2?i.uniforms[d]={type:"v2",value:_.toArray()}:_&&_.isVector3?i.uniforms[d]={type:"v3",value:_.toArray()}:_&&_.isVector4?i.uniforms[d]={type:"v4",value:_.toArray()}:_&&_.isMatrix3?i.uniforms[d]={type:"m3",value:_.toArray()}:_&&_.isMatrix4?i.uniforms[d]={type:"m4",value:_.toArray()}:i.uniforms[d]={value:_}}Object.keys(this.defines).length>0&&(i.defines=this.defines),i.vertexShader=this.vertexShader,i.fragmentShader=this.fragmentShader;const l={};for(const d in this.extensions)this.extensions[d]===!0&&(l[d]=!0);return Object.keys(l).length>0&&(i.extensions=l),i}}class Pre extends yi{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new cr,this.projectionMatrix=new cr,this.projectionMatrixInverse=new cr}copy(t,i){return super.copy(t,i),this.matrixWorldInverse.copy(t.matrixWorldInverse),this.projectionMatrix.copy(t.projectionMatrix),this.projectionMatrixInverse.copy(t.projectionMatrixInverse),this}getWorldDirection(t){this.updateWorldMatrix(!0,!1);const i=this.matrixWorld.elements;return t.set(-i[8],-i[9],-i[10]).normalize()}updateMatrixWorld(t){super.updateMatrixWorld(t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(t,i){super.updateWorldMatrix(t,i),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}}class zo extends Pre{constructor(t=50,i=1,l=.1,d=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=t,this.zoom=1,this.near=l,this.far=d,this.focus=10,this.aspect=i,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(t,i){return super.copy(t,i),this.fov=t.fov,this.zoom=t.zoom,this.near=t.near,this.far=t.far,this.focus=t.focus,this.aspect=t.aspect,this.view=t.view===null?null:Object.assign({},t.view),this.filmGauge=t.filmGauge,this.filmOffset=t.filmOffset,this}setFocalLength(t){const i=.5*this.getFilmHeight()/t;this.fov=S1*2*Math.atan(i),this.updateProjectionMatrix()}getFocalLength(){const t=Math.tan(b1*.5*this.fov);return .5*this.getFilmHeight()/t}getEffectiveFOV(){return S1*2*Math.atan(Math.tan(b1*.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}setViewOffset(t,i,l,d,g,_){this.aspect=t/i,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=t,this.view.fullHeight=i,this.view.offsetX=l,this.view.offsetY=d,this.view.width=g,this.view.height=_,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const t=this.near;let i=t*Math.tan(b1*.5*this.fov)/this.zoom,l=2*i,d=this.aspect*l,g=-.5*d;const _=this.view;if(this.view!==null&&this.view.enabled){const M=_.fullWidth,I=_.fullHeight;g+=_.offsetX*d/M,i-=_.offsetY*l/I,d*=_.width/M,l*=_.height/I}const b=this.filmOffset;b!==0&&(g+=t*b/this.getFilmWidth()),this.projectionMatrix.makePerspective(g,g+d,i,i-l,t,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(t){const i=super.toJSON(t);return i.object.fov=this.fov,i.object.zoom=this.zoom,i.object.near=this.near,i.object.far=this.far,i.object.focus=this.focus,i.object.aspect=this.aspect,this.view!==null&&(i.object.view=Object.assign({},this.view)),i.object.filmGauge=this.filmGauge,i.object.filmOffset=this.filmOffset,i}}const g0=90,v0=1;class ege extends yi{constructor(t,i,l){if(super(),this.type="CubeCamera",l.isWebGLCubeRenderTarget!==!0){console.error("THREE.CubeCamera: The constructor now expects an instance of WebGLCubeRenderTarget as third parameter.");return}this.renderTarget=l;const d=new zo(g0,v0,t,i);d.layers=this.layers,d.up.set(0,-1,0),d.lookAt(new Ne(1,0,0)),this.add(d);const g=new zo(g0,v0,t,i);g.layers=this.layers,g.up.set(0,-1,0),g.lookAt(new Ne(-1,0,0)),this.add(g);const _=new zo(g0,v0,t,i);_.layers=this.layers,_.up.set(0,0,1),_.lookAt(new Ne(0,1,0)),this.add(_);const b=new zo(g0,v0,t,i);b.layers=this.layers,b.up.set(0,0,-1),b.lookAt(new Ne(0,-1,0)),this.add(b);const M=new zo(g0,v0,t,i);M.layers=this.layers,M.up.set(0,-1,0),M.lookAt(new Ne(0,0,1)),this.add(M);const I=new zo(g0,v0,t,i);I.layers=this.layers,I.up.set(0,-1,0),I.lookAt(new Ne(0,0,-1)),this.add(I)}update(t,i){this.parent===null&&this.updateMatrixWorld();const l=this.renderTarget,[d,g,_,b,M,I]=this.children,F=t.getRenderTarget(),j=t.toneMapping,B=t.xr.enabled;t.toneMapping=Qc,t.xr.enabled=!1;const K=l.texture.generateMipmaps;l.texture.generateMipmaps=!1,t.setRenderTarget(l,0),t.render(i,d),t.setRenderTarget(l,1),t.render(i,g),t.setRenderTarget(l,2),t.render(i,_),t.setRenderTarget(l,3),t.render(i,b),t.setRenderTarget(l,4),t.render(i,M),l.texture.generateMipmaps=K,t.setRenderTarget(l,5),t.render(i,I),t.setRenderTarget(F),t.toneMapping=j,t.xr.enabled=B,l.texture.needsPMREMUpdate=!0}}class Cre extends Fo{constructor(t,i,l,d,g,_,b,M,I,F){t=t!==void 0?t:[],i=i!==void 0?i:M0,super(t,i,l,d,g,_,b,M,I,F),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(t){this.image=t}}class tge extends Qh{constructor(t,i={}){super(t,t,i),this.isWebGLCubeRenderTarget=!0;const l={width:t,height:t,depth:1},d=[l,l,l,l,l,l];this.texture=new Cre(d,i.mapping,i.wrapS,i.wrapT,i.magFilter,i.minFilter,i.format,i.type,i.anisotropy,i.encoding),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=i.generateMipmaps!==void 0?i.generateMipmaps:!1,this.texture.minFilter=i.minFilter!==void 0?i.minFilter:ea}fromEquirectangularTexture(t,i){this.texture.type=i.type,this.texture.encoding=i.encoding,this.texture.generateMipmaps=i.generateMipmaps,this.texture.minFilter=i.minFilter,this.texture.magFilter=i.magFilter;const l={uniforms:{tEquirect:{value:null}},vertexShader:`

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,fragmentShader:`

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`},d=new z0(5,5,5),g=new ep({name:"CubemapFromEquirect",uniforms:D0(l.uniforms),vertexShader:l.vertexShader,fragmentShader:l.fragmentShader,side:Xs,blending:qd});g.uniforms.tEquirect.value=i;const _=new vo(d,g),b=i.minFilter;return i.minFilter===R0&&(i.minFilter=ea),new ege(1,10,this).update(t,_),i.minFilter=b,_.geometry.dispose(),_.material.dispose(),this}clear(t,i,l,d){const g=t.getRenderTarget();for(let _=0;_<6;_++)t.setRenderTarget(this,_),t.clear(i,l,d);t.setRenderTarget(g)}}const gL=new Ne,nge=new Ne,rge=new Qa;class jh{constructor(t=new Ne(1,0,0),i=0){this.isPlane=!0,this.normal=t,this.constant=i}set(t,i){return this.normal.copy(t),this.constant=i,this}setComponents(t,i,l,d){return this.normal.set(t,i,l),this.constant=d,this}setFromNormalAndCoplanarPoint(t,i){return this.normal.copy(t),this.constant=-i.dot(this.normal),this}setFromCoplanarPoints(t,i,l){const d=gL.subVectors(l,i).cross(nge.subVectors(t,i)).normalize();return this.setFromNormalAndCoplanarPoint(d,t),this}copy(t){return this.normal.copy(t.normal),this.constant=t.constant,this}normalize(){const t=1/this.normal.length();return this.normal.multiplyScalar(t),this.constant*=t,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(t){return this.normal.dot(t)+this.constant}distanceToSphere(t){return this.distanceToPoint(t.center)-t.radius}projectPoint(t,i){return i.copy(this.normal).multiplyScalar(-this.distanceToPoint(t)).add(t)}intersectLine(t,i){const l=t.delta(gL),d=this.normal.dot(l);if(d===0)return this.distanceToPoint(t.start)===0?i.copy(t.start):null;const g=-(t.start.dot(this.normal)+this.constant)/d;return g<0||g>1?null:i.copy(l).multiplyScalar(g).add(t.start)}intersectsLine(t){const i=this.distanceToPoint(t.start),l=this.distanceToPoint(t.end);return i<0&&l>0||l<0&&i>0}intersectsBox(t){return t.intersectsPlane(this)}intersectsSphere(t){return t.intersectsPlane(this)}coplanarPoint(t){return t.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(t,i){const l=i||rge.getNormalMatrix(t),d=this.coplanarPoint(gL).applyMatrix4(t),g=this.normal.applyMatrix3(l).normalize();return this.constant=-d.dot(g),this}translate(t){return this.constant-=t.dot(this.normal),this}equals(t){return t.normal.equals(this.normal)&&t.constant===this.constant}clone(){return new this.constructor().copy(this)}}const y0=new L0,JM=new Ne;class $L{constructor(t=new jh,i=new jh,l=new jh,d=new jh,g=new jh,_=new jh){this.planes=[t,i,l,d,g,_]}set(t,i,l,d,g,_){const b=this.planes;return b[0].copy(t),b[1].copy(i),b[2].copy(l),b[3].copy(d),b[4].copy(g),b[5].copy(_),this}copy(t){const i=this.planes;for(let l=0;l<6;l++)i[l].copy(t.planes[l]);return this}setFromProjectionMatrix(t){const i=this.planes,l=t.elements,d=l[0],g=l[1],_=l[2],b=l[3],M=l[4],I=l[5],F=l[6],j=l[7],B=l[8],K=l[9],te=l[10],X=l[11],O=l[12],W=l[13],we=l[14],R=l[15];return i[0].setComponents(b-d,j-M,X-B,R-O).normalize(),i[1].setComponents(b+d,j+M,X+B,R+O).normalize(),i[2].setComponents(b+g,j+I,X+K,R+W).normalize(),i[3].setComponents(b-g,j-I,X-K,R-W).normalize(),i[4].setComponents(b-_,j-F,X-te,R-we).normalize(),i[5].setComponents(b+_,j+F,X+te,R+we).normalize(),this}intersectsObject(t){const i=t.geometry;return i.boundingSphere===null&&i.computeBoundingSphere(),y0.copy(i.boundingSphere).applyMatrix4(t.matrixWorld),this.intersectsSphere(y0)}intersectsSprite(t){return y0.center.set(0,0,0),y0.radius=.7071067811865476,y0.applyMatrix4(t.matrixWorld),this.intersectsSphere(y0)}intersectsSphere(t){const i=this.planes,l=t.center,d=-t.radius;for(let g=0;g<6;g++)if(i[g].distanceToPoint(l)<d)return!1;return!0}intersectsBox(t){const i=this.planes;for(let l=0;l<6;l++){const d=i[l];if(JM.x=d.normal.x>0?t.max.x:t.min.x,JM.y=d.normal.y>0?t.max.y:t.min.y,JM.z=d.normal.z>0?t.max.z:t.min.z,d.distanceToPoint(JM)<0)return!1}return!0}containsPoint(t){const i=this.planes;for(let l=0;l<6;l++)if(i[l].distanceToPoint(t)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}}function Are(){let w=null,t=!1,i=null,l=null;function d(g,_){i(g,_),l=w.requestAnimationFrame(d)}return{start:function(){t!==!0&&i!==null&&(l=w.requestAnimationFrame(d),t=!0)},stop:function(){w.cancelAnimationFrame(l),t=!1},setAnimationLoop:function(g){i=g},setContext:function(g){w=g}}}function ige(w,t){const i=t.isWebGL2,l=new WeakMap;function d(I,F){const j=I.array,B=I.usage,K=w.createBuffer();w.bindBuffer(F,K),w.bufferData(F,j,B),I.onUploadCallback();let te;if(j instanceof Float32Array)te=5126;else if(j instanceof Uint16Array)if(I.isFloat16BufferAttribute)if(i)te=5131;else throw new Error("THREE.WebGLAttributes: Usage of Float16BufferAttribute requires WebGL2.");else te=5123;else if(j instanceof Int16Array)te=5122;else if(j instanceof Uint32Array)te=5125;else if(j instanceof Int32Array)te=5124;else if(j instanceof Int8Array)te=5120;else if(j instanceof Uint8Array)te=5121;else if(j instanceof Uint8ClampedArray)te=5121;else throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+j);return{buffer:K,type:te,bytesPerElement:j.BYTES_PER_ELEMENT,version:I.version}}function g(I,F,j){const B=F.array,K=F.updateRange;w.bindBuffer(j,I),K.count===-1?w.bufferSubData(j,0,B):(i?w.bufferSubData(j,K.offset*B.BYTES_PER_ELEMENT,B,K.offset,K.count):w.bufferSubData(j,K.offset*B.BYTES_PER_ELEMENT,B.subarray(K.offset,K.offset+K.count)),K.count=-1)}function _(I){return I.isInterleavedBufferAttribute&&(I=I.data),l.get(I)}function b(I){I.isInterleavedBufferAttribute&&(I=I.data);const F=l.get(I);F&&(w.deleteBuffer(F.buffer),l.delete(I))}function M(I,F){if(I.isGLBufferAttribute){const B=l.get(I);(!B||B.version<I.version)&&l.set(I,{buffer:I.buffer,type:I.type,bytesPerElement:I.elementSize,version:I.version});return}I.isInterleavedBufferAttribute&&(I=I.data);const j=l.get(I);j===void 0?l.set(I,d(I,F)):j.version<I.version&&(g(j.buffer,I,F),j.version=I.version)}return{get:_,remove:b,update:M}}class uP extends es{constructor(t=1,i=1,l=1,d=1){super(),this.type="PlaneGeometry",this.parameters={width:t,height:i,widthSegments:l,heightSegments:d};const g=t/2,_=i/2,b=Math.floor(l),M=Math.floor(d),I=b+1,F=M+1,j=t/b,B=i/M,K=[],te=[],X=[],O=[];for(let W=0;W<F;W++){const we=W*B-_;for(let R=0;R<I;R++){const se=R*j-g;te.push(se,-we,0),X.push(0,0,1),O.push(R/b),O.push(1-W/M)}}for(let W=0;W<M;W++)for(let we=0;we<b;we++){const R=we+I*W,se=we+I*(W+1),me=we+1+I*(W+1),ze=we+1+I*W;K.push(R,se,ze),K.push(se,me,ze)}this.setIndex(K),this.setAttribute("position",new No(te,3)),this.setAttribute("normal",new No(X,3)),this.setAttribute("uv",new No(O,2))}static fromJSON(t){return new uP(t.width,t.height,t.widthSegments,t.heightSegments)}}var oge=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vUv ).g;
#endif`,age=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,sge=`#ifdef USE_ALPHATEST
	if ( diffuseColor.a < alphaTest ) discard;
#endif`,lge=`#ifdef USE_ALPHATEST
	uniform float alphaTest;
#endif`,cge=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );
	#endif
#endif`,uge=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,dge="vec3 transformed = vec3( position );",fge=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,hge=`vec3 BRDF_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
float F_Schlick( const in float f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
vec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {
    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );
    float x2 = x * x;
    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );
    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );
}
float V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
vec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 f0, const in float f90, const in float roughness ) {
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( f0, f90, dotVH );
	float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
	float D = D_GGX( alpha, dotNH );
	return F * ( V * D );
}
#ifdef USE_IRIDESCENCE
vec3 BRDF_GGX_Iridescence( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 f0, const in float f90, const in float iridescence, const in vec3 iridescenceFresnel, const in float roughness ) {
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = mix(F_Schlick( f0, f90, dotVH ), iridescenceFresnel, iridescence);
	float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
	float D = D_GGX( alpha, dotNH );
	return F * ( V * D );
}
#endif
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( specularColor, 1.0, dotVH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
}
#if defined( USE_SHEEN )
float D_Charlie( float roughness, float dotNH ) {
	float alpha = pow2( roughness );
	float invAlpha = 1.0 / alpha;
	float cos2h = dotNH * dotNH;
	float sin2h = max( 1.0 - cos2h, 0.0078125 );
	return ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );
}
float V_Neubelt( float dotNV, float dotNL ) {
	return saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );
}
vec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float D = D_Charlie( sheenRoughness, dotNH );
	float V = V_Neubelt( dotNV, dotNL );
	return sheenColor * ( D * V );
}
#endif`,pge=`#ifdef USE_IRIDESCENCE
const mat3 XYZ_TO_REC709 = mat3(
    3.2404542, -0.9692660,  0.0556434,
   -1.5371385,  1.8760108, -0.2040259,
   -0.4985314,  0.0415560,  1.0572252
);
vec3 Fresnel0ToIor( vec3 fresnel0 ) {
   vec3 sqrtF0 = sqrt( fresnel0 );
   return ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );
}
vec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {
   return pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );
}
float IorToFresnel0( float transmittedIor, float incidentIor ) {
   return pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));
}
vec3 evalSensitivity( float OPD, vec3 shift ) {
   float phase = 2.0 * PI * OPD * 1.0e-9;
   vec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );
   vec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );
   vec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );
   vec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( -pow2( phase ) * var );
   xyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[0] ) * exp( -4.5282e+09 * pow2( phase ) );
   xyz /= 1.0685e-7;
   vec3 srgb = XYZ_TO_REC709 * xyz;
   return srgb;
}
vec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {
   vec3 I;
   float iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );
   float sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );
   float cosTheta2Sq = 1.0 - sinTheta2Sq;
   if ( cosTheta2Sq < 0.0 ) {
       return vec3( 1.0 );
   }
   float cosTheta2 = sqrt( cosTheta2Sq );
   float R0 = IorToFresnel0( iridescenceIOR, outsideIOR );
   float R12 = F_Schlick( R0, 1.0, cosTheta1 );
   float R21 = R12;
   float T121 = 1.0 - R12;
   float phi12 = 0.0;
   if ( iridescenceIOR < outsideIOR ) phi12 = PI;
   float phi21 = PI - phi12;
   vec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );   vec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );
   vec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );
   vec3 phi23 = vec3( 0.0 );
   if ( baseIOR[0] < iridescenceIOR ) phi23[0] = PI;
   if ( baseIOR[1] < iridescenceIOR ) phi23[1] = PI;
   if ( baseIOR[2] < iridescenceIOR ) phi23[2] = PI;
   float OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;
   vec3 phi = vec3( phi21 ) + phi23;
   vec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );
   vec3 r123 = sqrt( R123 );
   vec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );
   vec3 C0 = R12 + Rs;
   I = C0;
   vec3 Cm = Rs - T121;
   for ( int m = 1; m <= 2; ++m ) {
       Cm *= r123;
       vec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );
       I += Cm * Sm;
   }
   return max( I, vec3( 0.0 ) );
}
#endif`,mge=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vUv );
		vec2 dSTdy = dFdy( vUv );
		float Hll = bumpScale * texture2D( bumpMap, vUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
		vec3 vSigmaX = vec3( dFdx( surf_pos.x ), dFdx( surf_pos.y ), dFdx( surf_pos.z ) );
		vec3 vSigmaY = vec3( dFdy( surf_pos.x ), dFdy( surf_pos.y ), dFdy( surf_pos.z ) );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 ) * faceDirection;
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,gge=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#pragma unroll_loop_start
	for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
		plane = clippingPlanes[ i ];
		if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
	}
	#pragma unroll_loop_end
	#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
		bool clipped = true;
		#pragma unroll_loop_start
		for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
		}
		#pragma unroll_loop_end
		if ( clipped ) discard;
	#endif
#endif`,vge=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,yge=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,bge=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,_ge=`#if defined( USE_COLOR_ALPHA )
	diffuseColor *= vColor;
#elif defined( USE_COLOR )
	diffuseColor.rgb *= vColor;
#endif`,xge=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR )
	varying vec3 vColor;
#endif`,wge=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	varying vec3 vColor;
#endif`,Sge=`#if defined( USE_COLOR_ALPHA )
	vColor = vec4( 1.0 );
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	vColor = vec3( 1.0 );
#endif
#ifdef USE_COLOR
	vColor *= color;
#endif
#ifdef USE_INSTANCING_COLOR
	vColor.xyz *= instanceColor.xyz;
#endif`,Ege=`#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement( a ) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
vec3 pow2( const in vec3 x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }
float average( const in vec3 color ) { return dot( color, vec3( 0.3333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract( sin( sn ) * c );
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
struct GeometricContext {
	vec3 position;
	vec3 normal;
	vec3 viewDir;
#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal;
#endif
};
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
mat3 transposeMat3( const in mat3 m ) {
	mat3 tmp;
	tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );
	tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );
	tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );
	return tmp;
}
float linearToRelativeLuminance( const in vec3 color ) {
	vec3 weights = vec3( 0.2126, 0.7152, 0.0722 );
	return dot( weights, color.rgb );
}
bool isPerspectiveMatrix( mat4 m ) {
	return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}`,kge=`#ifdef ENVMAP_TYPE_CUBE_UV
	#define cubeUV_minMipLevel 4.0
	#define cubeUV_minTileSize 16.0
	float getFace( vec3 direction ) {
		vec3 absDirection = abs( direction );
		float face = - 1.0;
		if ( absDirection.x > absDirection.z ) {
			if ( absDirection.x > absDirection.y )
				face = direction.x > 0.0 ? 0.0 : 3.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		} else {
			if ( absDirection.z > absDirection.y )
				face = direction.z > 0.0 ? 2.0 : 5.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		}
		return face;
	}
	vec2 getUV( vec3 direction, float face ) {
		vec2 uv;
		if ( face == 0.0 ) {
			uv = vec2( direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 1.0 ) {
			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
		} else if ( face == 2.0 ) {
			uv = vec2( - direction.x, direction.y ) / abs( direction.z );
		} else if ( face == 3.0 ) {
			uv = vec2( - direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 4.0 ) {
			uv = vec2( - direction.x, direction.z ) / abs( direction.y );
		} else {
			uv = vec2( direction.x, direction.y ) / abs( direction.z );
		}
		return 0.5 * ( uv + 1.0 );
	}
	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {
		float face = getFace( direction );
		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
		mipInt = max( mipInt, cubeUV_minMipLevel );
		float faceSize = exp2( mipInt );
		vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;
		if ( face > 2.0 ) {
			uv.y += faceSize;
			face -= 3.0;
		}
		uv.x += face * faceSize;
		uv.x += filterInt * 3.0 * cubeUV_minTileSize;
		uv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );
		uv.x *= CUBEUV_TEXEL_WIDTH;
		uv.y *= CUBEUV_TEXEL_HEIGHT;
		#ifdef texture2DGradEXT
			return texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;
		#else
			return texture2D( envMap, uv ).rgb;
		#endif
	}
	#define r0 1.0
	#define v0 0.339
	#define m0 - 2.0
	#define r1 0.8
	#define v1 0.276
	#define m1 - 1.0
	#define r4 0.4
	#define v4 0.046
	#define m4 2.0
	#define r5 0.305
	#define v5 0.016
	#define m5 3.0
	#define r6 0.21
	#define v6 0.0038
	#define m6 4.0
	float roughnessToMip( float roughness ) {
		float mip = 0.0;
		if ( roughness >= r1 ) {
			mip = ( r0 - roughness ) * ( m1 - m0 ) / ( r0 - r1 ) + m0;
		} else if ( roughness >= r4 ) {
			mip = ( r1 - roughness ) * ( m4 - m1 ) / ( r1 - r4 ) + m1;
		} else if ( roughness >= r5 ) {
			mip = ( r4 - roughness ) * ( m5 - m4 ) / ( r4 - r5 ) + m4;
		} else if ( roughness >= r6 ) {
			mip = ( r5 - roughness ) * ( m6 - m5 ) / ( r5 - r6 ) + m5;
		} else {
			mip = - 2.0 * log2( 1.16 * roughness );		}
		return mip;
	}
	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {
		float mip = clamp( roughnessToMip( roughness ), m0, CUBEUV_MAX_MIP );
		float mipF = fract( mip );
		float mipInt = floor( mip );
		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
		if ( mipF == 0.0 ) {
			return vec4( color0, 1.0 );
		} else {
			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
			return vec4( mix( color0, color1, mipF ), 1.0 );
		}
	}
#endif`,Tge=`vec3 transformedNormal = objectNormal;
#ifdef USE_INSTANCING
	mat3 m = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( m[ 0 ], m[ 0 ] ), dot( m[ 1 ], m[ 1 ] ), dot( m[ 2 ], m[ 2 ] ) );
	transformedNormal = m * transformedNormal;
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	vec3 transformedTangent = ( modelViewMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,Mge=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,Pge=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vUv ).x * displacementScale + displacementBias );
#endif`,Cge=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vUv );
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,Age=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,Ige="gl_FragColor = linearToOutputTexel( gl_FragColor );",Dge=`vec4 LinearToLinear( in vec4 value ) {
	return value;
}
vec4 LinearTosRGB( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}`,Oge=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 envColor = textureCubeUV( envMap, reflectVec, 0.0 );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,Rge=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
	
#endif`,Lge=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,zge=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) ||defined( PHONG )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,Nge=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) {
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,Fge=`#ifdef USE_FOG
	vFogDepth = - mvPosition.z;
#endif`,jge=`#ifdef USE_FOG
	varying float vFogDepth;
#endif`,Bge=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, vFogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,Uge=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float vFogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,Vge=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return vec3( texture2D( gradientMap, coord ).r );
	#else
		return ( coord.x < 0.7 ) ? vec3( 0.7 ) : vec3( 1.0 );
	#endif
}`,Hge=`#ifdef USE_LIGHTMAP
	vec4 lightMapTexel = texture2D( lightMap, vUv2 );
	vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
	reflectedLight.indirectDiffuse += lightMapIrradiance;
#endif`,Gge=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,Wge=`vec3 diffuse = vec3( 1.0 );
GeometricContext geometry;
geometry.position = mvPosition.xyz;
geometry.normal = normalize( transformedNormal );
geometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( -mvPosition.xyz );
GeometricContext backGeometry;
backGeometry.position = geometry.position;
backGeometry.normal = -geometry.normal;
backGeometry.viewDir = geometry.viewDir;
vLightFront = vec3( 0.0 );
vIndirectFront = vec3( 0.0 );
#ifdef DOUBLE_SIDED
	vLightBack = vec3( 0.0 );
	vIndirectBack = vec3( 0.0 );
#endif
IncidentLight directLight;
float dotNL;
vec3 directLightColor_Diffuse;
vIndirectFront += getAmbientLightIrradiance( ambientLightColor );
vIndirectFront += getLightProbeIrradiance( lightProbe, geometry.normal );
#ifdef DOUBLE_SIDED
	vIndirectBack += getAmbientLightIrradiance( ambientLightColor );
	vIndirectBack += getLightProbeIrradiance( lightProbe, backGeometry.normal );
#endif
#if NUM_POINT_LIGHTS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		getPointLightInfo( pointLights[ i ], geometry, directLight );
		dotNL = dot( geometry.normal, directLight.direction );
		directLightColor_Diffuse = directLight.color;
		vLightFront += saturate( dotNL ) * directLightColor_Diffuse;
		#ifdef DOUBLE_SIDED
			vLightBack += saturate( - dotNL ) * directLightColor_Diffuse;
		#endif
	}
	#pragma unroll_loop_end
#endif
#if NUM_SPOT_LIGHTS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		getSpotLightInfo( spotLights[ i ], geometry, directLight );
		dotNL = dot( geometry.normal, directLight.direction );
		directLightColor_Diffuse = directLight.color;
		vLightFront += saturate( dotNL ) * directLightColor_Diffuse;
		#ifdef DOUBLE_SIDED
			vLightBack += saturate( - dotNL ) * directLightColor_Diffuse;
		#endif
	}
	#pragma unroll_loop_end
#endif
#if NUM_DIR_LIGHTS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		getDirectionalLightInfo( directionalLights[ i ], geometry, directLight );
		dotNL = dot( geometry.normal, directLight.direction );
		directLightColor_Diffuse = directLight.color;
		vLightFront += saturate( dotNL ) * directLightColor_Diffuse;
		#ifdef DOUBLE_SIDED
			vLightBack += saturate( - dotNL ) * directLightColor_Diffuse;
		#endif
	}
	#pragma unroll_loop_end
#endif
#if NUM_HEMI_LIGHTS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
		vIndirectFront += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry.normal );
		#ifdef DOUBLE_SIDED
			vIndirectBack += getHemisphereLightIrradiance( hemisphereLights[ i ], backGeometry.normal );
		#endif
	}
	#pragma unroll_loop_end
#endif`,qge=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
uniform vec3 lightProbe[ 9 ];
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {
	vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	return irradiance;
}
float getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
	#if defined ( PHYSICALLY_CORRECT_LIGHTS )
		float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
		if ( cutoffDistance > 0.0 ) {
			distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
		}
		return distanceFalloff;
	#else
		if ( cutoffDistance > 0.0 && decayExponent > 0.0 ) {
			return pow( saturate( - lightDistance / cutoffDistance + 1.0 ), decayExponent );
		}
		return 1.0;
	#endif
}
float getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {
	return smoothstep( coneCosine, penumbraCosine, angleCosine );
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalLightInfo( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight light ) {
		light.color = directionalLight.color;
		light.direction = directionalLight.direction;
		light.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointLightInfo( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight light ) {
		vec3 lVector = pointLight.position - geometry.position;
		light.direction = normalize( lVector );
		float lightDistance = length( lVector );
		light.color = pointLight.color;
		light.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );
		light.visible = ( light.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotLightInfo( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight light ) {
		vec3 lVector = spotLight.position - geometry.position;
		light.direction = normalize( lVector );
		float angleCos = dot( light.direction, spotLight.direction );
		float spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );
		if ( spotAttenuation > 0.0 ) {
			float lightDistance = length( lVector );
			light.color = spotLight.color * spotAttenuation;
			light.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );
			light.visible = ( light.color != vec3( 0.0 ) );
		} else {
			light.color = vec3( 0.0 );
			light.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {
		float dotNL = dot( normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		return irradiance;
	}
#endif`,Kge=`#if defined( USE_ENVMAP )
	vec3 getIBLIrradiance( const in vec3 normal ) {
		#if defined( ENVMAP_TYPE_CUBE_UV )
			vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );
			return PI * envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {
		#if defined( ENVMAP_TYPE_CUBE_UV )
			vec3 reflectVec = reflect( - viewDir, normal );
			reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );
			reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );
			return envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
#endif`,Xge=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`,$ge=`varying vec3 vViewPosition;
struct ToonMaterial {
	vec3 diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon
#define Material_LightProbeLOD( material )	(0)`,Zge=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,Yge=`varying vec3 vViewPosition;
struct BlinnPhongMaterial {
	vec3 diffuseColor;
	vec3 specularColor;
	float specularShininess;
	float specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong
#define Material_LightProbeLOD( material )	(0)`,Jge=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );
vec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;
material.roughness = min( material.roughness, 1.0 );
#ifdef IOR
	#ifdef SPECULAR
		float specularIntensityFactor = specularIntensity;
		vec3 specularColorFactor = specularColor;
		#ifdef USE_SPECULARINTENSITYMAP
			specularIntensityFactor *= texture2D( specularIntensityMap, vUv ).a;
		#endif
		#ifdef USE_SPECULARCOLORMAP
			specularColorFactor *= texture2D( specularColorMap, vUv ).rgb;
		#endif
		material.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );
	#else
		float specularIntensityFactor = 1.0;
		vec3 specularColorFactor = vec3( 1.0 );
		material.specularF90 = 1.0;
	#endif
	material.specularColor = mix( min( pow2( ( ior - 1.0 ) / ( ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );
	material.specularF90 = 1.0;
#endif
#ifdef USE_CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	material.clearcoatF0 = vec3( 0.04 );
	material.clearcoatF90 = 1.0;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_IRIDESCENCE
	material.iridescence = iridescence;
	material.iridescenceIOR = iridescenceIOR;
	#ifdef USE_IRIDESCENCEMAP
		material.iridescence *= texture2D( iridescenceMap, vUv ).r;
	#endif
	#ifdef USE_IRIDESCENCE_THICKNESSMAP
		material.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vUv ).g + iridescenceThicknessMinimum;
	#else
		material.iridescenceThickness = iridescenceThicknessMaximum;
	#endif
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheenColor;
	#ifdef USE_SHEENCOLORMAP
		material.sheenColor *= texture2D( sheenColorMap, vUv ).rgb;
	#endif
	material.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );
	#ifdef USE_SHEENROUGHNESSMAP
		material.sheenRoughness *= texture2D( sheenRoughnessMap, vUv ).a;
	#endif
#endif`,Qge=`struct PhysicalMaterial {
	vec3 diffuseColor;
	float roughness;
	vec3 specularColor;
	float specularF90;
	#ifdef USE_CLEARCOAT
		float clearcoat;
		float clearcoatRoughness;
		vec3 clearcoatF0;
		float clearcoatF90;
	#endif
	#ifdef USE_IRIDESCENCE
		float iridescence;
		float iridescenceIOR;
		float iridescenceThickness;
		vec3 iridescenceFresnel;
		vec3 iridescenceF0;
	#endif
	#ifdef USE_SHEEN
		vec3 sheenColor;
		float sheenRoughness;
	#endif
};
vec3 clearcoatSpecular = vec3( 0.0 );
vec3 sheenSpecular = vec3( 0.0 );
float IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness) {
	float dotNV = saturate( dot( normal, viewDir ) );
	float r2 = roughness * roughness;
	float a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;
	float b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;
	float DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );
	return saturate( DG * RECIPROCAL_PI );
}
vec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );
	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );
	vec4 r = roughness * c0 + c1;
	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;
	vec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;
	return fab;
}
vec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	return specularColor * fab.x + specularF90 * fab.y;
}
#ifdef USE_IRIDESCENCE
void computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#else
void computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#endif
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	#ifdef USE_IRIDESCENCE
		vec3 Fr = mix( specularColor, iridescenceF0, iridescence );
	#else
		vec3 Fr = specularColor;
	#endif
	vec3 FssEss = Fr * fab.x + specularF90 * fab.y;
	float Ess = fab.x + fab.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometry.normal;
		vec3 viewDir = geometry.viewDir;
		vec3 position = geometry.position;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.roughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifdef USE_CLEARCOAT
		float dotNLcc = saturate( dot( geometry.clearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = dotNLcc * directLight.color;
		clearcoatSpecular += ccIrradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.clearcoatNormal, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecular += irradiance * BRDF_Sheen( directLight.direction, geometry.viewDir, geometry.normal, material.sheenColor, material.sheenRoughness );
	#endif
	#ifdef USE_IRIDESCENCE
		reflectedLight.directSpecular += irradiance * BRDF_GGX_Iridescence( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness );
	#else
		reflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularF90, material.roughness );
	#endif
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef USE_CLEARCOAT
		clearcoatSpecular += clearcoatRadiance * EnvironmentBRDF( geometry.clearcoatNormal, geometry.viewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecular += irradiance * material.sheenColor * IBLSheenBRDF( geometry.normal, geometry.viewDir, material.sheenRoughness );
	#endif
	vec3 singleScattering = vec3( 0.0 );
	vec3 multiScattering = vec3( 0.0 );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	#ifdef USE_IRIDESCENCE
		computeMultiscatteringIridescence( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );
	#else
		computeMultiscattering( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );
	#endif
	vec3 totalScattering = singleScattering + multiScattering;
	vec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );
	reflectedLight.indirectSpecular += radiance * singleScattering;
	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;
	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,e0e=`
GeometricContext geometry;
geometry.position = - vViewPosition;
geometry.normal = normal;
geometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
#ifdef USE_CLEARCOAT
	geometry.clearcoatNormal = clearcoatNormal;
#endif
#ifdef USE_IRIDESCENCE
float dotNVi = saturate( dot( normal, geometry.viewDir ) );
if ( material.iridescenceThickness == 0.0 ) {
	material.iridescence = 0.0;
} else {
	material.iridescence = saturate( material.iridescence );
}
if ( material.iridescence > 0.0 ) {
	material.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );
	material.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );
}
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointLightInfo( pointLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotLightInfo( spotLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalLightInfo( directionalLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	irradiance += getLightProbeIrradiance( lightProbe, geometry.normal );
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry.normal );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,t0e=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vUv2 );
		vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getIBLIrradiance( geometry.normal );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	radiance += getIBLRadiance( geometry.viewDir, geometry.normal, material.roughness );
	#ifdef USE_CLEARCOAT
		clearcoatRadiance += getIBLRadiance( geometry.viewDir, geometry.clearcoatNormal, material.clearcoatRoughness );
	#endif
#endif`,n0e=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometry, material, reflectedLight );
#endif`,r0e=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	gl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,i0e=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,o0e=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		varying float vFragDepth;
		varying float vIsPerspective;
	#else
		uniform float logDepthBufFC;
	#endif
#endif`,a0e=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		vFragDepth = 1.0 + gl_Position.w;
		vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
	#else
		if ( isPerspectiveMatrix( projectionMatrix ) ) {
			gl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;
			gl_Position.z *= gl_Position.w;
		}
	#endif
#endif`,s0e=`#ifdef USE_MAP
	vec4 sampledDiffuseColor = texture2D( map, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		sampledDiffuseColor = vec4( mix( pow( sampledDiffuseColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), sampledDiffuseColor.rgb * 0.0773993808, vec3( lessThanEqual( sampledDiffuseColor.rgb, vec3( 0.04045 ) ) ) ), sampledDiffuseColor.w );
	#endif
	diffuseColor *= sampledDiffuseColor;
#endif`,l0e=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,c0e=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
#endif
#ifdef USE_MAP
	diffuseColor *= texture2D( map, uv );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,u0e=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	uniform mat3 uvTransform;
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,d0e=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vUv );
	metalnessFactor *= texelMetalness.b;
#endif`,f0e=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,h0e=`#if defined( USE_MORPHCOLORS ) && defined( MORPHTARGETS_TEXTURE )
	vColor *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		#if defined( USE_COLOR_ALPHA )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];
		#elif defined( USE_COLOR )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];
		#endif
	}
#endif`,p0e=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
			if ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];
		}
	#else
		objectNormal += morphNormal0 * morphTargetInfluences[ 0 ];
		objectNormal += morphNormal1 * morphTargetInfluences[ 1 ];
		objectNormal += morphNormal2 * morphTargetInfluences[ 2 ];
		objectNormal += morphNormal3 * morphTargetInfluences[ 3 ];
	#endif
#endif`,m0e=`#ifdef USE_MORPHTARGETS
	uniform float morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		uniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];
		uniform sampler2DArray morphTargetsTexture;
		uniform ivec2 morphTargetsTextureSize;
		vec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {
			int texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;
			int y = texelIndex / morphTargetsTextureSize.x;
			int x = texelIndex - y * morphTargetsTextureSize.x;
			ivec3 morphUV = ivec3( x, y, morphTargetIndex );
			return texelFetch( morphTargetsTexture, morphUV, 0 );
		}
	#else
		#ifndef USE_MORPHNORMALS
			uniform float morphTargetInfluences[ 8 ];
		#else
			uniform float morphTargetInfluences[ 4 ];
		#endif
	#endif
#endif`,g0e=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
			if ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];
		}
	#else
		transformed += morphTarget0 * morphTargetInfluences[ 0 ];
		transformed += morphTarget1 * morphTargetInfluences[ 1 ];
		transformed += morphTarget2 * morphTargetInfluences[ 2 ];
		transformed += morphTarget3 * morphTargetInfluences[ 3 ];
		#ifndef USE_MORPHNORMALS
			transformed += morphTarget4 * morphTargetInfluences[ 4 ];
			transformed += morphTarget5 * morphTargetInfluences[ 5 ];
			transformed += morphTarget6 * morphTargetInfluences[ 6 ];
			transformed += morphTarget7 * morphTargetInfluences[ 7 ];
		#endif
	#endif
#endif`,v0e=`float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;
#ifdef FLAT_SHADED
	vec3 fdx = vec3( dFdx( vViewPosition.x ), dFdx( vViewPosition.y ), dFdx( vViewPosition.z ) );
	vec3 fdy = vec3( dFdy( vViewPosition.x ), dFdy( vViewPosition.y ), dFdy( vViewPosition.z ) );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	#ifdef USE_TANGENT
		vec3 tangent = normalize( vTangent );
		vec3 bitangent = normalize( vBitangent );
		#ifdef DOUBLE_SIDED
			tangent = tangent * faceDirection;
			bitangent = bitangent * faceDirection;
		#endif
		#if defined( TANGENTSPACE_NORMALMAP ) || defined( USE_CLEARCOAT_NORMALMAP )
			mat3 vTBN = mat3( tangent, bitangent, normal );
		#endif
	#endif
#endif
vec3 geometryNormal = normal;`,y0e=`#ifdef OBJECTSPACE_NORMALMAP
	normal = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( TANGENTSPACE_NORMALMAP )
	vec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	#ifdef USE_TANGENT
		normal = normalize( vTBN * mapN );
	#else
		normal = perturbNormal2Arb( - vViewPosition, normal, mapN, faceDirection );
	#endif
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );
#endif`,b0e=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,_0e=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,x0e=`#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif`,w0e=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef OBJECTSPACE_NORMALMAP
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( TANGENTSPACE_NORMALMAP ) || defined ( USE_CLEARCOAT_NORMALMAP ) )
	vec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm, vec3 mapN, float faceDirection ) {
		vec3 q0 = vec3( dFdx( eye_pos.x ), dFdx( eye_pos.y ), dFdx( eye_pos.z ) );
		vec3 q1 = vec3( dFdy( eye_pos.x ), dFdy( eye_pos.y ), dFdy( eye_pos.z ) );
		vec2 st0 = dFdx( vUv.st );
		vec2 st1 = dFdy( vUv.st );
		vec3 N = surf_norm;
		vec3 q1perp = cross( q1, N );
		vec3 q0perp = cross( N, q0 );
		vec3 T = q1perp * st0.x + q0perp * st1.x;
		vec3 B = q1perp * st0.y + q0perp * st1.y;
		float det = max( dot( T, T ), dot( B, B ) );
		float scale = ( det == 0.0 ) ? 0.0 : faceDirection * inversesqrt( det );
		return normalize( T * ( mapN.x * scale ) + B * ( mapN.y * scale ) + N * mapN.z );
	}
#endif`,S0e=`#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal = geometryNormal;
#endif`,E0e=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	#ifdef USE_TANGENT
		clearcoatNormal = normalize( vTBN * clearcoatMapN );
	#else
		clearcoatNormal = perturbNormal2Arb( - vViewPosition, clearcoatNormal, clearcoatMapN, faceDirection );
	#endif
#endif`,k0e=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif`,T0e=`#ifdef USE_IRIDESCENCEMAP
	uniform sampler2D iridescenceMap;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform sampler2D iridescenceThicknessMap;
#endif`,M0e=`#ifdef OPAQUE
diffuseColor.a = 1.0;
#endif
#ifdef USE_TRANSMISSION
diffuseColor.a *= transmissionAlpha + 0.1;
#endif
gl_FragColor = vec4( outgoingLight, diffuseColor.a );`,P0e=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;
const vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );
const vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );
const float ShiftRight8 = 1. / 256.;
vec4 packDepthToRGBA( const in float v ) {
	vec4 r = vec4( fract( v * PackFactors ), v );
	r.yzw -= r.xyz * ShiftRight8;	return r * PackUpscale;
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors );
}
vec4 pack2HalfToRGBA( vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );
}
vec2 unpackRGBATo2Half( vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {
	return linearClipZ * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * invClipZ - far );
}`,C0e=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,A0e=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,I0e=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,D0e=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,O0e=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vUv );
	roughnessFactor *= texelRoughness.g;
#endif`,R0e=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,L0e=`#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		varying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {
		return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );
	}
	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {
		return unpackRGBATo2Half( texture2D( shadow, uv ) );
	}
	float VSMShadow (sampler2D shadow, vec2 uv, float compare ){
		float occlusion = 1.0;
		vec2 distribution = texture2DDistribution( shadow, uv );
		float hard_shadow = step( compare , distribution.x );
		if (hard_shadow != 1.0 ) {
			float distance = compare - distribution.x ;
			float variance = max( 0.00000, distribution.y * distribution.y );
			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );
		}
		return occlusion;
	}
	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
		float shadow = 1.0;
		shadowCoord.xyz /= shadowCoord.w;
		shadowCoord.z += shadowBias;
		bvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );
		bool inFrustum = all( inFrustumVec );
		bvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );
		bool frustumTest = all( frustumTestVec );
		if ( frustumTest ) {
		#if defined( SHADOWMAP_TYPE_PCF )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			float dx2 = dx0 / 2.0;
			float dy2 = dy0 / 2.0;
			float dx3 = dx1 / 2.0;
			float dy3 = dy1 / 2.0;
			shadow = (
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 17.0 );
		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx = texelSize.x;
			float dy = texelSize.y;
			vec2 uv = shadowCoord.xy;
			vec2 f = fract( uv * shadowMapSize + 0.5 );
			uv -= f * texelSize;
			shadow = (
				texture2DCompare( shadowMap, uv, shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ), 
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ), 
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ), 
					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ), 
					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ), 
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
						  f.x ),
					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ), 
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
						  f.x ),
					 f.y )
			) * ( 1.0 / 9.0 );
		#elif defined( SHADOWMAP_TYPE_VSM )
			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );
		#else
			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );
		#endif
		}
		return shadow;
	}
	vec2 cubeToUV( vec3 v, float texelSizeY ) {
		vec3 absV = abs( v );
		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
		absV *= scaleToCube;
		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );
		vec2 planar = v.xy;
		float almostATexel = 1.5 * texelSizeY;
		float almostOne = 1.0 - almostATexel;
		if ( absV.z >= almostOne ) {
			if ( v.z > 0.0 )
				planar.x = 4.0 - v.x;
		} else if ( absV.x >= almostOne ) {
			float signX = sign( v.x );
			planar.x = v.z * signX + 2.0 * signX;
		} else if ( absV.y >= almostOne ) {
			float signY = sign( v.y );
			planar.x = v.x + 2.0 * signY + 2.0;
			planar.y = v.z * signY - 2.0;
		}
		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );
	}
	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );
		vec3 lightToPosition = shadowCoord.xyz;
		float dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );		dp += shadowBias;
		vec3 bd3D = normalize( lightToPosition );
		#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )
			vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;
			return (
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )
			) * ( 1.0 / 9.0 );
		#else
			return texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );
		#endif
	}
#endif`,z0e=`#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform mat4 spotShadowMatrix[ NUM_SPOT_LIGHT_SHADOWS ];
		varying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,N0e=`#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0 || NUM_SPOT_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0
		vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		vec4 shadowWorldPosition;
	#endif
	#if NUM_DIR_LIGHT_SHADOWS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
		vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias, 0 );
		vSpotShadowCoord[ i ] = spotShadowMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
		vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
	#endif
#endif`,F0e=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,j0e=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,B0e=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	uniform highp sampler2D boneTexture;
	uniform int boneTextureSize;
	mat4 getBoneMatrix( const in float i ) {
		float j = i * 4.0;
		float x = mod( j, float( boneTextureSize ) );
		float y = floor( j / float( boneTextureSize ) );
		float dx = 1.0 / float( boneTextureSize );
		float dy = 1.0 / float( boneTextureSize );
		y = dy * ( y + 0.5 );
		vec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );
		vec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );
		vec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );
		vec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );
		mat4 bone = mat4( v1, v2, v3, v4 );
		return bone;
	}
#endif`,U0e=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,V0e=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,H0e=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,G0e=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,W0e=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,q0e=`#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
	return toneMappingExposure * color;
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 OptimizedCineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	);
	const mat3 ACESOutputMat = mat3(
		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605,  1.07602 )
	);
	color *= toneMappingExposure / 0.6;
	color = ACESInputMat * color;
	color = RRTAndODTFit( color );
	color = ACESOutputMat * color;
	return saturate( color );
}
vec3 CustomToneMapping( vec3 color ) { return color; }`,K0e=`#ifdef USE_TRANSMISSION
	float transmissionAlpha = 1.0;
	float transmissionFactor = transmission;
	float thicknessFactor = thickness;
	#ifdef USE_TRANSMISSIONMAP
		transmissionFactor *= texture2D( transmissionMap, vUv ).r;
	#endif
	#ifdef USE_THICKNESSMAP
		thicknessFactor *= texture2D( thicknessMap, vUv ).g;
	#endif
	vec3 pos = vWorldPosition;
	vec3 v = normalize( cameraPosition - pos );
	vec3 n = inverseTransformDirection( normal, viewMatrix );
	vec4 transmission = getIBLVolumeRefraction(
		n, v, roughnessFactor, material.diffuseColor, material.specularColor, material.specularF90,
		pos, modelMatrix, viewMatrix, projectionMatrix, ior, thicknessFactor,
		attenuationColor, attenuationDistance );
	totalDiffuse = mix( totalDiffuse, transmission.rgb, transmissionFactor );
	transmissionAlpha = mix( transmissionAlpha, transmission.a, transmissionFactor );
#endif`,X0e=`#ifdef USE_TRANSMISSION
	uniform float transmission;
	uniform float thickness;
	uniform float attenuationDistance;
	uniform vec3 attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		uniform sampler2D transmissionMap;
	#endif
	#ifdef USE_THICKNESSMAP
		uniform sampler2D thicknessMap;
	#endif
	uniform vec2 transmissionSamplerSize;
	uniform sampler2D transmissionSamplerMap;
	uniform mat4 modelMatrix;
	uniform mat4 projectionMatrix;
	varying vec3 vWorldPosition;
	vec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {
		vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );
		vec3 modelScale;
		modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
		return normalize( refractionVector ) * thickness * modelScale;
	}
	float applyIorToRoughness( const in float roughness, const in float ior ) {
		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
	}
	vec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {
		float framebufferLod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
		#ifdef texture2DLodEXT
			return texture2DLodEXT( transmissionSamplerMap, fragCoord.xy, framebufferLod );
		#else
			return texture2D( transmissionSamplerMap, fragCoord.xy, framebufferLod );
		#endif
	}
	vec3 applyVolumeAttenuation( const in vec3 radiance, const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {
		if ( attenuationDistance == 0.0 ) {
			return radiance;
		} else {
			vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;
			vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );			return transmittance * radiance;
		}
	}
	vec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,
		const in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,
		const in mat4 viewMatrix, const in mat4 projMatrix, const in float ior, const in float thickness,
		const in vec3 attenuationColor, const in float attenuationDistance ) {
		vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
		vec3 refractedRayExit = position + transmissionRay;
		vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
		vec2 refractionCoords = ndcPos.xy / ndcPos.w;
		refractionCoords += 1.0;
		refractionCoords /= 2.0;
		vec4 transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );
		vec3 attenuatedColor = applyVolumeAttenuation( transmittedLight.rgb, length( transmissionRay ), attenuationColor, attenuationDistance );
		vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );
		return vec4( ( 1.0 - F ) * attenuatedColor * diffuseColor, transmittedLight.a );
	}
#endif`,$0e=`#if ( defined( USE_UV ) && ! defined( UVS_VERTEX_ONLY ) )
	varying vec2 vUv;
#endif`,Z0e=`#ifdef USE_UV
	#ifdef UVS_VERTEX_ONLY
		vec2 vUv;
	#else
		varying vec2 vUv;
	#endif
	uniform mat3 uvTransform;
#endif`,Y0e=`#ifdef USE_UV
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
#endif`,J0e=`#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
	varying vec2 vUv2;
#endif`,Q0e=`#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
	attribute vec2 uv2;
	varying vec2 vUv2;
	uniform mat3 uv2Transform;
#endif`,eve=`#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
	vUv2 = ( uv2Transform * vec3( uv2, 1 ) ).xy;
#endif`,tve=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION )
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`;const nve=`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,rve=`uniform sampler2D t2D;
varying vec2 vUv;
void main() {
	gl_FragColor = texture2D( t2D, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		gl_FragColor = vec4( mix( pow( gl_FragColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), gl_FragColor.rgb * 0.0773993808, vec3( lessThanEqual( gl_FragColor.rgb, vec3( 0.04045 ) ) ) ), gl_FragColor.w );
	#endif
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,ive=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,ove=`#include <envmap_common_pars_fragment>
uniform float opacity;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	vec3 vReflect = vWorldDirection;
	#include <envmap_fragment>
	gl_FragColor = envColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,ave=`#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,sve=`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <logdepthbuf_fragment>
	float fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#endif
}`,lve=`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,cve=`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = packDepthToRGBA( dist );
}`,uve=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,dve=`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	gl_FragColor = texture2D( tEquirect, sampleUV );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,fve=`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,hve=`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,pve=`#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinbase_vertex>
		#include <skinnormal_vertex>
		#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,mve=`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <cube_uv_reflection_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vUv2 );
		reflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,gve=`#define LAMBERT
varying vec3 vLightFront;
varying vec3 vIndirectFront;
#ifdef DOUBLE_SIDED
	varying vec3 vLightBack;
	varying vec3 vIndirectBack;
#endif
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <envmap_pars_vertex>
#include <bsdfs>
#include <lights_pars_begin>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <lights_lambert_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,vve=`uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
varying vec3 vLightFront;
varying vec3 vIndirectFront;
#ifdef DOUBLE_SIDED
	varying vec3 vLightBack;
	varying vec3 vIndirectBack;
#endif
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <cube_uv_reflection_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <fog_pars_fragment>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	#include <emissivemap_fragment>
	#ifdef DOUBLE_SIDED
		reflectedLight.indirectDiffuse += ( gl_FrontFacing ) ? vIndirectFront : vIndirectBack;
	#else
		reflectedLight.indirectDiffuse += vIndirectFront;
	#endif
	#include <lightmap_fragment>
	reflectedLight.indirectDiffuse *= BRDF_Lambert( diffuseColor.rgb );
	#ifdef DOUBLE_SIDED
		reflectedLight.directDiffuse = ( gl_FrontFacing ) ? vLightFront : vLightBack;
	#else
		reflectedLight.directDiffuse = vLightFront;
	#endif
	reflectedLight.directDiffuse *= BRDF_Lambert( diffuseColor.rgb ) * getShadowMask();
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,yve=`#define MATCAP
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,bve=`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <fog_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
	#else
		vec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,_ve=`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )
	varying vec3 vViewPosition;
#endif
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )
	vViewPosition = - mvPosition.xyz;
#endif
}`,xve=`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )
	varying vec3 vViewPosition;
#endif
#include <packing>
#include <uv_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( packNormalToRGB( normal ), opacity );
	#ifdef OPAQUE
		gl_FragColor.a = 1.0;
	#endif
}`,wve=`#define PHONG
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,Sve=`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <cube_uv_reflection_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,Eve=`#define STANDARD
varying vec3 vViewPosition;
#ifdef USE_TRANSMISSION
	varying vec3 vWorldPosition;
#endif
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
#ifdef USE_TRANSMISSION
	vWorldPosition = worldPosition.xyz;
#endif
}`,kve=`#define STANDARD
#ifdef PHYSICAL
	#define IOR
	#define SPECULAR
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef IOR
	uniform float ior;
#endif
#ifdef SPECULAR
	uniform float specularIntensity;
	uniform vec3 specularColor;
	#ifdef USE_SPECULARINTENSITYMAP
		uniform sampler2D specularIntensityMap;
	#endif
	#ifdef USE_SPECULARCOLORMAP
		uniform sampler2D specularColorMap;
	#endif
#endif
#ifdef USE_CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_IRIDESCENCE
	uniform float iridescence;
	uniform float iridescenceIOR;
	uniform float iridescenceThicknessMinimum;
	uniform float iridescenceThicknessMaximum;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheenColor;
	uniform float sheenRoughness;
	#ifdef USE_SHEENCOLORMAP
		uniform sampler2D sheenColorMap;
	#endif
	#ifdef USE_SHEENROUGHNESSMAP
		uniform sampler2D sheenRoughnessMap;
	#endif
#endif
varying vec3 vViewPosition;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <bsdfs>
#include <iridescence_fragment>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_physical_pars_fragment>
#include <transmission_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <iridescence_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;
	vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;
	#include <transmission_fragment>
	vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;
	#ifdef USE_SHEEN
		float sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );
		outgoingLight = outgoingLight * sheenEnergyComp + sheenSpecular;
	#endif
	#ifdef USE_CLEARCOAT
		float dotNVcc = saturate( dot( geometry.clearcoatNormal, geometry.viewDir ) );
		vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );
		outgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + clearcoatSpecular * material.clearcoat;
	#endif
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,Tve=`#define TOON
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,Mve=`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,Pve=`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,Cve=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <alphatest_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,Ave=`#include <common>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,Ive=`uniform vec3 color;
uniform float opacity;
#include <common>
#include <packing>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
}`,Dve=`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );
	vec2 scale;
	scale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );
	scale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,Ove=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
}`,Xn={alphamap_fragment:oge,alphamap_pars_fragment:age,alphatest_fragment:sge,alphatest_pars_fragment:lge,aomap_fragment:cge,aomap_pars_fragment:uge,begin_vertex:dge,beginnormal_vertex:fge,bsdfs:hge,iridescence_fragment:pge,bumpmap_pars_fragment:mge,clipping_planes_fragment:gge,clipping_planes_pars_fragment:vge,clipping_planes_pars_vertex:yge,clipping_planes_vertex:bge,color_fragment:_ge,color_pars_fragment:xge,color_pars_vertex:wge,color_vertex:Sge,common:Ege,cube_uv_reflection_fragment:kge,defaultnormal_vertex:Tge,displacementmap_pars_vertex:Mge,displacementmap_vertex:Pge,emissivemap_fragment:Cge,emissivemap_pars_fragment:Age,encodings_fragment:Ige,encodings_pars_fragment:Dge,envmap_fragment:Oge,envmap_common_pars_fragment:Rge,envmap_pars_fragment:Lge,envmap_pars_vertex:zge,envmap_physical_pars_fragment:Kge,envmap_vertex:Nge,fog_vertex:Fge,fog_pars_vertex:jge,fog_fragment:Bge,fog_pars_fragment:Uge,gradientmap_pars_fragment:Vge,lightmap_fragment:Hge,lightmap_pars_fragment:Gge,lights_lambert_vertex:Wge,lights_pars_begin:qge,lights_toon_fragment:Xge,lights_toon_pars_fragment:$ge,lights_phong_fragment:Zge,lights_phong_pars_fragment:Yge,lights_physical_fragment:Jge,lights_physical_pars_fragment:Qge,lights_fragment_begin:e0e,lights_fragment_maps:t0e,lights_fragment_end:n0e,logdepthbuf_fragment:r0e,logdepthbuf_pars_fragment:i0e,logdepthbuf_pars_vertex:o0e,logdepthbuf_vertex:a0e,map_fragment:s0e,map_pars_fragment:l0e,map_particle_fragment:c0e,map_particle_pars_fragment:u0e,metalnessmap_fragment:d0e,metalnessmap_pars_fragment:f0e,morphcolor_vertex:h0e,morphnormal_vertex:p0e,morphtarget_pars_vertex:m0e,morphtarget_vertex:g0e,normal_fragment_begin:v0e,normal_fragment_maps:y0e,normal_pars_fragment:b0e,normal_pars_vertex:_0e,normal_vertex:x0e,normalmap_pars_fragment:w0e,clearcoat_normal_fragment_begin:S0e,clearcoat_normal_fragment_maps:E0e,clearcoat_pars_fragment:k0e,iridescence_pars_fragment:T0e,output_fragment:M0e,packing:P0e,premultiplied_alpha_fragment:C0e,project_vertex:A0e,dithering_fragment:I0e,dithering_pars_fragment:D0e,roughnessmap_fragment:O0e,roughnessmap_pars_fragment:R0e,shadowmap_pars_fragment:L0e,shadowmap_pars_vertex:z0e,shadowmap_vertex:N0e,shadowmask_pars_fragment:F0e,skinbase_vertex:j0e,skinning_pars_vertex:B0e,skinning_vertex:U0e,skinnormal_vertex:V0e,specularmap_fragment:H0e,specularmap_pars_fragment:G0e,tonemapping_fragment:W0e,tonemapping_pars_fragment:q0e,transmission_fragment:K0e,transmission_pars_fragment:X0e,uv_pars_fragment:$0e,uv_pars_vertex:Z0e,uv_vertex:Y0e,uv2_pars_fragment:J0e,uv2_pars_vertex:Q0e,uv2_vertex:eve,worldpos_vertex:tve,background_vert:nve,background_frag:rve,cube_vert:ive,cube_frag:ove,depth_vert:ave,depth_frag:sve,distanceRGBA_vert:lve,distanceRGBA_frag:cve,equirect_vert:uve,equirect_frag:dve,linedashed_vert:fve,linedashed_frag:hve,meshbasic_vert:pve,meshbasic_frag:mve,meshlambert_vert:gve,meshlambert_frag:vve,meshmatcap_vert:yve,meshmatcap_frag:bve,meshnormal_vert:_ve,meshnormal_frag:xve,meshphong_vert:wve,meshphong_frag:Sve,meshphysical_vert:Eve,meshphysical_frag:kve,meshtoon_vert:Tve,meshtoon_frag:Mve,points_vert:Pve,points_frag:Cve,shadow_vert:Ave,shadow_frag:Ive,sprite_vert:Dve,sprite_frag:Ove},Zt={common:{diffuse:{value:new Fn(16777215)},opacity:{value:1},map:{value:null},uvTransform:{value:new Qa},uv2Transform:{value:new Qa},alphaMap:{value:null},alphaTest:{value:0}},specularmap:{specularMap:{value:null}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new Rn(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new Fn(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotShadowMap:{value:[]},spotShadowMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new Fn(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new Qa}},sprite:{diffuse:{value:new Fn(16777215)},opacity:{value:1},center:{value:new Rn(.5,.5)},rotation:{value:0},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new Qa}}},Ul={basic:{uniforms:mo([Zt.common,Zt.specularmap,Zt.envmap,Zt.aomap,Zt.lightmap,Zt.fog]),vertexShader:Xn.meshbasic_vert,fragmentShader:Xn.meshbasic_frag},lambert:{uniforms:mo([Zt.common,Zt.specularmap,Zt.envmap,Zt.aomap,Zt.lightmap,Zt.emissivemap,Zt.fog,Zt.lights,{emissive:{value:new Fn(0)}}]),vertexShader:Xn.meshlambert_vert,fragmentShader:Xn.meshlambert_frag},phong:{uniforms:mo([Zt.common,Zt.specularmap,Zt.envmap,Zt.aomap,Zt.lightmap,Zt.emissivemap,Zt.bumpmap,Zt.normalmap,Zt.displacementmap,Zt.fog,Zt.lights,{emissive:{value:new Fn(0)},specular:{value:new Fn(1118481)},shininess:{value:30}}]),vertexShader:Xn.meshphong_vert,fragmentShader:Xn.meshphong_frag},standard:{uniforms:mo([Zt.common,Zt.envmap,Zt.aomap,Zt.lightmap,Zt.emissivemap,Zt.bumpmap,Zt.normalmap,Zt.displacementmap,Zt.roughnessmap,Zt.metalnessmap,Zt.fog,Zt.lights,{emissive:{value:new Fn(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:Xn.meshphysical_vert,fragmentShader:Xn.meshphysical_frag},toon:{uniforms:mo([Zt.common,Zt.aomap,Zt.lightmap,Zt.emissivemap,Zt.bumpmap,Zt.normalmap,Zt.displacementmap,Zt.gradientmap,Zt.fog,Zt.lights,{emissive:{value:new Fn(0)}}]),vertexShader:Xn.meshtoon_vert,fragmentShader:Xn.meshtoon_frag},matcap:{uniforms:mo([Zt.common,Zt.bumpmap,Zt.normalmap,Zt.displacementmap,Zt.fog,{matcap:{value:null}}]),vertexShader:Xn.meshmatcap_vert,fragmentShader:Xn.meshmatcap_frag},points:{uniforms:mo([Zt.points,Zt.fog]),vertexShader:Xn.points_vert,fragmentShader:Xn.points_frag},dashed:{uniforms:mo([Zt.common,Zt.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:Xn.linedashed_vert,fragmentShader:Xn.linedashed_frag},depth:{uniforms:mo([Zt.common,Zt.displacementmap]),vertexShader:Xn.depth_vert,fragmentShader:Xn.depth_frag},normal:{uniforms:mo([Zt.common,Zt.bumpmap,Zt.normalmap,Zt.displacementmap,{opacity:{value:1}}]),vertexShader:Xn.meshnormal_vert,fragmentShader:Xn.meshnormal_frag},sprite:{uniforms:mo([Zt.sprite,Zt.fog]),vertexShader:Xn.sprite_vert,fragmentShader:Xn.sprite_frag},background:{uniforms:{uvTransform:{value:new Qa},t2D:{value:null}},vertexShader:Xn.background_vert,fragmentShader:Xn.background_frag},cube:{uniforms:mo([Zt.envmap,{opacity:{value:1}}]),vertexShader:Xn.cube_vert,fragmentShader:Xn.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:Xn.equirect_vert,fragmentShader:Xn.equirect_frag},distanceRGBA:{uniforms:mo([Zt.common,Zt.displacementmap,{referencePosition:{value:new Ne},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:Xn.distanceRGBA_vert,fragmentShader:Xn.distanceRGBA_frag},shadow:{uniforms:mo([Zt.lights,Zt.fog,{color:{value:new Fn(0)},opacity:{value:1}}]),vertexShader:Xn.shadow_vert,fragmentShader:Xn.shadow_frag}};Ul.physical={uniforms:mo([Ul.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatNormalScale:{value:new Rn(1,1)},clearcoatNormalMap:{value:null},iridescence:{value:0},iridescenceMap:{value:null},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},sheen:{value:0},sheenColor:{value:new Fn(0)},sheenColorMap:{value:null},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},transmission:{value:0},transmissionMap:{value:null},transmissionSamplerSize:{value:new Rn},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},attenuationDistance:{value:0},attenuationColor:{value:new Fn(0)},specularIntensity:{value:1},specularIntensityMap:{value:null},specularColor:{value:new Fn(1,1,1)},specularColorMap:{value:null}}]),vertexShader:Xn.meshphysical_vert,fragmentShader:Xn.meshphysical_frag};function Rve(w,t,i,l,d,g){const _=new Fn(0);let b=d===!0?0:1,M,I,F=null,j=0,B=null;function K(X,O){let W=!1,we=O.isScene===!0?O.background:null;we&&we.isTexture&&(we=t.get(we));const R=w.xr,se=R.getSession&&R.getSession();se&&se.environmentBlendMode==="additive"&&(we=null),we===null?te(_,b):we&&we.isColor&&(te(we,1),W=!0),(w.autoClear||W)&&w.clear(w.autoClearColor,w.autoClearDepth,w.autoClearStencil),we&&(we.isCubeTexture||we.mapping===cP)?(I===void 0&&(I=new vo(new z0(1,1,1),new ep({name:"BackgroundCubeMaterial",uniforms:D0(Ul.cube.uniforms),vertexShader:Ul.cube.vertexShader,fragmentShader:Ul.cube.fragmentShader,side:Xs,depthTest:!1,depthWrite:!1,fog:!1})),I.geometry.deleteAttribute("normal"),I.geometry.deleteAttribute("uv"),I.onBeforeRender=function(me,ze,ee){this.matrixWorld.copyPosition(ee.matrixWorld)},Object.defineProperty(I.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),l.update(I)),I.material.uniforms.envMap.value=we,I.material.uniforms.flipEnvMap.value=we.isCubeTexture&&we.isRenderTargetTexture===!1?-1:1,(F!==we||j!==we.version||B!==w.toneMapping)&&(I.material.needsUpdate=!0,F=we,j=we.version,B=w.toneMapping),I.layers.enableAll(),X.unshift(I,I.geometry,I.material,0,0,null)):we&&we.isTexture&&(M===void 0&&(M=new vo(new uP(2,2),new ep({name:"BackgroundMaterial",uniforms:D0(Ul.background.uniforms),vertexShader:Ul.background.vertexShader,fragmentShader:Ul.background.fragmentShader,side:T0,depthTest:!1,depthWrite:!1,fog:!1})),M.geometry.deleteAttribute("normal"),Object.defineProperty(M.material,"map",{get:function(){return this.uniforms.t2D.value}}),l.update(M)),M.material.uniforms.t2D.value=we,we.matrixAutoUpdate===!0&&we.updateMatrix(),M.material.uniforms.uvTransform.value.copy(we.matrix),(F!==we||j!==we.version||B!==w.toneMapping)&&(M.material.needsUpdate=!0,F=we,j=we.version,B=w.toneMapping),M.layers.enableAll(),X.unshift(M,M.geometry,M.material,0,0,null))}function te(X,O){i.buffers.color.setClear(X.r,X.g,X.b,O,g)}return{getClearColor:function(){return _},setClearColor:function(X,O=1){_.set(X),b=O,te(_,b)},getClearAlpha:function(){return b},setClearAlpha:function(X){b=X,te(_,b)},render:K}}function Lve(w,t,i,l){const d=w.getParameter(34921),g=l.isWebGL2?null:t.get("OES_vertex_array_object"),_=l.isWebGL2||g!==null,b={},M=O(null);let I=M,F=!1;function j(Ke,_e,Qe,Ge,yt){let ft=!1;if(_){const gt=X(Ge,Qe,_e);I!==gt&&(I=gt,K(I.object)),ft=W(Ke,Ge,Qe,yt),ft&&we(Ke,Ge,Qe,yt)}else{const gt=_e.wireframe===!0;(I.geometry!==Ge.id||I.program!==Qe.id||I.wireframe!==gt)&&(I.geometry=Ge.id,I.program=Qe.id,I.wireframe=gt,ft=!0)}yt!==null&&i.update(yt,34963),(ft||F)&&(F=!1,fe(Ke,_e,Qe,Ge),yt!==null&&w.bindBuffer(34963,i.get(yt).buffer))}function B(){return l.isWebGL2?w.createVertexArray():g.createVertexArrayOES()}function K(Ke){return l.isWebGL2?w.bindVertexArray(Ke):g.bindVertexArrayOES(Ke)}function te(Ke){return l.isWebGL2?w.deleteVertexArray(Ke):g.deleteVertexArrayOES(Ke)}function X(Ke,_e,Qe){const Ge=Qe.wireframe===!0;let yt=b[Ke.id];yt===void 0&&(yt={},b[Ke.id]=yt);let ft=yt[_e.id];ft===void 0&&(ft={},yt[_e.id]=ft);let gt=ft[Ge];return gt===void 0&&(gt=O(B()),ft[Ge]=gt),gt}function O(Ke){const _e=[],Qe=[],Ge=[];for(let yt=0;yt<d;yt++)_e[yt]=0,Qe[yt]=0,Ge[yt]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:_e,enabledAttributes:Qe,attributeDivisors:Ge,object:Ke,attributes:{},index:null}}function W(Ke,_e,Qe,Ge){const yt=I.attributes,ft=_e.attributes;let gt=0;const zt=Qe.getAttributes();for(const kt in zt)if(zt[kt].location>=0){const Yt=yt[kt];let Jt=ft[kt];if(Jt===void 0&&(kt==="instanceMatrix"&&Ke.instanceMatrix&&(Jt=Ke.instanceMatrix),kt==="instanceColor"&&Ke.instanceColor&&(Jt=Ke.instanceColor)),Yt===void 0||Yt.attribute!==Jt||Jt&&Yt.data!==Jt.data)return!0;gt++}return I.attributesNum!==gt||I.index!==Ge}function we(Ke,_e,Qe,Ge){const yt={},ft=_e.attributes;let gt=0;const zt=Qe.getAttributes();for(const kt in zt)if(zt[kt].location>=0){let Yt=ft[kt];Yt===void 0&&(kt==="instanceMatrix"&&Ke.instanceMatrix&&(Yt=Ke.instanceMatrix),kt==="instanceColor"&&Ke.instanceColor&&(Yt=Ke.instanceColor));const Jt={};Jt.attribute=Yt,Yt&&Yt.data&&(Jt.data=Yt.data),yt[kt]=Jt,gt++}I.attributes=yt,I.attributesNum=gt,I.index=Ge}function R(){const Ke=I.newAttributes;for(let _e=0,Qe=Ke.length;_e<Qe;_e++)Ke[_e]=0}function se(Ke){me(Ke,0)}function me(Ke,_e){const Qe=I.newAttributes,Ge=I.enabledAttributes,yt=I.attributeDivisors;Qe[Ke]=1,Ge[Ke]===0&&(w.enableVertexAttribArray(Ke),Ge[Ke]=1),yt[Ke]!==_e&&((l.isWebGL2?w:t.get("ANGLE_instanced_arrays"))[l.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](Ke,_e),yt[Ke]=_e)}function ze(){const Ke=I.newAttributes,_e=I.enabledAttributes;for(let Qe=0,Ge=_e.length;Qe<Ge;Qe++)_e[Qe]!==Ke[Qe]&&(w.disableVertexAttribArray(Qe),_e[Qe]=0)}function ee(Ke,_e,Qe,Ge,yt,ft){l.isWebGL2===!0&&(Qe===5124||Qe===5125)?w.vertexAttribIPointer(Ke,_e,Qe,yt,ft):w.vertexAttribPointer(Ke,_e,Qe,Ge,yt,ft)}function fe(Ke,_e,Qe,Ge){if(l.isWebGL2===!1&&(Ke.isInstancedMesh||Ge.isInstancedBufferGeometry)&&t.get("ANGLE_instanced_arrays")===null)return;R();const yt=Ge.attributes,ft=Qe.getAttributes(),gt=_e.defaultAttributeValues;for(const zt in ft){const kt=ft[zt];if(kt.location>=0){let Rt=yt[zt];if(Rt===void 0&&(zt==="instanceMatrix"&&Ke.instanceMatrix&&(Rt=Ke.instanceMatrix),zt==="instanceColor"&&Ke.instanceColor&&(Rt=Ke.instanceColor)),Rt!==void 0){const Yt=Rt.normalized,Jt=Rt.itemSize,pt=i.get(Rt);if(pt===void 0)continue;const Yn=pt.buffer,An=pt.type,xn=pt.bytesPerElement;if(Rt.isInterleavedBufferAttribute){const Xt=Rt.data,Tn=Xt.stride,Ln=Rt.offset;if(Xt.isInstancedInterleavedBuffer){for(let hn=0;hn<kt.locationSize;hn++)me(kt.location+hn,Xt.meshPerAttribute);Ke.isInstancedMesh!==!0&&Ge._maxInstanceCount===void 0&&(Ge._maxInstanceCount=Xt.meshPerAttribute*Xt.count)}else for(let hn=0;hn<kt.locationSize;hn++)se(kt.location+hn);w.bindBuffer(34962,Yn);for(let hn=0;hn<kt.locationSize;hn++)ee(kt.location+hn,Jt/kt.locationSize,An,Yt,Tn*xn,(Ln+Jt/kt.locationSize*hn)*xn)}else{if(Rt.isInstancedBufferAttribute){for(let Xt=0;Xt<kt.locationSize;Xt++)me(kt.location+Xt,Rt.meshPerAttribute);Ke.isInstancedMesh!==!0&&Ge._maxInstanceCount===void 0&&(Ge._maxInstanceCount=Rt.meshPerAttribute*Rt.count)}else for(let Xt=0;Xt<kt.locationSize;Xt++)se(kt.location+Xt);w.bindBuffer(34962,Yn);for(let Xt=0;Xt<kt.locationSize;Xt++)ee(kt.location+Xt,Jt/kt.locationSize,An,Yt,Jt*xn,Jt/kt.locationSize*Xt*xn)}}else if(gt!==void 0){const Yt=gt[zt];if(Yt!==void 0)switch(Yt.length){case 2:w.vertexAttrib2fv(kt.location,Yt);break;case 3:w.vertexAttrib3fv(kt.location,Yt);break;case 4:w.vertexAttrib4fv(kt.location,Yt);break;default:w.vertexAttrib1fv(kt.location,Yt)}}}}ze()}function Te(){Tt();for(const Ke in b){const _e=b[Ke];for(const Qe in _e){const Ge=_e[Qe];for(const yt in Ge)te(Ge[yt].object),delete Ge[yt];delete _e[Qe]}delete b[Ke]}}function Y(Ke){if(b[Ke.id]===void 0)return;const _e=b[Ke.id];for(const Qe in _e){const Ge=_e[Qe];for(const yt in Ge)te(Ge[yt].object),delete Ge[yt];delete _e[Qe]}delete b[Ke.id]}function qe(Ke){for(const _e in b){const Qe=b[_e];if(Qe[Ke.id]===void 0)continue;const Ge=Qe[Ke.id];for(const yt in Ge)te(Ge[yt].object),delete Ge[yt];delete Qe[Ke.id]}}function Tt(){xt(),F=!0,I!==M&&(I=M,K(I.object))}function xt(){M.geometry=null,M.program=null,M.wireframe=!1}return{setup:j,reset:Tt,resetDefaultState:xt,dispose:Te,releaseStatesOfGeometry:Y,releaseStatesOfProgram:qe,initAttributes:R,enableAttribute:se,disableUnusedAttributes:ze}}function zve(w,t,i,l){const d=l.isWebGL2;let g;function _(I){g=I}function b(I,F){w.drawArrays(g,I,F),i.update(F,g,1)}function M(I,F,j){if(j===0)return;let B,K;if(d)B=w,K="drawArraysInstanced";else if(B=t.get("ANGLE_instanced_arrays"),K="drawArraysInstancedANGLE",B===null){console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}B[K](g,I,F,j),i.update(F,g,j)}this.setMode=_,this.render=b,this.renderInstances=M}function Nve(w,t,i){let l;function d(){if(l!==void 0)return l;if(t.has("EXT_texture_filter_anisotropic")===!0){const ee=t.get("EXT_texture_filter_anisotropic");l=w.getParameter(ee.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else l=0;return l}function g(ee){if(ee==="highp"){if(w.getShaderPrecisionFormat(35633,36338).precision>0&&w.getShaderPrecisionFormat(35632,36338).precision>0)return"highp";ee="mediump"}return ee==="mediump"&&w.getShaderPrecisionFormat(35633,36337).precision>0&&w.getShaderPrecisionFormat(35632,36337).precision>0?"mediump":"lowp"}const _=typeof WebGL2RenderingContext!="undefined"&&w instanceof WebGL2RenderingContext||typeof WebGL2ComputeRenderingContext!="undefined"&&w instanceof WebGL2ComputeRenderingContext;let b=i.precision!==void 0?i.precision:"highp";const M=g(b);M!==b&&(console.warn("THREE.WebGLRenderer:",b,"not supported, using",M,"instead."),b=M);const I=_||t.has("WEBGL_draw_buffers"),F=i.logarithmicDepthBuffer===!0,j=w.getParameter(34930),B=w.getParameter(35660),K=w.getParameter(3379),te=w.getParameter(34076),X=w.getParameter(34921),O=w.getParameter(36347),W=w.getParameter(36348),we=w.getParameter(36349),R=B>0,se=_||t.has("OES_texture_float"),me=R&&se,ze=_?w.getParameter(36183):0;return{isWebGL2:_,drawBuffers:I,getMaxAnisotropy:d,getMaxPrecision:g,precision:b,logarithmicDepthBuffer:F,maxTextures:j,maxVertexTextures:B,maxTextureSize:K,maxCubemapSize:te,maxAttributes:X,maxVertexUniforms:O,maxVaryings:W,maxFragmentUniforms:we,vertexTextures:R,floatFragmentTextures:se,floatVertexTextures:me,maxSamples:ze}}function Fve(w){const t=this;let i=null,l=0,d=!1,g=!1;const _=new jh,b=new Qa,M={value:null,needsUpdate:!1};this.uniform=M,this.numPlanes=0,this.numIntersection=0,this.init=function(j,B,K){const te=j.length!==0||B||l!==0||d;return d=B,i=F(j,K,0),l=j.length,te},this.beginShadows=function(){g=!0,F(null)},this.endShadows=function(){g=!1,I()},this.setState=function(j,B,K){const te=j.clippingPlanes,X=j.clipIntersection,O=j.clipShadows,W=w.get(j);if(!d||te===null||te.length===0||g&&!O)g?F(null):I();else{const we=g?0:l,R=we*4;let se=W.clippingState||null;M.value=se,se=F(te,B,R,K);for(let me=0;me!==R;++me)se[me]=i[me];W.clippingState=se,this.numIntersection=X?this.numPlanes:0,this.numPlanes+=we}};function I(){M.value!==i&&(M.value=i,M.needsUpdate=l>0),t.numPlanes=l,t.numIntersection=0}function F(j,B,K,te){const X=j!==null?j.length:0;let O=null;if(X!==0){if(O=M.value,te!==!0||O===null){const W=K+X*4,we=B.matrixWorldInverse;b.getNormalMatrix(we),(O===null||O.length<W)&&(O=new Float32Array(W));for(let R=0,se=K;R!==X;++R,se+=4)_.copy(j[R]).applyMatrix4(we,b),_.normal.toArray(O,se),O[se+3]=_.constant}M.value=O,M.needsUpdate=!0}return t.numPlanes=X,t.numIntersection=0,O}}function jve(w){let t=new WeakMap;function i(_,b){return b===ML?_.mapping=M0:b===PL&&(_.mapping=P0),_}function l(_){if(_&&_.isTexture&&_.isRenderTargetTexture===!1){const b=_.mapping;if(b===ML||b===PL)if(t.has(_)){const M=t.get(_).texture;return i(M,_.mapping)}else{const M=_.image;if(M&&M.height>0){const I=new tge(M.height/2);return I.fromEquirectangularTexture(w,_),t.set(_,I),_.addEventListener("dispose",d),i(I.texture,_.mapping)}else return null}}return _}function d(_){const b=_.target;b.removeEventListener("dispose",d);const M=t.get(b);M!==void 0&&(t.delete(b),M.dispose())}function g(){t=new WeakMap}return{get:l,dispose:g}}class ZL extends Pre{constructor(t=-1,i=1,l=1,d=-1,g=.1,_=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=t,this.right=i,this.top=l,this.bottom=d,this.near=g,this.far=_,this.updateProjectionMatrix()}copy(t,i){return super.copy(t,i),this.left=t.left,this.right=t.right,this.top=t.top,this.bottom=t.bottom,this.near=t.near,this.far=t.far,this.zoom=t.zoom,this.view=t.view===null?null:Object.assign({},t.view),this}setViewOffset(t,i,l,d,g,_){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=t,this.view.fullHeight=i,this.view.offsetX=l,this.view.offsetY=d,this.view.width=g,this.view.height=_,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const t=(this.right-this.left)/(2*this.zoom),i=(this.top-this.bottom)/(2*this.zoom),l=(this.right+this.left)/2,d=(this.top+this.bottom)/2;let g=l-t,_=l+t,b=d+i,M=d-i;if(this.view!==null&&this.view.enabled){const I=(this.right-this.left)/this.view.fullWidth/this.zoom,F=(this.top-this.bottom)/this.view.fullHeight/this.zoom;g+=I*this.view.offsetX,_=g+I*this.view.width,b-=F*this.view.offsetY,M=b-F*this.view.height}this.projectionMatrix.makeOrthographic(g,_,b,M,this.near,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(t){const i=super.toJSON(t);return i.object.zoom=this.zoom,i.object.left=this.left,i.object.right=this.right,i.object.top=this.top,i.object.bottom=this.bottom,i.object.near=this.near,i.object.far=this.far,this.view!==null&&(i.object.view=Object.assign({},this.view)),i}}const x0=4,gne=[.125,.215,.35,.446,.526,.582],Vh=20,vL=new ZL,vne=new Fn;let yL=null;const Bh=(1+Math.sqrt(5))/2,b0=1/Bh,yne=[new Ne(1,1,1),new Ne(-1,1,1),new Ne(1,1,-1),new Ne(-1,1,-1),new Ne(0,Bh,b0),new Ne(0,Bh,-b0),new Ne(b0,0,Bh),new Ne(-b0,0,Bh),new Ne(Bh,b0,0),new Ne(-Bh,b0,0)];class bne{constructor(t){this._renderer=t,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(t,i=0,l=.1,d=100){yL=this._renderer.getRenderTarget(),this._setSize(256);const g=this._allocateTargets();return g.depthBuffer=!0,this._sceneToCubeUV(t,l,d,g),i>0&&this._blur(g,0,0,i),this._applyPMREM(g),this._cleanup(g),g}fromEquirectangular(t,i=null){return this._fromTexture(t,i)}fromCubemap(t,i=null){return this._fromTexture(t,i)}compileCubemapShader(){this._cubemapMaterial===null&&(this._cubemapMaterial=wne(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){this._equirectMaterial===null&&(this._equirectMaterial=xne(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),this._cubemapMaterial!==null&&this._cubemapMaterial.dispose(),this._equirectMaterial!==null&&this._equirectMaterial.dispose()}_setSize(t){this._lodMax=Math.floor(Math.log2(t)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){this._blurMaterial!==null&&this._blurMaterial.dispose(),this._pingPongRenderTarget!==null&&this._pingPongRenderTarget.dispose();for(let t=0;t<this._lodPlanes.length;t++)this._lodPlanes[t].dispose()}_cleanup(t){this._renderer.setRenderTarget(yL),t.scissorTest=!1,QM(t,0,0,t.width,t.height)}_fromTexture(t,i){t.mapping===M0||t.mapping===P0?this._setSize(t.image.length===0?16:t.image[0].width||t.image[0].image.width):this._setSize(t.image.width/4),yL=this._renderer.getRenderTarget();const l=i||this._allocateTargets();return this._textureToCubeUV(t,l),this._applyPMREM(l),this._cleanup(l),l}_allocateTargets(){const t=3*Math.max(this._cubeSize,112),i=4*this._cubeSize,l={magFilter:ea,minFilter:ea,generateMipmaps:!1,type:x1,format:Ks,encoding:Jh,depthBuffer:!1},d=_ne(t,i,l);if(this._pingPongRenderTarget===null||this._pingPongRenderTarget.width!==t){this._pingPongRenderTarget!==null&&this._dispose(),this._pingPongRenderTarget=_ne(t,i,l);const{_lodMax:g}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=Bve(g)),this._blurMaterial=Uve(g,t,i)}return d}_compileMaterial(t){const i=new vo(this._lodPlanes[0],t);this._renderer.compile(i,vL)}_sceneToCubeUV(t,i,l,d){const b=new zo(90,1,i,l),M=[1,-1,1,1,1,1],I=[1,1,1,-1,-1,-1],F=this._renderer,j=F.autoClear,B=F.toneMapping;F.getClearColor(vne),F.toneMapping=Qc,F.autoClear=!1;const K=new Wh({name:"PMREM.Background",side:Xs,depthWrite:!1,depthTest:!1}),te=new vo(new z0,K);let X=!1;const O=t.background;O?O.isColor&&(K.color.copy(O),t.background=null,X=!0):(K.color.copy(vne),X=!0);for(let W=0;W<6;W++){const we=W%3;we===0?(b.up.set(0,M[W],0),b.lookAt(I[W],0,0)):we===1?(b.up.set(0,0,M[W]),b.lookAt(0,I[W],0)):(b.up.set(0,M[W],0),b.lookAt(0,0,I[W]));const R=this._cubeSize;QM(d,we*R,W>2?R:0,R,R),F.setRenderTarget(d),X&&F.render(te,b),F.render(t,b)}te.geometry.dispose(),te.material.dispose(),F.toneMapping=B,F.autoClear=j,t.background=O}_textureToCubeUV(t,i){const l=this._renderer,d=t.mapping===M0||t.mapping===P0;d?(this._cubemapMaterial===null&&(this._cubemapMaterial=wne()),this._cubemapMaterial.uniforms.flipEnvMap.value=t.isRenderTargetTexture===!1?-1:1):this._equirectMaterial===null&&(this._equirectMaterial=xne());const g=d?this._cubemapMaterial:this._equirectMaterial,_=new vo(this._lodPlanes[0],g),b=g.uniforms;b.envMap.value=t;const M=this._cubeSize;QM(i,0,0,3*M,2*M),l.setRenderTarget(i),l.render(_,vL)}_applyPMREM(t){const i=this._renderer,l=i.autoClear;i.autoClear=!1;for(let d=1;d<this._lodPlanes.length;d++){const g=Math.sqrt(this._sigmas[d]*this._sigmas[d]-this._sigmas[d-1]*this._sigmas[d-1]),_=yne[(d-1)%yne.length];this._blur(t,d-1,d,g,_)}i.autoClear=l}_blur(t,i,l,d,g){const _=this._pingPongRenderTarget;this._halfBlur(t,_,i,l,d,"latitudinal",g),this._halfBlur(_,t,l,l,d,"longitudinal",g)}_halfBlur(t,i,l,d,g,_,b){const M=this._renderer,I=this._blurMaterial;_!=="latitudinal"&&_!=="longitudinal"&&console.error("blur direction must be either latitudinal or longitudinal!");const F=3,j=new vo(this._lodPlanes[d],I),B=I.uniforms,K=this._sizeLods[l]-1,te=isFinite(g)?Math.PI/(2*K):2*Math.PI/(2*Vh-1),X=g/te,O=isFinite(g)?1+Math.floor(F*X):Vh;O>Vh&&console.warn(`sigmaRadians, ${g}, is too large and will clip, as it requested ${O} samples when the maximum is set to ${Vh}`);const W=[];let we=0;for(let ee=0;ee<Vh;++ee){const fe=ee/X,Te=Math.exp(-fe*fe/2);W.push(Te),ee===0?we+=Te:ee<O&&(we+=2*Te)}for(let ee=0;ee<W.length;ee++)W[ee]=W[ee]/we;B.envMap.value=t.texture,B.samples.value=O,B.weights.value=W,B.latitudinal.value=_==="latitudinal",b&&(B.poleAxis.value=b);const{_lodMax:R}=this;B.dTheta.value=te,B.mipInt.value=R-l;const se=this._sizeLods[d],me=3*se*(d>R-x0?d-R+x0:0),ze=4*(this._cubeSize-se);QM(i,me,ze,3*se,2*se),M.setRenderTarget(i),M.render(j,vL)}}function Bve(w){const t=[],i=[],l=[];let d=w;const g=w-x0+1+gne.length;for(let _=0;_<g;_++){const b=Math.pow(2,d);i.push(b);let M=1/b;_>w-x0?M=gne[_-w+x0-1]:_===0&&(M=0),l.push(M);const I=1/(b-2),F=-I,j=1+I,B=[F,F,j,F,j,j,F,F,j,j,F,j],K=6,te=6,X=3,O=2,W=1,we=new Float32Array(X*te*K),R=new Float32Array(O*te*K),se=new Float32Array(W*te*K);for(let ze=0;ze<K;ze++){const ee=ze%3*2/3-1,fe=ze>2?0:-1,Te=[ee,fe,0,ee+2/3,fe,0,ee+2/3,fe+1,0,ee,fe,0,ee+2/3,fe+1,0,ee,fe+1,0];we.set(Te,X*te*ze),R.set(B,O*te*ze);const Y=[ze,ze,ze,ze,ze,ze];se.set(Y,W*te*ze)}const me=new es;me.setAttribute("position",new xa(we,X)),me.setAttribute("uv",new xa(R,O)),me.setAttribute("faceIndex",new xa(se,W)),t.push(me),d>x0&&d--}return{lodPlanes:t,sizeLods:i,sigmas:l}}function _ne(w,t,i){const l=new Qh(w,t,i);return l.texture.mapping=cP,l.texture.name="PMREM.cubeUv",l.scissorTest=!0,l}function QM(w,t,i,l,d){w.viewport.set(t,i,l,d),w.scissor.set(t,i,l,d)}function Uve(w,t,i){const l=new Float32Array(Vh),d=new Ne(0,1,0);return new ep({name:"SphericalGaussianBlur",defines:{n:Vh,CUBEUV_TEXEL_WIDTH:1/t,CUBEUV_TEXEL_HEIGHT:1/i,CUBEUV_MAX_MIP:`${w}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:l},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:d}},vertexShader:YL(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

			}
		`,blending:qd,depthTest:!1,depthWrite:!1})}function xne(){return new ep({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:YL(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;

			#include <common>

			void main() {

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				gl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );

			}
		`,blending:qd,depthTest:!1,depthWrite:!1})}function wne(){return new ep({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:YL(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			uniform float flipEnvMap;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			void main() {

				gl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );

			}
		`,blending:qd,depthTest:!1,depthWrite:!1})}function YL(){return`

		precision mediump float;
		precision mediump int;

		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`}function Vve(w){let t=new WeakMap,i=null;function l(b){if(b&&b.isTexture){const M=b.mapping,I=M===ML||M===PL,F=M===M0||M===P0;if(I||F)if(b.isRenderTargetTexture&&b.needsPMREMUpdate===!0){b.needsPMREMUpdate=!1;let j=t.get(b);return i===null&&(i=new bne(w)),j=I?i.fromEquirectangular(b,j):i.fromCubemap(b,j),t.set(b,j),j.texture}else{if(t.has(b))return t.get(b).texture;{const j=b.image;if(I&&j&&j.height>0||F&&j&&d(j)){i===null&&(i=new bne(w));const B=I?i.fromEquirectangular(b):i.fromCubemap(b);return t.set(b,B),b.addEventListener("dispose",g),B.texture}else return null}}}return b}function d(b){let M=0;const I=6;for(let F=0;F<I;F++)b[F]!==void 0&&M++;return M===I}function g(b){const M=b.target;M.removeEventListener("dispose",g);const I=t.get(M);I!==void 0&&(t.delete(M),I.dispose())}function _(){t=new WeakMap,i!==null&&(i.dispose(),i=null)}return{get:l,dispose:_}}function Hve(w){const t={};function i(l){if(t[l]!==void 0)return t[l];let d;switch(l){case"WEBGL_depth_texture":d=w.getExtension("WEBGL_depth_texture")||w.getExtension("MOZ_WEBGL_depth_texture")||w.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":d=w.getExtension("EXT_texture_filter_anisotropic")||w.getExtension("MOZ_EXT_texture_filter_anisotropic")||w.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":d=w.getExtension("WEBGL_compressed_texture_s3tc")||w.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||w.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":d=w.getExtension("WEBGL_compressed_texture_pvrtc")||w.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:d=w.getExtension(l)}return t[l]=d,d}return{has:function(l){return i(l)!==null},init:function(l){l.isWebGL2?i("EXT_color_buffer_float"):(i("WEBGL_depth_texture"),i("OES_texture_float"),i("OES_texture_half_float"),i("OES_texture_half_float_linear"),i("OES_standard_derivatives"),i("OES_element_index_uint"),i("OES_vertex_array_object"),i("ANGLE_instanced_arrays")),i("OES_texture_float_linear"),i("EXT_color_buffer_half_float"),i("WEBGL_multisampled_render_to_texture")},get:function(l){const d=i(l);return d===null&&console.warn("THREE.WebGLRenderer: "+l+" extension not supported."),d}}}function Gve(w,t,i,l){const d={},g=new WeakMap;function _(j){const B=j.target;B.index!==null&&t.remove(B.index);for(const te in B.attributes)t.remove(B.attributes[te]);B.removeEventListener("dispose",_),delete d[B.id];const K=g.get(B);K&&(t.remove(K),g.delete(B)),l.releaseStatesOfGeometry(B),B.isInstancedBufferGeometry===!0&&delete B._maxInstanceCount,i.memory.geometries--}function b(j,B){return d[B.id]===!0||(B.addEventListener("dispose",_),d[B.id]=!0,i.memory.geometries++),B}function M(j){const B=j.attributes;for(const te in B)t.update(B[te],34962);const K=j.morphAttributes;for(const te in K){const X=K[te];for(let O=0,W=X.length;O<W;O++)t.update(X[O],34962)}}function I(j){const B=[],K=j.index,te=j.attributes.position;let X=0;if(K!==null){const we=K.array;X=K.version;for(let R=0,se=we.length;R<se;R+=3){const me=we[R+0],ze=we[R+1],ee=we[R+2];B.push(me,ze,ze,ee,ee,me)}}else{const we=te.array;X=te.version;for(let R=0,se=we.length/3-1;R<se;R+=3){const me=R+0,ze=R+1,ee=R+2;B.push(me,ze,ze,ee,ee,me)}}const O=new(_re(B)?Mre:Tre)(B,1);O.version=X;const W=g.get(j);W&&t.remove(W),g.set(j,O)}function F(j){const B=g.get(j);if(B){const K=j.index;K!==null&&B.version<K.version&&I(j)}else I(j);return g.get(j)}return{get:b,update:M,getWireframeAttribute:F}}function Wve(w,t,i,l){const d=l.isWebGL2;let g;function _(B){g=B}let b,M;function I(B){b=B.type,M=B.bytesPerElement}function F(B,K){w.drawElements(g,K,b,B*M),i.update(K,g,1)}function j(B,K,te){if(te===0)return;let X,O;if(d)X=w,O="drawElementsInstanced";else if(X=t.get("ANGLE_instanced_arrays"),O="drawElementsInstancedANGLE",X===null){console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}X[O](g,K,b,B*M,te),i.update(K,g,te)}this.setMode=_,this.setIndex=I,this.render=F,this.renderInstances=j}function qve(w){const t={geometries:0,textures:0},i={frame:0,calls:0,triangles:0,points:0,lines:0};function l(g,_,b){switch(i.calls++,_){case 4:i.triangles+=b*(g/3);break;case 1:i.lines+=b*(g/2);break;case 3:i.lines+=b*(g-1);break;case 2:i.lines+=b*g;break;case 0:i.points+=b*g;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",_);break}}function d(){i.frame++,i.calls=0,i.triangles=0,i.points=0,i.lines=0}return{memory:t,render:i,programs:null,autoReset:!0,reset:d,update:l}}function Kve(w,t){return w[0]-t[0]}function Xve(w,t){return Math.abs(t[1])-Math.abs(w[1])}function bL(w,t){let i=1;const l=t.isInterleavedBufferAttribute?t.data.array:t.array;l instanceof Int8Array?i=127:l instanceof Uint8Array?i=255:l instanceof Uint16Array?i=65535:l instanceof Int16Array?i=32767:l instanceof Int32Array?i=2147483647:console.error("THREE.WebGLMorphtargets: Unsupported morph attribute data type: ",l),w.divideScalar(i)}function $ve(w,t,i){const l={},d=new Float32Array(8),g=new WeakMap,_=new Er,b=[];for(let I=0;I<8;I++)b[I]=[I,0];function M(I,F,j,B){const K=I.morphTargetInfluences;if(t.isWebGL2===!0){const X=F.morphAttributes.position||F.morphAttributes.normal||F.morphAttributes.color,O=X!==void 0?X.length:0;let W=g.get(F);if(W===void 0||W.count!==O){let Qe=function(){Ke.dispose(),g.delete(F),F.removeEventListener("dispose",Qe)};var te=Qe;W!==void 0&&W.texture.dispose();const se=F.morphAttributes.position!==void 0,me=F.morphAttributes.normal!==void 0,ze=F.morphAttributes.color!==void 0,ee=F.morphAttributes.position||[],fe=F.morphAttributes.normal||[],Te=F.morphAttributes.color||[];let Y=0;se===!0&&(Y=1),me===!0&&(Y=2),ze===!0&&(Y=3);let qe=F.attributes.position.count*Y,Tt=1;qe>t.maxTextureSize&&(Tt=Math.ceil(qe/t.maxTextureSize),qe=t.maxTextureSize);const xt=new Float32Array(qe*Tt*4*O),Ke=new Ere(xt,qe,Tt,O);Ke.type=Gd,Ke.needsUpdate=!0;const _e=Y*4;for(let Ge=0;Ge<O;Ge++){const yt=ee[Ge],ft=fe[Ge],gt=Te[Ge],zt=qe*Tt*4*Ge;for(let kt=0;kt<yt.count;kt++){const Rt=kt*_e;se===!0&&(_.fromBufferAttribute(yt,kt),yt.normalized===!0&&bL(_,yt),xt[zt+Rt+0]=_.x,xt[zt+Rt+1]=_.y,xt[zt+Rt+2]=_.z,xt[zt+Rt+3]=0),me===!0&&(_.fromBufferAttribute(ft,kt),ft.normalized===!0&&bL(_,ft),xt[zt+Rt+4]=_.x,xt[zt+Rt+5]=_.y,xt[zt+Rt+6]=_.z,xt[zt+Rt+7]=0),ze===!0&&(_.fromBufferAttribute(gt,kt),gt.normalized===!0&&bL(_,gt),xt[zt+Rt+8]=_.x,xt[zt+Rt+9]=_.y,xt[zt+Rt+10]=_.z,xt[zt+Rt+11]=gt.itemSize===4?_.w:1)}}W={count:O,texture:Ke,size:new Rn(qe,Tt)},g.set(F,W),F.addEventListener("dispose",Qe)}let we=0;for(let se=0;se<K.length;se++)we+=K[se];const R=F.morphTargetsRelative?1:1-we;B.getUniforms().setValue(w,"morphTargetBaseInfluence",R),B.getUniforms().setValue(w,"morphTargetInfluences",K),B.getUniforms().setValue(w,"morphTargetsTexture",W.texture,i),B.getUniforms().setValue(w,"morphTargetsTextureSize",W.size)}else{const X=K===void 0?0:K.length;let O=l[F.id];if(O===void 0||O.length!==X){O=[];for(let me=0;me<X;me++)O[me]=[me,0];l[F.id]=O}for(let me=0;me<X;me++){const ze=O[me];ze[0]=me,ze[1]=K[me]}O.sort(Xve);for(let me=0;me<8;me++)me<X&&O[me][1]?(b[me][0]=O[me][0],b[me][1]=O[me][1]):(b[me][0]=Number.MAX_SAFE_INTEGER,b[me][1]=0);b.sort(Kve);const W=F.morphAttributes.position,we=F.morphAttributes.normal;let R=0;for(let me=0;me<8;me++){const ze=b[me],ee=ze[0],fe=ze[1];ee!==Number.MAX_SAFE_INTEGER&&fe?(W&&F.getAttribute("morphTarget"+me)!==W[ee]&&F.setAttribute("morphTarget"+me,W[ee]),we&&F.getAttribute("morphNormal"+me)!==we[ee]&&F.setAttribute("morphNormal"+me,we[ee]),d[me]=fe,R+=fe):(W&&F.hasAttribute("morphTarget"+me)===!0&&F.deleteAttribute("morphTarget"+me),we&&F.hasAttribute("morphNormal"+me)===!0&&F.deleteAttribute("morphNormal"+me),d[me]=0)}const se=F.morphTargetsRelative?1:1-R;B.getUniforms().setValue(w,"morphTargetBaseInfluence",se),B.getUniforms().setValue(w,"morphTargetInfluences",d)}}return{update:M}}function Zve(w,t,i,l){let d=new WeakMap;function g(M){const I=l.render.frame,F=M.geometry,j=t.get(M,F);return d.get(j)!==I&&(t.update(j),d.set(j,I)),M.isInstancedMesh&&(M.hasEventListener("dispose",b)===!1&&M.addEventListener("dispose",b),i.update(M.instanceMatrix,34962),M.instanceColor!==null&&i.update(M.instanceColor,34962)),j}function _(){d=new WeakMap}function b(M){const I=M.target;I.removeEventListener("dispose",b),i.remove(I.instanceMatrix),I.instanceColor!==null&&i.remove(I.instanceColor)}return{update:g,dispose:_}}const Ire=new Fo,Dre=new Ere,Ore=new Bme,Rre=new Cre,Sne=[],Ene=[],kne=new Float32Array(16),Tne=new Float32Array(9),Mne=new Float32Array(4);function N0(w,t,i){const l=w[0];if(l<=0||l>0)return w;const d=t*i;let g=Sne[d];if(g===void 0&&(g=new Float32Array(d),Sne[d]=g),t!==0){l.toArray(g,0);for(let _=1,b=0;_!==t;++_)b+=i,w[_].toArray(g,b)}return g}function jo(w,t){if(w.length!==t.length)return!1;for(let i=0,l=w.length;i<l;i++)if(w[i]!==t[i])return!1;return!0}function Bo(w,t){for(let i=0,l=t.length;i<l;i++)w[i]=t[i]}function dP(w,t){let i=Ene[t];i===void 0&&(i=new Int32Array(t),Ene[t]=i);for(let l=0;l!==t;++l)i[l]=w.allocateTextureUnit();return i}function Yve(w,t){const i=this.cache;i[0]!==t&&(w.uniform1f(this.addr,t),i[0]=t)}function Jve(w,t){const i=this.cache;if(t.x!==void 0)(i[0]!==t.x||i[1]!==t.y)&&(w.uniform2f(this.addr,t.x,t.y),i[0]=t.x,i[1]=t.y);else{if(jo(i,t))return;w.uniform2fv(this.addr,t),Bo(i,t)}}function Qve(w,t){const i=this.cache;if(t.x!==void 0)(i[0]!==t.x||i[1]!==t.y||i[2]!==t.z)&&(w.uniform3f(this.addr,t.x,t.y,t.z),i[0]=t.x,i[1]=t.y,i[2]=t.z);else if(t.r!==void 0)(i[0]!==t.r||i[1]!==t.g||i[2]!==t.b)&&(w.uniform3f(this.addr,t.r,t.g,t.b),i[0]=t.r,i[1]=t.g,i[2]=t.b);else{if(jo(i,t))return;w.uniform3fv(this.addr,t),Bo(i,t)}}function eye(w,t){const i=this.cache;if(t.x!==void 0)(i[0]!==t.x||i[1]!==t.y||i[2]!==t.z||i[3]!==t.w)&&(w.uniform4f(this.addr,t.x,t.y,t.z,t.w),i[0]=t.x,i[1]=t.y,i[2]=t.z,i[3]=t.w);else{if(jo(i,t))return;w.uniform4fv(this.addr,t),Bo(i,t)}}function tye(w,t){const i=this.cache,l=t.elements;if(l===void 0){if(jo(i,t))return;w.uniformMatrix2fv(this.addr,!1,t),Bo(i,t)}else{if(jo(i,l))return;Mne.set(l),w.uniformMatrix2fv(this.addr,!1,Mne),Bo(i,l)}}function nye(w,t){const i=this.cache,l=t.elements;if(l===void 0){if(jo(i,t))return;w.uniformMatrix3fv(this.addr,!1,t),Bo(i,t)}else{if(jo(i,l))return;Tne.set(l),w.uniformMatrix3fv(this.addr,!1,Tne),Bo(i,l)}}function rye(w,t){const i=this.cache,l=t.elements;if(l===void 0){if(jo(i,t))return;w.uniformMatrix4fv(this.addr,!1,t),Bo(i,t)}else{if(jo(i,l))return;kne.set(l),w.uniformMatrix4fv(this.addr,!1,kne),Bo(i,l)}}function iye(w,t){const i=this.cache;i[0]!==t&&(w.uniform1i(this.addr,t),i[0]=t)}function oye(w,t){const i=this.cache;jo(i,t)||(w.uniform2iv(this.addr,t),Bo(i,t))}function aye(w,t){const i=this.cache;jo(i,t)||(w.uniform3iv(this.addr,t),Bo(i,t))}function sye(w,t){const i=this.cache;jo(i,t)||(w.uniform4iv(this.addr,t),Bo(i,t))}function lye(w,t){const i=this.cache;i[0]!==t&&(w.uniform1ui(this.addr,t),i[0]=t)}function cye(w,t){const i=this.cache;jo(i,t)||(w.uniform2uiv(this.addr,t),Bo(i,t))}function uye(w,t){const i=this.cache;jo(i,t)||(w.uniform3uiv(this.addr,t),Bo(i,t))}function dye(w,t){const i=this.cache;jo(i,t)||(w.uniform4uiv(this.addr,t),Bo(i,t))}function fye(w,t,i){const l=this.cache,d=i.allocateTextureUnit();l[0]!==d&&(w.uniform1i(this.addr,d),l[0]=d),i.setTexture2D(t||Ire,d)}function hye(w,t,i){const l=this.cache,d=i.allocateTextureUnit();l[0]!==d&&(w.uniform1i(this.addr,d),l[0]=d),i.setTexture3D(t||Ore,d)}function pye(w,t,i){const l=this.cache,d=i.allocateTextureUnit();l[0]!==d&&(w.uniform1i(this.addr,d),l[0]=d),i.setTextureCube(t||Rre,d)}function mye(w,t,i){const l=this.cache,d=i.allocateTextureUnit();l[0]!==d&&(w.uniform1i(this.addr,d),l[0]=d),i.setTexture2DArray(t||Dre,d)}function gye(w){switch(w){case 5126:return Yve;case 35664:return Jve;case 35665:return Qve;case 35666:return eye;case 35674:return tye;case 35675:return nye;case 35676:return rye;case 5124:case 35670:return iye;case 35667:case 35671:return oye;case 35668:case 35672:return aye;case 35669:case 35673:return sye;case 5125:return lye;case 36294:return cye;case 36295:return uye;case 36296:return dye;case 35678:case 36198:case 36298:case 36306:case 35682:return fye;case 35679:case 36299:case 36307:return hye;case 35680:case 36300:case 36308:case 36293:return pye;case 36289:case 36303:case 36311:case 36292:return mye}}function vye(w,t){w.uniform1fv(this.addr,t)}function yye(w,t){const i=N0(t,this.size,2);w.uniform2fv(this.addr,i)}function bye(w,t){const i=N0(t,this.size,3);w.uniform3fv(this.addr,i)}function _ye(w,t){const i=N0(t,this.size,4);w.uniform4fv(this.addr,i)}function xye(w,t){const i=N0(t,this.size,4);w.uniformMatrix2fv(this.addr,!1,i)}function wye(w,t){const i=N0(t,this.size,9);w.uniformMatrix3fv(this.addr,!1,i)}function Sye(w,t){const i=N0(t,this.size,16);w.uniformMatrix4fv(this.addr,!1,i)}function Eye(w,t){w.uniform1iv(this.addr,t)}function kye(w,t){w.uniform2iv(this.addr,t)}function Tye(w,t){w.uniform3iv(this.addr,t)}function Mye(w,t){w.uniform4iv(this.addr,t)}function Pye(w,t){w.uniform1uiv(this.addr,t)}function Cye(w,t){w.uniform2uiv(this.addr,t)}function Aye(w,t){w.uniform3uiv(this.addr,t)}function Iye(w,t){w.uniform4uiv(this.addr,t)}function Dye(w,t,i){const l=t.length,d=dP(i,l);w.uniform1iv(this.addr,d);for(let g=0;g!==l;++g)i.setTexture2D(t[g]||Ire,d[g])}function Oye(w,t,i){const l=t.length,d=dP(i,l);w.uniform1iv(this.addr,d);for(let g=0;g!==l;++g)i.setTexture3D(t[g]||Ore,d[g])}function Rye(w,t,i){const l=t.length,d=dP(i,l);w.uniform1iv(this.addr,d);for(let g=0;g!==l;++g)i.setTextureCube(t[g]||Rre,d[g])}function Lye(w,t,i){const l=t.length,d=dP(i,l);w.uniform1iv(this.addr,d);for(let g=0;g!==l;++g)i.setTexture2DArray(t[g]||Dre,d[g])}function zye(w){switch(w){case 5126:return vye;case 35664:return yye;case 35665:return bye;case 35666:return _ye;case 35674:return xye;case 35675:return wye;case 35676:return Sye;case 5124:case 35670:return Eye;case 35667:case 35671:return kye;case 35668:case 35672:return Tye;case 35669:case 35673:return Mye;case 5125:return Pye;case 36294:return Cye;case 36295:return Aye;case 36296:return Iye;case 35678:case 36198:case 36298:case 36306:case 35682:return Dye;case 35679:case 36299:case 36307:return Oye;case 35680:case 36300:case 36308:case 36293:return Rye;case 36289:case 36303:case 36311:case 36292:return Lye}}class Nye{constructor(t,i,l){this.id=t,this.addr=l,this.cache=[],this.setValue=gye(i.type)}}class Fye{constructor(t,i,l){this.id=t,this.addr=l,this.cache=[],this.size=i.size,this.setValue=zye(i.type)}}class jye{constructor(t){this.id=t,this.seq=[],this.map={}}setValue(t,i,l){const d=this.seq;for(let g=0,_=d.length;g!==_;++g){const b=d[g];b.setValue(t,i[b.id],l)}}}const _L=/(\w+)(\])?(\[|\.)?/g;function Pne(w,t){w.seq.push(t),w.map[t.id]=t}function Bye(w,t,i){const l=w.name,d=l.length;for(_L.lastIndex=0;;){const g=_L.exec(l),_=_L.lastIndex;let b=g[1];const M=g[2]==="]",I=g[3];if(M&&(b=b|0),I===void 0||I==="["&&_+2===d){Pne(i,I===void 0?new Nye(b,w,t):new Fye(b,w,t));break}else{let j=i.map[b];j===void 0&&(j=new jye(b),Pne(i,j)),i=j}}}class oP{constructor(t,i){this.seq=[],this.map={};const l=t.getProgramParameter(i,35718);for(let d=0;d<l;++d){const g=t.getActiveUniform(i,d),_=t.getUniformLocation(i,g.name);Bye(g,_,this)}}setValue(t,i,l,d){const g=this.map[i];g!==void 0&&g.setValue(t,l,d)}setOptional(t,i,l){const d=i[l];d!==void 0&&this.setValue(t,l,d)}static upload(t,i,l,d){for(let g=0,_=i.length;g!==_;++g){const b=i[g],M=l[b.id];M.needsUpdate!==!1&&b.setValue(t,M.value,d)}}static seqWithValue(t,i){const l=[];for(let d=0,g=t.length;d!==g;++d){const _=t[d];_.id in i&&l.push(_)}return l}}function Cne(w,t,i){const l=w.createShader(t);return w.shaderSource(l,i),w.compileShader(l),l}let Uye=0;function Vye(w,t){const i=w.split(`
`),l=[],d=Math.max(t-6,0),g=Math.min(t+6,i.length);for(let _=d;_<g;_++){const b=_+1;l.push(`${b===t?">":" "} ${b}: ${i[_]}`)}return l.join(`
`)}function Hye(w){switch(w){case Jh:return["Linear","( value )"];case br:return["sRGB","( value )"];default:return console.warn("THREE.WebGLProgram: Unsupported encoding:",w),["Linear","( value )"]}}function Ane(w,t,i){const l=w.getShaderParameter(t,35713),d=w.getShaderInfoLog(t).trim();if(l&&d==="")return"";const g=/ERROR: 0:(\d+)/.exec(d);if(g){const _=parseInt(g[1]);return i.toUpperCase()+`

`+d+`

`+Vye(w.getShaderSource(t),_)}else return d}function Gye(w,t){const i=Hye(t);return"vec4 "+w+"( vec4 value ) { return LinearTo"+i[0]+i[1]+"; }"}function Wye(w,t){let i;switch(t){case Zpe:i="Linear";break;case Ype:i="Reinhard";break;case Jpe:i="OptimizedCineon";break;case Qpe:i="ACESFilmic";break;case eme:i="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",t),i="Linear"}return"vec3 "+w+"( vec3 color ) { return "+i+"ToneMapping( color ); }"}function qye(w){return[w.extensionDerivatives||!!w.envMapCubeUVHeight||w.bumpMap||w.tangentSpaceNormalMap||w.clearcoatNormalMap||w.flatShading||w.shaderID==="physical"?"#extension GL_OES_standard_derivatives : enable":"",(w.extensionFragDepth||w.logarithmicDepthBuffer)&&w.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",w.extensionDrawBuffers&&w.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(w.extensionShaderTextureLOD||w.envMap||w.transmission)&&w.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""].filter(g1).join(`
`)}function Kye(w){const t=[];for(const i in w){const l=w[i];l!==!1&&t.push("#define "+i+" "+l)}return t.join(`
`)}function Xye(w,t){const i={},l=w.getProgramParameter(t,35721);for(let d=0;d<l;d++){const g=w.getActiveAttrib(t,d),_=g.name;let b=1;g.type===35674&&(b=2),g.type===35675&&(b=3),g.type===35676&&(b=4),i[_]={type:g.type,location:w.getAttribLocation(t,_),locationSize:b}}return i}function g1(w){return w!==""}function Ine(w,t){return w.replace(/NUM_DIR_LIGHTS/g,t.numDirLights).replace(/NUM_SPOT_LIGHTS/g,t.numSpotLights).replace(/NUM_RECT_AREA_LIGHTS/g,t.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,t.numPointLights).replace(/NUM_HEMI_LIGHTS/g,t.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,t.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS/g,t.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,t.numPointLightShadows)}function Dne(w,t){return w.replace(/NUM_CLIPPING_PLANES/g,t.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,t.numClippingPlanes-t.numClipIntersection)}const $ye=/^[ \t]*#include +<([\w\d./]+)>/gm;function RL(w){return w.replace($ye,Zye)}function Zye(w,t){const i=Xn[t];if(i===void 0)throw new Error("Can not resolve #include <"+t+">");return RL(i)}const Yye=/#pragma unroll_loop[\s]+?for \( int i \= (\d+)\; i < (\d+)\; i \+\+ \) \{([\s\S]+?)(?=\})\}/g,Jye=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function One(w){return w.replace(Jye,Lre).replace(Yye,Qye)}function Qye(w,t,i,l){return console.warn("WebGLProgram: #pragma unroll_loop shader syntax is deprecated. Please use #pragma unroll_loop_start syntax instead."),Lre(w,t,i,l)}function Lre(w,t,i,l){let d="";for(let g=parseInt(t);g<parseInt(i);g++)d+=l.replace(/\[\s*i\s*\]/g,"[ "+g+" ]").replace(/UNROLLED_LOOP_INDEX/g,g);return d}function Rne(w){let t="precision "+w.precision+` float;
precision `+w.precision+" int;";return w.precision==="highp"?t+=`
#define HIGH_PRECISION`:w.precision==="mediump"?t+=`
#define MEDIUM_PRECISION`:w.precision==="lowp"&&(t+=`
#define LOW_PRECISION`),t}function ebe(w){let t="SHADOWMAP_TYPE_BASIC";return w.shadowMapType===ure?t="SHADOWMAP_TYPE_PCF":w.shadowMapType===dre?t="SHADOWMAP_TYPE_PCF_SOFT":w.shadowMapType===m1&&(t="SHADOWMAP_TYPE_VSM"),t}function tbe(w){let t="ENVMAP_TYPE_CUBE";if(w.envMap)switch(w.envMapMode){case M0:case P0:t="ENVMAP_TYPE_CUBE";break;case cP:t="ENVMAP_TYPE_CUBE_UV";break}return t}function nbe(w){let t="ENVMAP_MODE_REFLECTION";if(w.envMap)switch(w.envMapMode){case P0:t="ENVMAP_MODE_REFRACTION";break}return t}function rbe(w){let t="ENVMAP_BLENDING_NONE";if(w.envMap)switch(w.combine){case pre:t="ENVMAP_BLENDING_MULTIPLY";break;case Xpe:t="ENVMAP_BLENDING_MIX";break;case $pe:t="ENVMAP_BLENDING_ADD";break}return t}function ibe(w){const t=w.envMapCubeUVHeight;if(t===null)return null;const i=Math.log2(t)-2,l=1/t;return{texelWidth:1/(3*Math.max(Math.pow(2,i),7*16)),texelHeight:l,maxMip:i}}function obe(w,t,i,l){const d=w.getContext(),g=i.defines;let _=i.vertexShader,b=i.fragmentShader;const M=ebe(i),I=tbe(i),F=nbe(i),j=rbe(i),B=ibe(i),K=i.isWebGL2?"":qye(i),te=Kye(g),X=d.createProgram();let O,W,we=i.glslVersion?"#version "+i.glslVersion+`
`:"";i.isRawShaderMaterial?(O=[te].filter(g1).join(`
`),O.length>0&&(O+=`
`),W=[K,te].filter(g1).join(`
`),W.length>0&&(W+=`
`)):(O=[Rne(i),"#define SHADER_NAME "+i.shaderName,te,i.instancing?"#define USE_INSTANCING":"",i.instancingColor?"#define USE_INSTANCING_COLOR":"",i.supportsVertexTextures?"#define VERTEX_TEXTURES":"",i.useFog&&i.fog?"#define USE_FOG":"",i.useFog&&i.fogExp2?"#define FOG_EXP2":"",i.map?"#define USE_MAP":"",i.envMap?"#define USE_ENVMAP":"",i.envMap?"#define "+F:"",i.lightMap?"#define USE_LIGHTMAP":"",i.aoMap?"#define USE_AOMAP":"",i.emissiveMap?"#define USE_EMISSIVEMAP":"",i.bumpMap?"#define USE_BUMPMAP":"",i.normalMap?"#define USE_NORMALMAP":"",i.normalMap&&i.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",i.normalMap&&i.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",i.clearcoatMap?"#define USE_CLEARCOATMAP":"",i.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",i.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",i.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",i.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",i.displacementMap&&i.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",i.specularMap?"#define USE_SPECULARMAP":"",i.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",i.specularColorMap?"#define USE_SPECULARCOLORMAP":"",i.roughnessMap?"#define USE_ROUGHNESSMAP":"",i.metalnessMap?"#define USE_METALNESSMAP":"",i.alphaMap?"#define USE_ALPHAMAP":"",i.transmission?"#define USE_TRANSMISSION":"",i.transmissionMap?"#define USE_TRANSMISSIONMAP":"",i.thicknessMap?"#define USE_THICKNESSMAP":"",i.sheenColorMap?"#define USE_SHEENCOLORMAP":"",i.sheenRoughnessMap?"#define USE_SHEENROUGHNESSMAP":"",i.vertexTangents?"#define USE_TANGENT":"",i.vertexColors?"#define USE_COLOR":"",i.vertexAlphas?"#define USE_COLOR_ALPHA":"",i.vertexUvs?"#define USE_UV":"",i.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",i.flatShading?"#define FLAT_SHADED":"",i.skinning?"#define USE_SKINNING":"",i.morphTargets?"#define USE_MORPHTARGETS":"",i.morphNormals&&i.flatShading===!1?"#define USE_MORPHNORMALS":"",i.morphColors&&i.isWebGL2?"#define USE_MORPHCOLORS":"",i.morphTargetsCount>0&&i.isWebGL2?"#define MORPHTARGETS_TEXTURE":"",i.morphTargetsCount>0&&i.isWebGL2?"#define MORPHTARGETS_TEXTURE_STRIDE "+i.morphTextureStride:"",i.morphTargetsCount>0&&i.isWebGL2?"#define MORPHTARGETS_COUNT "+i.morphTargetsCount:"",i.doubleSided?"#define DOUBLE_SIDED":"",i.flipSided?"#define FLIP_SIDED":"",i.shadowMapEnabled?"#define USE_SHADOWMAP":"",i.shadowMapEnabled?"#define "+M:"",i.sizeAttenuation?"#define USE_SIZEATTENUATION":"",i.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",i.logarithmicDepthBuffer&&i.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","	attribute vec4 color;","#elif defined( USE_COLOR )","	attribute vec3 color;","#endif","#if ( defined( USE_MORPHTARGETS ) && ! defined( MORPHTARGETS_TEXTURE ) )","	attribute vec3 morphTarget0;","	attribute vec3 morphTarget1;","	attribute vec3 morphTarget2;","	attribute vec3 morphTarget3;","	#ifdef USE_MORPHNORMALS","		attribute vec3 morphNormal0;","		attribute vec3 morphNormal1;","		attribute vec3 morphNormal2;","		attribute vec3 morphNormal3;","	#else","		attribute vec3 morphTarget4;","		attribute vec3 morphTarget5;","		attribute vec3 morphTarget6;","		attribute vec3 morphTarget7;","	#endif","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(g1).join(`
`),W=[K,Rne(i),"#define SHADER_NAME "+i.shaderName,te,i.useFog&&i.fog?"#define USE_FOG":"",i.useFog&&i.fogExp2?"#define FOG_EXP2":"",i.map?"#define USE_MAP":"",i.matcap?"#define USE_MATCAP":"",i.envMap?"#define USE_ENVMAP":"",i.envMap?"#define "+I:"",i.envMap?"#define "+F:"",i.envMap?"#define "+j:"",B?"#define CUBEUV_TEXEL_WIDTH "+B.texelWidth:"",B?"#define CUBEUV_TEXEL_HEIGHT "+B.texelHeight:"",B?"#define CUBEUV_MAX_MIP "+B.maxMip+".0":"",i.lightMap?"#define USE_LIGHTMAP":"",i.aoMap?"#define USE_AOMAP":"",i.emissiveMap?"#define USE_EMISSIVEMAP":"",i.bumpMap?"#define USE_BUMPMAP":"",i.normalMap?"#define USE_NORMALMAP":"",i.normalMap&&i.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",i.normalMap&&i.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",i.clearcoat?"#define USE_CLEARCOAT":"",i.clearcoatMap?"#define USE_CLEARCOATMAP":"",i.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",i.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",i.iridescence?"#define USE_IRIDESCENCE":"",i.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",i.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",i.specularMap?"#define USE_SPECULARMAP":"",i.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",i.specularColorMap?"#define USE_SPECULARCOLORMAP":"",i.roughnessMap?"#define USE_ROUGHNESSMAP":"",i.metalnessMap?"#define USE_METALNESSMAP":"",i.alphaMap?"#define USE_ALPHAMAP":"",i.alphaTest?"#define USE_ALPHATEST":"",i.sheen?"#define USE_SHEEN":"",i.sheenColorMap?"#define USE_SHEENCOLORMAP":"",i.sheenRoughnessMap?"#define USE_SHEENROUGHNESSMAP":"",i.transmission?"#define USE_TRANSMISSION":"",i.transmissionMap?"#define USE_TRANSMISSIONMAP":"",i.thicknessMap?"#define USE_THICKNESSMAP":"",i.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",i.vertexTangents?"#define USE_TANGENT":"",i.vertexColors||i.instancingColor?"#define USE_COLOR":"",i.vertexAlphas?"#define USE_COLOR_ALPHA":"",i.vertexUvs?"#define USE_UV":"",i.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",i.gradientMap?"#define USE_GRADIENTMAP":"",i.flatShading?"#define FLAT_SHADED":"",i.doubleSided?"#define DOUBLE_SIDED":"",i.flipSided?"#define FLIP_SIDED":"",i.shadowMapEnabled?"#define USE_SHADOWMAP":"",i.shadowMapEnabled?"#define "+M:"",i.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",i.physicallyCorrectLights?"#define PHYSICALLY_CORRECT_LIGHTS":"",i.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",i.logarithmicDepthBuffer&&i.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",i.toneMapping!==Qc?"#define TONE_MAPPING":"",i.toneMapping!==Qc?Xn.tonemapping_pars_fragment:"",i.toneMapping!==Qc?Wye("toneMapping",i.toneMapping):"",i.dithering?"#define DITHERING":"",i.opaque?"#define OPAQUE":"",Xn.encodings_pars_fragment,Gye("linearToOutputTexel",i.outputEncoding),i.useDepthPacking?"#define DEPTH_PACKING "+i.depthPacking:"",`
`].filter(g1).join(`
`)),_=RL(_),_=Ine(_,i),_=Dne(_,i),b=RL(b),b=Ine(b,i),b=Dne(b,i),_=One(_),b=One(b),i.isWebGL2&&i.isRawShaderMaterial!==!0&&(we=`#version 300 es
`,O=["precision mediump sampler2DArray;","#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+O,W=["#define varying in",i.glslVersion===rne?"":"layout(location = 0) out highp vec4 pc_fragColor;",i.glslVersion===rne?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+W);const R=we+O+_,se=we+W+b,me=Cne(d,35633,R),ze=Cne(d,35632,se);if(d.attachShader(X,me),d.attachShader(X,ze),i.index0AttributeName!==void 0?d.bindAttribLocation(X,0,i.index0AttributeName):i.morphTargets===!0&&d.bindAttribLocation(X,0,"position"),d.linkProgram(X),w.debug.checkShaderErrors){const Te=d.getProgramInfoLog(X).trim(),Y=d.getShaderInfoLog(me).trim(),qe=d.getShaderInfoLog(ze).trim();let Tt=!0,xt=!0;if(d.getProgramParameter(X,35714)===!1){Tt=!1;const Ke=Ane(d,me,"vertex"),_e=Ane(d,ze,"fragment");console.error("THREE.WebGLProgram: Shader Error "+d.getError()+" - VALIDATE_STATUS "+d.getProgramParameter(X,35715)+`

Program Info Log: `+Te+`
`+Ke+`
`+_e)}else Te!==""?console.warn("THREE.WebGLProgram: Program Info Log:",Te):(Y===""||qe==="")&&(xt=!1);xt&&(this.diagnostics={runnable:Tt,programLog:Te,vertexShader:{log:Y,prefix:O},fragmentShader:{log:qe,prefix:W}})}d.deleteShader(me),d.deleteShader(ze);let ee;this.getUniforms=function(){return ee===void 0&&(ee=new oP(d,X)),ee};let fe;return this.getAttributes=function(){return fe===void 0&&(fe=Xye(d,X)),fe},this.destroy=function(){l.releaseStatesOfProgram(this),d.deleteProgram(X),this.program=void 0},this.name=i.shaderName,this.id=Uye++,this.cacheKey=t,this.usedTimes=1,this.program=X,this.vertexShader=me,this.fragmentShader=ze,this}let abe=0;class sbe{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(t){const i=t.vertexShader,l=t.fragmentShader,d=this._getShaderStage(i),g=this._getShaderStage(l),_=this._getShaderCacheForMaterial(t);return _.has(d)===!1&&(_.add(d),d.usedTimes++),_.has(g)===!1&&(_.add(g),g.usedTimes++),this}remove(t){const i=this.materialCache.get(t);for(const l of i)l.usedTimes--,l.usedTimes===0&&this.shaderCache.delete(l.code);return this.materialCache.delete(t),this}getVertexShaderID(t){return this._getShaderStage(t.vertexShader).id}getFragmentShaderID(t){return this._getShaderStage(t.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(t){const i=this.materialCache;return i.has(t)===!1&&i.set(t,new Set),i.get(t)}_getShaderStage(t){const i=this.shaderCache;if(i.has(t)===!1){const l=new lbe(t);i.set(t,l)}return i.get(t)}}class lbe{constructor(t){this.id=abe++,this.code=t,this.usedTimes=0}}function cbe(w,t,i,l,d,g,_){const b=new kre,M=new sbe,I=[],F=d.isWebGL2,j=d.logarithmicDepthBuffer,B=d.vertexTextures;let K=d.precision;const te={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function X(fe,Te,Y,qe,Tt){const xt=qe.fog,Ke=Tt.geometry,_e=fe.isMeshStandardMaterial?qe.environment:null,Qe=(fe.isMeshStandardMaterial?i:t).get(fe.envMap||_e),Ge=!!Qe&&Qe.mapping===cP?Qe.image.height:null,yt=te[fe.type];fe.precision!==null&&(K=d.getMaxPrecision(fe.precision),K!==fe.precision&&console.warn("THREE.WebGLProgram.getParameters:",fe.precision,"not supported, using",K,"instead."));const ft=Ke.morphAttributes.position||Ke.morphAttributes.normal||Ke.morphAttributes.color,gt=ft!==void 0?ft.length:0;let zt=0;Ke.morphAttributes.position!==void 0&&(zt=1),Ke.morphAttributes.normal!==void 0&&(zt=2),Ke.morphAttributes.color!==void 0&&(zt=3);let kt,Rt,Yt,Jt;if(yt){const Tn=Ul[yt];kt=Tn.vertexShader,Rt=Tn.fragmentShader}else kt=fe.vertexShader,Rt=fe.fragmentShader,M.update(fe),Yt=M.getVertexShaderID(fe),Jt=M.getFragmentShaderID(fe);const pt=w.getRenderTarget(),Yn=fe.alphaTest>0,An=fe.clearcoat>0,xn=fe.iridescence>0;return{isWebGL2:F,shaderID:yt,shaderName:fe.type,vertexShader:kt,fragmentShader:Rt,defines:fe.defines,customVertexShaderID:Yt,customFragmentShaderID:Jt,isRawShaderMaterial:fe.isRawShaderMaterial===!0,glslVersion:fe.glslVersion,precision:K,instancing:Tt.isInstancedMesh===!0,instancingColor:Tt.isInstancedMesh===!0&&Tt.instanceColor!==null,supportsVertexTextures:B,outputEncoding:pt===null?w.outputEncoding:pt.isXRRenderTarget===!0?pt.texture.encoding:Jh,map:!!fe.map,matcap:!!fe.matcap,envMap:!!Qe,envMapMode:Qe&&Qe.mapping,envMapCubeUVHeight:Ge,lightMap:!!fe.lightMap,aoMap:!!fe.aoMap,emissiveMap:!!fe.emissiveMap,bumpMap:!!fe.bumpMap,normalMap:!!fe.normalMap,objectSpaceNormalMap:fe.normalMapType===xme,tangentSpaceNormalMap:fe.normalMapType===qL,decodeVideoTexture:!!fe.map&&fe.map.isVideoTexture===!0&&fe.map.encoding===br,clearcoat:An,clearcoatMap:An&&!!fe.clearcoatMap,clearcoatRoughnessMap:An&&!!fe.clearcoatRoughnessMap,clearcoatNormalMap:An&&!!fe.clearcoatNormalMap,iridescence:xn,iridescenceMap:xn&&!!fe.iridescenceMap,iridescenceThicknessMap:xn&&!!fe.iridescenceThicknessMap,displacementMap:!!fe.displacementMap,roughnessMap:!!fe.roughnessMap,metalnessMap:!!fe.metalnessMap,specularMap:!!fe.specularMap,specularIntensityMap:!!fe.specularIntensityMap,specularColorMap:!!fe.specularColorMap,opaque:fe.transparent===!1&&fe.blending===S0,alphaMap:!!fe.alphaMap,alphaTest:Yn,gradientMap:!!fe.gradientMap,sheen:fe.sheen>0,sheenColorMap:!!fe.sheenColorMap,sheenRoughnessMap:!!fe.sheenRoughnessMap,transmission:fe.transmission>0,transmissionMap:!!fe.transmissionMap,thicknessMap:!!fe.thicknessMap,combine:fe.combine,vertexTangents:!!fe.normalMap&&!!Ke.attributes.tangent,vertexColors:fe.vertexColors,vertexAlphas:fe.vertexColors===!0&&!!Ke.attributes.color&&Ke.attributes.color.itemSize===4,vertexUvs:!!fe.map||!!fe.bumpMap||!!fe.normalMap||!!fe.specularMap||!!fe.alphaMap||!!fe.emissiveMap||!!fe.roughnessMap||!!fe.metalnessMap||!!fe.clearcoatMap||!!fe.clearcoatRoughnessMap||!!fe.clearcoatNormalMap||!!fe.iridescenceMap||!!fe.iridescenceThicknessMap||!!fe.displacementMap||!!fe.transmissionMap||!!fe.thicknessMap||!!fe.specularIntensityMap||!!fe.specularColorMap||!!fe.sheenColorMap||!!fe.sheenRoughnessMap,uvsVertexOnly:!(!!fe.map||!!fe.bumpMap||!!fe.normalMap||!!fe.specularMap||!!fe.alphaMap||!!fe.emissiveMap||!!fe.roughnessMap||!!fe.metalnessMap||!!fe.clearcoatNormalMap||!!fe.iridescenceMap||!!fe.iridescenceThicknessMap||fe.transmission>0||!!fe.transmissionMap||!!fe.thicknessMap||!!fe.specularIntensityMap||!!fe.specularColorMap||fe.sheen>0||!!fe.sheenColorMap||!!fe.sheenRoughnessMap)&&!!fe.displacementMap,fog:!!xt,useFog:fe.fog===!0,fogExp2:xt&&xt.isFogExp2,flatShading:!!fe.flatShading,sizeAttenuation:fe.sizeAttenuation,logarithmicDepthBuffer:j,skinning:Tt.isSkinnedMesh===!0,morphTargets:Ke.morphAttributes.position!==void 0,morphNormals:Ke.morphAttributes.normal!==void 0,morphColors:Ke.morphAttributes.color!==void 0,morphTargetsCount:gt,morphTextureStride:zt,numDirLights:Te.directional.length,numPointLights:Te.point.length,numSpotLights:Te.spot.length,numRectAreaLights:Te.rectArea.length,numHemiLights:Te.hemi.length,numDirLightShadows:Te.directionalShadowMap.length,numPointLightShadows:Te.pointShadowMap.length,numSpotLightShadows:Te.spotShadowMap.length,numClippingPlanes:_.numPlanes,numClipIntersection:_.numIntersection,dithering:fe.dithering,shadowMapEnabled:w.shadowMap.enabled&&Y.length>0,shadowMapType:w.shadowMap.type,toneMapping:fe.toneMapped?w.toneMapping:Qc,physicallyCorrectLights:w.physicallyCorrectLights,premultipliedAlpha:fe.premultipliedAlpha,doubleSided:fe.side===Zh,flipSided:fe.side===Xs,useDepthPacking:!!fe.depthPacking,depthPacking:fe.depthPacking||0,index0AttributeName:fe.index0AttributeName,extensionDerivatives:fe.extensions&&fe.extensions.derivatives,extensionFragDepth:fe.extensions&&fe.extensions.fragDepth,extensionDrawBuffers:fe.extensions&&fe.extensions.drawBuffers,extensionShaderTextureLOD:fe.extensions&&fe.extensions.shaderTextureLOD,rendererExtensionFragDepth:F||l.has("EXT_frag_depth"),rendererExtensionDrawBuffers:F||l.has("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:F||l.has("EXT_shader_texture_lod"),customProgramCacheKey:fe.customProgramCacheKey()}}function O(fe){const Te=[];if(fe.shaderID?Te.push(fe.shaderID):(Te.push(fe.customVertexShaderID),Te.push(fe.customFragmentShaderID)),fe.defines!==void 0)for(const Y in fe.defines)Te.push(Y),Te.push(fe.defines[Y]);return fe.isRawShaderMaterial===!1&&(W(Te,fe),we(Te,fe),Te.push(w.outputEncoding)),Te.push(fe.customProgramCacheKey),Te.join()}function W(fe,Te){fe.push(Te.precision),fe.push(Te.outputEncoding),fe.push(Te.envMapMode),fe.push(Te.envMapCubeUVHeight),fe.push(Te.combine),fe.push(Te.vertexUvs),fe.push(Te.fogExp2),fe.push(Te.sizeAttenuation),fe.push(Te.morphTargetsCount),fe.push(Te.morphAttributeCount),fe.push(Te.numDirLights),fe.push(Te.numPointLights),fe.push(Te.numSpotLights),fe.push(Te.numHemiLights),fe.push(Te.numRectAreaLights),fe.push(Te.numDirLightShadows),fe.push(Te.numPointLightShadows),fe.push(Te.numSpotLightShadows),fe.push(Te.shadowMapType),fe.push(Te.toneMapping),fe.push(Te.numClippingPlanes),fe.push(Te.numClipIntersection),fe.push(Te.depthPacking)}function we(fe,Te){b.disableAll(),Te.isWebGL2&&b.enable(0),Te.supportsVertexTextures&&b.enable(1),Te.instancing&&b.enable(2),Te.instancingColor&&b.enable(3),Te.map&&b.enable(4),Te.matcap&&b.enable(5),Te.envMap&&b.enable(6),Te.lightMap&&b.enable(7),Te.aoMap&&b.enable(8),Te.emissiveMap&&b.enable(9),Te.bumpMap&&b.enable(10),Te.normalMap&&b.enable(11),Te.objectSpaceNormalMap&&b.enable(12),Te.tangentSpaceNormalMap&&b.enable(13),Te.clearcoat&&b.enable(14),Te.clearcoatMap&&b.enable(15),Te.clearcoatRoughnessMap&&b.enable(16),Te.clearcoatNormalMap&&b.enable(17),Te.iridescence&&b.enable(18),Te.iridescenceMap&&b.enable(19),Te.iridescenceThicknessMap&&b.enable(20),Te.displacementMap&&b.enable(21),Te.specularMap&&b.enable(22),Te.roughnessMap&&b.enable(23),Te.metalnessMap&&b.enable(24),Te.gradientMap&&b.enable(25),Te.alphaMap&&b.enable(26),Te.alphaTest&&b.enable(27),Te.vertexColors&&b.enable(28),Te.vertexAlphas&&b.enable(29),Te.vertexUvs&&b.enable(30),Te.vertexTangents&&b.enable(31),Te.uvsVertexOnly&&b.enable(32),Te.fog&&b.enable(33),fe.push(b.mask),b.disableAll(),Te.useFog&&b.enable(0),Te.flatShading&&b.enable(1),Te.logarithmicDepthBuffer&&b.enable(2),Te.skinning&&b.enable(3),Te.morphTargets&&b.enable(4),Te.morphNormals&&b.enable(5),Te.morphColors&&b.enable(6),Te.premultipliedAlpha&&b.enable(7),Te.shadowMapEnabled&&b.enable(8),Te.physicallyCorrectLights&&b.enable(9),Te.doubleSided&&b.enable(10),Te.flipSided&&b.enable(11),Te.useDepthPacking&&b.enable(12),Te.dithering&&b.enable(13),Te.specularIntensityMap&&b.enable(14),Te.specularColorMap&&b.enable(15),Te.transmission&&b.enable(16),Te.transmissionMap&&b.enable(17),Te.thicknessMap&&b.enable(18),Te.sheen&&b.enable(19),Te.sheenColorMap&&b.enable(20),Te.sheenRoughnessMap&&b.enable(21),Te.decodeVideoTexture&&b.enable(22),Te.opaque&&b.enable(23),fe.push(b.mask)}function R(fe){const Te=te[fe.type];let Y;if(Te){const qe=Ul[Te];Y=Yme.clone(qe.uniforms)}else Y=fe.uniforms;return Y}function se(fe,Te){let Y;for(let qe=0,Tt=I.length;qe<Tt;qe++){const xt=I[qe];if(xt.cacheKey===Te){Y=xt,++Y.usedTimes;break}}return Y===void 0&&(Y=new obe(w,Te,fe,g),I.push(Y)),Y}function me(fe){if(--fe.usedTimes===0){const Te=I.indexOf(fe);I[Te]=I[I.length-1],I.pop(),fe.destroy()}}function ze(fe){M.remove(fe)}function ee(){M.dispose()}return{getParameters:X,getProgramCacheKey:O,getUniforms:R,acquireProgram:se,releaseProgram:me,releaseShaderCache:ze,programs:I,dispose:ee}}function ube(){let w=new WeakMap;function t(g){let _=w.get(g);return _===void 0&&(_={},w.set(g,_)),_}function i(g){w.delete(g)}function l(g,_,b){w.get(g)[_]=b}function d(){w=new WeakMap}return{get:t,remove:i,update:l,dispose:d}}function dbe(w,t){return w.groupOrder!==t.groupOrder?w.groupOrder-t.groupOrder:w.renderOrder!==t.renderOrder?w.renderOrder-t.renderOrder:w.material.id!==t.material.id?w.material.id-t.material.id:w.z!==t.z?w.z-t.z:w.id-t.id}function Lne(w,t){return w.groupOrder!==t.groupOrder?w.groupOrder-t.groupOrder:w.renderOrder!==t.renderOrder?w.renderOrder-t.renderOrder:w.z!==t.z?t.z-w.z:w.id-t.id}function zne(){const w=[];let t=0;const i=[],l=[],d=[];function g(){t=0,i.length=0,l.length=0,d.length=0}function _(j,B,K,te,X,O){let W=w[t];return W===void 0?(W={id:j.id,object:j,geometry:B,material:K,groupOrder:te,renderOrder:j.renderOrder,z:X,group:O},w[t]=W):(W.id=j.id,W.object=j,W.geometry=B,W.material=K,W.groupOrder=te,W.renderOrder=j.renderOrder,W.z=X,W.group=O),t++,W}function b(j,B,K,te,X,O){const W=_(j,B,K,te,X,O);K.transmission>0?l.push(W):K.transparent===!0?d.push(W):i.push(W)}function M(j,B,K,te,X,O){const W=_(j,B,K,te,X,O);K.transmission>0?l.unshift(W):K.transparent===!0?d.unshift(W):i.unshift(W)}function I(j,B){i.length>1&&i.sort(j||dbe),l.length>1&&l.sort(B||Lne),d.length>1&&d.sort(B||Lne)}function F(){for(let j=t,B=w.length;j<B;j++){const K=w[j];if(K.id===null)break;K.id=null,K.object=null,K.geometry=null,K.material=null,K.group=null}}return{opaque:i,transmissive:l,transparent:d,init:g,push:b,unshift:M,finish:F,sort:I}}function fbe(){let w=new WeakMap;function t(l,d){let g;return w.has(l)===!1?(g=new zne,w.set(l,[g])):d>=w.get(l).length?(g=new zne,w.get(l).push(g)):g=w.get(l)[d],g}function i(){w=new WeakMap}return{get:t,dispose:i}}function hbe(){const w={};return{get:function(t){if(w[t.id]!==void 0)return w[t.id];let i;switch(t.type){case"DirectionalLight":i={direction:new Ne,color:new Fn};break;case"SpotLight":i={position:new Ne,direction:new Ne,color:new Fn,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":i={position:new Ne,color:new Fn,distance:0,decay:0};break;case"HemisphereLight":i={direction:new Ne,skyColor:new Fn,groundColor:new Fn};break;case"RectAreaLight":i={color:new Fn,position:new Ne,halfWidth:new Ne,halfHeight:new Ne};break}return w[t.id]=i,i}}}function pbe(){const w={};return{get:function(t){if(w[t.id]!==void 0)return w[t.id];let i;switch(t.type){case"DirectionalLight":i={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Rn};break;case"SpotLight":i={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Rn};break;case"PointLight":i={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Rn,shadowCameraNear:1,shadowCameraFar:1e3};break}return w[t.id]=i,i}}}let mbe=0;function gbe(w,t){return(t.castShadow?1:0)-(w.castShadow?1:0)}function vbe(w,t){const i=new hbe,l=pbe(),d={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotShadow:[],spotShadowMap:[],spotShadowMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[]};for(let F=0;F<9;F++)d.probe.push(new Ne);const g=new Ne,_=new cr,b=new cr;function M(F,j){let B=0,K=0,te=0;for(let Te=0;Te<9;Te++)d.probe[Te].set(0,0,0);let X=0,O=0,W=0,we=0,R=0,se=0,me=0,ze=0;F.sort(gbe);const ee=j!==!0?Math.PI:1;for(let Te=0,Y=F.length;Te<Y;Te++){const qe=F[Te],Tt=qe.color,xt=qe.intensity,Ke=qe.distance,_e=qe.shadow&&qe.shadow.map?qe.shadow.map.texture:null;if(qe.isAmbientLight)B+=Tt.r*xt*ee,K+=Tt.g*xt*ee,te+=Tt.b*xt*ee;else if(qe.isLightProbe)for(let Qe=0;Qe<9;Qe++)d.probe[Qe].addScaledVector(qe.sh.coefficients[Qe],xt);else if(qe.isDirectionalLight){const Qe=i.get(qe);if(Qe.color.copy(qe.color).multiplyScalar(qe.intensity*ee),qe.castShadow){const Ge=qe.shadow,yt=l.get(qe);yt.shadowBias=Ge.bias,yt.shadowNormalBias=Ge.normalBias,yt.shadowRadius=Ge.radius,yt.shadowMapSize=Ge.mapSize,d.directionalShadow[X]=yt,d.directionalShadowMap[X]=_e,d.directionalShadowMatrix[X]=qe.shadow.matrix,se++}d.directional[X]=Qe,X++}else if(qe.isSpotLight){const Qe=i.get(qe);if(Qe.position.setFromMatrixPosition(qe.matrixWorld),Qe.color.copy(Tt).multiplyScalar(xt*ee),Qe.distance=Ke,Qe.coneCos=Math.cos(qe.angle),Qe.penumbraCos=Math.cos(qe.angle*(1-qe.penumbra)),Qe.decay=qe.decay,qe.castShadow){const Ge=qe.shadow,yt=l.get(qe);yt.shadowBias=Ge.bias,yt.shadowNormalBias=Ge.normalBias,yt.shadowRadius=Ge.radius,yt.shadowMapSize=Ge.mapSize,d.spotShadow[W]=yt,d.spotShadowMap[W]=_e,d.spotShadowMatrix[W]=qe.shadow.matrix,ze++}d.spot[W]=Qe,W++}else if(qe.isRectAreaLight){const Qe=i.get(qe);Qe.color.copy(Tt).multiplyScalar(xt),Qe.halfWidth.set(qe.width*.5,0,0),Qe.halfHeight.set(0,qe.height*.5,0),d.rectArea[we]=Qe,we++}else if(qe.isPointLight){const Qe=i.get(qe);if(Qe.color.copy(qe.color).multiplyScalar(qe.intensity*ee),Qe.distance=qe.distance,Qe.decay=qe.decay,qe.castShadow){const Ge=qe.shadow,yt=l.get(qe);yt.shadowBias=Ge.bias,yt.shadowNormalBias=Ge.normalBias,yt.shadowRadius=Ge.radius,yt.shadowMapSize=Ge.mapSize,yt.shadowCameraNear=Ge.camera.near,yt.shadowCameraFar=Ge.camera.far,d.pointShadow[O]=yt,d.pointShadowMap[O]=_e,d.pointShadowMatrix[O]=qe.shadow.matrix,me++}d.point[O]=Qe,O++}else if(qe.isHemisphereLight){const Qe=i.get(qe);Qe.skyColor.copy(qe.color).multiplyScalar(xt*ee),Qe.groundColor.copy(qe.groundColor).multiplyScalar(xt*ee),d.hemi[R]=Qe,R++}}we>0&&(t.isWebGL2||w.has("OES_texture_float_linear")===!0?(d.rectAreaLTC1=Zt.LTC_FLOAT_1,d.rectAreaLTC2=Zt.LTC_FLOAT_2):w.has("OES_texture_half_float_linear")===!0?(d.rectAreaLTC1=Zt.LTC_HALF_1,d.rectAreaLTC2=Zt.LTC_HALF_2):console.error("THREE.WebGLRenderer: Unable to use RectAreaLight. Missing WebGL extensions.")),d.ambient[0]=B,d.ambient[1]=K,d.ambient[2]=te;const fe=d.hash;(fe.directionalLength!==X||fe.pointLength!==O||fe.spotLength!==W||fe.rectAreaLength!==we||fe.hemiLength!==R||fe.numDirectionalShadows!==se||fe.numPointShadows!==me||fe.numSpotShadows!==ze)&&(d.directional.length=X,d.spot.length=W,d.rectArea.length=we,d.point.length=O,d.hemi.length=R,d.directionalShadow.length=se,d.directionalShadowMap.length=se,d.pointShadow.length=me,d.pointShadowMap.length=me,d.spotShadow.length=ze,d.spotShadowMap.length=ze,d.directionalShadowMatrix.length=se,d.pointShadowMatrix.length=me,d.spotShadowMatrix.length=ze,fe.directionalLength=X,fe.pointLength=O,fe.spotLength=W,fe.rectAreaLength=we,fe.hemiLength=R,fe.numDirectionalShadows=se,fe.numPointShadows=me,fe.numSpotShadows=ze,d.version=mbe++)}function I(F,j){let B=0,K=0,te=0,X=0,O=0;const W=j.matrixWorldInverse;for(let we=0,R=F.length;we<R;we++){const se=F[we];if(se.isDirectionalLight){const me=d.directional[B];me.direction.setFromMatrixPosition(se.matrixWorld),g.setFromMatrixPosition(se.target.matrixWorld),me.direction.sub(g),me.direction.transformDirection(W),B++}else if(se.isSpotLight){const me=d.spot[te];me.position.setFromMatrixPosition(se.matrixWorld),me.position.applyMatrix4(W),me.direction.setFromMatrixPosition(se.matrixWorld),g.setFromMatrixPosition(se.target.matrixWorld),me.direction.sub(g),me.direction.transformDirection(W),te++}else if(se.isRectAreaLight){const me=d.rectArea[X];me.position.setFromMatrixPosition(se.matrixWorld),me.position.applyMatrix4(W),b.identity(),_.copy(se.matrixWorld),_.premultiply(W),b.extractRotation(_),me.halfWidth.set(se.width*.5,0,0),me.halfHeight.set(0,se.height*.5,0),me.halfWidth.applyMatrix4(b),me.halfHeight.applyMatrix4(b),X++}else if(se.isPointLight){const me=d.point[K];me.position.setFromMatrixPosition(se.matrixWorld),me.position.applyMatrix4(W),K++}else if(se.isHemisphereLight){const me=d.hemi[O];me.direction.setFromMatrixPosition(se.matrixWorld),me.direction.transformDirection(W),O++}}}return{setup:M,setupView:I,state:d}}function Nne(w,t){const i=new vbe(w,t),l=[],d=[];function g(){l.length=0,d.length=0}function _(j){l.push(j)}function b(j){d.push(j)}function M(j){i.setup(l,j)}function I(j){i.setupView(l,j)}return{init:g,state:{lightsArray:l,shadowsArray:d,lights:i},setupLights:M,setupLightsView:I,pushLight:_,pushShadow:b}}function ybe(w,t){let i=new WeakMap;function l(g,_=0){let b;return i.has(g)===!1?(b=new Nne(w,t),i.set(g,[b])):_>=i.get(g).length?(b=new Nne(w,t),i.get(g).push(b)):b=i.get(g)[_],b}function d(){i=new WeakMap}return{get:l,dispose:d}}class bbe extends Vl{constructor(t){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=bme,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(t)}copy(t){return super.copy(t),this.depthPacking=t.depthPacking,this.map=t.map,this.alphaMap=t.alphaMap,this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this}}class _be extends Vl{constructor(t){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.referencePosition=new Ne,this.nearDistance=1,this.farDistance=1e3,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(t)}copy(t){return super.copy(t),this.referencePosition.copy(t.referencePosition),this.nearDistance=t.nearDistance,this.farDistance=t.farDistance,this.map=t.map,this.alphaMap=t.alphaMap,this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this}}const xbe=`void main() {
	gl_Position = vec4( position, 1.0 );
}`,wbe=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
#include <packing>
void main() {
	const float samples = float( VSM_SAMPLES );
	float mean = 0.0;
	float squared_mean = 0.0;
	float uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );
	float uvStart = samples <= 1.0 ? 0.0 : - 1.0;
	for ( float i = 0.0; i < samples; i ++ ) {
		float uvOffset = uvStart + i * uvStride;
		#ifdef HORIZONTAL_PASS
			vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );
			mean += distribution.x;
			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
		#else
			float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );
			mean += depth;
			squared_mean += depth * depth;
		#endif
	}
	mean = mean / samples;
	squared_mean = squared_mean / samples;
	float std_dev = sqrt( squared_mean - mean * mean );
	gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );
}`;function Sbe(w,t,i){let l=new $L;const d=new Rn,g=new Rn,_=new Er,b=new bbe({depthPacking:_me}),M=new _be,I={},F=i.maxTextureSize,j={0:Xs,1:T0,2:Zh},B=new ep({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new Rn},radius:{value:4}},vertexShader:xbe,fragmentShader:wbe}),K=B.clone();K.defines.HORIZONTAL_PASS=1;const te=new es;te.setAttribute("position",new xa(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const X=new vo(te,B),O=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=ure,this.render=function(se,me,ze){if(O.enabled===!1||O.autoUpdate===!1&&O.needsUpdate===!1||se.length===0)return;const ee=w.getRenderTarget(),fe=w.getActiveCubeFace(),Te=w.getActiveMipmapLevel(),Y=w.state;Y.setBlending(qd),Y.buffers.color.setClear(1,1,1,1),Y.buffers.depth.setTest(!0),Y.setScissorTest(!1);for(let qe=0,Tt=se.length;qe<Tt;qe++){const xt=se[qe],Ke=xt.shadow;if(Ke===void 0){console.warn("THREE.WebGLShadowMap:",xt,"has no shadow.");continue}if(Ke.autoUpdate===!1&&Ke.needsUpdate===!1)continue;d.copy(Ke.mapSize);const _e=Ke.getFrameExtents();if(d.multiply(_e),g.copy(Ke.mapSize),(d.x>F||d.y>F)&&(d.x>F&&(g.x=Math.floor(F/_e.x),d.x=g.x*_e.x,Ke.mapSize.x=g.x),d.y>F&&(g.y=Math.floor(F/_e.y),d.y=g.y*_e.y,Ke.mapSize.y=g.y)),Ke.map===null){const Ge=this.type!==m1?{minFilter:Qi,magFilter:Qi}:{};Ke.map=new Qh(d.x,d.y,Ge),Ke.map.texture.name=xt.name+".shadowMap",Ke.camera.updateProjectionMatrix()}w.setRenderTarget(Ke.map),w.clear();const Qe=Ke.getViewportCount();for(let Ge=0;Ge<Qe;Ge++){const yt=Ke.getViewport(Ge);_.set(g.x*yt.x,g.y*yt.y,g.x*yt.z,g.y*yt.w),Y.viewport(_),Ke.updateMatrices(xt,Ge),l=Ke.getFrustum(),R(me,ze,Ke.camera,xt,this.type)}Ke.isPointLightShadow!==!0&&this.type===m1&&W(Ke,ze),Ke.needsUpdate=!1}O.needsUpdate=!1,w.setRenderTarget(ee,fe,Te)};function W(se,me){const ze=t.update(X);B.defines.VSM_SAMPLES!==se.blurSamples&&(B.defines.VSM_SAMPLES=se.blurSamples,K.defines.VSM_SAMPLES=se.blurSamples,B.needsUpdate=!0,K.needsUpdate=!0),se.mapPass===null&&(se.mapPass=new Qh(d.x,d.y)),B.uniforms.shadow_pass.value=se.map.texture,B.uniforms.resolution.value=se.mapSize,B.uniforms.radius.value=se.radius,w.setRenderTarget(se.mapPass),w.clear(),w.renderBufferDirect(me,null,ze,B,X,null),K.uniforms.shadow_pass.value=se.mapPass.texture,K.uniforms.resolution.value=se.mapSize,K.uniforms.radius.value=se.radius,w.setRenderTarget(se.map),w.clear(),w.renderBufferDirect(me,null,ze,K,X,null)}function we(se,me,ze,ee,fe,Te){let Y=null;const qe=ze.isPointLight===!0?se.customDistanceMaterial:se.customDepthMaterial;if(qe!==void 0?Y=qe:Y=ze.isPointLight===!0?M:b,w.localClippingEnabled&&me.clipShadows===!0&&Array.isArray(me.clippingPlanes)&&me.clippingPlanes.length!==0||me.displacementMap&&me.displacementScale!==0||me.alphaMap&&me.alphaTest>0){const Tt=Y.uuid,xt=me.uuid;let Ke=I[Tt];Ke===void 0&&(Ke={},I[Tt]=Ke);let _e=Ke[xt];_e===void 0&&(_e=Y.clone(),Ke[xt]=_e),Y=_e}return Y.visible=me.visible,Y.wireframe=me.wireframe,Te===m1?Y.side=me.shadowSide!==null?me.shadowSide:me.side:Y.side=me.shadowSide!==null?me.shadowSide:j[me.side],Y.alphaMap=me.alphaMap,Y.alphaTest=me.alphaTest,Y.clipShadows=me.clipShadows,Y.clippingPlanes=me.clippingPlanes,Y.clipIntersection=me.clipIntersection,Y.displacementMap=me.displacementMap,Y.displacementScale=me.displacementScale,Y.displacementBias=me.displacementBias,Y.wireframeLinewidth=me.wireframeLinewidth,Y.linewidth=me.linewidth,ze.isPointLight===!0&&Y.isMeshDistanceMaterial===!0&&(Y.referencePosition.setFromMatrixPosition(ze.matrixWorld),Y.nearDistance=ee,Y.farDistance=fe),Y}function R(se,me,ze,ee,fe){if(se.visible===!1)return;if(se.layers.test(me.layers)&&(se.isMesh||se.isLine||se.isPoints)&&(se.castShadow||se.receiveShadow&&fe===m1)&&(!se.frustumCulled||l.intersectsObject(se))){se.modelViewMatrix.multiplyMatrices(ze.matrixWorldInverse,se.matrixWorld);const qe=t.update(se),Tt=se.material;if(Array.isArray(Tt)){const xt=qe.groups;for(let Ke=0,_e=xt.length;Ke<_e;Ke++){const Qe=xt[Ke],Ge=Tt[Qe.materialIndex];if(Ge&&Ge.visible){const yt=we(se,Ge,ee,ze.near,ze.far,fe);w.renderBufferDirect(ze,null,qe,yt,se,Qe)}}}else if(Tt.visible){const xt=we(se,Tt,ee,ze.near,ze.far,fe);w.renderBufferDirect(ze,null,qe,xt,se,null)}}const Y=se.children;for(let qe=0,Tt=Y.length;qe<Tt;qe++)R(Y[qe],me,ze,ee,fe)}}function Ebe(w,t,i){const l=i.isWebGL2;function d(){let Ie=!1;const Gt=new Er;let Bt=null;const fn=new Er(0,0,0,0);return{setMask:function(Kt){Bt!==Kt&&!Ie&&(w.colorMask(Kt,Kt,Kt,Kt),Bt=Kt)},setLocked:function(Kt){Ie=Kt},setClear:function(Kt,tn,Ft,pn,zn){zn===!0&&(Kt*=pn,tn*=pn,Ft*=pn),Gt.set(Kt,tn,Ft,pn),fn.equals(Gt)===!1&&(w.clearColor(Kt,tn,Ft,pn),fn.copy(Gt))},reset:function(){Ie=!1,Bt=null,fn.set(-1,0,0,0)}}}function g(){let Ie=!1,Gt=null,Bt=null,fn=null;return{setTest:function(Kt){Kt?Jt(2929):pt(2929)},setMask:function(Kt){Gt!==Kt&&!Ie&&(w.depthMask(Kt),Gt=Kt)},setFunc:function(Kt){if(Bt!==Kt){if(Kt)switch(Kt){case Upe:w.depthFunc(512);break;case Vpe:w.depthFunc(519);break;case Hpe:w.depthFunc(513);break;case TL:w.depthFunc(515);break;case Gpe:w.depthFunc(514);break;case Wpe:w.depthFunc(518);break;case qpe:w.depthFunc(516);break;case Kpe:w.depthFunc(517);break;default:w.depthFunc(515)}else w.depthFunc(515);Bt=Kt}},setLocked:function(Kt){Ie=Kt},setClear:function(Kt){fn!==Kt&&(w.clearDepth(Kt),fn=Kt)},reset:function(){Ie=!1,Gt=null,Bt=null,fn=null}}}function _(){let Ie=!1,Gt=null,Bt=null,fn=null,Kt=null,tn=null,Ft=null,pn=null,zn=null;return{setTest:function(Bn){Ie||(Bn?Jt(2960):pt(2960))},setMask:function(Bn){Gt!==Bn&&!Ie&&(w.stencilMask(Bn),Gt=Bn)},setFunc:function(Bn,ti,Ni){(Bt!==Bn||fn!==ti||Kt!==Ni)&&(w.stencilFunc(Bn,ti,Ni),Bt=Bn,fn=ti,Kt=Ni)},setOp:function(Bn,ti,Ni){(tn!==Bn||Ft!==ti||pn!==Ni)&&(w.stencilOp(Bn,ti,Ni),tn=Bn,Ft=ti,pn=Ni)},setLocked:function(Bn){Ie=Bn},setClear:function(Bn){zn!==Bn&&(w.clearStencil(Bn),zn=Bn)},reset:function(){Ie=!1,Gt=null,Bt=null,fn=null,Kt=null,tn=null,Ft=null,pn=null,zn=null}}}const b=new d,M=new g,I=new _;let F={},j={},B=new WeakMap,K=[],te=null,X=!1,O=null,W=null,we=null,R=null,se=null,me=null,ze=null,ee=!1,fe=null,Te=null,Y=null,qe=null,Tt=null;const xt=w.getParameter(35661);let Ke=!1,_e=0;const Qe=w.getParameter(7938);Qe.indexOf("WebGL")!==-1?(_e=parseFloat(/^WebGL (\d)/.exec(Qe)[1]),Ke=_e>=1):Qe.indexOf("OpenGL ES")!==-1&&(_e=parseFloat(/^OpenGL ES (\d)/.exec(Qe)[1]),Ke=_e>=2);let Ge=null,yt={};const ft=w.getParameter(3088),gt=w.getParameter(2978),zt=new Er().fromArray(ft),kt=new Er().fromArray(gt);function Rt(Ie,Gt,Bt){const fn=new Uint8Array(4),Kt=w.createTexture();w.bindTexture(Ie,Kt),w.texParameteri(Ie,10241,9728),w.texParameteri(Ie,10240,9728);for(let tn=0;tn<Bt;tn++)w.texImage2D(Gt+tn,0,6408,1,1,0,6408,5121,fn);return Kt}const Yt={};Yt[3553]=Rt(3553,3553,1),Yt[34067]=Rt(34067,34069,6),b.setClear(0,0,0,1),M.setClear(1),I.setClear(0),Jt(2929),M.setFunc(TL),Mr(!1),Or(Mte),Jt(2884),Ln(qd);function Jt(Ie){F[Ie]!==!0&&(w.enable(Ie),F[Ie]=!0)}function pt(Ie){F[Ie]!==!1&&(w.disable(Ie),F[Ie]=!1)}function Yn(Ie,Gt){return j[Ie]!==Gt?(w.bindFramebuffer(Ie,Gt),j[Ie]=Gt,l&&(Ie===36009&&(j[36160]=Gt),Ie===36160&&(j[36009]=Gt)),!0):!1}function An(Ie,Gt){let Bt=K,fn=!1;if(Ie)if(Bt=B.get(Gt),Bt===void 0&&(Bt=[],B.set(Gt,Bt)),Ie.isWebGLMultipleRenderTargets){const Kt=Ie.texture;if(Bt.length!==Kt.length||Bt[0]!==36064){for(let tn=0,Ft=Kt.length;tn<Ft;tn++)Bt[tn]=36064+tn;Bt.length=Kt.length,fn=!0}}else Bt[0]!==36064&&(Bt[0]=36064,fn=!0);else Bt[0]!==1029&&(Bt[0]=1029,fn=!0);fn&&(i.isWebGL2?w.drawBuffers(Bt):t.get("WEBGL_draw_buffers").drawBuffersWEBGL(Bt))}function xn(Ie){return te!==Ie?(w.useProgram(Ie),te=Ie,!0):!1}const Xt={[_0]:32774,[Ape]:32778,[Ipe]:32779};if(l)Xt[Ite]=32775,Xt[Dte]=32776;else{const Ie=t.get("EXT_blend_minmax");Ie!==null&&(Xt[Ite]=Ie.MIN_EXT,Xt[Dte]=Ie.MAX_EXT)}const Tn={[Dpe]:0,[Ope]:1,[Rpe]:768,[fre]:770,[Bpe]:776,[Fpe]:774,[zpe]:772,[Lpe]:769,[hre]:771,[jpe]:775,[Npe]:773};function Ln(Ie,Gt,Bt,fn,Kt,tn,Ft,pn){if(Ie===qd){X===!0&&(pt(3042),X=!1);return}if(X===!1&&(Jt(3042),X=!0),Ie!==Cpe){if(Ie!==O||pn!==ee){if((W!==_0||se!==_0)&&(w.blendEquation(32774),W=_0,se=_0),pn)switch(Ie){case S0:w.blendFuncSeparate(1,771,1,771);break;case Pte:w.blendFunc(1,1);break;case Cte:w.blendFuncSeparate(0,769,0,1);break;case Ate:w.blendFuncSeparate(0,768,0,770);break;default:console.error("THREE.WebGLState: Invalid blending: ",Ie);break}else switch(Ie){case S0:w.blendFuncSeparate(770,771,1,771);break;case Pte:w.blendFunc(770,1);break;case Cte:w.blendFuncSeparate(0,769,0,1);break;case Ate:w.blendFunc(0,768);break;default:console.error("THREE.WebGLState: Invalid blending: ",Ie);break}we=null,R=null,me=null,ze=null,O=Ie,ee=pn}return}Kt=Kt||Gt,tn=tn||Bt,Ft=Ft||fn,(Gt!==W||Kt!==se)&&(w.blendEquationSeparate(Xt[Gt],Xt[Kt]),W=Gt,se=Kt),(Bt!==we||fn!==R||tn!==me||Ft!==ze)&&(w.blendFuncSeparate(Tn[Bt],Tn[fn],Tn[tn],Tn[Ft]),we=Bt,R=fn,me=tn,ze=Ft),O=Ie,ee=null}function hn(Ie,Gt){Ie.side===Zh?pt(2884):Jt(2884);let Bt=Ie.side===Xs;Gt&&(Bt=!Bt),Mr(Bt),Ie.blending===S0&&Ie.transparent===!1?Ln(qd):Ln(Ie.blending,Ie.blendEquation,Ie.blendSrc,Ie.blendDst,Ie.blendEquationAlpha,Ie.blendSrcAlpha,Ie.blendDstAlpha,Ie.premultipliedAlpha),M.setFunc(Ie.depthFunc),M.setTest(Ie.depthTest),M.setMask(Ie.depthWrite),b.setMask(Ie.colorWrite);const fn=Ie.stencilWrite;I.setTest(fn),fn&&(I.setMask(Ie.stencilWriteMask),I.setFunc(Ie.stencilFunc,Ie.stencilRef,Ie.stencilFuncMask),I.setOp(Ie.stencilFail,Ie.stencilZFail,Ie.stencilZPass)),dr(Ie.polygonOffset,Ie.polygonOffsetFactor,Ie.polygonOffsetUnits),Ie.alphaToCoverage===!0?Jt(32926):pt(32926)}function Mr(Ie){fe!==Ie&&(Ie?w.frontFace(2304):w.frontFace(2305),fe=Ie)}function Or(Ie){Ie!==Tpe?(Jt(2884),Ie!==Te&&(Ie===Mte?w.cullFace(1029):Ie===Mpe?w.cullFace(1028):w.cullFace(1032))):pt(2884),Te=Ie}function jr(Ie){Ie!==Y&&(Ke&&w.lineWidth(Ie),Y=Ie)}function dr(Ie,Gt,Bt){Ie?(Jt(32823),(qe!==Gt||Tt!==Bt)&&(w.polygonOffset(Gt,Bt),qe=Gt,Tt=Bt)):pt(32823)}function Wn(Ie){Ie?Jt(3089):pt(3089)}function qn(Ie){Ie===void 0&&(Ie=33984+xt-1),Ge!==Ie&&(w.activeTexture(Ie),Ge=Ie)}function pr(Ie,Gt){Ge===null&&qn();let Bt=yt[Ge];Bt===void 0&&(Bt={type:void 0,texture:void 0},yt[Ge]=Bt),(Bt.type!==Ie||Bt.texture!==Gt)&&(w.bindTexture(Ie,Gt||Yt[Ie]),Bt.type=Ie,Bt.texture=Gt)}function Zr(){const Ie=yt[Ge];Ie!==void 0&&Ie.type!==void 0&&(w.bindTexture(Ie.type,null),Ie.type=void 0,Ie.texture=void 0)}function Se(){try{w.compressedTexImage2D.apply(w,arguments)}catch(Ie){console.error("THREE.WebGLState:",Ie)}}function he(){try{w.texSubImage2D.apply(w,arguments)}catch(Ie){console.error("THREE.WebGLState:",Ie)}}function ut(){try{w.texSubImage3D.apply(w,arguments)}catch(Ie){console.error("THREE.WebGLState:",Ie)}}function Nt(){try{w.compressedTexSubImage2D.apply(w,arguments)}catch(Ie){console.error("THREE.WebGLState:",Ie)}}function jt(){try{w.texStorage2D.apply(w,arguments)}catch(Ie){console.error("THREE.WebGLState:",Ie)}}function qt(){try{w.texStorage3D.apply(w,arguments)}catch(Ie){console.error("THREE.WebGLState:",Ie)}}function vn(){try{w.texImage2D.apply(w,arguments)}catch(Ie){console.error("THREE.WebGLState:",Ie)}}function ve(){try{w.texImage3D.apply(w,arguments)}catch(Ie){console.error("THREE.WebGLState:",Ie)}}function Et(Ie){zt.equals(Ie)===!1&&(w.scissor(Ie.x,Ie.y,Ie.z,Ie.w),zt.copy(Ie))}function Ht(Ie){kt.equals(Ie)===!1&&(w.viewport(Ie.x,Ie.y,Ie.z,Ie.w),kt.copy(Ie))}function Ut(){w.disable(3042),w.disable(2884),w.disable(2929),w.disable(32823),w.disable(3089),w.disable(2960),w.disable(32926),w.blendEquation(32774),w.blendFunc(1,0),w.blendFuncSeparate(1,0,1,0),w.colorMask(!0,!0,!0,!0),w.clearColor(0,0,0,0),w.depthMask(!0),w.depthFunc(513),w.clearDepth(1),w.stencilMask(4294967295),w.stencilFunc(519,0,4294967295),w.stencilOp(7680,7680,7680),w.clearStencil(0),w.cullFace(1029),w.frontFace(2305),w.polygonOffset(0,0),w.activeTexture(33984),w.bindFramebuffer(36160,null),l===!0&&(w.bindFramebuffer(36009,null),w.bindFramebuffer(36008,null)),w.useProgram(null),w.lineWidth(1),w.scissor(0,0,w.canvas.width,w.canvas.height),w.viewport(0,0,w.canvas.width,w.canvas.height),F={},Ge=null,yt={},j={},B=new WeakMap,K=[],te=null,X=!1,O=null,W=null,we=null,R=null,se=null,me=null,ze=null,ee=!1,fe=null,Te=null,Y=null,qe=null,Tt=null,zt.set(0,0,w.canvas.width,w.canvas.height),kt.set(0,0,w.canvas.width,w.canvas.height),b.reset(),M.reset(),I.reset()}return{buffers:{color:b,depth:M,stencil:I},enable:Jt,disable:pt,bindFramebuffer:Yn,drawBuffers:An,useProgram:xn,setBlending:Ln,setMaterial:hn,setFlipSided:Mr,setCullFace:Or,setLineWidth:jr,setPolygonOffset:dr,setScissorTest:Wn,activeTexture:qn,bindTexture:pr,unbindTexture:Zr,compressedTexImage2D:Se,texImage2D:vn,texImage3D:ve,texStorage2D:jt,texStorage3D:qt,texSubImage2D:he,texSubImage3D:ut,compressedTexSubImage2D:Nt,scissor:Et,viewport:Ht,reset:Ut}}function kbe(w,t,i,l,d,g,_){const b=d.isWebGL2,M=d.maxTextures,I=d.maxCubemapSize,F=d.maxTextureSize,j=d.maxSamples,B=t.has("WEBGL_multisampled_render_to_texture")?t.get("WEBGL_multisampled_render_to_texture"):null,K=/OculusBrowser/g.test(navigator.userAgent),te=new WeakMap;let X;const O=new WeakMap;let W=!1;try{W=typeof OffscreenCanvas!="undefined"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch{}function we(Se,he){return W?new OffscreenCanvas(Se,he):E1("canvas")}function R(Se,he,ut,Nt){let jt=1;if((Se.width>Nt||Se.height>Nt)&&(jt=Nt/Math.max(Se.width,Se.height)),jt<1||he===!0)if(typeof HTMLImageElement!="undefined"&&Se instanceof HTMLImageElement||typeof HTMLCanvasElement!="undefined"&&Se instanceof HTMLCanvasElement||typeof ImageBitmap!="undefined"&&Se instanceof ImageBitmap){const qt=he?lP:Math.floor,vn=qt(jt*Se.width),ve=qt(jt*Se.height);X===void 0&&(X=we(vn,ve));const Et=ut?we(vn,ve):X;return Et.width=vn,Et.height=ve,Et.getContext("2d").drawImage(Se,0,0,vn,ve),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+Se.width+"x"+Se.height+") to ("+vn+"x"+ve+")."),Et}else return"data"in Se&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+Se.width+"x"+Se.height+")."),Se;return Se}function se(Se){return OL(Se.width)&&OL(Se.height)}function me(Se){return b?!1:Se.wrapS!==Ja||Se.wrapT!==Ja||Se.minFilter!==Qi&&Se.minFilter!==ea}function ze(Se,he){return Se.generateMipmaps&&he&&Se.minFilter!==Qi&&Se.minFilter!==ea}function ee(Se){w.generateMipmap(Se)}function fe(Se,he,ut,Nt,jt=!1){if(b===!1)return he;if(Se!==null){if(w[Se]!==void 0)return w[Se];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+Se+"'")}let qt=he;return he===6403&&(ut===5126&&(qt=33326),ut===5131&&(qt=33325),ut===5121&&(qt=33321)),he===33319&&(ut===5126&&(qt=33328),ut===5131&&(qt=33327),ut===5121&&(qt=33323)),he===6408&&(ut===5126&&(qt=34836),ut===5131&&(qt=34842),ut===5121&&(qt=Nt===br&&jt===!1?35907:32856),ut===32819&&(qt=32854),ut===32820&&(qt=32855)),(qt===33325||qt===33326||qt===33327||qt===33328||qt===34842||qt===34836)&&t.get("EXT_color_buffer_float"),qt}function Te(Se,he,ut){return ze(Se,ut)===!0||Se.isFramebufferTexture&&Se.minFilter!==Qi&&Se.minFilter!==ea?Math.log2(Math.max(he.width,he.height))+1:Se.mipmaps!==void 0&&Se.mipmaps.length>0?Se.mipmaps.length:Se.isCompressedTexture&&Array.isArray(Se.image)?he.mipmaps.length:1}function Y(Se){return Se===Qi||Se===CL||Se===AL?9728:9729}function qe(Se){const he=Se.target;he.removeEventListener("dispose",qe),xt(he),he.isVideoTexture&&te.delete(he)}function Tt(Se){const he=Se.target;he.removeEventListener("dispose",Tt),_e(he)}function xt(Se){const he=l.get(Se);if(he.__webglInit===void 0)return;const ut=Se.source,Nt=O.get(ut);if(Nt){const jt=Nt[he.__cacheKey];jt.usedTimes--,jt.usedTimes===0&&Ke(Se),Object.keys(Nt).length===0&&O.delete(ut)}l.remove(Se)}function Ke(Se){const he=l.get(Se);w.deleteTexture(he.__webglTexture);const ut=Se.source,Nt=O.get(ut);delete Nt[he.__cacheKey],_.memory.textures--}function _e(Se){const he=Se.texture,ut=l.get(Se),Nt=l.get(he);if(Nt.__webglTexture!==void 0&&(w.deleteTexture(Nt.__webglTexture),_.memory.textures--),Se.depthTexture&&Se.depthTexture.dispose(),Se.isWebGLCubeRenderTarget)for(let jt=0;jt<6;jt++)w.deleteFramebuffer(ut.__webglFramebuffer[jt]),ut.__webglDepthbuffer&&w.deleteRenderbuffer(ut.__webglDepthbuffer[jt]);else{if(w.deleteFramebuffer(ut.__webglFramebuffer),ut.__webglDepthbuffer&&w.deleteRenderbuffer(ut.__webglDepthbuffer),ut.__webglMultisampledFramebuffer&&w.deleteFramebuffer(ut.__webglMultisampledFramebuffer),ut.__webglColorRenderbuffer)for(let jt=0;jt<ut.__webglColorRenderbuffer.length;jt++)ut.__webglColorRenderbuffer[jt]&&w.deleteRenderbuffer(ut.__webglColorRenderbuffer[jt]);ut.__webglDepthRenderbuffer&&w.deleteRenderbuffer(ut.__webglDepthRenderbuffer)}if(Se.isWebGLMultipleRenderTargets)for(let jt=0,qt=he.length;jt<qt;jt++){const vn=l.get(he[jt]);vn.__webglTexture&&(w.deleteTexture(vn.__webglTexture),_.memory.textures--),l.remove(he[jt])}l.remove(he),l.remove(Se)}let Qe=0;function Ge(){Qe=0}function yt(){const Se=Qe;return Se>=M&&console.warn("THREE.WebGLTextures: Trying to use "+Se+" texture units while this GPU supports only "+M),Qe+=1,Se}function ft(Se){const he=[];return he.push(Se.wrapS),he.push(Se.wrapT),he.push(Se.magFilter),he.push(Se.minFilter),he.push(Se.anisotropy),he.push(Se.internalFormat),he.push(Se.format),he.push(Se.type),he.push(Se.generateMipmaps),he.push(Se.premultiplyAlpha),he.push(Se.flipY),he.push(Se.unpackAlignment),he.push(Se.encoding),he.join()}function gt(Se,he){const ut=l.get(Se);if(Se.isVideoTexture&&pr(Se),Se.isRenderTargetTexture===!1&&Se.version>0&&ut.__version!==Se.version){const Nt=Se.image;if(Nt===null)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else if(Nt.complete===!1)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete");else{An(ut,Se,he);return}}i.activeTexture(33984+he),i.bindTexture(3553,ut.__webglTexture)}function zt(Se,he){const ut=l.get(Se);if(Se.version>0&&ut.__version!==Se.version){An(ut,Se,he);return}i.activeTexture(33984+he),i.bindTexture(35866,ut.__webglTexture)}function kt(Se,he){const ut=l.get(Se);if(Se.version>0&&ut.__version!==Se.version){An(ut,Se,he);return}i.activeTexture(33984+he),i.bindTexture(32879,ut.__webglTexture)}function Rt(Se,he){const ut=l.get(Se);if(Se.version>0&&ut.__version!==Se.version){xn(ut,Se,he);return}i.activeTexture(33984+he),i.bindTexture(34067,ut.__webglTexture)}const Yt={[C0]:10497,[Ja]:33071,[sP]:33648},Jt={[Qi]:9728,[CL]:9984,[AL]:9986,[ea]:9729,[gre]:9985,[R0]:9987};function pt(Se,he,ut){if(ut?(w.texParameteri(Se,10242,Yt[he.wrapS]),w.texParameteri(Se,10243,Yt[he.wrapT]),(Se===32879||Se===35866)&&w.texParameteri(Se,32882,Yt[he.wrapR]),w.texParameteri(Se,10240,Jt[he.magFilter]),w.texParameteri(Se,10241,Jt[he.minFilter])):(w.texParameteri(Se,10242,33071),w.texParameteri(Se,10243,33071),(Se===32879||Se===35866)&&w.texParameteri(Se,32882,33071),(he.wrapS!==Ja||he.wrapT!==Ja)&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),w.texParameteri(Se,10240,Y(he.magFilter)),w.texParameteri(Se,10241,Y(he.minFilter)),he.minFilter!==Qi&&he.minFilter!==ea&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.")),t.has("EXT_texture_filter_anisotropic")===!0){const Nt=t.get("EXT_texture_filter_anisotropic");if(he.type===Gd&&t.has("OES_texture_float_linear")===!1||b===!1&&he.type===x1&&t.has("OES_texture_half_float_linear")===!1)return;(he.anisotropy>1||l.get(he).__currentAnisotropy)&&(w.texParameterf(Se,Nt.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(he.anisotropy,d.getMaxAnisotropy())),l.get(he).__currentAnisotropy=he.anisotropy)}}function Yn(Se,he){let ut=!1;Se.__webglInit===void 0&&(Se.__webglInit=!0,he.addEventListener("dispose",qe));const Nt=he.source;let jt=O.get(Nt);jt===void 0&&(jt={},O.set(Nt,jt));const qt=ft(he);if(qt!==Se.__cacheKey){jt[qt]===void 0&&(jt[qt]={texture:w.createTexture(),usedTimes:0},_.memory.textures++,ut=!0),jt[qt].usedTimes++;const vn=jt[Se.__cacheKey];vn!==void 0&&(jt[Se.__cacheKey].usedTimes--,vn.usedTimes===0&&Ke(he)),Se.__cacheKey=qt,Se.__webglTexture=jt[qt].texture}return ut}function An(Se,he,ut){let Nt=3553;he.isDataArrayTexture&&(Nt=35866),he.isData3DTexture&&(Nt=32879);const jt=Yn(Se,he),qt=he.source;if(i.activeTexture(33984+ut),i.bindTexture(Nt,Se.__webglTexture),qt.version!==qt.__currentVersion||jt===!0){w.pixelStorei(37440,he.flipY),w.pixelStorei(37441,he.premultiplyAlpha),w.pixelStorei(3317,he.unpackAlignment),w.pixelStorei(37443,0);const vn=me(he)&&se(he.image)===!1;let ve=R(he.image,vn,!1,F);ve=Zr(he,ve);const Et=se(ve)||b,Ht=g.convert(he.format,he.encoding);let Ut=g.convert(he.type),Ie=fe(he.internalFormat,Ht,Ut,he.encoding,he.isVideoTexture);pt(Nt,he,Et);let Gt;const Bt=he.mipmaps,fn=b&&he.isVideoTexture!==!0,Kt=qt.__currentVersion===void 0||jt===!0,tn=Te(he,ve,Et);if(he.isDepthTexture)Ie=6402,b?he.type===Gd?Ie=36012:he.type===Hh?Ie=33190:he.type===E0?Ie=35056:Ie=33189:he.type===Gd&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),he.format===qh&&Ie===6402&&he.type!==vre&&he.type!==Hh&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),he.type=Hh,Ut=g.convert(he.type)),he.format===A0&&Ie===6402&&(Ie=34041,he.type!==E0&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),he.type=E0,Ut=g.convert(he.type))),Kt&&(fn?i.texStorage2D(3553,1,Ie,ve.width,ve.height):i.texImage2D(3553,0,Ie,ve.width,ve.height,0,Ht,Ut,null));else if(he.isDataTexture)if(Bt.length>0&&Et){fn&&Kt&&i.texStorage2D(3553,tn,Ie,Bt[0].width,Bt[0].height);for(let Ft=0,pn=Bt.length;Ft<pn;Ft++)Gt=Bt[Ft],fn?i.texSubImage2D(3553,Ft,0,0,Gt.width,Gt.height,Ht,Ut,Gt.data):i.texImage2D(3553,Ft,Ie,Gt.width,Gt.height,0,Ht,Ut,Gt.data);he.generateMipmaps=!1}else fn?(Kt&&i.texStorage2D(3553,tn,Ie,ve.width,ve.height),i.texSubImage2D(3553,0,0,0,ve.width,ve.height,Ht,Ut,ve.data)):i.texImage2D(3553,0,Ie,ve.width,ve.height,0,Ht,Ut,ve.data);else if(he.isCompressedTexture){fn&&Kt&&i.texStorage2D(3553,tn,Ie,Bt[0].width,Bt[0].height);for(let Ft=0,pn=Bt.length;Ft<pn;Ft++)Gt=Bt[Ft],he.format!==Ks?Ht!==null?fn?i.compressedTexSubImage2D(3553,Ft,0,0,Gt.width,Gt.height,Ht,Gt.data):i.compressedTexImage2D(3553,Ft,Ie,Gt.width,Gt.height,0,Gt.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):fn?i.texSubImage2D(3553,Ft,0,0,Gt.width,Gt.height,Ht,Ut,Gt.data):i.texImage2D(3553,Ft,Ie,Gt.width,Gt.height,0,Ht,Ut,Gt.data)}else if(he.isDataArrayTexture)fn?(Kt&&i.texStorage3D(35866,tn,Ie,ve.width,ve.height,ve.depth),i.texSubImage3D(35866,0,0,0,0,ve.width,ve.height,ve.depth,Ht,Ut,ve.data)):i.texImage3D(35866,0,Ie,ve.width,ve.height,ve.depth,0,Ht,Ut,ve.data);else if(he.isData3DTexture)fn?(Kt&&i.texStorage3D(32879,tn,Ie,ve.width,ve.height,ve.depth),i.texSubImage3D(32879,0,0,0,0,ve.width,ve.height,ve.depth,Ht,Ut,ve.data)):i.texImage3D(32879,0,Ie,ve.width,ve.height,ve.depth,0,Ht,Ut,ve.data);else if(he.isFramebufferTexture){if(Kt)if(fn)i.texStorage2D(3553,tn,Ie,ve.width,ve.height);else{let Ft=ve.width,pn=ve.height;for(let zn=0;zn<tn;zn++)i.texImage2D(3553,zn,Ie,Ft,pn,0,Ht,Ut,null),Ft>>=1,pn>>=1}}else if(Bt.length>0&&Et){fn&&Kt&&i.texStorage2D(3553,tn,Ie,Bt[0].width,Bt[0].height);for(let Ft=0,pn=Bt.length;Ft<pn;Ft++)Gt=Bt[Ft],fn?i.texSubImage2D(3553,Ft,0,0,Ht,Ut,Gt):i.texImage2D(3553,Ft,Ie,Ht,Ut,Gt);he.generateMipmaps=!1}else fn?(Kt&&i.texStorage2D(3553,tn,Ie,ve.width,ve.height),i.texSubImage2D(3553,0,0,0,Ht,Ut,ve)):i.texImage2D(3553,0,Ie,Ht,Ut,ve);ze(he,Et)&&ee(Nt),qt.__currentVersion=qt.version,he.onUpdate&&he.onUpdate(he)}Se.__version=he.version}function xn(Se,he,ut){if(he.image.length!==6)return;const Nt=Yn(Se,he),jt=he.source;if(i.activeTexture(33984+ut),i.bindTexture(34067,Se.__webglTexture),jt.version!==jt.__currentVersion||Nt===!0){w.pixelStorei(37440,he.flipY),w.pixelStorei(37441,he.premultiplyAlpha),w.pixelStorei(3317,he.unpackAlignment),w.pixelStorei(37443,0);const qt=he.isCompressedTexture||he.image[0].isCompressedTexture,vn=he.image[0]&&he.image[0].isDataTexture,ve=[];for(let Ft=0;Ft<6;Ft++)!qt&&!vn?ve[Ft]=R(he.image[Ft],!1,!0,I):ve[Ft]=vn?he.image[Ft].image:he.image[Ft],ve[Ft]=Zr(he,ve[Ft]);const Et=ve[0],Ht=se(Et)||b,Ut=g.convert(he.format,he.encoding),Ie=g.convert(he.type),Gt=fe(he.internalFormat,Ut,Ie,he.encoding),Bt=b&&he.isVideoTexture!==!0,fn=jt.__currentVersion===void 0||Nt===!0;let Kt=Te(he,Et,Ht);pt(34067,he,Ht);let tn;if(qt){Bt&&fn&&i.texStorage2D(34067,Kt,Gt,Et.width,Et.height);for(let Ft=0;Ft<6;Ft++){tn=ve[Ft].mipmaps;for(let pn=0;pn<tn.length;pn++){const zn=tn[pn];he.format!==Ks?Ut!==null?Bt?i.compressedTexSubImage2D(34069+Ft,pn,0,0,zn.width,zn.height,Ut,zn.data):i.compressedTexImage2D(34069+Ft,pn,Gt,zn.width,zn.height,0,zn.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):Bt?i.texSubImage2D(34069+Ft,pn,0,0,zn.width,zn.height,Ut,Ie,zn.data):i.texImage2D(34069+Ft,pn,Gt,zn.width,zn.height,0,Ut,Ie,zn.data)}}}else{tn=he.mipmaps,Bt&&fn&&(tn.length>0&&Kt++,i.texStorage2D(34067,Kt,Gt,ve[0].width,ve[0].height));for(let Ft=0;Ft<6;Ft++)if(vn){Bt?i.texSubImage2D(34069+Ft,0,0,0,ve[Ft].width,ve[Ft].height,Ut,Ie,ve[Ft].data):i.texImage2D(34069+Ft,0,Gt,ve[Ft].width,ve[Ft].height,0,Ut,Ie,ve[Ft].data);for(let pn=0;pn<tn.length;pn++){const Bn=tn[pn].image[Ft].image;Bt?i.texSubImage2D(34069+Ft,pn+1,0,0,Bn.width,Bn.height,Ut,Ie,Bn.data):i.texImage2D(34069+Ft,pn+1,Gt,Bn.width,Bn.height,0,Ut,Ie,Bn.data)}}else{Bt?i.texSubImage2D(34069+Ft,0,0,0,Ut,Ie,ve[Ft]):i.texImage2D(34069+Ft,0,Gt,Ut,Ie,ve[Ft]);for(let pn=0;pn<tn.length;pn++){const zn=tn[pn];Bt?i.texSubImage2D(34069+Ft,pn+1,0,0,Ut,Ie,zn.image[Ft]):i.texImage2D(34069+Ft,pn+1,Gt,Ut,Ie,zn.image[Ft])}}}ze(he,Ht)&&ee(34067),jt.__currentVersion=jt.version,he.onUpdate&&he.onUpdate(he)}Se.__version=he.version}function Xt(Se,he,ut,Nt,jt){const qt=g.convert(ut.format,ut.encoding),vn=g.convert(ut.type),ve=fe(ut.internalFormat,qt,vn,ut.encoding);l.get(he).__hasExternalTextures||(jt===32879||jt===35866?i.texImage3D(jt,0,ve,he.width,he.height,he.depth,0,qt,vn,null):i.texImage2D(jt,0,ve,he.width,he.height,0,qt,vn,null)),i.bindFramebuffer(36160,Se),qn(he)?B.framebufferTexture2DMultisampleEXT(36160,Nt,jt,l.get(ut).__webglTexture,0,Wn(he)):w.framebufferTexture2D(36160,Nt,jt,l.get(ut).__webglTexture,0),i.bindFramebuffer(36160,null)}function Tn(Se,he,ut){if(w.bindRenderbuffer(36161,Se),he.depthBuffer&&!he.stencilBuffer){let Nt=33189;if(ut||qn(he)){const jt=he.depthTexture;jt&&jt.isDepthTexture&&(jt.type===Gd?Nt=36012:jt.type===Hh&&(Nt=33190));const qt=Wn(he);qn(he)?B.renderbufferStorageMultisampleEXT(36161,qt,Nt,he.width,he.height):w.renderbufferStorageMultisample(36161,qt,Nt,he.width,he.height)}else w.renderbufferStorage(36161,Nt,he.width,he.height);w.framebufferRenderbuffer(36160,36096,36161,Se)}else if(he.depthBuffer&&he.stencilBuffer){const Nt=Wn(he);ut&&qn(he)===!1?w.renderbufferStorageMultisample(36161,Nt,35056,he.width,he.height):qn(he)?B.renderbufferStorageMultisampleEXT(36161,Nt,35056,he.width,he.height):w.renderbufferStorage(36161,34041,he.width,he.height),w.framebufferRenderbuffer(36160,33306,36161,Se)}else{const Nt=he.isWebGLMultipleRenderTargets===!0?he.texture:[he.texture];for(let jt=0;jt<Nt.length;jt++){const qt=Nt[jt],vn=g.convert(qt.format,qt.encoding),ve=g.convert(qt.type),Et=fe(qt.internalFormat,vn,ve,qt.encoding),Ht=Wn(he);ut&&qn(he)===!1?w.renderbufferStorageMultisample(36161,Ht,Et,he.width,he.height):qn(he)?B.renderbufferStorageMultisampleEXT(36161,Ht,Et,he.width,he.height):w.renderbufferStorage(36161,Et,he.width,he.height)}}w.bindRenderbuffer(36161,null)}function Ln(Se,he){if(he&&he.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(i.bindFramebuffer(36160,Se),!(he.depthTexture&&he.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");(!l.get(he.depthTexture).__webglTexture||he.depthTexture.image.width!==he.width||he.depthTexture.image.height!==he.height)&&(he.depthTexture.image.width=he.width,he.depthTexture.image.height=he.height,he.depthTexture.needsUpdate=!0),gt(he.depthTexture,0);const Nt=l.get(he.depthTexture).__webglTexture,jt=Wn(he);if(he.depthTexture.format===qh)qn(he)?B.framebufferTexture2DMultisampleEXT(36160,36096,3553,Nt,0,jt):w.framebufferTexture2D(36160,36096,3553,Nt,0);else if(he.depthTexture.format===A0)qn(he)?B.framebufferTexture2DMultisampleEXT(36160,33306,3553,Nt,0,jt):w.framebufferTexture2D(36160,33306,3553,Nt,0);else throw new Error("Unknown depthTexture format")}function hn(Se){const he=l.get(Se),ut=Se.isWebGLCubeRenderTarget===!0;if(Se.depthTexture&&!he.__autoAllocateDepthBuffer){if(ut)throw new Error("target.depthTexture not supported in Cube render targets");Ln(he.__webglFramebuffer,Se)}else if(ut){he.__webglDepthbuffer=[];for(let Nt=0;Nt<6;Nt++)i.bindFramebuffer(36160,he.__webglFramebuffer[Nt]),he.__webglDepthbuffer[Nt]=w.createRenderbuffer(),Tn(he.__webglDepthbuffer[Nt],Se,!1)}else i.bindFramebuffer(36160,he.__webglFramebuffer),he.__webglDepthbuffer=w.createRenderbuffer(),Tn(he.__webglDepthbuffer,Se,!1);i.bindFramebuffer(36160,null)}function Mr(Se,he,ut){const Nt=l.get(Se);he!==void 0&&Xt(Nt.__webglFramebuffer,Se,Se.texture,36064,3553),ut!==void 0&&hn(Se)}function Or(Se){const he=Se.texture,ut=l.get(Se),Nt=l.get(he);Se.addEventListener("dispose",Tt),Se.isWebGLMultipleRenderTargets!==!0&&(Nt.__webglTexture===void 0&&(Nt.__webglTexture=w.createTexture()),Nt.__version=he.version,_.memory.textures++);const jt=Se.isWebGLCubeRenderTarget===!0,qt=Se.isWebGLMultipleRenderTargets===!0,vn=se(Se)||b;if(jt){ut.__webglFramebuffer=[];for(let ve=0;ve<6;ve++)ut.__webglFramebuffer[ve]=w.createFramebuffer()}else{if(ut.__webglFramebuffer=w.createFramebuffer(),qt)if(d.drawBuffers){const ve=Se.texture;for(let Et=0,Ht=ve.length;Et<Ht;Et++){const Ut=l.get(ve[Et]);Ut.__webglTexture===void 0&&(Ut.__webglTexture=w.createTexture(),_.memory.textures++)}}else console.warn("THREE.WebGLRenderer: WebGLMultipleRenderTargets can only be used with WebGL2 or WEBGL_draw_buffers extension.");if(b&&Se.samples>0&&qn(Se)===!1){const ve=qt?he:[he];ut.__webglMultisampledFramebuffer=w.createFramebuffer(),ut.__webglColorRenderbuffer=[],i.bindFramebuffer(36160,ut.__webglMultisampledFramebuffer);for(let Et=0;Et<ve.length;Et++){const Ht=ve[Et];ut.__webglColorRenderbuffer[Et]=w.createRenderbuffer(),w.bindRenderbuffer(36161,ut.__webglColorRenderbuffer[Et]);const Ut=g.convert(Ht.format,Ht.encoding),Ie=g.convert(Ht.type),Gt=fe(Ht.internalFormat,Ut,Ie,Ht.encoding),Bt=Wn(Se);w.renderbufferStorageMultisample(36161,Bt,Gt,Se.width,Se.height),w.framebufferRenderbuffer(36160,36064+Et,36161,ut.__webglColorRenderbuffer[Et])}w.bindRenderbuffer(36161,null),Se.depthBuffer&&(ut.__webglDepthRenderbuffer=w.createRenderbuffer(),Tn(ut.__webglDepthRenderbuffer,Se,!0)),i.bindFramebuffer(36160,null)}}if(jt){i.bindTexture(34067,Nt.__webglTexture),pt(34067,he,vn);for(let ve=0;ve<6;ve++)Xt(ut.__webglFramebuffer[ve],Se,he,36064,34069+ve);ze(he,vn)&&ee(34067),i.unbindTexture()}else if(qt){const ve=Se.texture;for(let Et=0,Ht=ve.length;Et<Ht;Et++){const Ut=ve[Et],Ie=l.get(Ut);i.bindTexture(3553,Ie.__webglTexture),pt(3553,Ut,vn),Xt(ut.__webglFramebuffer,Se,Ut,36064+Et,3553),ze(Ut,vn)&&ee(3553)}i.unbindTexture()}else{let ve=3553;(Se.isWebGL3DRenderTarget||Se.isWebGLArrayRenderTarget)&&(b?ve=Se.isWebGL3DRenderTarget?32879:35866:console.error("THREE.WebGLTextures: THREE.Data3DTexture and THREE.DataArrayTexture only supported with WebGL2.")),i.bindTexture(ve,Nt.__webglTexture),pt(ve,he,vn),Xt(ut.__webglFramebuffer,Se,he,36064,ve),ze(he,vn)&&ee(ve),i.unbindTexture()}Se.depthBuffer&&hn(Se)}function jr(Se){const he=se(Se)||b,ut=Se.isWebGLMultipleRenderTargets===!0?Se.texture:[Se.texture];for(let Nt=0,jt=ut.length;Nt<jt;Nt++){const qt=ut[Nt];if(ze(qt,he)){const vn=Se.isWebGLCubeRenderTarget?34067:3553,ve=l.get(qt).__webglTexture;i.bindTexture(vn,ve),ee(vn),i.unbindTexture()}}}function dr(Se){if(b&&Se.samples>0&&qn(Se)===!1){const he=Se.isWebGLMultipleRenderTargets?Se.texture:[Se.texture],ut=Se.width,Nt=Se.height;let jt=16384;const qt=[],vn=Se.stencilBuffer?33306:36096,ve=l.get(Se),Et=Se.isWebGLMultipleRenderTargets===!0;if(Et)for(let Ht=0;Ht<he.length;Ht++)i.bindFramebuffer(36160,ve.__webglMultisampledFramebuffer),w.framebufferRenderbuffer(36160,36064+Ht,36161,null),i.bindFramebuffer(36160,ve.__webglFramebuffer),w.framebufferTexture2D(36009,36064+Ht,3553,null,0);i.bindFramebuffer(36008,ve.__webglMultisampledFramebuffer),i.bindFramebuffer(36009,ve.__webglFramebuffer);for(let Ht=0;Ht<he.length;Ht++){qt.push(36064+Ht),Se.depthBuffer&&qt.push(vn);const Ut=ve.__ignoreDepthValues!==void 0?ve.__ignoreDepthValues:!1;if(Ut===!1&&(Se.depthBuffer&&(jt|=256),Se.stencilBuffer&&(jt|=1024)),Et&&w.framebufferRenderbuffer(36008,36064,36161,ve.__webglColorRenderbuffer[Ht]),Ut===!0&&(w.invalidateFramebuffer(36008,[vn]),w.invalidateFramebuffer(36009,[vn])),Et){const Ie=l.get(he[Ht]).__webglTexture;w.framebufferTexture2D(36009,36064,3553,Ie,0)}w.blitFramebuffer(0,0,ut,Nt,0,0,ut,Nt,jt,9728),K&&w.invalidateFramebuffer(36008,qt)}if(i.bindFramebuffer(36008,null),i.bindFramebuffer(36009,null),Et)for(let Ht=0;Ht<he.length;Ht++){i.bindFramebuffer(36160,ve.__webglMultisampledFramebuffer),w.framebufferRenderbuffer(36160,36064+Ht,36161,ve.__webglColorRenderbuffer[Ht]);const Ut=l.get(he[Ht]).__webglTexture;i.bindFramebuffer(36160,ve.__webglFramebuffer),w.framebufferTexture2D(36009,36064+Ht,3553,Ut,0)}i.bindFramebuffer(36009,ve.__webglMultisampledFramebuffer)}}function Wn(Se){return Math.min(j,Se.samples)}function qn(Se){const he=l.get(Se);return b&&Se.samples>0&&t.has("WEBGL_multisampled_render_to_texture")===!0&&he.__useRenderToTexture!==!1}function pr(Se){const he=_.render.frame;te.get(Se)!==he&&(te.set(Se,he),Se.update())}function Zr(Se,he){const ut=Se.encoding,Nt=Se.format,jt=Se.type;return Se.isCompressedTexture===!0||Se.isVideoTexture===!0||Se.format===DL||ut!==Jh&&(ut===br?b===!1?t.has("EXT_sRGB")===!0&&Nt===Ks?(Se.format=DL,Se.minFilter=ea,Se.generateMipmaps=!1):he=wre.sRGBToLinear(he):(Nt!==Ks||jt!==Yh)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture encoding:",ut)),he}this.allocateTextureUnit=yt,this.resetTextureUnits=Ge,this.setTexture2D=gt,this.setTexture2DArray=zt,this.setTexture3D=kt,this.setTextureCube=Rt,this.rebindTextures=Mr,this.setupRenderTarget=Or,this.updateRenderTargetMipmap=jr,this.updateMultisampleRenderTarget=dr,this.setupDepthRenderbuffer=hn,this.setupFrameBufferTexture=Xt,this.useMultisampledRTT=qn}function Tbe(w,t,i){const l=i.isWebGL2;function d(g,_=null){let b;if(g===Yh)return 5121;if(g===ime)return 32819;if(g===ome)return 32820;if(g===tme)return 5120;if(g===nme)return 5122;if(g===vre)return 5123;if(g===rme)return 5124;if(g===Hh)return 5125;if(g===Gd)return 5126;if(g===x1)return l?5131:(b=t.get("OES_texture_half_float"),b!==null?b.HALF_FLOAT_OES:null);if(g===ame)return 6406;if(g===Ks)return 6408;if(g===lme)return 6409;if(g===cme)return 6410;if(g===qh)return 6402;if(g===A0)return 34041;if(g===ume)return 6403;if(g===sme)return console.warn("THREE.WebGLRenderer: THREE.RGBFormat has been removed. Use THREE.RGBAFormat instead. https://github.com/mrdoob/three.js/pull/23228"),6408;if(g===DL)return b=t.get("EXT_sRGB"),b!==null?b.SRGB_ALPHA_EXT:null;if(g===dme)return 36244;if(g===fme)return 33319;if(g===hme)return 33320;if(g===pme)return 36249;if(g===G4||g===W4||g===q4||g===K4)if(_===br)if(b=t.get("WEBGL_compressed_texture_s3tc_srgb"),b!==null){if(g===G4)return b.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(g===W4)return b.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(g===q4)return b.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(g===K4)return b.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else return null;else if(b=t.get("WEBGL_compressed_texture_s3tc"),b!==null){if(g===G4)return b.COMPRESSED_RGB_S3TC_DXT1_EXT;if(g===W4)return b.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(g===q4)return b.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(g===K4)return b.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(g===Ote||g===Rte||g===Lte||g===zte)if(b=t.get("WEBGL_compressed_texture_pvrtc"),b!==null){if(g===Ote)return b.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(g===Rte)return b.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(g===Lte)return b.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(g===zte)return b.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(g===mme)return b=t.get("WEBGL_compressed_texture_etc1"),b!==null?b.COMPRESSED_RGB_ETC1_WEBGL:null;if(g===Nte||g===Fte)if(b=t.get("WEBGL_compressed_texture_etc"),b!==null){if(g===Nte)return _===br?b.COMPRESSED_SRGB8_ETC2:b.COMPRESSED_RGB8_ETC2;if(g===Fte)return _===br?b.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:b.COMPRESSED_RGBA8_ETC2_EAC}else return null;if(g===jte||g===Bte||g===Ute||g===Vte||g===Hte||g===Gte||g===Wte||g===qte||g===Kte||g===Xte||g===$te||g===Zte||g===Yte||g===Jte)if(b=t.get("WEBGL_compressed_texture_astc"),b!==null){if(g===jte)return _===br?b.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:b.COMPRESSED_RGBA_ASTC_4x4_KHR;if(g===Bte)return _===br?b.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:b.COMPRESSED_RGBA_ASTC_5x4_KHR;if(g===Ute)return _===br?b.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:b.COMPRESSED_RGBA_ASTC_5x5_KHR;if(g===Vte)return _===br?b.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:b.COMPRESSED_RGBA_ASTC_6x5_KHR;if(g===Hte)return _===br?b.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:b.COMPRESSED_RGBA_ASTC_6x6_KHR;if(g===Gte)return _===br?b.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:b.COMPRESSED_RGBA_ASTC_8x5_KHR;if(g===Wte)return _===br?b.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:b.COMPRESSED_RGBA_ASTC_8x6_KHR;if(g===qte)return _===br?b.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:b.COMPRESSED_RGBA_ASTC_8x8_KHR;if(g===Kte)return _===br?b.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:b.COMPRESSED_RGBA_ASTC_10x5_KHR;if(g===Xte)return _===br?b.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:b.COMPRESSED_RGBA_ASTC_10x6_KHR;if(g===$te)return _===br?b.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:b.COMPRESSED_RGBA_ASTC_10x8_KHR;if(g===Zte)return _===br?b.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:b.COMPRESSED_RGBA_ASTC_10x10_KHR;if(g===Yte)return _===br?b.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:b.COMPRESSED_RGBA_ASTC_12x10_KHR;if(g===Jte)return _===br?b.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:b.COMPRESSED_RGBA_ASTC_12x12_KHR}else return null;if(g===Qte)if(b=t.get("EXT_texture_compression_bptc"),b!==null){if(g===Qte)return _===br?b.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:b.COMPRESSED_RGBA_BPTC_UNORM_EXT}else return null;return g===E0?l?34042:(b=t.get("WEBGL_depth_texture"),b!==null?b.UNSIGNED_INT_24_8_WEBGL:null):w[g]!==void 0?w[g]:null}return{convert:d}}class Mbe extends zo{constructor(t=[]){super(),this.isArrayCamera=!0,this.cameras=t}}class Wd extends yi{constructor(){super(),this.isGroup=!0,this.type="Group"}}const Pbe={type:"move"};class xL{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return this._hand===null&&(this._hand=new Wd,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return this._targetRay===null&&(this._targetRay=new Wd,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new Ne,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new Ne),this._targetRay}getGripSpace(){return this._grip===null&&(this._grip=new Wd,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new Ne,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new Ne),this._grip}dispatchEvent(t){return this._targetRay!==null&&this._targetRay.dispatchEvent(t),this._grip!==null&&this._grip.dispatchEvent(t),this._hand!==null&&this._hand.dispatchEvent(t),this}disconnect(t){return this.dispatchEvent({type:"disconnected",data:t}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this._hand!==null&&(this._hand.visible=!1),this}update(t,i,l){let d=null,g=null,_=null;const b=this._targetRay,M=this._grip,I=this._hand;if(t&&i.session.visibilityState!=="visible-blurred"){if(I&&t.hand){_=!0;for(const X of t.hand.values()){const O=i.getJointPose(X,l);if(I.joints[X.jointName]===void 0){const we=new Wd;we.matrixAutoUpdate=!1,we.visible=!1,I.joints[X.jointName]=we,I.add(we)}const W=I.joints[X.jointName];O!==null&&(W.matrix.fromArray(O.transform.matrix),W.matrix.decompose(W.position,W.rotation,W.scale),W.jointRadius=O.radius),W.visible=O!==null}const F=I.joints["index-finger-tip"],j=I.joints["thumb-tip"],B=F.position.distanceTo(j.position),K=.02,te=.005;I.inputState.pinching&&B>K+te?(I.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:t.handedness,target:this})):!I.inputState.pinching&&B<=K-te&&(I.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:t.handedness,target:this}))}else M!==null&&t.gripSpace&&(g=i.getPose(t.gripSpace,l),g!==null&&(M.matrix.fromArray(g.transform.matrix),M.matrix.decompose(M.position,M.rotation,M.scale),g.linearVelocity?(M.hasLinearVelocity=!0,M.linearVelocity.copy(g.linearVelocity)):M.hasLinearVelocity=!1,g.angularVelocity?(M.hasAngularVelocity=!0,M.angularVelocity.copy(g.angularVelocity)):M.hasAngularVelocity=!1));b!==null&&(d=i.getPose(t.targetRaySpace,l),d===null&&g!==null&&(d=g),d!==null&&(b.matrix.fromArray(d.transform.matrix),b.matrix.decompose(b.position,b.rotation,b.scale),d.linearVelocity?(b.hasLinearVelocity=!0,b.linearVelocity.copy(d.linearVelocity)):b.hasLinearVelocity=!1,d.angularVelocity?(b.hasAngularVelocity=!0,b.angularVelocity.copy(d.angularVelocity)):b.hasAngularVelocity=!1,this.dispatchEvent(Pbe)))}return b!==null&&(b.visible=d!==null),M!==null&&(M.visible=g!==null),I!==null&&(I.visible=_!==null),this}}class Cbe extends Fo{constructor(t,i,l,d,g,_,b,M,I,F){if(F=F!==void 0?F:qh,F!==qh&&F!==A0)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");l===void 0&&F===qh&&(l=Hh),l===void 0&&F===A0&&(l=E0),super(null,d,g,_,b,M,F,l,I),this.isDepthTexture=!0,this.image={width:t,height:i},this.magFilter=b!==void 0?b:Qi,this.minFilter=M!==void 0?M:Qi,this.flipY=!1,this.generateMipmaps=!1}}class Abe extends np{constructor(t,i){super();const l=this;let d=null,g=1,_=null,b="local-floor",M=null,I=null,F=null,j=null,B=null,K=null;const te=i.getContextAttributes();let X=null,O=null;const W=[],we=[],R=new zo;R.layers.enable(1),R.viewport=new Er;const se=new zo;se.layers.enable(2),se.viewport=new Er;const me=[R,se],ze=new Mbe;ze.layers.enable(1),ze.layers.enable(2);let ee=null,fe=null;this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(ft){let gt=W[ft];return gt===void 0&&(gt=new xL,W[ft]=gt),gt.getTargetRaySpace()},this.getControllerGrip=function(ft){let gt=W[ft];return gt===void 0&&(gt=new xL,W[ft]=gt),gt.getGripSpace()},this.getHand=function(ft){let gt=W[ft];return gt===void 0&&(gt=new xL,W[ft]=gt),gt.getHandSpace()};function Te(ft){const gt=we.indexOf(ft.inputSource);if(gt===-1)return;const zt=W[gt];zt!==void 0&&zt.dispatchEvent({type:ft.type,data:ft.inputSource})}function Y(){d.removeEventListener("select",Te),d.removeEventListener("selectstart",Te),d.removeEventListener("selectend",Te),d.removeEventListener("squeeze",Te),d.removeEventListener("squeezestart",Te),d.removeEventListener("squeezeend",Te),d.removeEventListener("end",Y),d.removeEventListener("inputsourceschange",qe);for(let ft=0;ft<W.length;ft++){const gt=we[ft];gt!==null&&(we[ft]=null,W[ft].disconnect(gt))}ee=null,fe=null,t.setRenderTarget(X),B=null,j=null,F=null,d=null,O=null,yt.stop(),l.isPresenting=!1,l.dispatchEvent({type:"sessionend"})}this.setFramebufferScaleFactor=function(ft){g=ft,l.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(ft){b=ft,l.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return M||_},this.setReferenceSpace=function(ft){M=ft},this.getBaseLayer=function(){return j!==null?j:B},this.getBinding=function(){return F},this.getFrame=function(){return K},this.getSession=function(){return d},this.setSession=async function(ft){if(d=ft,d!==null){if(X=t.getRenderTarget(),d.addEventListener("select",Te),d.addEventListener("selectstart",Te),d.addEventListener("selectend",Te),d.addEventListener("squeeze",Te),d.addEventListener("squeezestart",Te),d.addEventListener("squeezeend",Te),d.addEventListener("end",Y),d.addEventListener("inputsourceschange",qe),te.xrCompatible!==!0&&await i.makeXRCompatible(),d.renderState.layers===void 0||t.capabilities.isWebGL2===!1){const gt={antialias:d.renderState.layers===void 0?te.antialias:!0,alpha:te.alpha,depth:te.depth,stencil:te.stencil,framebufferScaleFactor:g};B=new XRWebGLLayer(d,i,gt),d.updateRenderState({baseLayer:B}),O=new Qh(B.framebufferWidth,B.framebufferHeight,{format:Ks,type:Yh,encoding:t.outputEncoding})}else{let gt=null,zt=null,kt=null;te.depth&&(kt=te.stencil?35056:33190,gt=te.stencil?A0:qh,zt=te.stencil?E0:Hh);const Rt={colorFormat:32856,depthFormat:kt,scaleFactor:g};F=new XRWebGLBinding(d,i),j=F.createProjectionLayer(Rt),d.updateRenderState({layers:[j]}),O=new Qh(j.textureWidth,j.textureHeight,{format:Ks,type:Yh,depthTexture:new Cbe(j.textureWidth,j.textureHeight,zt,void 0,void 0,void 0,void 0,void 0,void 0,gt),stencilBuffer:te.stencil,encoding:t.outputEncoding,samples:te.antialias?4:0});const Yt=t.properties.get(O);Yt.__ignoreDepthValues=j.ignoreDepthValues}O.isXRRenderTarget=!0,this.setFoveation(1),M=null,_=await d.requestReferenceSpace(b),yt.setContext(d),yt.start(),l.isPresenting=!0,l.dispatchEvent({type:"sessionstart"})}};function qe(ft){for(let gt=0;gt<ft.removed.length;gt++){const zt=ft.removed[gt],kt=we.indexOf(zt);kt>=0&&(we[kt]=null,W[kt].dispatchEvent({type:"disconnected",data:zt}))}for(let gt=0;gt<ft.added.length;gt++){const zt=ft.added[gt];let kt=we.indexOf(zt);if(kt===-1){for(let Yt=0;Yt<W.length;Yt++)if(Yt>=we.length){we.push(zt),kt=Yt;break}else if(we[Yt]===null){we[Yt]=zt,kt=Yt;break}if(kt===-1)break}const Rt=W[kt];Rt&&Rt.dispatchEvent({type:"connected",data:zt})}}const Tt=new Ne,xt=new Ne;function Ke(ft,gt,zt){Tt.setFromMatrixPosition(gt.matrixWorld),xt.setFromMatrixPosition(zt.matrixWorld);const kt=Tt.distanceTo(xt),Rt=gt.projectionMatrix.elements,Yt=zt.projectionMatrix.elements,Jt=Rt[14]/(Rt[10]-1),pt=Rt[14]/(Rt[10]+1),Yn=(Rt[9]+1)/Rt[5],An=(Rt[9]-1)/Rt[5],xn=(Rt[8]-1)/Rt[0],Xt=(Yt[8]+1)/Yt[0],Tn=Jt*xn,Ln=Jt*Xt,hn=kt/(-xn+Xt),Mr=hn*-xn;gt.matrixWorld.decompose(ft.position,ft.quaternion,ft.scale),ft.translateX(Mr),ft.translateZ(hn),ft.matrixWorld.compose(ft.position,ft.quaternion,ft.scale),ft.matrixWorldInverse.copy(ft.matrixWorld).invert();const Or=Jt+hn,jr=pt+hn,dr=Tn-Mr,Wn=Ln+(kt-Mr),qn=Yn*pt/jr*Or,pr=An*pt/jr*Or;ft.projectionMatrix.makePerspective(dr,Wn,qn,pr,Or,jr)}function _e(ft,gt){gt===null?ft.matrixWorld.copy(ft.matrix):ft.matrixWorld.multiplyMatrices(gt.matrixWorld,ft.matrix),ft.matrixWorldInverse.copy(ft.matrixWorld).invert()}this.updateCamera=function(ft){if(d===null)return;ze.near=se.near=R.near=ft.near,ze.far=se.far=R.far=ft.far,(ee!==ze.near||fe!==ze.far)&&(d.updateRenderState({depthNear:ze.near,depthFar:ze.far}),ee=ze.near,fe=ze.far);const gt=ft.parent,zt=ze.cameras;_e(ze,gt);for(let Rt=0;Rt<zt.length;Rt++)_e(zt[Rt],gt);ze.matrixWorld.decompose(ze.position,ze.quaternion,ze.scale),ft.position.copy(ze.position),ft.quaternion.copy(ze.quaternion),ft.scale.copy(ze.scale),ft.matrix.copy(ze.matrix),ft.matrixWorld.copy(ze.matrixWorld);const kt=ft.children;for(let Rt=0,Yt=kt.length;Rt<Yt;Rt++)kt[Rt].updateMatrixWorld(!0);zt.length===2?Ke(ze,R,se):ze.projectionMatrix.copy(R.projectionMatrix)},this.getCamera=function(){return ze},this.getFoveation=function(){if(j!==null)return j.fixedFoveation;if(B!==null)return B.fixedFoveation},this.setFoveation=function(ft){j!==null&&(j.fixedFoveation=ft),B!==null&&B.fixedFoveation!==void 0&&(B.fixedFoveation=ft)};let Qe=null;function Ge(ft,gt){if(I=gt.getViewerPose(M||_),K=gt,I!==null){const zt=I.views;B!==null&&(t.setRenderTargetFramebuffer(O,B.framebuffer),t.setRenderTarget(O));let kt=!1;zt.length!==ze.cameras.length&&(ze.cameras.length=0,kt=!0);for(let Rt=0;Rt<zt.length;Rt++){const Yt=zt[Rt];let Jt=null;if(B!==null)Jt=B.getViewport(Yt);else{const Yn=F.getViewSubImage(j,Yt);Jt=Yn.viewport,Rt===0&&(t.setRenderTargetTextures(O,Yn.colorTexture,j.ignoreDepthValues?void 0:Yn.depthStencilTexture),t.setRenderTarget(O))}let pt=me[Rt];pt===void 0&&(pt=new zo,pt.layers.enable(Rt),pt.viewport=new Er,me[Rt]=pt),pt.matrix.fromArray(Yt.transform.matrix),pt.projectionMatrix.fromArray(Yt.projectionMatrix),pt.viewport.set(Jt.x,Jt.y,Jt.width,Jt.height),Rt===0&&ze.matrix.copy(pt.matrix),kt===!0&&ze.cameras.push(pt)}}for(let zt=0;zt<W.length;zt++){const kt=we[zt],Rt=W[zt];kt!==null&&Rt!==void 0&&Rt.update(kt,gt,M||_)}Qe&&Qe(ft,gt),K=null}const yt=new Are;yt.setAnimationLoop(Ge),this.setAnimationLoop=function(ft){Qe=ft},this.dispose=function(){}}}function Ibe(w,t){function i(X,O){X.fogColor.value.copy(O.color),O.isFog?(X.fogNear.value=O.near,X.fogFar.value=O.far):O.isFogExp2&&(X.fogDensity.value=O.density)}function l(X,O,W,we,R){O.isMeshBasicMaterial||O.isMeshLambertMaterial?d(X,O):O.isMeshToonMaterial?(d(X,O),F(X,O)):O.isMeshPhongMaterial?(d(X,O),I(X,O)):O.isMeshStandardMaterial?(d(X,O),j(X,O),O.isMeshPhysicalMaterial&&B(X,O,R)):O.isMeshMatcapMaterial?(d(X,O),K(X,O)):O.isMeshDepthMaterial?d(X,O):O.isMeshDistanceMaterial?(d(X,O),te(X,O)):O.isMeshNormalMaterial?d(X,O):O.isLineBasicMaterial?(g(X,O),O.isLineDashedMaterial&&_(X,O)):O.isPointsMaterial?b(X,O,W,we):O.isSpriteMaterial?M(X,O):O.isShadowMaterial?(X.color.value.copy(O.color),X.opacity.value=O.opacity):O.isShaderMaterial&&(O.uniformsNeedUpdate=!1)}function d(X,O){X.opacity.value=O.opacity,O.color&&X.diffuse.value.copy(O.color),O.emissive&&X.emissive.value.copy(O.emissive).multiplyScalar(O.emissiveIntensity),O.map&&(X.map.value=O.map),O.alphaMap&&(X.alphaMap.value=O.alphaMap),O.bumpMap&&(X.bumpMap.value=O.bumpMap,X.bumpScale.value=O.bumpScale,O.side===Xs&&(X.bumpScale.value*=-1)),O.displacementMap&&(X.displacementMap.value=O.displacementMap,X.displacementScale.value=O.displacementScale,X.displacementBias.value=O.displacementBias),O.emissiveMap&&(X.emissiveMap.value=O.emissiveMap),O.normalMap&&(X.normalMap.value=O.normalMap,X.normalScale.value.copy(O.normalScale),O.side===Xs&&X.normalScale.value.negate()),O.specularMap&&(X.specularMap.value=O.specularMap),O.alphaTest>0&&(X.alphaTest.value=O.alphaTest);const W=t.get(O).envMap;if(W&&(X.envMap.value=W,X.flipEnvMap.value=W.isCubeTexture&&W.isRenderTargetTexture===!1?-1:1,X.reflectivity.value=O.reflectivity,X.ior.value=O.ior,X.refractionRatio.value=O.refractionRatio),O.lightMap){X.lightMap.value=O.lightMap;const se=w.physicallyCorrectLights!==!0?Math.PI:1;X.lightMapIntensity.value=O.lightMapIntensity*se}O.aoMap&&(X.aoMap.value=O.aoMap,X.aoMapIntensity.value=O.aoMapIntensity);let we;O.map?we=O.map:O.specularMap?we=O.specularMap:O.displacementMap?we=O.displacementMap:O.normalMap?we=O.normalMap:O.bumpMap?we=O.bumpMap:O.roughnessMap?we=O.roughnessMap:O.metalnessMap?we=O.metalnessMap:O.alphaMap?we=O.alphaMap:O.emissiveMap?we=O.emissiveMap:O.clearcoatMap?we=O.clearcoatMap:O.clearcoatNormalMap?we=O.clearcoatNormalMap:O.clearcoatRoughnessMap?we=O.clearcoatRoughnessMap:O.iridescenceMap?we=O.iridescenceMap:O.iridescenceThicknessMap?we=O.iridescenceThicknessMap:O.specularIntensityMap?we=O.specularIntensityMap:O.specularColorMap?we=O.specularColorMap:O.transmissionMap?we=O.transmissionMap:O.thicknessMap?we=O.thicknessMap:O.sheenColorMap?we=O.sheenColorMap:O.sheenRoughnessMap&&(we=O.sheenRoughnessMap),we!==void 0&&(we.isWebGLRenderTarget&&(we=we.texture),we.matrixAutoUpdate===!0&&we.updateMatrix(),X.uvTransform.value.copy(we.matrix));let R;O.aoMap?R=O.aoMap:O.lightMap&&(R=O.lightMap),R!==void 0&&(R.isWebGLRenderTarget&&(R=R.texture),R.matrixAutoUpdate===!0&&R.updateMatrix(),X.uv2Transform.value.copy(R.matrix))}function g(X,O){X.diffuse.value.copy(O.color),X.opacity.value=O.opacity}function _(X,O){X.dashSize.value=O.dashSize,X.totalSize.value=O.dashSize+O.gapSize,X.scale.value=O.scale}function b(X,O,W,we){X.diffuse.value.copy(O.color),X.opacity.value=O.opacity,X.size.value=O.size*W,X.scale.value=we*.5,O.map&&(X.map.value=O.map),O.alphaMap&&(X.alphaMap.value=O.alphaMap),O.alphaTest>0&&(X.alphaTest.value=O.alphaTest);let R;O.map?R=O.map:O.alphaMap&&(R=O.alphaMap),R!==void 0&&(R.matrixAutoUpdate===!0&&R.updateMatrix(),X.uvTransform.value.copy(R.matrix))}function M(X,O){X.diffuse.value.copy(O.color),X.opacity.value=O.opacity,X.rotation.value=O.rotation,O.map&&(X.map.value=O.map),O.alphaMap&&(X.alphaMap.value=O.alphaMap),O.alphaTest>0&&(X.alphaTest.value=O.alphaTest);let W;O.map?W=O.map:O.alphaMap&&(W=O.alphaMap),W!==void 0&&(W.matrixAutoUpdate===!0&&W.updateMatrix(),X.uvTransform.value.copy(W.matrix))}function I(X,O){X.specular.value.copy(O.specular),X.shininess.value=Math.max(O.shininess,1e-4)}function F(X,O){O.gradientMap&&(X.gradientMap.value=O.gradientMap)}function j(X,O){X.roughness.value=O.roughness,X.metalness.value=O.metalness,O.roughnessMap&&(X.roughnessMap.value=O.roughnessMap),O.metalnessMap&&(X.metalnessMap.value=O.metalnessMap),t.get(O).envMap&&(X.envMapIntensity.value=O.envMapIntensity)}function B(X,O,W){X.ior.value=O.ior,O.sheen>0&&(X.sheenColor.value.copy(O.sheenColor).multiplyScalar(O.sheen),X.sheenRoughness.value=O.sheenRoughness,O.sheenColorMap&&(X.sheenColorMap.value=O.sheenColorMap),O.sheenRoughnessMap&&(X.sheenRoughnessMap.value=O.sheenRoughnessMap)),O.clearcoat>0&&(X.clearcoat.value=O.clearcoat,X.clearcoatRoughness.value=O.clearcoatRoughness,O.clearcoatMap&&(X.clearcoatMap.value=O.clearcoatMap),O.clearcoatRoughnessMap&&(X.clearcoatRoughnessMap.value=O.clearcoatRoughnessMap),O.clearcoatNormalMap&&(X.clearcoatNormalScale.value.copy(O.clearcoatNormalScale),X.clearcoatNormalMap.value=O.clearcoatNormalMap,O.side===Xs&&X.clearcoatNormalScale.value.negate())),O.iridescence>0&&(X.iridescence.value=O.iridescence,X.iridescenceIOR.value=O.iridescenceIOR,X.iridescenceThicknessMinimum.value=O.iridescenceThicknessRange[0],X.iridescenceThicknessMaximum.value=O.iridescenceThicknessRange[1],O.iridescenceMap&&(X.iridescenceMap.value=O.iridescenceMap),O.iridescenceThicknessMap&&(X.iridescenceThicknessMap.value=O.iridescenceThicknessMap)),O.transmission>0&&(X.transmission.value=O.transmission,X.transmissionSamplerMap.value=W.texture,X.transmissionSamplerSize.value.set(W.width,W.height),O.transmissionMap&&(X.transmissionMap.value=O.transmissionMap),X.thickness.value=O.thickness,O.thicknessMap&&(X.thicknessMap.value=O.thicknessMap),X.attenuationDistance.value=O.attenuationDistance,X.attenuationColor.value.copy(O.attenuationColor)),X.specularIntensity.value=O.specularIntensity,X.specularColor.value.copy(O.specularColor),O.specularIntensityMap&&(X.specularIntensityMap.value=O.specularIntensityMap),O.specularColorMap&&(X.specularColorMap.value=O.specularColorMap)}function K(X,O){O.matcap&&(X.matcap.value=O.matcap)}function te(X,O){X.referencePosition.value.copy(O.referencePosition),X.nearDistance.value=O.nearDistance,X.farDistance.value=O.farDistance}return{refreshFogUniforms:i,refreshMaterialUniforms:l}}function Dbe(){const w=E1("canvas");return w.style.display="block",w}function zre(w={}){this.isWebGLRenderer=!0;const t=w.canvas!==void 0?w.canvas:Dbe(),i=w.context!==void 0?w.context:null,l=w.depth!==void 0?w.depth:!0,d=w.stencil!==void 0?w.stencil:!0,g=w.antialias!==void 0?w.antialias:!1,_=w.premultipliedAlpha!==void 0?w.premultipliedAlpha:!0,b=w.preserveDrawingBuffer!==void 0?w.preserveDrawingBuffer:!1,M=w.powerPreference!==void 0?w.powerPreference:"default",I=w.failIfMajorPerformanceCaveat!==void 0?w.failIfMajorPerformanceCaveat:!1;let F;i!==null?F=i.getContextAttributes().alpha:F=w.alpha!==void 0?w.alpha:!1;let j=null,B=null;const K=[],te=[];this.domElement=t,this.debug={checkShaderErrors:!0},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.outputEncoding=Jh,this.physicallyCorrectLights=!1,this.toneMapping=Qc,this.toneMappingExposure=1,Object.defineProperties(this,{gammaFactor:{get:function(){return console.warn("THREE.WebGLRenderer: .gammaFactor has been removed."),2},set:function(){console.warn("THREE.WebGLRenderer: .gammaFactor has been removed.")}}});const X=this;let O=!1,W=0,we=0,R=null,se=-1,me=null;const ze=new Er,ee=new Er;let fe=null,Te=t.width,Y=t.height,qe=1,Tt=null,xt=null;const Ke=new Er(0,0,Te,Y),_e=new Er(0,0,Te,Y);let Qe=!1;const Ge=new $L;let yt=!1,ft=!1,gt=null;const zt=new cr,kt=new Rn,Rt=new Ne,Yt={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function Jt(){return R===null?qe:1}let pt=i;function Yn(ye,nt){for(let dt=0;dt<ye.length;dt++){const at=ye[dt],bt=t.getContext(at,nt);if(bt!==null)return bt}return null}try{const ye={alpha:!0,depth:l,stencil:d,antialias:g,premultipliedAlpha:_,preserveDrawingBuffer:b,powerPreference:M,failIfMajorPerformanceCaveat:I};if("setAttribute"in t&&t.setAttribute("data-engine",`three.js r${WL}`),t.addEventListener("webglcontextlost",Ie,!1),t.addEventListener("webglcontextrestored",Gt,!1),t.addEventListener("webglcontextcreationerror",Bt,!1),pt===null){const nt=["webgl2","webgl","experimental-webgl"];if(X.isWebGL1Renderer===!0&&nt.shift(),pt=Yn(nt,ye),pt===null)throw Yn(nt)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}pt.getShaderPrecisionFormat===void 0&&(pt.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(ye){throw console.error("THREE.WebGLRenderer: "+ye.message),ye}let An,xn,Xt,Tn,Ln,hn,Mr,Or,jr,dr,Wn,qn,pr,Zr,Se,he,ut,Nt,jt,qt,vn,ve,Et;function Ht(){An=new Hve(pt),xn=new Nve(pt,An,w),An.init(xn),ve=new Tbe(pt,An,xn),Xt=new Ebe(pt,An,xn),Tn=new qve,Ln=new ube,hn=new kbe(pt,An,Xt,Ln,xn,ve,Tn),Mr=new jve(X),Or=new Vve(X),jr=new ige(pt,xn),Et=new Lve(pt,An,jr,xn),dr=new Gve(pt,jr,Tn,Et),Wn=new Zve(pt,dr,jr,Tn),jt=new $ve(pt,xn,hn),he=new Fve(Ln),qn=new cbe(X,Mr,Or,An,xn,Et,he),pr=new Ibe(X,Ln),Zr=new fbe,Se=new ybe(An,xn),Nt=new Rve(X,Mr,Xt,Wn,F,_),ut=new Sbe(X,Wn,xn),qt=new zve(pt,An,Tn,xn),vn=new Wve(pt,An,Tn,xn),Tn.programs=qn.programs,X.capabilities=xn,X.extensions=An,X.properties=Ln,X.renderLists=Zr,X.shadowMap=ut,X.state=Xt,X.info=Tn}Ht();const Ut=new Abe(X,pt);this.xr=Ut,this.getContext=function(){return pt},this.getContextAttributes=function(){return pt.getContextAttributes()},this.forceContextLoss=function(){const ye=An.get("WEBGL_lose_context");ye&&ye.loseContext()},this.forceContextRestore=function(){const ye=An.get("WEBGL_lose_context");ye&&ye.restoreContext()},this.getPixelRatio=function(){return qe},this.setPixelRatio=function(ye){ye!==void 0&&(qe=ye,this.setSize(Te,Y,!1))},this.getSize=function(ye){return ye.set(Te,Y)},this.setSize=function(ye,nt,dt){if(Ut.isPresenting){console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting.");return}Te=ye,Y=nt,t.width=Math.floor(ye*qe),t.height=Math.floor(nt*qe),dt!==!1&&(t.style.width=ye+"px",t.style.height=nt+"px"),this.setViewport(0,0,ye,nt)},this.getDrawingBufferSize=function(ye){return ye.set(Te*qe,Y*qe).floor()},this.setDrawingBufferSize=function(ye,nt,dt){Te=ye,Y=nt,qe=dt,t.width=Math.floor(ye*dt),t.height=Math.floor(nt*dt),this.setViewport(0,0,ye,nt)},this.getCurrentViewport=function(ye){return ye.copy(ze)},this.getViewport=function(ye){return ye.copy(Ke)},this.setViewport=function(ye,nt,dt,at){ye.isVector4?Ke.set(ye.x,ye.y,ye.z,ye.w):Ke.set(ye,nt,dt,at),Xt.viewport(ze.copy(Ke).multiplyScalar(qe).floor())},this.getScissor=function(ye){return ye.copy(_e)},this.setScissor=function(ye,nt,dt,at){ye.isVector4?_e.set(ye.x,ye.y,ye.z,ye.w):_e.set(ye,nt,dt,at),Xt.scissor(ee.copy(_e).multiplyScalar(qe).floor())},this.getScissorTest=function(){return Qe},this.setScissorTest=function(ye){Xt.setScissorTest(Qe=ye)},this.setOpaqueSort=function(ye){Tt=ye},this.setTransparentSort=function(ye){xt=ye},this.getClearColor=function(ye){return ye.copy(Nt.getClearColor())},this.setClearColor=function(){Nt.setClearColor.apply(Nt,arguments)},this.getClearAlpha=function(){return Nt.getClearAlpha()},this.setClearAlpha=function(){Nt.setClearAlpha.apply(Nt,arguments)},this.clear=function(ye=!0,nt=!0,dt=!0){let at=0;ye&&(at|=16384),nt&&(at|=256),dt&&(at|=1024),pt.clear(at)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){t.removeEventListener("webglcontextlost",Ie,!1),t.removeEventListener("webglcontextrestored",Gt,!1),t.removeEventListener("webglcontextcreationerror",Bt,!1),Zr.dispose(),Se.dispose(),Ln.dispose(),Mr.dispose(),Or.dispose(),Wn.dispose(),Et.dispose(),qn.dispose(),Ut.dispose(),Ut.removeEventListener("sessionstart",zn),Ut.removeEventListener("sessionend",Bn),gt&&(gt.dispose(),gt=null),ti.stop()};function Ie(ye){ye.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),O=!0}function Gt(){console.log("THREE.WebGLRenderer: Context Restored."),O=!1;const ye=Tn.autoReset,nt=ut.enabled,dt=ut.autoUpdate,at=ut.needsUpdate,bt=ut.type;Ht(),Tn.autoReset=ye,ut.enabled=nt,ut.autoUpdate=dt,ut.needsUpdate=at,ut.type=bt}function Bt(ye){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",ye.statusMessage)}function fn(ye){const nt=ye.target;nt.removeEventListener("dispose",fn),Kt(nt)}function Kt(ye){tn(ye),Ln.remove(ye)}function tn(ye){const nt=Ln.get(ye).programs;nt!==void 0&&(nt.forEach(function(dt){qn.releaseProgram(dt)}),ye.isShaderMaterial&&qn.releaseShaderCache(ye))}this.renderBufferDirect=function(ye,nt,dt,at,bt,wn){nt===null&&(nt=Yt);const En=bt.isMesh&&bt.matrixWorld.determinant()<0,Sn=bi(ye,nt,dt,at,bt);Xt.setMaterial(at,En);let Dn=dt.index;const Vn=dt.attributes.position;if(Dn===null){if(Vn===void 0||Vn.count===0)return}else if(Dn.count===0)return;let jn=1;at.wireframe===!0&&(Dn=dr.getWireframeAttribute(dt),jn=2),Et.setup(bt,at,Sn,dt,Dn);let Hn,xr=qt;Dn!==null&&(Hn=jr.get(Dn),xr=vn,xr.setIndex(Hn));const ta=Dn!==null?Dn.count:Vn.count,ni=dt.drawRange.start*jn,Pi=dt.drawRange.count*jn,to=wn!==null?wn.start*jn:0,Gn=wn!==null?wn.count*jn:1/0,na=Math.max(ni,to),kr=Math.min(ta,ni+Pi,to+Gn)-1,ji=Math.max(0,kr-na+1);if(ji!==0){if(bt.isMesh)at.wireframe===!0?(Xt.setLineWidth(at.wireframeLinewidth*Jt()),xr.setMode(1)):xr.setMode(4);else if(bt.isLine){let ci=at.linewidth;ci===void 0&&(ci=1),Xt.setLineWidth(ci*Jt()),bt.isLineSegments?xr.setMode(1):bt.isLineLoop?xr.setMode(2):xr.setMode(3)}else bt.isPoints?xr.setMode(0):bt.isSprite&&xr.setMode(4);if(bt.isInstancedMesh)xr.renderInstances(na,ji,bt.count);else if(dt.isInstancedBufferGeometry){const ci=Math.min(dt.instanceCount,dt._maxInstanceCount);xr.renderInstances(na,ji,ci)}else xr.render(na,ji)}},this.compile=function(ye,nt){B=Se.get(ye),B.init(),te.push(B),ye.traverseVisible(function(dt){dt.isLight&&dt.layers.test(nt.layers)&&(B.pushLight(dt),dt.castShadow&&B.pushShadow(dt))}),B.setupLights(X.physicallyCorrectLights),ye.traverse(function(dt){const at=dt.material;if(at)if(Array.isArray(at))for(let bt=0;bt<at.length;bt++){const wn=at[bt];rs(wn,ye,dt)}else rs(at,ye,dt)}),te.pop(),B=null};let Ft=null;function pn(ye){Ft&&Ft(ye)}function zn(){ti.stop()}function Bn(){ti.start()}const ti=new Are;ti.setAnimationLoop(pn),typeof self!="undefined"&&ti.setContext(self),this.setAnimationLoop=function(ye){Ft=ye,Ut.setAnimationLoop(ye),ye===null?ti.stop():ti.start()},Ut.addEventListener("sessionstart",zn),Ut.addEventListener("sessionend",Bn),this.render=function(ye,nt){if(nt!==void 0&&nt.isCamera!==!0){console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(O===!0)return;ye.autoUpdate===!0&&ye.updateMatrixWorld(),nt.parent===null&&nt.updateMatrixWorld(),Ut.enabled===!0&&Ut.isPresenting===!0&&(Ut.cameraAutoUpdate===!0&&Ut.updateCamera(nt),nt=Ut.getCamera()),ye.isScene===!0&&ye.onBeforeRender(X,ye,nt,R),B=Se.get(ye,te.length),B.init(),te.push(B),zt.multiplyMatrices(nt.projectionMatrix,nt.matrixWorldInverse),Ge.setFromProjectionMatrix(zt),ft=this.localClippingEnabled,yt=he.init(this.clippingPlanes,ft,nt),j=Zr.get(ye,K.length),j.init(),K.push(j),Ni(ye,nt,0,X.sortObjects),j.finish(),X.sortObjects===!0&&j.sort(Tt,xt),yt===!0&&he.beginShadows();const dt=B.state.shadowsArray;if(ut.render(dt,ye,nt),yt===!0&&he.endShadows(),this.info.autoReset===!0&&this.info.reset(),Nt.render(j,ye),B.setupLights(X.physicallyCorrectLights),nt.isArrayCamera){const at=nt.cameras;for(let bt=0,wn=at.length;bt<wn;bt++){const En=at[bt];Uo(j,ye,En,En.viewport)}}else Uo(j,ye,nt);R!==null&&(hn.updateMultisampleRenderTarget(R),hn.updateRenderTargetMipmap(R)),ye.isScene===!0&&ye.onAfterRender(X,ye,nt),Et.resetDefaultState(),se=-1,me=null,te.pop(),te.length>0?B=te[te.length-1]:B=null,K.pop(),K.length>0?j=K[K.length-1]:j=null};function Ni(ye,nt,dt,at){if(ye.visible===!1)return;if(ye.layers.test(nt.layers)){if(ye.isGroup)dt=ye.renderOrder;else if(ye.isLOD)ye.autoUpdate===!0&&ye.update(nt);else if(ye.isLight)B.pushLight(ye),ye.castShadow&&B.pushShadow(ye);else if(ye.isSprite){if(!ye.frustumCulled||Ge.intersectsSprite(ye)){at&&Rt.setFromMatrixPosition(ye.matrixWorld).applyMatrix4(zt);const En=Wn.update(ye),Sn=ye.material;Sn.visible&&j.push(ye,En,Sn,dt,Rt.z,null)}}else if((ye.isMesh||ye.isLine||ye.isPoints)&&(ye.isSkinnedMesh&&ye.skeleton.frame!==Tn.render.frame&&(ye.skeleton.update(),ye.skeleton.frame=Tn.render.frame),!ye.frustumCulled||Ge.intersectsObject(ye))){at&&Rt.setFromMatrixPosition(ye.matrixWorld).applyMatrix4(zt);const En=Wn.update(ye),Sn=ye.material;if(Array.isArray(Sn)){const Dn=En.groups;for(let Vn=0,jn=Dn.length;Vn<jn;Vn++){const Hn=Dn[Vn],xr=Sn[Hn.materialIndex];xr&&xr.visible&&j.push(ye,En,xr,dt,Rt.z,Hn)}}else Sn.visible&&j.push(ye,En,Sn,dt,Rt.z,null)}}const wn=ye.children;for(let En=0,Sn=wn.length;En<Sn;En++)Ni(wn[En],nt,dt,at)}function Uo(ye,nt,dt,at){const bt=ye.opaque,wn=ye.transmissive,En=ye.transparent;B.setupLightsView(dt),wn.length>0&&ns(bt,nt,dt),at&&Xt.viewport(ze.copy(at)),bt.length>0&&Js(bt,nt,dt),wn.length>0&&Js(wn,nt,dt),En.length>0&&Js(En,nt,dt),Xt.buffers.depth.setTest(!0),Xt.buffers.depth.setMask(!0),Xt.buffers.color.setMask(!0),Xt.setPolygonOffset(!1)}function ns(ye,nt,dt){const at=xn.isWebGL2;gt===null&&(gt=new Qh(1,1,{generateMipmaps:!0,type:An.has("EXT_color_buffer_half_float")?x1:Yh,minFilter:R0,samples:at&&g===!0?4:0})),X.getDrawingBufferSize(kt),at?gt.setSize(kt.x,kt.y):gt.setSize(lP(kt.x),lP(kt.y));const bt=X.getRenderTarget();X.setRenderTarget(gt),X.clear();const wn=X.toneMapping;X.toneMapping=Qc,Js(ye,nt,dt),X.toneMapping=wn,hn.updateMultisampleRenderTarget(gt),hn.updateRenderTargetMipmap(gt),X.setRenderTarget(bt)}function Js(ye,nt,dt){const at=nt.isScene===!0?nt.overrideMaterial:null;for(let bt=0,wn=ye.length;bt<wn;bt++){const En=ye[bt],Sn=En.object,Dn=En.geometry,Vn=at===null?En.material:at,jn=En.group;Sn.layers.test(dt.layers)&&Mi(Sn,nt,dt,Dn,Vn,jn)}}function Mi(ye,nt,dt,at,bt,wn){ye.onBeforeRender(X,nt,dt,at,bt,wn),ye.modelViewMatrix.multiplyMatrices(dt.matrixWorldInverse,ye.matrixWorld),ye.normalMatrix.getNormalMatrix(ye.modelViewMatrix),bt.onBeforeRender(X,nt,dt,at,ye,wn),bt.transparent===!0&&bt.side===Zh?(bt.side=Xs,bt.needsUpdate=!0,X.renderBufferDirect(dt,nt,at,bt,ye,wn),bt.side=T0,bt.needsUpdate=!0,X.renderBufferDirect(dt,nt,at,bt,ye,wn),bt.side=Zh):X.renderBufferDirect(dt,nt,at,bt,ye,wn),ye.onAfterRender(X,nt,dt,at,bt,wn)}function rs(ye,nt,dt){nt.isScene!==!0&&(nt=Yt);const at=Ln.get(ye),bt=B.state.lights,wn=B.state.shadowsArray,En=bt.state.version,Sn=qn.getParameters(ye,bt.state,wn,nt,dt),Dn=qn.getProgramCacheKey(Sn);let Vn=at.programs;at.environment=ye.isMeshStandardMaterial?nt.environment:null,at.fog=nt.fog,at.envMap=(ye.isMeshStandardMaterial?Or:Mr).get(ye.envMap||at.environment),Vn===void 0&&(ye.addEventListener("dispose",fn),Vn=new Map,at.programs=Vn);let jn=Vn.get(Dn);if(jn!==void 0){if(at.currentProgram===jn&&at.lightsStateVersion===En)return Wl(ye,Sn),jn}else Sn.uniforms=qn.getUniforms(ye),ye.onBuild(dt,Sn,X),ye.onBeforeCompile(Sn,X),jn=qn.acquireProgram(Sn,Dn),Vn.set(Dn,jn),at.uniforms=Sn.uniforms;const Hn=at.uniforms;(!ye.isShaderMaterial&&!ye.isRawShaderMaterial||ye.clipping===!0)&&(Hn.clippingPlanes=he.uniform),Wl(ye,Sn),at.needsLights=eu(ye),at.lightsStateVersion=En,at.needsLights&&(Hn.ambientLightColor.value=bt.state.ambient,Hn.lightProbe.value=bt.state.probe,Hn.directionalLights.value=bt.state.directional,Hn.directionalLightShadows.value=bt.state.directionalShadow,Hn.spotLights.value=bt.state.spot,Hn.spotLightShadows.value=bt.state.spotShadow,Hn.rectAreaLights.value=bt.state.rectArea,Hn.ltc_1.value=bt.state.rectAreaLTC1,Hn.ltc_2.value=bt.state.rectAreaLTC2,Hn.pointLights.value=bt.state.point,Hn.pointLightShadows.value=bt.state.pointShadow,Hn.hemisphereLights.value=bt.state.hemi,Hn.directionalShadowMap.value=bt.state.directionalShadowMap,Hn.directionalShadowMatrix.value=bt.state.directionalShadowMatrix,Hn.spotShadowMap.value=bt.state.spotShadowMap,Hn.spotShadowMatrix.value=bt.state.spotShadowMatrix,Hn.pointShadowMap.value=bt.state.pointShadowMap,Hn.pointShadowMatrix.value=bt.state.pointShadowMatrix);const xr=jn.getUniforms(),ta=oP.seqWithValue(xr.seq,Hn);return at.currentProgram=jn,at.uniformsList=ta,jn}function Wl(ye,nt){const dt=Ln.get(ye);dt.outputEncoding=nt.outputEncoding,dt.instancing=nt.instancing,dt.skinning=nt.skinning,dt.morphTargets=nt.morphTargets,dt.morphNormals=nt.morphNormals,dt.morphColors=nt.morphColors,dt.morphTargetsCount=nt.morphTargetsCount,dt.numClippingPlanes=nt.numClippingPlanes,dt.numIntersection=nt.numClipIntersection,dt.vertexAlphas=nt.vertexAlphas,dt.vertexTangents=nt.vertexTangents,dt.toneMapping=nt.toneMapping}function bi(ye,nt,dt,at,bt){nt.isScene!==!0&&(nt=Yt),hn.resetTextureUnits();const wn=nt.fog,En=at.isMeshStandardMaterial?nt.environment:null,Sn=R===null?X.outputEncoding:R.isXRRenderTarget===!0?R.texture.encoding:Jh,Dn=(at.isMeshStandardMaterial?Or:Mr).get(at.envMap||En),Vn=at.vertexColors===!0&&!!dt.attributes.color&&dt.attributes.color.itemSize===4,jn=!!at.normalMap&&!!dt.attributes.tangent,Hn=!!dt.morphAttributes.position,xr=!!dt.morphAttributes.normal,ta=!!dt.morphAttributes.color,ni=at.toneMapped?X.toneMapping:Qc,Pi=dt.morphAttributes.position||dt.morphAttributes.normal||dt.morphAttributes.color,to=Pi!==void 0?Pi.length:0,Gn=Ln.get(at),na=B.state.lights;if(yt===!0&&(ft===!0||ye!==me)){const ui=ye===me&&at.id===se;he.setState(at,ye,ui)}let kr=!1;at.version===Gn.__version?(Gn.needsLights&&Gn.lightsStateVersion!==na.state.version||Gn.outputEncoding!==Sn||bt.isInstancedMesh&&Gn.instancing===!1||!bt.isInstancedMesh&&Gn.instancing===!0||bt.isSkinnedMesh&&Gn.skinning===!1||!bt.isSkinnedMesh&&Gn.skinning===!0||Gn.envMap!==Dn||at.fog===!0&&Gn.fog!==wn||Gn.numClippingPlanes!==void 0&&(Gn.numClippingPlanes!==he.numPlanes||Gn.numIntersection!==he.numIntersection)||Gn.vertexAlphas!==Vn||Gn.vertexTangents!==jn||Gn.morphTargets!==Hn||Gn.morphNormals!==xr||Gn.morphColors!==ta||Gn.toneMapping!==ni||xn.isWebGL2===!0&&Gn.morphTargetsCount!==to)&&(kr=!0):(kr=!0,Gn.__version=at.version);let ji=Gn.currentProgram;kr===!0&&(ji=rs(at,nt,bt));let ci=!1,_i=!1,ra=!1;const ri=ji.getUniforms(),ia=Gn.uniforms;if(Xt.useProgram(ji.program)&&(ci=!0,_i=!0,ra=!0),at.id!==se&&(se=at.id,_i=!0),ci||me!==ye){if(ri.setValue(pt,"projectionMatrix",ye.projectionMatrix),xn.logarithmicDepthBuffer&&ri.setValue(pt,"logDepthBufFC",2/(Math.log(ye.far+1)/Math.LN2)),me!==ye&&(me=ye,_i=!0,ra=!0),at.isShaderMaterial||at.isMeshPhongMaterial||at.isMeshToonMaterial||at.isMeshStandardMaterial||at.envMap){const ui=ri.map.cameraPosition;ui!==void 0&&ui.setValue(pt,Rt.setFromMatrixPosition(ye.matrixWorld))}(at.isMeshPhongMaterial||at.isMeshToonMaterial||at.isMeshLambertMaterial||at.isMeshBasicMaterial||at.isMeshStandardMaterial||at.isShaderMaterial)&&ri.setValue(pt,"isOrthographic",ye.isOrthographicCamera===!0),(at.isMeshPhongMaterial||at.isMeshToonMaterial||at.isMeshLambertMaterial||at.isMeshBasicMaterial||at.isMeshStandardMaterial||at.isShaderMaterial||at.isShadowMaterial||bt.isSkinnedMesh)&&ri.setValue(pt,"viewMatrix",ye.matrixWorldInverse)}if(bt.isSkinnedMesh){ri.setOptional(pt,bt,"bindMatrix"),ri.setOptional(pt,bt,"bindMatrixInverse");const ui=bt.skeleton;ui&&(xn.floatVertexTextures?(ui.boneTexture===null&&ui.computeBoneTexture(),ri.setValue(pt,"boneTexture",ui.boneTexture,hn),ri.setValue(pt,"boneTextureSize",ui.boneTextureSize)):console.warn("THREE.WebGLRenderer: SkinnedMesh can only be used with WebGL 2. With WebGL 1 OES_texture_float and vertex textures support is required."))}const yo=dt.morphAttributes;return(yo.position!==void 0||yo.normal!==void 0||yo.color!==void 0&&xn.isWebGL2===!0)&&jt.update(bt,dt,at,ji),(_i||Gn.receiveShadow!==bt.receiveShadow)&&(Gn.receiveShadow=bt.receiveShadow,ri.setValue(pt,"receiveShadow",bt.receiveShadow)),_i&&(ri.setValue(pt,"toneMappingExposure",X.toneMappingExposure),Gn.needsLights&&Fi(ia,ra),wn&&at.fog===!0&&pr.refreshFogUniforms(ia,wn),pr.refreshMaterialUniforms(ia,at,qe,Y,gt),oP.upload(pt,Gn.uniformsList,ia,hn)),at.isShaderMaterial&&at.uniformsNeedUpdate===!0&&(oP.upload(pt,Gn.uniformsList,ia,hn),at.uniformsNeedUpdate=!1),at.isSpriteMaterial&&ri.setValue(pt,"center",bt.center),ri.setValue(pt,"modelViewMatrix",bt.modelViewMatrix),ri.setValue(pt,"normalMatrix",bt.normalMatrix),ri.setValue(pt,"modelMatrix",bt.matrixWorld),ji}function Fi(ye,nt){ye.ambientLightColor.needsUpdate=nt,ye.lightProbe.needsUpdate=nt,ye.directionalLights.needsUpdate=nt,ye.directionalLightShadows.needsUpdate=nt,ye.pointLights.needsUpdate=nt,ye.pointLightShadows.needsUpdate=nt,ye.spotLights.needsUpdate=nt,ye.spotLightShadows.needsUpdate=nt,ye.rectAreaLights.needsUpdate=nt,ye.hemisphereLights.needsUpdate=nt}function eu(ye){return ye.isMeshLambertMaterial||ye.isMeshToonMaterial||ye.isMeshPhongMaterial||ye.isMeshStandardMaterial||ye.isShadowMaterial||ye.isShaderMaterial&&ye.lights===!0}this.getActiveCubeFace=function(){return W},this.getActiveMipmapLevel=function(){return we},this.getRenderTarget=function(){return R},this.setRenderTargetTextures=function(ye,nt,dt){Ln.get(ye.texture).__webglTexture=nt,Ln.get(ye.depthTexture).__webglTexture=dt;const at=Ln.get(ye);at.__hasExternalTextures=!0,at.__hasExternalTextures&&(at.__autoAllocateDepthBuffer=dt===void 0,at.__autoAllocateDepthBuffer||An.has("WEBGL_multisampled_render_to_texture")===!0&&(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),at.__useRenderToTexture=!1))},this.setRenderTargetFramebuffer=function(ye,nt){const dt=Ln.get(ye);dt.__webglFramebuffer=nt,dt.__useDefaultFramebuffer=nt===void 0},this.setRenderTarget=function(ye,nt=0,dt=0){R=ye,W=nt,we=dt;let at=!0;if(ye){const Dn=Ln.get(ye);Dn.__useDefaultFramebuffer!==void 0?(Xt.bindFramebuffer(36160,null),at=!1):Dn.__webglFramebuffer===void 0?hn.setupRenderTarget(ye):Dn.__hasExternalTextures&&hn.rebindTextures(ye,Ln.get(ye.texture).__webglTexture,Ln.get(ye.depthTexture).__webglTexture)}let bt=null,wn=!1,En=!1;if(ye){const Dn=ye.texture;(Dn.isData3DTexture||Dn.isDataArrayTexture)&&(En=!0);const Vn=Ln.get(ye).__webglFramebuffer;ye.isWebGLCubeRenderTarget?(bt=Vn[nt],wn=!0):xn.isWebGL2&&ye.samples>0&&hn.useMultisampledRTT(ye)===!1?bt=Ln.get(ye).__webglMultisampledFramebuffer:bt=Vn,ze.copy(ye.viewport),ee.copy(ye.scissor),fe=ye.scissorTest}else ze.copy(Ke).multiplyScalar(qe).floor(),ee.copy(_e).multiplyScalar(qe).floor(),fe=Qe;if(Xt.bindFramebuffer(36160,bt)&&xn.drawBuffers&&at&&Xt.drawBuffers(ye,bt),Xt.viewport(ze),Xt.scissor(ee),Xt.setScissorTest(fe),wn){const Dn=Ln.get(ye.texture);pt.framebufferTexture2D(36160,36064,34069+nt,Dn.__webglTexture,dt)}else if(En){const Dn=Ln.get(ye.texture),Vn=nt||0;pt.framebufferTextureLayer(36160,36064,Dn.__webglTexture,dt||0,Vn)}se=-1},this.readRenderTargetPixels=function(ye,nt,dt,at,bt,wn,En){if(!(ye&&ye.isWebGLRenderTarget)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}let Sn=Ln.get(ye).__webglFramebuffer;if(ye.isWebGLCubeRenderTarget&&En!==void 0&&(Sn=Sn[En]),Sn){Xt.bindFramebuffer(36160,Sn);try{const Dn=ye.texture,Vn=Dn.format,jn=Dn.type;if(Vn!==Ks&&ve.convert(Vn)!==pt.getParameter(35739)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}const Hn=jn===x1&&(An.has("EXT_color_buffer_half_float")||xn.isWebGL2&&An.has("EXT_color_buffer_float"));if(jn!==Yh&&ve.convert(jn)!==pt.getParameter(35738)&&!(jn===Gd&&(xn.isWebGL2||An.has("OES_texture_float")||An.has("WEBGL_color_buffer_float")))&&!Hn){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}nt>=0&&nt<=ye.width-at&&dt>=0&&dt<=ye.height-bt&&pt.readPixels(nt,dt,at,bt,ve.convert(Vn),ve.convert(jn),wn)}finally{const Dn=R!==null?Ln.get(R).__webglFramebuffer:null;Xt.bindFramebuffer(36160,Dn)}}},this.copyFramebufferToTexture=function(ye,nt,dt=0){const at=Math.pow(2,-dt),bt=Math.floor(nt.image.width*at),wn=Math.floor(nt.image.height*at);hn.setTexture2D(nt,0),pt.copyTexSubImage2D(3553,dt,0,0,ye.x,ye.y,bt,wn),Xt.unbindTexture()},this.copyTextureToTexture=function(ye,nt,dt,at=0){const bt=nt.image.width,wn=nt.image.height,En=ve.convert(dt.format),Sn=ve.convert(dt.type);hn.setTexture2D(dt,0),pt.pixelStorei(37440,dt.flipY),pt.pixelStorei(37441,dt.premultiplyAlpha),pt.pixelStorei(3317,dt.unpackAlignment),nt.isDataTexture?pt.texSubImage2D(3553,at,ye.x,ye.y,bt,wn,En,Sn,nt.image.data):nt.isCompressedTexture?pt.compressedTexSubImage2D(3553,at,ye.x,ye.y,nt.mipmaps[0].width,nt.mipmaps[0].height,En,nt.mipmaps[0].data):pt.texSubImage2D(3553,at,ye.x,ye.y,En,Sn,nt.image),at===0&&dt.generateMipmaps&&pt.generateMipmap(3553),Xt.unbindTexture()},this.copyTextureToTexture3D=function(ye,nt,dt,at,bt=0){if(X.isWebGL1Renderer){console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: can only be used with WebGL2.");return}const wn=ye.max.x-ye.min.x+1,En=ye.max.y-ye.min.y+1,Sn=ye.max.z-ye.min.z+1,Dn=ve.convert(at.format),Vn=ve.convert(at.type);let jn;if(at.isData3DTexture)hn.setTexture3D(at,0),jn=32879;else if(at.isDataArrayTexture)hn.setTexture2DArray(at,0),jn=35866;else{console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");return}pt.pixelStorei(37440,at.flipY),pt.pixelStorei(37441,at.premultiplyAlpha),pt.pixelStorei(3317,at.unpackAlignment);const Hn=pt.getParameter(3314),xr=pt.getParameter(32878),ta=pt.getParameter(3316),ni=pt.getParameter(3315),Pi=pt.getParameter(32877),to=dt.isCompressedTexture?dt.mipmaps[0]:dt.image;pt.pixelStorei(3314,to.width),pt.pixelStorei(32878,to.height),pt.pixelStorei(3316,ye.min.x),pt.pixelStorei(3315,ye.min.y),pt.pixelStorei(32877,ye.min.z),dt.isDataTexture||dt.isData3DTexture?pt.texSubImage3D(jn,bt,nt.x,nt.y,nt.z,wn,En,Sn,Dn,Vn,to.data):dt.isCompressedTexture?(console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: untested support for compressed srcTexture."),pt.compressedTexSubImage3D(jn,bt,nt.x,nt.y,nt.z,wn,En,Sn,Dn,to.data)):pt.texSubImage3D(jn,bt,nt.x,nt.y,nt.z,wn,En,Sn,Dn,Vn,to),pt.pixelStorei(3314,Hn),pt.pixelStorei(32878,xr),pt.pixelStorei(3316,ta),pt.pixelStorei(3315,ni),pt.pixelStorei(32877,Pi),bt===0&&at.generateMipmaps&&pt.generateMipmap(jn),Xt.unbindTexture()},this.initTexture=function(ye){ye.isCubeTexture?hn.setTextureCube(ye,0):ye.isData3DTexture?hn.setTexture3D(ye,0):ye.isDataArrayTexture?hn.setTexture2DArray(ye,0):hn.setTexture2D(ye,0),Xt.unbindTexture()},this.resetState=function(){W=0,we=0,R=null,Xt.reset(),Et.reset()},typeof __THREE_DEVTOOLS__!="undefined"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}class Obe extends zre{}Obe.prototype.isWebGL1Renderer=!0;class Rbe extends yi{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.overrideMaterial=null,this.autoUpdate=!0,typeof __THREE_DEVTOOLS__!="undefined"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(t,i){return super.copy(t,i),t.background!==null&&(this.background=t.background.clone()),t.environment!==null&&(this.environment=t.environment.clone()),t.fog!==null&&(this.fog=t.fog.clone()),t.overrideMaterial!==null&&(this.overrideMaterial=t.overrideMaterial.clone()),this.autoUpdate=t.autoUpdate,this.matrixAutoUpdate=t.matrixAutoUpdate,this}toJSON(t){const i=super.toJSON(t);return this.fog!==null&&(i.object.fog=this.fog.toJSON()),i}}class Lbe{constructor(t,i){this.isInterleavedBuffer=!0,this.array=t,this.stride=i,this.count=t!==void 0?t.length/i:0,this.usage=IL,this.updateRange={offset:0,count:-1},this.version=0,this.uuid=$s()}onUploadCallback(){}set needsUpdate(t){t===!0&&this.version++}setUsage(t){return this.usage=t,this}copy(t){return this.array=new t.array.constructor(t.array),this.count=t.count,this.stride=t.stride,this.usage=t.usage,this}copyAt(t,i,l){t*=this.stride,l*=i.stride;for(let d=0,g=this.stride;d<g;d++)this.array[t+d]=i.array[l+d];return this}set(t,i=0){return this.array.set(t,i),this}clone(t){t.arrayBuffers===void 0&&(t.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=$s()),t.arrayBuffers[this.array.buffer._uuid]===void 0&&(t.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const i=new this.array.constructor(t.arrayBuffers[this.array.buffer._uuid]),l=new this.constructor(i,this.stride);return l.setUsage(this.usage),l}onUpload(t){return this.onUploadCallback=t,this}toJSON(t){return t.arrayBuffers===void 0&&(t.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=$s()),t.arrayBuffers[this.array.buffer._uuid]===void 0&&(t.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}const Lo=new Ne;class JL{constructor(t,i,l,d=!1){this.isInterleavedBufferAttribute=!0,this.name="",this.data=t,this.itemSize=i,this.offset=l,this.normalized=d===!0}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(t){this.data.needsUpdate=t}applyMatrix4(t){for(let i=0,l=this.data.count;i<l;i++)Lo.fromBufferAttribute(this,i),Lo.applyMatrix4(t),this.setXYZ(i,Lo.x,Lo.y,Lo.z);return this}applyNormalMatrix(t){for(let i=0,l=this.count;i<l;i++)Lo.fromBufferAttribute(this,i),Lo.applyNormalMatrix(t),this.setXYZ(i,Lo.x,Lo.y,Lo.z);return this}transformDirection(t){for(let i=0,l=this.count;i<l;i++)Lo.fromBufferAttribute(this,i),Lo.transformDirection(t),this.setXYZ(i,Lo.x,Lo.y,Lo.z);return this}setX(t,i){return this.data.array[t*this.data.stride+this.offset]=i,this}setY(t,i){return this.data.array[t*this.data.stride+this.offset+1]=i,this}setZ(t,i){return this.data.array[t*this.data.stride+this.offset+2]=i,this}setW(t,i){return this.data.array[t*this.data.stride+this.offset+3]=i,this}getX(t){return this.data.array[t*this.data.stride+this.offset]}getY(t){return this.data.array[t*this.data.stride+this.offset+1]}getZ(t){return this.data.array[t*this.data.stride+this.offset+2]}getW(t){return this.data.array[t*this.data.stride+this.offset+3]}setXY(t,i,l){return t=t*this.data.stride+this.offset,this.data.array[t+0]=i,this.data.array[t+1]=l,this}setXYZ(t,i,l,d){return t=t*this.data.stride+this.offset,this.data.array[t+0]=i,this.data.array[t+1]=l,this.data.array[t+2]=d,this}setXYZW(t,i,l,d,g){return t=t*this.data.stride+this.offset,this.data.array[t+0]=i,this.data.array[t+1]=l,this.data.array[t+2]=d,this.data.array[t+3]=g,this}clone(t){if(t===void 0){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will deinterleave buffer data.");const i=[];for(let l=0;l<this.count;l++){const d=l*this.data.stride+this.offset;for(let g=0;g<this.itemSize;g++)i.push(this.data.array[d+g])}return new xa(new this.array.constructor(i),this.itemSize,this.normalized)}else return t.interleavedBuffers===void 0&&(t.interleavedBuffers={}),t.interleavedBuffers[this.data.uuid]===void 0&&(t.interleavedBuffers[this.data.uuid]=this.data.clone(t)),new JL(t.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(t){if(t===void 0){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will deinterleave buffer data.");const i=[];for(let l=0;l<this.count;l++){const d=l*this.data.stride+this.offset;for(let g=0;g<this.itemSize;g++)i.push(this.data.array[d+g])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:i,normalized:this.normalized}}else return t.interleavedBuffers===void 0&&(t.interleavedBuffers={}),t.interleavedBuffers[this.data.uuid]===void 0&&(t.interleavedBuffers[this.data.uuid]=this.data.toJSON(t)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}const Fne=new Ne,jne=new Er,Bne=new Er,zbe=new Ne,Une=new cr;class Nbe extends vo{constructor(t,i){super(t,i),this.isSkinnedMesh=!0,this.type="SkinnedMesh",this.bindMode="attached",this.bindMatrix=new cr,this.bindMatrixInverse=new cr}copy(t,i){return super.copy(t,i),this.bindMode=t.bindMode,this.bindMatrix.copy(t.bindMatrix),this.bindMatrixInverse.copy(t.bindMatrixInverse),this.skeleton=t.skeleton,this}bind(t,i){this.skeleton=t,i===void 0&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),i=this.matrixWorld),this.bindMatrix.copy(i),this.bindMatrixInverse.copy(i).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const t=new Er,i=this.geometry.attributes.skinWeight;for(let l=0,d=i.count;l<d;l++){t.fromBufferAttribute(i,l);const g=1/t.manhattanLength();g!==1/0?t.multiplyScalar(g):t.set(1,0,0,0),i.setXYZW(l,t.x,t.y,t.z,t.w)}}updateMatrixWorld(t){super.updateMatrixWorld(t),this.bindMode==="attached"?this.bindMatrixInverse.copy(this.matrixWorld).invert():this.bindMode==="detached"?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}boneTransform(t,i){const l=this.skeleton,d=this.geometry;jne.fromBufferAttribute(d.attributes.skinIndex,t),Bne.fromBufferAttribute(d.attributes.skinWeight,t),Fne.copy(i).applyMatrix4(this.bindMatrix),i.set(0,0,0);for(let g=0;g<4;g++){const _=Bne.getComponent(g);if(_!==0){const b=jne.getComponent(g);Une.multiplyMatrices(l.bones[b].matrixWorld,l.boneInverses[b]),i.addScaledVector(zbe.copy(Fne).applyMatrix4(Une),_)}}return i.applyMatrix4(this.bindMatrixInverse)}}class Nre extends yi{constructor(){super(),this.isBone=!0,this.type="Bone"}}class Fbe extends Fo{constructor(t=null,i=1,l=1,d,g,_,b,M,I=Qi,F=Qi,j,B){super(null,_,b,M,I,F,d,g,j,B),this.isDataTexture=!0,this.image={data:t,width:i,height:l},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}const Vne=new cr,jbe=new cr;class QL{constructor(t=[],i=[]){this.uuid=$s(),this.bones=t.slice(0),this.boneInverses=i,this.boneMatrices=null,this.boneTexture=null,this.boneTextureSize=0,this.frame=-1,this.init()}init(){const t=this.bones,i=this.boneInverses;if(this.boneMatrices=new Float32Array(t.length*16),i.length===0)this.calculateInverses();else if(t.length!==i.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let l=0,d=this.bones.length;l<d;l++)this.boneInverses.push(new cr)}}calculateInverses(){this.boneInverses.length=0;for(let t=0,i=this.bones.length;t<i;t++){const l=new cr;this.bones[t]&&l.copy(this.bones[t].matrixWorld).invert(),this.boneInverses.push(l)}}pose(){for(let t=0,i=this.bones.length;t<i;t++){const l=this.bones[t];l&&l.matrixWorld.copy(this.boneInverses[t]).invert()}for(let t=0,i=this.bones.length;t<i;t++){const l=this.bones[t];l&&(l.parent&&l.parent.isBone?(l.matrix.copy(l.parent.matrixWorld).invert(),l.matrix.multiply(l.matrixWorld)):l.matrix.copy(l.matrixWorld),l.matrix.decompose(l.position,l.quaternion,l.scale))}}update(){const t=this.bones,i=this.boneInverses,l=this.boneMatrices,d=this.boneTexture;for(let g=0,_=t.length;g<_;g++){const b=t[g]?t[g].matrixWorld:jbe;Vne.multiplyMatrices(b,i[g]),Vne.toArray(l,g*16)}d!==null&&(d.needsUpdate=!0)}clone(){return new QL(this.bones,this.boneInverses)}computeBoneTexture(){let t=Math.sqrt(this.bones.length*4);t=bre(t),t=Math.max(t,4);const i=new Float32Array(t*t*4);i.set(this.boneMatrices);const l=new Fbe(i,t,t,Ks,Gd);return l.needsUpdate=!0,this.boneMatrices=i,this.boneTexture=l,this.boneTextureSize=t,this}getBoneByName(t){for(let i=0,l=this.bones.length;i<l;i++){const d=this.bones[i];if(d.name===t)return d}}dispose(){this.boneTexture!==null&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(t,i){this.uuid=t.uuid;for(let l=0,d=t.bones.length;l<d;l++){const g=t.bones[l];let _=i[g];_===void 0&&(console.warn("THREE.Skeleton: No bone found with UUID:",g),_=new Nre),this.bones.push(_),this.boneInverses.push(new cr().fromArray(t.boneInverses[l]))}return this.init(),this}toJSON(){const t={metadata:{version:4.5,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};t.uuid=this.uuid;const i=this.bones,l=this.boneInverses;for(let d=0,g=i.length;d<g;d++){const _=i[d];t.bones.push(_.uuid);const b=l[d];t.boneInverses.push(b.toArray())}return t}}class Fre extends Vl{constructor(t){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new Fn(16777215),this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.linewidth=t.linewidth,this.linecap=t.linecap,this.linejoin=t.linejoin,this.fog=t.fog,this}}const Hne=new Ne,Gne=new Ne,Wne=new cr,wL=new XL,eP=new L0;class ez extends yi{constructor(t=new es,i=new Fre){super(),this.isLine=!0,this.type="Line",this.geometry=t,this.material=i,this.updateMorphTargets()}copy(t,i){return super.copy(t,i),this.material=t.material,this.geometry=t.geometry,this}computeLineDistances(){const t=this.geometry;if(t.index===null){const i=t.attributes.position,l=[0];for(let d=1,g=i.count;d<g;d++)Hne.fromBufferAttribute(i,d-1),Gne.fromBufferAttribute(i,d),l[d]=l[d-1],l[d]+=Hne.distanceTo(Gne);t.setAttribute("lineDistance",new No(l,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(t,i){const l=this.geometry,d=this.matrixWorld,g=t.params.Line.threshold,_=l.drawRange;if(l.boundingSphere===null&&l.computeBoundingSphere(),eP.copy(l.boundingSphere),eP.applyMatrix4(d),eP.radius+=g,t.ray.intersectsSphere(eP)===!1)return;Wne.copy(d).invert(),wL.copy(t.ray).applyMatrix4(Wne);const b=g/((this.scale.x+this.scale.y+this.scale.z)/3),M=b*b,I=new Ne,F=new Ne,j=new Ne,B=new Ne,K=this.isLineSegments?2:1,te=l.index,O=l.attributes.position;if(te!==null){const W=Math.max(0,_.start),we=Math.min(te.count,_.start+_.count);for(let R=W,se=we-1;R<se;R+=K){const me=te.getX(R),ze=te.getX(R+1);if(I.fromBufferAttribute(O,me),F.fromBufferAttribute(O,ze),wL.distanceSqToSegment(I,F,B,j)>M)continue;B.applyMatrix4(this.matrixWorld);const fe=t.ray.origin.distanceTo(B);fe<t.near||fe>t.far||i.push({distance:fe,point:j.clone().applyMatrix4(this.matrixWorld),index:R,face:null,faceIndex:null,object:this})}}else{const W=Math.max(0,_.start),we=Math.min(O.count,_.start+_.count);for(let R=W,se=we-1;R<se;R+=K){if(I.fromBufferAttribute(O,R),F.fromBufferAttribute(O,R+1),wL.distanceSqToSegment(I,F,B,j)>M)continue;B.applyMatrix4(this.matrixWorld);const ze=t.ray.origin.distanceTo(B);ze<t.near||ze>t.far||i.push({distance:ze,point:j.clone().applyMatrix4(this.matrixWorld),index:R,face:null,faceIndex:null,object:this})}}}updateMorphTargets(){const i=this.geometry.morphAttributes,l=Object.keys(i);if(l.length>0){const d=i[l[0]];if(d!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let g=0,_=d.length;g<_;g++){const b=d[g].name||String(g);this.morphTargetInfluences.push(0),this.morphTargetDictionary[b]=g}}}}}const qne=new Ne,Kne=new Ne;class Bbe extends ez{constructor(t,i){super(t,i),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){const t=this.geometry;if(t.index===null){const i=t.attributes.position,l=[];for(let d=0,g=i.count;d<g;d+=2)qne.fromBufferAttribute(i,d),Kne.fromBufferAttribute(i,d+1),l[d]=d===0?0:l[d-1],l[d+1]=l[d]+qne.distanceTo(Kne);t.setAttribute("lineDistance",new No(l,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}}class Ube extends ez{constructor(t,i){super(t,i),this.isLineLoop=!0,this.type="LineLoop"}}class jre extends Vl{constructor(t){super(),this.isPointsMaterial=!0,this.type="PointsMaterial",this.color=new Fn(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.map=t.map,this.alphaMap=t.alphaMap,this.size=t.size,this.sizeAttenuation=t.sizeAttenuation,this.fog=t.fog,this}}const Xne=new cr,LL=new XL,tP=new L0,nP=new Ne;class Vbe extends yi{constructor(t=new es,i=new jre){super(),this.isPoints=!0,this.type="Points",this.geometry=t,this.material=i,this.updateMorphTargets()}copy(t,i){return super.copy(t,i),this.material=t.material,this.geometry=t.geometry,this}raycast(t,i){const l=this.geometry,d=this.matrixWorld,g=t.params.Points.threshold,_=l.drawRange;if(l.boundingSphere===null&&l.computeBoundingSphere(),tP.copy(l.boundingSphere),tP.applyMatrix4(d),tP.radius+=g,t.ray.intersectsSphere(tP)===!1)return;Xne.copy(d).invert(),LL.copy(t.ray).applyMatrix4(Xne);const b=g/((this.scale.x+this.scale.y+this.scale.z)/3),M=b*b,I=l.index,j=l.attributes.position;if(I!==null){const B=Math.max(0,_.start),K=Math.min(I.count,_.start+_.count);for(let te=B,X=K;te<X;te++){const O=I.getX(te);nP.fromBufferAttribute(j,O),$ne(nP,O,M,d,t,i,this)}}else{const B=Math.max(0,_.start),K=Math.min(j.count,_.start+_.count);for(let te=B,X=K;te<X;te++)nP.fromBufferAttribute(j,te),$ne(nP,te,M,d,t,i,this)}}updateMorphTargets(){const i=this.geometry.morphAttributes,l=Object.keys(i);if(l.length>0){const d=i[l[0]];if(d!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let g=0,_=d.length;g<_;g++){const b=d[g].name||String(g);this.morphTargetInfluences.push(0),this.morphTargetDictionary[b]=g}}}}}function $ne(w,t,i,l,d,g,_){const b=LL.distanceSqToPoint(w);if(b<i){const M=new Ne;LL.closestPointToPoint(w,M),M.applyMatrix4(l);const I=d.ray.origin.distanceTo(M);if(I<d.near||I>d.far)return;g.push({distance:I,distanceToRay:Math.sqrt(b),point:M,index:t,face:null,object:_})}}class tz extends es{constructor(t=1,i=1,l=1,d=8,g=1,_=!1,b=0,M=Math.PI*2){super(),this.type="CylinderGeometry",this.parameters={radiusTop:t,radiusBottom:i,height:l,radialSegments:d,heightSegments:g,openEnded:_,thetaStart:b,thetaLength:M};const I=this;d=Math.floor(d),g=Math.floor(g);const F=[],j=[],B=[],K=[];let te=0;const X=[],O=l/2;let W=0;we(),_===!1&&(t>0&&R(!0),i>0&&R(!1)),this.setIndex(F),this.setAttribute("position",new No(j,3)),this.setAttribute("normal",new No(B,3)),this.setAttribute("uv",new No(K,2));function we(){const se=new Ne,me=new Ne;let ze=0;const ee=(i-t)/l;for(let fe=0;fe<=g;fe++){const Te=[],Y=fe/g,qe=Y*(i-t)+t;for(let Tt=0;Tt<=d;Tt++){const xt=Tt/d,Ke=xt*M+b,_e=Math.sin(Ke),Qe=Math.cos(Ke);me.x=qe*_e,me.y=-Y*l+O,me.z=qe*Qe,j.push(me.x,me.y,me.z),se.set(_e,ee,Qe).normalize(),B.push(se.x,se.y,se.z),K.push(xt,1-Y),Te.push(te++)}X.push(Te)}for(let fe=0;fe<d;fe++)for(let Te=0;Te<g;Te++){const Y=X[Te][fe],qe=X[Te+1][fe],Tt=X[Te+1][fe+1],xt=X[Te][fe+1];F.push(Y,qe,xt),F.push(qe,Tt,xt),ze+=6}I.addGroup(W,ze,0),W+=ze}function R(se){const me=te,ze=new Rn,ee=new Ne;let fe=0;const Te=se===!0?t:i,Y=se===!0?1:-1;for(let Tt=1;Tt<=d;Tt++)j.push(0,O*Y,0),B.push(0,Y,0),K.push(.5,.5),te++;const qe=te;for(let Tt=0;Tt<=d;Tt++){const Ke=Tt/d*M+b,_e=Math.cos(Ke),Qe=Math.sin(Ke);ee.x=Te*Qe,ee.y=O*Y,ee.z=Te*_e,j.push(ee.x,ee.y,ee.z),B.push(0,Y,0),ze.x=_e*.5+.5,ze.y=Qe*.5*Y+.5,K.push(ze.x,ze.y),te++}for(let Tt=0;Tt<d;Tt++){const xt=me+Tt,Ke=qe+Tt;se===!0?F.push(Ke,Ke+1,xt):F.push(Ke+1,Ke,xt),fe+=3}I.addGroup(W,fe,se===!0?1:2),W+=fe}}static fromJSON(t){return new tz(t.radiusTop,t.radiusBottom,t.height,t.radialSegments,t.heightSegments,t.openEnded,t.thetaStart,t.thetaLength)}}class nz extends tz{constructor(t=1,i=1,l=8,d=1,g=!1,_=0,b=Math.PI*2){super(0,t,i,l,d,g,_,b),this.type="ConeGeometry",this.parameters={radius:t,height:i,radialSegments:l,heightSegments:d,openEnded:g,thetaStart:_,thetaLength:b}}static fromJSON(t){return new nz(t.radius,t.height,t.radialSegments,t.heightSegments,t.openEnded,t.thetaStart,t.thetaLength)}}class rz extends es{constructor(t=1,i=.4,l=64,d=8,g=2,_=3){super(),this.type="TorusKnotGeometry",this.parameters={radius:t,tube:i,tubularSegments:l,radialSegments:d,p:g,q:_},l=Math.floor(l),d=Math.floor(d);const b=[],M=[],I=[],F=[],j=new Ne,B=new Ne,K=new Ne,te=new Ne,X=new Ne,O=new Ne,W=new Ne;for(let R=0;R<=l;++R){const se=R/l*g*Math.PI*2;we(se,g,_,t,K),we(se+.01,g,_,t,te),O.subVectors(te,K),W.addVectors(te,K),X.crossVectors(O,W),W.crossVectors(X,O),X.normalize(),W.normalize();for(let me=0;me<=d;++me){const ze=me/d*Math.PI*2,ee=-i*Math.cos(ze),fe=i*Math.sin(ze);j.x=K.x+(ee*W.x+fe*X.x),j.y=K.y+(ee*W.y+fe*X.y),j.z=K.z+(ee*W.z+fe*X.z),M.push(j.x,j.y,j.z),B.subVectors(j,K).normalize(),I.push(B.x,B.y,B.z),F.push(R/l),F.push(me/d)}}for(let R=1;R<=l;R++)for(let se=1;se<=d;se++){const me=(d+1)*(R-1)+(se-1),ze=(d+1)*R+(se-1),ee=(d+1)*R+se,fe=(d+1)*(R-1)+se;b.push(me,ze,fe),b.push(ze,ee,fe)}this.setIndex(b),this.setAttribute("position",new No(M,3)),this.setAttribute("normal",new No(I,3)),this.setAttribute("uv",new No(F,2));function we(R,se,me,ze,ee){const fe=Math.cos(R),Te=Math.sin(R),Y=me/se*R,qe=Math.cos(Y);ee.x=ze*(2+qe)*.5*fe,ee.y=ze*(2+qe)*Te*.5,ee.z=ze*Math.sin(Y)*.5}}static fromJSON(t){return new rz(t.radius,t.tube,t.tubularSegments,t.radialSegments,t.p,t.q)}}class Kd extends Vl{constructor(t){super(),this.isMeshStandardMaterial=!0,this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new Fn(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Fn(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=qL,this.normalScale=new Rn(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.defines={STANDARD:""},this.color.copy(t.color),this.roughness=t.roughness,this.metalness=t.metalness,this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.roughnessMap=t.roughnessMap,this.metalnessMap=t.metalnessMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.envMapIntensity=t.envMapIntensity,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.flatShading=t.flatShading,this.fog=t.fog,this}}class ip extends Kd{constructor(t){super(),this.isMeshPhysicalMaterial=!0,this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new Rn(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return go(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(i){this.ior=(1+.4*i)/(1-.4*i)}}),this.iridescenceMap=null,this.iridescenceIOR=1.3,this.iridescenceThicknessRange=[100,400],this.iridescenceThicknessMap=null,this.sheenColor=new Fn(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=0,this.attenuationColor=new Fn(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new Fn(1,1,1),this.specularColorMap=null,this._sheen=0,this._clearcoat=0,this._iridescence=0,this._transmission=0,this.setValues(t)}get sheen(){return this._sheen}set sheen(t){this._sheen>0!=t>0&&this.version++,this._sheen=t}get clearcoat(){return this._clearcoat}set clearcoat(t){this._clearcoat>0!=t>0&&this.version++,this._clearcoat=t}get iridescence(){return this._iridescence}set iridescence(t){this._iridescence>0!=t>0&&this.version++,this._iridescence=t}get transmission(){return this._transmission}set transmission(t){this._transmission>0!=t>0&&this.version++,this._transmission=t}copy(t){return super.copy(t),this.defines={STANDARD:"",PHYSICAL:""},this.clearcoat=t.clearcoat,this.clearcoatMap=t.clearcoatMap,this.clearcoatRoughness=t.clearcoatRoughness,this.clearcoatRoughnessMap=t.clearcoatRoughnessMap,this.clearcoatNormalMap=t.clearcoatNormalMap,this.clearcoatNormalScale.copy(t.clearcoatNormalScale),this.ior=t.ior,this.iridescence=t.iridescence,this.iridescenceMap=t.iridescenceMap,this.iridescenceIOR=t.iridescenceIOR,this.iridescenceThicknessRange=[...t.iridescenceThicknessRange],this.iridescenceThicknessMap=t.iridescenceThicknessMap,this.sheen=t.sheen,this.sheenColor.copy(t.sheenColor),this.sheenColorMap=t.sheenColorMap,this.sheenRoughness=t.sheenRoughness,this.sheenRoughnessMap=t.sheenRoughnessMap,this.transmission=t.transmission,this.transmissionMap=t.transmissionMap,this.thickness=t.thickness,this.thicknessMap=t.thicknessMap,this.attenuationDistance=t.attenuationDistance,this.attenuationColor.copy(t.attenuationColor),this.specularIntensity=t.specularIntensity,this.specularIntensityMap=t.specularIntensityMap,this.specularColor.copy(t.specularColor),this.specularColorMap=t.specularColorMap,this}}const Vr={arraySlice:function(w,t,i){return Vr.isTypedArray(w)?new w.constructor(w.subarray(t,i!==void 0?i:w.length)):w.slice(t,i)},convertArray:function(w,t,i){return!w||!i&&w.constructor===t?w:typeof t.BYTES_PER_ELEMENT=="number"?new t(w):Array.prototype.slice.call(w)},isTypedArray:function(w){return ArrayBuffer.isView(w)&&!(w instanceof DataView)},getKeyframeOrder:function(w){function t(d,g){return w[d]-w[g]}const i=w.length,l=new Array(i);for(let d=0;d!==i;++d)l[d]=d;return l.sort(t),l},sortedArray:function(w,t,i){const l=w.length,d=new w.constructor(l);for(let g=0,_=0;_!==l;++g){const b=i[g]*t;for(let M=0;M!==t;++M)d[_++]=w[b+M]}return d},flattenJSON:function(w,t,i,l){let d=1,g=w[0];for(;g!==void 0&&g[l]===void 0;)g=w[d++];if(g===void 0)return;let _=g[l];if(_!==void 0)if(Array.isArray(_))do _=g[l],_!==void 0&&(t.push(g.time),i.push.apply(i,_)),g=w[d++];while(g!==void 0);else if(_.toArray!==void 0)do _=g[l],_!==void 0&&(t.push(g.time),_.toArray(i,i.length)),g=w[d++];while(g!==void 0);else do _=g[l],_!==void 0&&(t.push(g.time),i.push(_)),g=w[d++];while(g!==void 0)},subclip:function(w,t,i,l,d=30){const g=w.clone();g.name=t;const _=[];for(let M=0;M<g.tracks.length;++M){const I=g.tracks[M],F=I.getValueSize(),j=[],B=[];for(let K=0;K<I.times.length;++K){const te=I.times[K]*d;if(!(te<i||te>=l)){j.push(I.times[K]);for(let X=0;X<F;++X)B.push(I.values[K*F+X])}}j.length!==0&&(I.times=Vr.convertArray(j,I.times.constructor),I.values=Vr.convertArray(B,I.values.constructor),_.push(I))}g.tracks=_;let b=1/0;for(let M=0;M<g.tracks.length;++M)b>g.tracks[M].times[0]&&(b=g.tracks[M].times[0]);for(let M=0;M<g.tracks.length;++M)g.tracks[M].shift(-1*b);return g.resetDuration(),g},makeClipAdditive:function(w,t=0,i=w,l=30){l<=0&&(l=30);const d=i.tracks.length,g=t/l;for(let _=0;_<d;++_){const b=i.tracks[_],M=b.ValueTypeName;if(M==="bool"||M==="string")continue;const I=w.tracks.find(function(W){return W.name===b.name&&W.ValueTypeName===M});if(I===void 0)continue;let F=0;const j=b.getValueSize();b.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(F=j/3);let B=0;const K=I.getValueSize();I.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(B=K/3);const te=b.times.length-1;let X;if(g<=b.times[0]){const W=F,we=j-F;X=Vr.arraySlice(b.values,W,we)}else if(g>=b.times[te]){const W=te*j+F,we=W+j-F;X=Vr.arraySlice(b.values,W,we)}else{const W=b.createInterpolant(),we=F,R=j-F;W.evaluate(g),X=Vr.arraySlice(W.resultBuffer,we,R)}M==="quaternion"&&new Zs().fromArray(X).normalize().conjugate().toArray(X);const O=I.times.length;for(let W=0;W<O;++W){const we=W*K+B;if(M==="quaternion")Zs.multiplyQuaternionsFlat(I.values,we,X,0,I.values,we);else{const R=K-B*2;for(let se=0;se<R;++se)I.values[we+se]-=X[se]}}}return w.blendMode=vme,w}};class C1{constructor(t,i,l,d){this.parameterPositions=t,this._cachedIndex=0,this.resultBuffer=d!==void 0?d:new i.constructor(l),this.sampleValues=i,this.valueSize=l,this.settings=null,this.DefaultSettings_={}}evaluate(t){const i=this.parameterPositions;let l=this._cachedIndex,d=i[l],g=i[l-1];e:{t:{let _;n:{r:if(!(t<d)){for(let b=l+2;;){if(d===void 0){if(t<g)break r;return l=i.length,this._cachedIndex=l,this.copySampleValue_(l-1)}if(l===b)break;if(g=d,d=i[++l],t<d)break t}_=i.length;break n}if(!(t>=g)){const b=i[1];t<b&&(l=2,g=b);for(let M=l-2;;){if(g===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(l===M)break;if(d=g,g=i[--l-1],t>=g)break t}_=l,l=0;break n}break e}for(;l<_;){const b=l+_>>>1;t<i[b]?_=b:l=b+1}if(d=i[l],g=i[l-1],g===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(d===void 0)return l=i.length,this._cachedIndex=l,this.copySampleValue_(l-1)}this._cachedIndex=l,this.intervalChanged_(l,g,d)}return this.interpolate_(l,g,t,d)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(t){const i=this.resultBuffer,l=this.sampleValues,d=this.valueSize,g=t*d;for(let _=0;_!==d;++_)i[_]=l[g+_];return i}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}class Hbe extends C1{constructor(t,i,l,d){super(t,i,l,d),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:ene,endingEnd:ene}}intervalChanged_(t,i,l){const d=this.parameterPositions;let g=t-2,_=t+1,b=d[g],M=d[_];if(b===void 0)switch(this.getSettings_().endingStart){case tne:g=t,b=2*i-l;break;case nne:g=d.length-2,b=i+d[g]-d[g+1];break;default:g=t,b=l}if(M===void 0)switch(this.getSettings_().endingEnd){case tne:_=t,M=2*l-i;break;case nne:_=1,M=l+d[1]-d[0];break;default:_=t-1,M=i}const I=(l-i)*.5,F=this.valueSize;this._weightPrev=I/(i-b),this._weightNext=I/(M-l),this._offsetPrev=g*F,this._offsetNext=_*F}interpolate_(t,i,l,d){const g=this.resultBuffer,_=this.sampleValues,b=this.valueSize,M=t*b,I=M-b,F=this._offsetPrev,j=this._offsetNext,B=this._weightPrev,K=this._weightNext,te=(l-i)/(d-i),X=te*te,O=X*te,W=-B*O+2*B*X-B*te,we=(1+B)*O+(-1.5-2*B)*X+(-.5+B)*te+1,R=(-1-K)*O+(1.5+K)*X+.5*te,se=K*O-K*X;for(let me=0;me!==b;++me)g[me]=W*_[F+me]+we*_[I+me]+R*_[M+me]+se*_[j+me];return g}}class Gbe extends C1{constructor(t,i,l,d){super(t,i,l,d)}interpolate_(t,i,l,d){const g=this.resultBuffer,_=this.sampleValues,b=this.valueSize,M=t*b,I=M-b,F=(l-i)/(d-i),j=1-F;for(let B=0;B!==b;++B)g[B]=_[I+B]*j+_[M+B]*F;return g}}class Wbe extends C1{constructor(t,i,l,d){super(t,i,l,d)}interpolate_(t){return this.copySampleValue_(t-1)}}class Gl{constructor(t,i,l,d){if(t===void 0)throw new Error("THREE.KeyframeTrack: track name is undefined");if(i===void 0||i.length===0)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+t);this.name=t,this.times=Vr.convertArray(i,this.TimeBufferType),this.values=Vr.convertArray(l,this.ValueBufferType),this.setInterpolation(d||this.DefaultInterpolation)}static toJSON(t){const i=t.constructor;let l;if(i.toJSON!==this.toJSON)l=i.toJSON(t);else{l={name:t.name,times:Vr.convertArray(t.times,Array),values:Vr.convertArray(t.values,Array)};const d=t.getInterpolation();d!==t.DefaultInterpolation&&(l.interpolation=d)}return l.type=t.ValueTypeName,l}InterpolantFactoryMethodDiscrete(t){return new Wbe(this.times,this.values,this.getValueSize(),t)}InterpolantFactoryMethodLinear(t){return new Gbe(this.times,this.values,this.getValueSize(),t)}InterpolantFactoryMethodSmooth(t){return new Hbe(this.times,this.values,this.getValueSize(),t)}setInterpolation(t){let i;switch(t){case w1:i=this.InterpolantFactoryMethodDiscrete;break;case I0:i=this.InterpolantFactoryMethodLinear;break;case X4:i=this.InterpolantFactoryMethodSmooth;break}if(i===void 0){const l="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(this.createInterpolant===void 0)if(t!==this.DefaultInterpolation)this.setInterpolation(this.DefaultInterpolation);else throw new Error(l);return console.warn("THREE.KeyframeTrack:",l),this}return this.createInterpolant=i,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return w1;case this.InterpolantFactoryMethodLinear:return I0;case this.InterpolantFactoryMethodSmooth:return X4}}getValueSize(){return this.values.length/this.times.length}shift(t){if(t!==0){const i=this.times;for(let l=0,d=i.length;l!==d;++l)i[l]+=t}return this}scale(t){if(t!==1){const i=this.times;for(let l=0,d=i.length;l!==d;++l)i[l]*=t}return this}trim(t,i){const l=this.times,d=l.length;let g=0,_=d-1;for(;g!==d&&l[g]<t;)++g;for(;_!==-1&&l[_]>i;)--_;if(++_,g!==0||_!==d){g>=_&&(_=Math.max(_,1),g=_-1);const b=this.getValueSize();this.times=Vr.arraySlice(l,g,_),this.values=Vr.arraySlice(this.values,g*b,_*b)}return this}validate(){let t=!0;const i=this.getValueSize();i-Math.floor(i)!==0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),t=!1);const l=this.times,d=this.values,g=l.length;g===0&&(console.error("THREE.KeyframeTrack: Track is empty.",this),t=!1);let _=null;for(let b=0;b!==g;b++){const M=l[b];if(typeof M=="number"&&isNaN(M)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,b,M),t=!1;break}if(_!==null&&_>M){console.error("THREE.KeyframeTrack: Out of order keys.",this,b,M,_),t=!1;break}_=M}if(d!==void 0&&Vr.isTypedArray(d))for(let b=0,M=d.length;b!==M;++b){const I=d[b];if(isNaN(I)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,b,I),t=!1;break}}return t}optimize(){const t=Vr.arraySlice(this.times),i=Vr.arraySlice(this.values),l=this.getValueSize(),d=this.getInterpolation()===X4,g=t.length-1;let _=1;for(let b=1;b<g;++b){let M=!1;const I=t[b],F=t[b+1];if(I!==F&&(b!==1||I!==t[0]))if(d)M=!0;else{const j=b*l,B=j-l,K=j+l;for(let te=0;te!==l;++te){const X=i[j+te];if(X!==i[B+te]||X!==i[K+te]){M=!0;break}}}if(M){if(b!==_){t[_]=t[b];const j=b*l,B=_*l;for(let K=0;K!==l;++K)i[B+K]=i[j+K]}++_}}if(g>0){t[_]=t[g];for(let b=g*l,M=_*l,I=0;I!==l;++I)i[M+I]=i[b+I];++_}return _!==t.length?(this.times=Vr.arraySlice(t,0,_),this.values=Vr.arraySlice(i,0,_*l)):(this.times=t,this.values=i),this}clone(){const t=Vr.arraySlice(this.times,0),i=Vr.arraySlice(this.values,0),l=this.constructor,d=new l(this.name,t,i);return d.createInterpolant=this.createInterpolant,d}}Gl.prototype.TimeBufferType=Float32Array;Gl.prototype.ValueBufferType=Float32Array;Gl.prototype.DefaultInterpolation=I0;class F0 extends Gl{}F0.prototype.ValueTypeName="bool";F0.prototype.ValueBufferType=Array;F0.prototype.DefaultInterpolation=w1;F0.prototype.InterpolantFactoryMethodLinear=void 0;F0.prototype.InterpolantFactoryMethodSmooth=void 0;class Bre extends Gl{}Bre.prototype.ValueTypeName="color";class k1 extends Gl{}k1.prototype.ValueTypeName="number";class qbe extends C1{constructor(t,i,l,d){super(t,i,l,d)}interpolate_(t,i,l,d){const g=this.resultBuffer,_=this.sampleValues,b=this.valueSize,M=(l-i)/(d-i);let I=t*b;for(let F=I+b;I!==F;I+=4)Zs.slerpFlat(g,0,_,I-b,_,I,M);return g}}class tp extends Gl{InterpolantFactoryMethodLinear(t){return new qbe(this.times,this.values,this.getValueSize(),t)}}tp.prototype.ValueTypeName="quaternion";tp.prototype.DefaultInterpolation=I0;tp.prototype.InterpolantFactoryMethodSmooth=void 0;class j0 extends Gl{}j0.prototype.ValueTypeName="string";j0.prototype.ValueBufferType=Array;j0.prototype.DefaultInterpolation=w1;j0.prototype.InterpolantFactoryMethodLinear=void 0;j0.prototype.InterpolantFactoryMethodSmooth=void 0;class T1 extends Gl{}T1.prototype.ValueTypeName="vector";class Kbe{constructor(t,i=-1,l,d=gme){this.name=t,this.tracks=l,this.duration=i,this.blendMode=d,this.uuid=$s(),this.duration<0&&this.resetDuration()}static parse(t){const i=[],l=t.tracks,d=1/(t.fps||1);for(let _=0,b=l.length;_!==b;++_)i.push($be(l[_]).scale(d));const g=new this(t.name,t.duration,i,t.blendMode);return g.uuid=t.uuid,g}static toJSON(t){const i=[],l=t.tracks,d={name:t.name,duration:t.duration,tracks:i,uuid:t.uuid,blendMode:t.blendMode};for(let g=0,_=l.length;g!==_;++g)i.push(Gl.toJSON(l[g]));return d}static CreateFromMorphTargetSequence(t,i,l,d){const g=i.length,_=[];for(let b=0;b<g;b++){let M=[],I=[];M.push((b+g-1)%g,b,(b+1)%g),I.push(0,1,0);const F=Vr.getKeyframeOrder(M);M=Vr.sortedArray(M,1,F),I=Vr.sortedArray(I,1,F),!d&&M[0]===0&&(M.push(g),I.push(I[0])),_.push(new k1(".morphTargetInfluences["+i[b].name+"]",M,I).scale(1/l))}return new this(t,-1,_)}static findByName(t,i){let l=t;if(!Array.isArray(t)){const d=t;l=d.geometry&&d.geometry.animations||d.animations}for(let d=0;d<l.length;d++)if(l[d].name===i)return l[d];return null}static CreateClipsFromMorphTargetSequences(t,i,l){const d={},g=/^([\w-]*?)([\d]+)$/;for(let b=0,M=t.length;b<M;b++){const I=t[b],F=I.name.match(g);if(F&&F.length>1){const j=F[1];let B=d[j];B||(d[j]=B=[]),B.push(I)}}const _=[];for(const b in d)_.push(this.CreateFromMorphTargetSequence(b,d[b],i,l));return _}static parseAnimation(t,i){if(!t)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;const l=function(j,B,K,te,X){if(K.length!==0){const O=[],W=[];Vr.flattenJSON(K,O,W,te),O.length!==0&&X.push(new j(B,O,W))}},d=[],g=t.name||"default",_=t.fps||30,b=t.blendMode;let M=t.length||-1;const I=t.hierarchy||[];for(let j=0;j<I.length;j++){const B=I[j].keys;if(!(!B||B.length===0))if(B[0].morphTargets){const K={};let te;for(te=0;te<B.length;te++)if(B[te].morphTargets)for(let X=0;X<B[te].morphTargets.length;X++)K[B[te].morphTargets[X]]=-1;for(const X in K){const O=[],W=[];for(let we=0;we!==B[te].morphTargets.length;++we){const R=B[te];O.push(R.time),W.push(R.morphTarget===X?1:0)}d.push(new k1(".morphTargetInfluence["+X+"]",O,W))}M=K.length*_}else{const K=".bones["+i[j].name+"]";l(T1,K+".position",B,"pos",d),l(tp,K+".quaternion",B,"rot",d),l(T1,K+".scale",B,"scl",d)}}return d.length===0?null:new this(g,M,d,b)}resetDuration(){const t=this.tracks;let i=0;for(let l=0,d=t.length;l!==d;++l){const g=this.tracks[l];i=Math.max(i,g.times[g.times.length-1])}return this.duration=i,this}trim(){for(let t=0;t<this.tracks.length;t++)this.tracks[t].trim(0,this.duration);return this}validate(){let t=!0;for(let i=0;i<this.tracks.length;i++)t=t&&this.tracks[i].validate();return t}optimize(){for(let t=0;t<this.tracks.length;t++)this.tracks[t].optimize();return this}clone(){const t=[];for(let i=0;i<this.tracks.length;i++)t.push(this.tracks[i].clone());return new this.constructor(this.name,this.duration,t,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}}function Xbe(w){switch(w.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return k1;case"vector":case"vector2":case"vector3":case"vector4":return T1;case"color":return Bre;case"quaternion":return tp;case"bool":case"boolean":return F0;case"string":return j0}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+w)}function $be(w){if(w.type===void 0)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const t=Xbe(w.type);if(w.times===void 0){const i=[],l=[];Vr.flattenJSON(w.keys,i,l,"value"),w.times=i,w.values=l}return t.parse!==void 0?t.parse(w):new t(w.name,w.times,w.values,w.interpolation)}const O0={enabled:!1,files:{},add:function(w,t){this.enabled!==!1&&(this.files[w]=t)},get:function(w){if(this.enabled!==!1)return this.files[w]},remove:function(w){delete this.files[w]},clear:function(){this.files={}}};class Zbe{constructor(t,i,l){const d=this;let g=!1,_=0,b=0,M;const I=[];this.onStart=void 0,this.onLoad=t,this.onProgress=i,this.onError=l,this.itemStart=function(F){b++,g===!1&&d.onStart!==void 0&&d.onStart(F,_,b),g=!0},this.itemEnd=function(F){_++,d.onProgress!==void 0&&d.onProgress(F,_,b),_===b&&(g=!1,d.onLoad!==void 0&&d.onLoad())},this.itemError=function(F){d.onError!==void 0&&d.onError(F)},this.resolveURL=function(F){return M?M(F):F},this.setURLModifier=function(F){return M=F,this},this.addHandler=function(F,j){return I.push(F,j),this},this.removeHandler=function(F){const j=I.indexOf(F);return j!==-1&&I.splice(j,2),this},this.getHandler=function(F){for(let j=0,B=I.length;j<B;j+=2){const K=I[j],te=I[j+1];if(K.global&&(K.lastIndex=0),K.test(F))return te}return null}}}const Ybe=new Zbe;class A1{constructor(t){this.manager=t!==void 0?t:Ybe,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(t,i){const l=this;return new Promise(function(d,g){l.load(t,d,i,g)})}parse(){}setCrossOrigin(t){return this.crossOrigin=t,this}setWithCredentials(t){return this.withCredentials=t,this}setPath(t){return this.path=t,this}setResourcePath(t){return this.resourcePath=t,this}setRequestHeader(t){return this.requestHeader=t,this}}const $c={};class Ure extends A1{constructor(t){super(t)}load(t,i,l,d){t===void 0&&(t=""),this.path!==void 0&&(t=this.path+t),t=this.manager.resolveURL(t);const g=O0.get(t);if(g!==void 0)return this.manager.itemStart(t),setTimeout(()=>{i&&i(g),this.manager.itemEnd(t)},0),g;if($c[t]!==void 0){$c[t].push({onLoad:i,onProgress:l,onError:d});return}$c[t]=[],$c[t].push({onLoad:i,onProgress:l,onError:d});const _=new Request(t,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),b=this.mimeType,M=this.responseType;fetch(_).then(I=>{if(I.status===200||I.status===0){if(I.status===0&&console.warn("THREE.FileLoader: HTTP Status 0 received."),typeof ReadableStream=="undefined"||I.body===void 0||I.body.getReader===void 0)return I;const F=$c[t],j=I.body.getReader(),B=I.headers.get("Content-Length"),K=B?parseInt(B):0,te=K!==0;let X=0;const O=new ReadableStream({start(W){we();function we(){j.read().then(({done:R,value:se})=>{if(R)W.close();else{X+=se.byteLength;const me=new ProgressEvent("progress",{lengthComputable:te,loaded:X,total:K});for(let ze=0,ee=F.length;ze<ee;ze++){const fe=F[ze];fe.onProgress&&fe.onProgress(me)}W.enqueue(se),we()}})}}});return new Response(O)}else throw Error(`fetch for "${I.url}" responded with ${I.status}: ${I.statusText}`)}).then(I=>{switch(M){case"arraybuffer":return I.arrayBuffer();case"blob":return I.blob();case"document":return I.text().then(F=>new DOMParser().parseFromString(F,b));case"json":return I.json();default:if(b===void 0)return I.text();{const j=/charset="?([^;"\s]*)"?/i.exec(b),B=j&&j[1]?j[1].toLowerCase():void 0,K=new TextDecoder(B);return I.arrayBuffer().then(te=>K.decode(te))}}}).then(I=>{O0.add(t,I);const F=$c[t];delete $c[t];for(let j=0,B=F.length;j<B;j++){const K=F[j];K.onLoad&&K.onLoad(I)}}).catch(I=>{const F=$c[t];if(F===void 0)throw this.manager.itemError(t),I;delete $c[t];for(let j=0,B=F.length;j<B;j++){const K=F[j];K.onError&&K.onError(I)}this.manager.itemError(t)}).finally(()=>{this.manager.itemEnd(t)}),this.manager.itemStart(t)}setResponseType(t){return this.responseType=t,this}setMimeType(t){return this.mimeType=t,this}}class Jbe extends A1{constructor(t){super(t)}load(t,i,l,d){this.path!==void 0&&(t=this.path+t),t=this.manager.resolveURL(t);const g=this,_=O0.get(t);if(_!==void 0)return g.manager.itemStart(t),setTimeout(function(){i&&i(_),g.manager.itemEnd(t)},0),_;const b=E1("img");function M(){F(),O0.add(t,this),i&&i(this),g.manager.itemEnd(t)}function I(j){F(),d&&d(j),g.manager.itemError(t),g.manager.itemEnd(t)}function F(){b.removeEventListener("load",M,!1),b.removeEventListener("error",I,!1)}return b.addEventListener("load",M,!1),b.addEventListener("error",I,!1),t.slice(0,5)!=="data:"&&this.crossOrigin!==void 0&&(b.crossOrigin=this.crossOrigin),g.manager.itemStart(t),b.src=t,b}}class Qbe extends A1{constructor(t){super(t)}load(t,i,l,d){const g=new Fo,_=new Jbe(this.manager);return _.setCrossOrigin(this.crossOrigin),_.setPath(this.path),_.load(t,function(b){g.image=b,g.needsUpdate=!0,i!==void 0&&i(g)},l,d),g}}class I1 extends yi{constructor(t,i=1){super(),this.isLight=!0,this.type="Light",this.color=new Fn(t),this.intensity=i}dispose(){}copy(t,i){return super.copy(t,i),this.color.copy(t.color),this.intensity=t.intensity,this}toJSON(t){const i=super.toJSON(t);return i.object.color=this.color.getHex(),i.object.intensity=this.intensity,this.groundColor!==void 0&&(i.object.groundColor=this.groundColor.getHex()),this.distance!==void 0&&(i.object.distance=this.distance),this.angle!==void 0&&(i.object.angle=this.angle),this.decay!==void 0&&(i.object.decay=this.decay),this.penumbra!==void 0&&(i.object.penumbra=this.penumbra),this.shadow!==void 0&&(i.object.shadow=this.shadow.toJSON()),i}}const Zne=new cr,Yne=new Ne,Jne=new Ne;class iz{constructor(t){this.camera=t,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new Rn(512,512),this.map=null,this.mapPass=null,this.matrix=new cr,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new $L,this._frameExtents=new Rn(1,1),this._viewportCount=1,this._viewports=[new Er(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(t){const i=this.camera,l=this.matrix;Yne.setFromMatrixPosition(t.matrixWorld),i.position.copy(Yne),Jne.setFromMatrixPosition(t.target.matrixWorld),i.lookAt(Jne),i.updateMatrixWorld(),Zne.multiplyMatrices(i.projectionMatrix,i.matrixWorldInverse),this._frustum.setFromProjectionMatrix(Zne),l.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),l.multiply(i.projectionMatrix),l.multiply(i.matrixWorldInverse)}getViewport(t){return this._viewports[t]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(t){return this.camera=t.camera.clone(),this.bias=t.bias,this.radius=t.radius,this.mapSize.copy(t.mapSize),this}clone(){return new this.constructor().copy(this)}toJSON(){const t={};return this.bias!==0&&(t.bias=this.bias),this.normalBias!==0&&(t.normalBias=this.normalBias),this.radius!==1&&(t.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&&(t.mapSize=this.mapSize.toArray()),t.camera=this.camera.toJSON(!1).object,delete t.camera.matrix,t}}class e_e extends iz{constructor(){super(new zo(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1}updateMatrices(t){const i=this.camera,l=S1*2*t.angle*this.focus,d=this.mapSize.width/this.mapSize.height,g=t.distance||i.far;(l!==i.fov||d!==i.aspect||g!==i.far)&&(i.fov=l,i.aspect=d,i.far=g,i.updateProjectionMatrix()),super.updateMatrices(t)}copy(t){return super.copy(t),this.focus=t.focus,this}}class t_e extends I1{constructor(t,i,l=0,d=Math.PI/3,g=0,_=1){super(t,i),this.isSpotLight=!0,this.type="SpotLight",this.position.copy(yi.DefaultUp),this.updateMatrix(),this.target=new yi,this.distance=l,this.angle=d,this.penumbra=g,this.decay=_,this.shadow=new e_e}get power(){return this.intensity*Math.PI}set power(t){this.intensity=t/Math.PI}dispose(){this.shadow.dispose()}copy(t,i){return super.copy(t,i),this.distance=t.distance,this.angle=t.angle,this.penumbra=t.penumbra,this.decay=t.decay,this.target=t.target.clone(),this.shadow=t.shadow.clone(),this}}const Qne=new cr,f1=new Ne,SL=new Ne;class n_e extends iz{constructor(){super(new zo(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new Rn(4,2),this._viewportCount=6,this._viewports=[new Er(2,1,1,1),new Er(0,1,1,1),new Er(3,1,1,1),new Er(1,1,1,1),new Er(3,0,1,1),new Er(1,0,1,1)],this._cubeDirections=[new Ne(1,0,0),new Ne(-1,0,0),new Ne(0,0,1),new Ne(0,0,-1),new Ne(0,1,0),new Ne(0,-1,0)],this._cubeUps=[new Ne(0,1,0),new Ne(0,1,0),new Ne(0,1,0),new Ne(0,1,0),new Ne(0,0,1),new Ne(0,0,-1)]}updateMatrices(t,i=0){const l=this.camera,d=this.matrix,g=t.distance||l.far;g!==l.far&&(l.far=g,l.updateProjectionMatrix()),f1.setFromMatrixPosition(t.matrixWorld),l.position.copy(f1),SL.copy(l.position),SL.add(this._cubeDirections[i]),l.up.copy(this._cubeUps[i]),l.lookAt(SL),l.updateMatrixWorld(),d.makeTranslation(-f1.x,-f1.y,-f1.z),Qne.multiplyMatrices(l.projectionMatrix,l.matrixWorldInverse),this._frustum.setFromProjectionMatrix(Qne)}}class r_e extends I1{constructor(t,i,l=0,d=1){super(t,i),this.isPointLight=!0,this.type="PointLight",this.distance=l,this.decay=d,this.shadow=new n_e}get power(){return this.intensity*4*Math.PI}set power(t){this.intensity=t/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(t,i){return super.copy(t,i),this.distance=t.distance,this.decay=t.decay,this.shadow=t.shadow.clone(),this}}class i_e extends iz{constructor(){super(new ZL(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}}class Vre extends I1{constructor(t,i){super(t,i),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(yi.DefaultUp),this.updateMatrix(),this.target=new yi,this.shadow=new i_e}dispose(){this.shadow.dispose()}copy(t){return super.copy(t),this.target=t.target.clone(),this.shadow=t.shadow.clone(),this}}class o_e extends I1{constructor(t,i){super(t,i),this.isAmbientLight=!0,this.type="AmbientLight"}}class a_e extends I1{constructor(t,i,l=10,d=10){super(t,i),this.isRectAreaLight=!0,this.type="RectAreaLight",this.width=l,this.height=d}get power(){return this.intensity*this.width*this.height*Math.PI}set power(t){this.intensity=t/(this.width*this.height*Math.PI)}copy(t){return super.copy(t),this.width=t.width,this.height=t.height,this}toJSON(t){const i=super.toJSON(t);return i.object.width=this.width,i.object.height=this.height,i}}class Xh{static decodeText(t){if(typeof TextDecoder!="undefined")return new TextDecoder().decode(t);let i="";for(let l=0,d=t.length;l<d;l++)i+=String.fromCharCode(t[l]);try{return decodeURIComponent(escape(i))}catch{return i}}static extractUrlBase(t){const i=t.lastIndexOf("/");return i===-1?"./":t.slice(0,i+1)}static resolveURL(t,i){return typeof t!="string"||t===""?"":(/^https?:\/\//i.test(i)&&/^\//.test(t)&&(i=i.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(t)||/^data:.*,.*$/i.test(t)||/^blob:.*$/i.test(t)?t:i+t)}}class s_e extends A1{constructor(t){super(t),this.isImageBitmapLoader=!0,typeof createImageBitmap=="undefined"&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),typeof fetch=="undefined"&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"}}setOptions(t){return this.options=t,this}load(t,i,l,d){t===void 0&&(t=""),this.path!==void 0&&(t=this.path+t),t=this.manager.resolveURL(t);const g=this,_=O0.get(t);if(_!==void 0)return g.manager.itemStart(t),setTimeout(function(){i&&i(_),g.manager.itemEnd(t)},0),_;const b={};b.credentials=this.crossOrigin==="anonymous"?"same-origin":"include",b.headers=this.requestHeader,fetch(t,b).then(function(M){return M.blob()}).then(function(M){return createImageBitmap(M,Object.assign(g.options,{colorSpaceConversion:"none"}))}).then(function(M){O0.add(t,M),i&&i(M),g.manager.itemEnd(t)}).catch(function(M){d&&d(M),g.manager.itemError(t),g.manager.itemEnd(t)}),g.manager.itemStart(t)}}const oz="\\[\\]\\.:\\/",l_e=new RegExp("["+oz+"]","g"),az="[^"+oz+"]",c_e="[^"+oz.replace("\\.","")+"]",u_e=/((?:WC+[\/:])*)/.source.replace("WC",az),d_e=/(WCOD+)?/.source.replace("WCOD",c_e),f_e=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",az),h_e=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",az),p_e=new RegExp("^"+u_e+d_e+f_e+h_e+"$"),m_e=["material","materials","bones"];class g_e{constructor(t,i,l){const d=l||_r.parseTrackName(i);this._targetGroup=t,this._bindings=t.subscribe_(i,d)}getValue(t,i){this.bind();const l=this._targetGroup.nCachedObjects_,d=this._bindings[l];d!==void 0&&d.getValue(t,i)}setValue(t,i){const l=this._bindings;for(let d=this._targetGroup.nCachedObjects_,g=l.length;d!==g;++d)l[d].setValue(t,i)}bind(){const t=this._bindings;for(let i=this._targetGroup.nCachedObjects_,l=t.length;i!==l;++i)t[i].bind()}unbind(){const t=this._bindings;for(let i=this._targetGroup.nCachedObjects_,l=t.length;i!==l;++i)t[i].unbind()}}class _r{constructor(t,i,l){this.path=i,this.parsedPath=l||_r.parseTrackName(i),this.node=_r.findNode(t,this.parsedPath.nodeName)||t,this.rootNode=t,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(t,i,l){return t&&t.isAnimationObjectGroup?new _r.Composite(t,i,l):new _r(t,i,l)}static sanitizeNodeName(t){return t.replace(/\s/g,"_").replace(l_e,"")}static parseTrackName(t){const i=p_e.exec(t);if(i===null)throw new Error("PropertyBinding: Cannot parse trackName: "+t);const l={nodeName:i[2],objectName:i[3],objectIndex:i[4],propertyName:i[5],propertyIndex:i[6]},d=l.nodeName&&l.nodeName.lastIndexOf(".");if(d!==void 0&&d!==-1){const g=l.nodeName.substring(d+1);m_e.indexOf(g)!==-1&&(l.nodeName=l.nodeName.substring(0,d),l.objectName=g)}if(l.propertyName===null||l.propertyName.length===0)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+t);return l}static findNode(t,i){if(i===void 0||i===""||i==="."||i===-1||i===t.name||i===t.uuid)return t;if(t.skeleton){const l=t.skeleton.getBoneByName(i);if(l!==void 0)return l}if(t.children){const l=function(g){for(let _=0;_<g.length;_++){const b=g[_];if(b.name===i||b.uuid===i)return b;const M=l(b.children);if(M)return M}return null},d=l(t.children);if(d)return d}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(t,i){t[i]=this.targetObject[this.propertyName]}_getValue_array(t,i){const l=this.resolvedProperty;for(let d=0,g=l.length;d!==g;++d)t[i++]=l[d]}_getValue_arrayElement(t,i){t[i]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(t,i){this.resolvedProperty.toArray(t,i)}_setValue_direct(t,i){this.targetObject[this.propertyName]=t[i]}_setValue_direct_setNeedsUpdate(t,i){this.targetObject[this.propertyName]=t[i],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(t,i){this.targetObject[this.propertyName]=t[i],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(t,i){const l=this.resolvedProperty;for(let d=0,g=l.length;d!==g;++d)l[d]=t[i++]}_setValue_array_setNeedsUpdate(t,i){const l=this.resolvedProperty;for(let d=0,g=l.length;d!==g;++d)l[d]=t[i++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(t,i){const l=this.resolvedProperty;for(let d=0,g=l.length;d!==g;++d)l[d]=t[i++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(t,i){this.resolvedProperty[this.propertyIndex]=t[i]}_setValue_arrayElement_setNeedsUpdate(t,i){this.resolvedProperty[this.propertyIndex]=t[i],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(t,i){this.resolvedProperty[this.propertyIndex]=t[i],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(t,i){this.resolvedProperty.fromArray(t,i)}_setValue_fromArray_setNeedsUpdate(t,i){this.resolvedProperty.fromArray(t,i),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(t,i){this.resolvedProperty.fromArray(t,i),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(t,i){this.bind(),this.getValue(t,i)}_setValue_unbound(t,i){this.bind(),this.setValue(t,i)}bind(){let t=this.node;const i=this.parsedPath,l=i.objectName,d=i.propertyName;let g=i.propertyIndex;if(t||(t=_r.findNode(this.rootNode,i.nodeName)||this.rootNode,this.node=t),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!t){console.error("THREE.PropertyBinding: Trying to update node for track: "+this.path+" but it wasn't found.");return}if(l){let I=i.objectIndex;switch(l){case"materials":if(!t.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!t.material.materials){console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);return}t=t.material.materials;break;case"bones":if(!t.skeleton){console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);return}t=t.skeleton.bones;for(let F=0;F<t.length;F++)if(t[F].name===I){I=F;break}break;default:if(t[l]===void 0){console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);return}t=t[l]}if(I!==void 0){if(t[I]===void 0){console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,t);return}t=t[I]}}const _=t[d];if(_===void 0){const I=i.nodeName;console.error("THREE.PropertyBinding: Trying to update property for track: "+I+"."+d+" but it wasn't found.",t);return}let b=this.Versioning.None;this.targetObject=t,t.needsUpdate!==void 0?b=this.Versioning.NeedsUpdate:t.matrixWorldNeedsUpdate!==void 0&&(b=this.Versioning.MatrixWorldNeedsUpdate);let M=this.BindingType.Direct;if(g!==void 0){if(d==="morphTargetInfluences"){if(!t.geometry){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);return}if(!t.geometry.morphAttributes){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);return}t.morphTargetDictionary[g]!==void 0&&(g=t.morphTargetDictionary[g])}M=this.BindingType.ArrayElement,this.resolvedProperty=_,this.propertyIndex=g}else _.fromArray!==void 0&&_.toArray!==void 0?(M=this.BindingType.HasFromToArray,this.resolvedProperty=_):Array.isArray(_)?(M=this.BindingType.EntireArray,this.resolvedProperty=_):this.propertyName=d;this.getValue=this.GetterByBindingType[M],this.setValue=this.SetterByBindingTypeAndVersioning[M][b]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}_r.Composite=g_e;_r.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3};_r.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2};_r.prototype.GetterByBindingType=[_r.prototype._getValue_direct,_r.prototype._getValue_array,_r.prototype._getValue_arrayElement,_r.prototype._getValue_toArray];_r.prototype.SetterByBindingTypeAndVersioning=[[_r.prototype._setValue_direct,_r.prototype._setValue_direct_setNeedsUpdate,_r.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[_r.prototype._setValue_array,_r.prototype._setValue_array_setNeedsUpdate,_r.prototype._setValue_array_setMatrixWorldNeedsUpdate],[_r.prototype._setValue_arrayElement,_r.prototype._setValue_arrayElement_setNeedsUpdate,_r.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[_r.prototype._setValue_fromArray,_r.prototype._setValue_fromArray_setNeedsUpdate,_r.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];class ere{constructor(t=1,i=0,l=0){return this.radius=t,this.phi=i,this.theta=l,this}set(t,i,l){return this.radius=t,this.phi=i,this.theta=l,this}copy(t){return this.radius=t.radius,this.phi=t.phi,this.theta=t.theta,this}makeSafe(){return this.phi=Math.max(1e-6,Math.min(Math.PI-1e-6,this.phi)),this}setFromVector3(t){return this.setFromCartesianCoords(t.x,t.y,t.z)}setFromCartesianCoords(t,i,l){return this.radius=Math.sqrt(t*t+i*i+l*l),this.radius===0?(this.theta=0,this.phi=0):(this.theta=Math.atan2(t,l),this.phi=Math.acos(go(i/this.radius,-1,1))),this}clone(){return new this.constructor().copy(this)}}typeof __THREE_DEVTOOLS__!="undefined"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:WL}}));typeof window!="undefined"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=WL);const tre={type:"change"},EL={type:"start"},nre={type:"end"};class v_e extends np{constructor(t,i){super(),i===void 0&&console.warn('THREE.OrbitControls: The second parameter "domElement" is now mandatory.'),i===document&&console.error('THREE.OrbitControls: "document" should not be used as the target "domElement". Please use "renderer.domElement" instead.'),this.object=t,this.domElement=i,this.domElement.style.touchAction="none",this.enabled=!0,this.target=new Ne,this.minDistance=0,this.maxDistance=1/0,this.minZoom=0,this.maxZoom=1/0,this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.minAzimuthAngle=-1/0,this.maxAzimuthAngle=1/0,this.enableDamping=!1,this.dampingFactor=.05,this.enableZoom=!0,this.zoomSpeed=1,this.enableRotate=!0,this.rotateSpeed=1,this.enablePan=!0,this.panSpeed=1,this.screenSpacePanning=!0,this.keyPanSpeed=7,this.autoRotate=!1,this.autoRotateSpeed=2,this.keys={LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"},this.mouseButtons={LEFT:i0.ROTATE,MIDDLE:i0.DOLLY,RIGHT:i0.PAN},this.touches={ONE:o0.ROTATE,TWO:o0.DOLLY_PAN},this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this._domElementKeyEvents=null,this.getPolarAngle=function(){return b.phi},this.getAzimuthalAngle=function(){return b.theta},this.getDistance=function(){return this.object.position.distanceTo(this.target)},this.listenToKeyEvents=function(ve){ve.addEventListener("keydown",Zr),this._domElementKeyEvents=ve},this.saveState=function(){l.target0.copy(l.target),l.position0.copy(l.object.position),l.zoom0=l.object.zoom},this.reset=function(){l.target.copy(l.target0),l.object.position.copy(l.position0),l.object.zoom=l.zoom0,l.object.updateProjectionMatrix(),l.dispatchEvent(tre),l.update(),g=d.NONE},this.update=function(){const ve=new Ne,Et=new Zs().setFromUnitVectors(t.up,new Ne(0,1,0)),Ht=Et.clone().invert(),Ut=new Ne,Ie=new Zs,Gt=2*Math.PI;return function(){const fn=l.object.position;ve.copy(fn).sub(l.target),ve.applyQuaternion(Et),b.setFromVector3(ve),l.autoRotate&&g===d.NONE&&Te(ee()),l.enableDamping?(b.theta+=M.theta*l.dampingFactor,b.phi+=M.phi*l.dampingFactor):(b.theta+=M.theta,b.phi+=M.phi);let Kt=l.minAzimuthAngle,tn=l.maxAzimuthAngle;return isFinite(Kt)&&isFinite(tn)&&(Kt<-Math.PI?Kt+=Gt:Kt>Math.PI&&(Kt-=Gt),tn<-Math.PI?tn+=Gt:tn>Math.PI&&(tn-=Gt),Kt<=tn?b.theta=Math.max(Kt,Math.min(tn,b.theta)):b.theta=b.theta>(Kt+tn)/2?Math.max(Kt,b.theta):Math.min(tn,b.theta)),b.phi=Math.max(l.minPolarAngle,Math.min(l.maxPolarAngle,b.phi)),b.makeSafe(),b.radius*=I,b.radius=Math.max(l.minDistance,Math.min(l.maxDistance,b.radius)),l.enableDamping===!0?l.target.addScaledVector(F,l.dampingFactor):l.target.add(F),ve.setFromSpherical(b),ve.applyQuaternion(Ht),fn.copy(l.target).add(ve),l.object.lookAt(l.target),l.enableDamping===!0?(M.theta*=1-l.dampingFactor,M.phi*=1-l.dampingFactor,F.multiplyScalar(1-l.dampingFactor)):(M.set(0,0,0),F.set(0,0,0)),I=1,j||Ut.distanceToSquared(l.object.position)>_||8*(1-Ie.dot(l.object.quaternion))>_?(l.dispatchEvent(tre),Ut.copy(l.object.position),Ie.copy(l.object.quaternion),j=!1,!0):!1}}(),this.dispose=function(){l.domElement.removeEventListener("contextmenu",ut),l.domElement.removeEventListener("pointerdown",Mr),l.domElement.removeEventListener("pointercancel",dr),l.domElement.removeEventListener("wheel",pr),l.domElement.removeEventListener("pointermove",Or),l.domElement.removeEventListener("pointerup",jr),l._domElementKeyEvents!==null&&l._domElementKeyEvents.removeEventListener("keydown",Zr)};const l=this,d={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6};let g=d.NONE;const _=1e-6,b=new ere,M=new ere;let I=1;const F=new Ne;let j=!1;const B=new Rn,K=new Rn,te=new Rn,X=new Rn,O=new Rn,W=new Rn,we=new Rn,R=new Rn,se=new Rn,me=[],ze={};function ee(){return 2*Math.PI/60/60*l.autoRotateSpeed}function fe(){return Math.pow(.95,l.zoomSpeed)}function Te(ve){M.theta-=ve}function Y(ve){M.phi-=ve}const qe=function(){const ve=new Ne;return function(Ht,Ut){ve.setFromMatrixColumn(Ut,0),ve.multiplyScalar(-Ht),F.add(ve)}}(),Tt=function(){const ve=new Ne;return function(Ht,Ut){l.screenSpacePanning===!0?ve.setFromMatrixColumn(Ut,1):(ve.setFromMatrixColumn(Ut,0),ve.crossVectors(l.object.up,ve)),ve.multiplyScalar(Ht),F.add(ve)}}(),xt=function(){const ve=new Ne;return function(Ht,Ut){const Ie=l.domElement;if(l.object.isPerspectiveCamera){const Gt=l.object.position;ve.copy(Gt).sub(l.target);let Bt=ve.length();Bt*=Math.tan(l.object.fov/2*Math.PI/180),qe(2*Ht*Bt/Ie.clientHeight,l.object.matrix),Tt(2*Ut*Bt/Ie.clientHeight,l.object.matrix)}else l.object.isOrthographicCamera?(qe(Ht*(l.object.right-l.object.left)/l.object.zoom/Ie.clientWidth,l.object.matrix),Tt(Ut*(l.object.top-l.object.bottom)/l.object.zoom/Ie.clientHeight,l.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),l.enablePan=!1)}}();function Ke(ve){l.object.isPerspectiveCamera?I/=ve:l.object.isOrthographicCamera?(l.object.zoom=Math.max(l.minZoom,Math.min(l.maxZoom,l.object.zoom*ve)),l.object.updateProjectionMatrix(),j=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),l.enableZoom=!1)}function _e(ve){l.object.isPerspectiveCamera?I*=ve:l.object.isOrthographicCamera?(l.object.zoom=Math.max(l.minZoom,Math.min(l.maxZoom,l.object.zoom/ve)),l.object.updateProjectionMatrix(),j=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),l.enableZoom=!1)}function Qe(ve){B.set(ve.clientX,ve.clientY)}function Ge(ve){we.set(ve.clientX,ve.clientY)}function yt(ve){X.set(ve.clientX,ve.clientY)}function ft(ve){K.set(ve.clientX,ve.clientY),te.subVectors(K,B).multiplyScalar(l.rotateSpeed);const Et=l.domElement;Te(2*Math.PI*te.x/Et.clientHeight),Y(2*Math.PI*te.y/Et.clientHeight),B.copy(K),l.update()}function gt(ve){R.set(ve.clientX,ve.clientY),se.subVectors(R,we),se.y>0?Ke(fe()):se.y<0&&_e(fe()),we.copy(R),l.update()}function zt(ve){O.set(ve.clientX,ve.clientY),W.subVectors(O,X).multiplyScalar(l.panSpeed),xt(W.x,W.y),X.copy(O),l.update()}function kt(ve){ve.deltaY<0?_e(fe()):ve.deltaY>0&&Ke(fe()),l.update()}function Rt(ve){let Et=!1;switch(ve.code){case l.keys.UP:xt(0,l.keyPanSpeed),Et=!0;break;case l.keys.BOTTOM:xt(0,-l.keyPanSpeed),Et=!0;break;case l.keys.LEFT:xt(l.keyPanSpeed,0),Et=!0;break;case l.keys.RIGHT:xt(-l.keyPanSpeed,0),Et=!0;break}Et&&(ve.preventDefault(),l.update())}function Yt(){if(me.length===1)B.set(me[0].pageX,me[0].pageY);else{const ve=.5*(me[0].pageX+me[1].pageX),Et=.5*(me[0].pageY+me[1].pageY);B.set(ve,Et)}}function Jt(){if(me.length===1)X.set(me[0].pageX,me[0].pageY);else{const ve=.5*(me[0].pageX+me[1].pageX),Et=.5*(me[0].pageY+me[1].pageY);X.set(ve,Et)}}function pt(){const ve=me[0].pageX-me[1].pageX,Et=me[0].pageY-me[1].pageY,Ht=Math.sqrt(ve*ve+Et*Et);we.set(0,Ht)}function Yn(){l.enableZoom&&pt(),l.enablePan&&Jt()}function An(){l.enableZoom&&pt(),l.enableRotate&&Yt()}function xn(ve){if(me.length==1)K.set(ve.pageX,ve.pageY);else{const Ht=vn(ve),Ut=.5*(ve.pageX+Ht.x),Ie=.5*(ve.pageY+Ht.y);K.set(Ut,Ie)}te.subVectors(K,B).multiplyScalar(l.rotateSpeed);const Et=l.domElement;Te(2*Math.PI*te.x/Et.clientHeight),Y(2*Math.PI*te.y/Et.clientHeight),B.copy(K)}function Xt(ve){if(me.length===1)O.set(ve.pageX,ve.pageY);else{const Et=vn(ve),Ht=.5*(ve.pageX+Et.x),Ut=.5*(ve.pageY+Et.y);O.set(Ht,Ut)}W.subVectors(O,X).multiplyScalar(l.panSpeed),xt(W.x,W.y),X.copy(O)}function Tn(ve){const Et=vn(ve),Ht=ve.pageX-Et.x,Ut=ve.pageY-Et.y,Ie=Math.sqrt(Ht*Ht+Ut*Ut);R.set(0,Ie),se.set(0,Math.pow(R.y/we.y,l.zoomSpeed)),Ke(se.y),we.copy(R)}function Ln(ve){l.enableZoom&&Tn(ve),l.enablePan&&Xt(ve)}function hn(ve){l.enableZoom&&Tn(ve),l.enableRotate&&xn(ve)}function Mr(ve){l.enabled!==!1&&(me.length===0&&(l.domElement.setPointerCapture(ve.pointerId),l.domElement.addEventListener("pointermove",Or),l.domElement.addEventListener("pointerup",jr)),Nt(ve),ve.pointerType==="touch"?Se(ve):Wn(ve))}function Or(ve){l.enabled!==!1&&(ve.pointerType==="touch"?he(ve):qn(ve))}function jr(ve){jt(ve),me.length===0&&(l.domElement.releasePointerCapture(ve.pointerId),l.domElement.removeEventListener("pointermove",Or),l.domElement.removeEventListener("pointerup",jr)),l.dispatchEvent(nre),g=d.NONE}function dr(ve){jt(ve)}function Wn(ve){let Et;switch(ve.button){case 0:Et=l.mouseButtons.LEFT;break;case 1:Et=l.mouseButtons.MIDDLE;break;case 2:Et=l.mouseButtons.RIGHT;break;default:Et=-1}switch(Et){case i0.DOLLY:if(l.enableZoom===!1)return;Ge(ve),g=d.DOLLY;break;case i0.ROTATE:if(ve.ctrlKey||ve.metaKey||ve.shiftKey){if(l.enablePan===!1)return;yt(ve),g=d.PAN}else{if(l.enableRotate===!1)return;Qe(ve),g=d.ROTATE}break;case i0.PAN:if(ve.ctrlKey||ve.metaKey||ve.shiftKey){if(l.enableRotate===!1)return;Qe(ve),g=d.ROTATE}else{if(l.enablePan===!1)return;yt(ve),g=d.PAN}break;default:g=d.NONE}g!==d.NONE&&l.dispatchEvent(EL)}function qn(ve){if(l.enabled!==!1)switch(g){case d.ROTATE:if(l.enableRotate===!1)return;ft(ve);break;case d.DOLLY:if(l.enableZoom===!1)return;gt(ve);break;case d.PAN:if(l.enablePan===!1)return;zt(ve);break}}function pr(ve){l.enabled===!1||l.enableZoom===!1||g!==d.NONE||(ve.preventDefault(),l.dispatchEvent(EL),kt(ve),l.dispatchEvent(nre))}function Zr(ve){l.enabled===!1||l.enablePan===!1||Rt(ve)}function Se(ve){switch(qt(ve),me.length){case 1:switch(l.touches.ONE){case o0.ROTATE:if(l.enableRotate===!1)return;Yt(),g=d.TOUCH_ROTATE;break;case o0.PAN:if(l.enablePan===!1)return;Jt(),g=d.TOUCH_PAN;break;default:g=d.NONE}break;case 2:switch(l.touches.TWO){case o0.DOLLY_PAN:if(l.enableZoom===!1&&l.enablePan===!1)return;Yn(),g=d.TOUCH_DOLLY_PAN;break;case o0.DOLLY_ROTATE:if(l.enableZoom===!1&&l.enableRotate===!1)return;An(),g=d.TOUCH_DOLLY_ROTATE;break;default:g=d.NONE}break;default:g=d.NONE}g!==d.NONE&&l.dispatchEvent(EL)}function he(ve){switch(qt(ve),g){case d.TOUCH_ROTATE:if(l.enableRotate===!1)return;xn(ve),l.update();break;case d.TOUCH_PAN:if(l.enablePan===!1)return;Xt(ve),l.update();break;case d.TOUCH_DOLLY_PAN:if(l.enableZoom===!1&&l.enablePan===!1)return;Ln(ve),l.update();break;case d.TOUCH_DOLLY_ROTATE:if(l.enableZoom===!1&&l.enableRotate===!1)return;hn(ve),l.update();break;default:g=d.NONE}}function ut(ve){l.enabled!==!1&&ve.preventDefault()}function Nt(ve){me.push(ve)}function jt(ve){delete ze[ve.pointerId];for(let Et=0;Et<me.length;Et++)if(me[Et].pointerId==ve.pointerId){me.splice(Et,1);return}}function qt(ve){let Et=ze[ve.pointerId];Et===void 0&&(Et=new Rn,ze[ve.pointerId]=Et),Et.set(ve.pageX,ve.pageY)}function vn(ve){const Et=ve.pointerId===me[0].pointerId?me[1]:me[0];return ze[Et.pointerId]}l.domElement.addEventListener("contextmenu",ut),l.domElement.addEventListener("pointerdown",Mr),l.domElement.addEventListener("pointercancel",dr),l.domElement.addEventListener("wheel",pr,{passive:!1}),this.update()}}class y_e extends A1{constructor(t){super(t),this.dracoLoader=null,this.ktx2Loader=null,this.meshoptDecoder=null,this.pluginCallbacks=[],this.register(function(i){return new S_e(i)}),this.register(function(i){return new A_e(i)}),this.register(function(i){return new I_e(i)}),this.register(function(i){return new k_e(i)}),this.register(function(i){return new T_e(i)}),this.register(function(i){return new M_e(i)}),this.register(function(i){return new P_e(i)}),this.register(function(i){return new w_e(i)}),this.register(function(i){return new C_e(i)}),this.register(function(i){return new E_e(i)}),this.register(function(i){return new __e(i)}),this.register(function(i){return new D_e(i)})}load(t,i,l,d){const g=this;let _;this.resourcePath!==""?_=this.resourcePath:this.path!==""?_=this.path:_=Xh.extractUrlBase(t),this.manager.itemStart(t);const b=function(I){d?d(I):console.error(I),g.manager.itemError(t),g.manager.itemEnd(t)},M=new Ure(this.manager);M.setPath(this.path),M.setResponseType("arraybuffer"),M.setRequestHeader(this.requestHeader),M.setWithCredentials(this.withCredentials),M.load(t,function(I){try{g.parse(I,_,function(F){i(F),g.manager.itemEnd(t)},b)}catch(F){b(F)}},l,b)}setDRACOLoader(t){return this.dracoLoader=t,this}setDDSLoader(){throw new Error('THREE.GLTFLoader: "MSFT_texture_dds" no longer supported. Please update to "KHR_texture_basisu".')}setKTX2Loader(t){return this.ktx2Loader=t,this}setMeshoptDecoder(t){return this.meshoptDecoder=t,this}register(t){return this.pluginCallbacks.indexOf(t)===-1&&this.pluginCallbacks.push(t),this}unregister(t){return this.pluginCallbacks.indexOf(t)!==-1&&this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(t),1),this}parse(t,i,l,d){let g;const _={},b={};if(typeof t=="string")g=t;else if(Xh.decodeText(new Uint8Array(t,0,4))===Hre){try{_[Zn.KHR_BINARY_GLTF]=new O_e(t)}catch(j){d&&d(j);return}g=_[Zn.KHR_BINARY_GLTF].content}else g=Xh.decodeText(new Uint8Array(t));const M=JSON.parse(g);if(M.asset===void 0||M.asset.version[0]<2){d&&d(new Error("THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported."));return}const I=new q_e(M,{path:i||this.resourcePath||"",crossOrigin:this.crossOrigin,requestHeader:this.requestHeader,manager:this.manager,ktx2Loader:this.ktx2Loader,meshoptDecoder:this.meshoptDecoder});I.fileLoader.setRequestHeader(this.requestHeader);for(let F=0;F<this.pluginCallbacks.length;F++){const j=this.pluginCallbacks[F](I);b[j.name]=j,_[j.name]=!0}if(M.extensionsUsed)for(let F=0;F<M.extensionsUsed.length;++F){const j=M.extensionsUsed[F],B=M.extensionsRequired||[];switch(j){case Zn.KHR_MATERIALS_UNLIT:_[j]=new x_e;break;case Zn.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS:_[j]=new z_e;break;case Zn.KHR_DRACO_MESH_COMPRESSION:_[j]=new R_e(M,this.dracoLoader);break;case Zn.KHR_TEXTURE_TRANSFORM:_[j]=new L_e;break;case Zn.KHR_MESH_QUANTIZATION:_[j]=new N_e;break;default:B.indexOf(j)>=0&&b[j]===void 0&&console.warn('THREE.GLTFLoader: Unknown extension "'+j+'".')}}I.setExtensions(_),I.setPlugins(b),I.parse(l,d)}parseAsync(t,i){const l=this;return new Promise(function(d,g){l.parse(t,i,d,g)})}}function b_e(){let w={};return{get:function(t){return w[t]},add:function(t,i){w[t]=i},remove:function(t){delete w[t]},removeAll:function(){w={}}}}const Zn={KHR_BINARY_GLTF:"KHR_binary_glTF",KHR_DRACO_MESH_COMPRESSION:"KHR_draco_mesh_compression",KHR_LIGHTS_PUNCTUAL:"KHR_lights_punctual",KHR_MATERIALS_CLEARCOAT:"KHR_materials_clearcoat",KHR_MATERIALS_IOR:"KHR_materials_ior",KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS:"KHR_materials_pbrSpecularGlossiness",KHR_MATERIALS_SHEEN:"KHR_materials_sheen",KHR_MATERIALS_SPECULAR:"KHR_materials_specular",KHR_MATERIALS_TRANSMISSION:"KHR_materials_transmission",KHR_MATERIALS_IRIDESCENCE:"KHR_materials_iridescence",KHR_MATERIALS_UNLIT:"KHR_materials_unlit",KHR_MATERIALS_VOLUME:"KHR_materials_volume",KHR_TEXTURE_BASISU:"KHR_texture_basisu",KHR_TEXTURE_TRANSFORM:"KHR_texture_transform",KHR_MESH_QUANTIZATION:"KHR_mesh_quantization",KHR_MATERIALS_EMISSIVE_STRENGTH:"KHR_materials_emissive_strength",EXT_TEXTURE_WEBP:"EXT_texture_webp",EXT_MESHOPT_COMPRESSION:"EXT_meshopt_compression"};class __e{constructor(t){this.parser=t,this.name=Zn.KHR_LIGHTS_PUNCTUAL,this.cache={refs:{},uses:{}}}_markDefs(){const t=this.parser,i=this.parser.json.nodes||[];for(let l=0,d=i.length;l<d;l++){const g=i[l];g.extensions&&g.extensions[this.name]&&g.extensions[this.name].light!==void 0&&t._addNodeRef(this.cache,g.extensions[this.name].light)}}_loadLight(t){const i=this.parser,l="light:"+t;let d=i.cache.get(l);if(d)return d;const g=i.json,M=((g.extensions&&g.extensions[this.name]||{}).lights||[])[t];let I;const F=new Fn(16777215);M.color!==void 0&&F.fromArray(M.color);const j=M.range!==void 0?M.range:0;switch(M.type){case"directional":I=new Vre(F),I.target.position.set(0,0,-1),I.add(I.target);break;case"point":I=new r_e(F),I.distance=j;break;case"spot":I=new t_e(F),I.distance=j,M.spot=M.spot||{},M.spot.innerConeAngle=M.spot.innerConeAngle!==void 0?M.spot.innerConeAngle:0,M.spot.outerConeAngle=M.spot.outerConeAngle!==void 0?M.spot.outerConeAngle:Math.PI/4,I.angle=M.spot.outerConeAngle,I.penumbra=1-M.spot.innerConeAngle/M.spot.outerConeAngle,I.target.position.set(0,0,-1),I.add(I.target);break;default:throw new Error("THREE.GLTFLoader: Unexpected light type: "+M.type)}return I.position.set(0,0,0),I.decay=2,M.intensity!==void 0&&(I.intensity=M.intensity),I.name=i.createUniqueName(M.name||"light_"+t),d=Promise.resolve(I),i.cache.add(l,d),d}createNodeAttachment(t){const i=this,l=this.parser,g=l.json.nodes[t],b=(g.extensions&&g.extensions[this.name]||{}).light;return b===void 0?null:this._loadLight(b).then(function(M){return l._getNodeRef(i.cache,b,M)})}}class x_e{constructor(){this.name=Zn.KHR_MATERIALS_UNLIT}getMaterialType(){return Wh}extendParams(t,i,l){const d=[];t.color=new Fn(1,1,1),t.opacity=1;const g=i.pbrMetallicRoughness;if(g){if(Array.isArray(g.baseColorFactor)){const _=g.baseColorFactor;t.color.fromArray(_),t.opacity=_[3]}g.baseColorTexture!==void 0&&d.push(l.assignTexture(t,"map",g.baseColorTexture,br))}return Promise.all(d)}}class w_e{constructor(t){this.parser=t,this.name=Zn.KHR_MATERIALS_EMISSIVE_STRENGTH}extendMaterialParams(t,i){const d=this.parser.json.materials[t];if(!d.extensions||!d.extensions[this.name])return Promise.resolve();const g=d.extensions[this.name].emissiveStrength;return g!==void 0&&(i.emissiveIntensity=g),Promise.resolve()}}class S_e{constructor(t){this.parser=t,this.name=Zn.KHR_MATERIALS_CLEARCOAT}getMaterialType(t){const l=this.parser.json.materials[t];return!l.extensions||!l.extensions[this.name]?null:ip}extendMaterialParams(t,i){const l=this.parser,d=l.json.materials[t];if(!d.extensions||!d.extensions[this.name])return Promise.resolve();const g=[],_=d.extensions[this.name];if(_.clearcoatFactor!==void 0&&(i.clearcoat=_.clearcoatFactor),_.clearcoatTexture!==void 0&&g.push(l.assignTexture(i,"clearcoatMap",_.clearcoatTexture)),_.clearcoatRoughnessFactor!==void 0&&(i.clearcoatRoughness=_.clearcoatRoughnessFactor),_.clearcoatRoughnessTexture!==void 0&&g.push(l.assignTexture(i,"clearcoatRoughnessMap",_.clearcoatRoughnessTexture)),_.clearcoatNormalTexture!==void 0&&(g.push(l.assignTexture(i,"clearcoatNormalMap",_.clearcoatNormalTexture)),_.clearcoatNormalTexture.scale!==void 0)){const b=_.clearcoatNormalTexture.scale;i.clearcoatNormalScale=new Rn(b,b)}return Promise.all(g)}}class E_e{constructor(t){this.parser=t,this.name=Zn.KHR_MATERIALS_IRIDESCENCE}getMaterialType(t){const l=this.parser.json.materials[t];return!l.extensions||!l.extensions[this.name]?null:ip}extendMaterialParams(t,i){const l=this.parser,d=l.json.materials[t];if(!d.extensions||!d.extensions[this.name])return Promise.resolve();const g=[],_=d.extensions[this.name];return _.iridescenceFactor!==void 0&&(i.iridescence=_.iridescenceFactor),_.iridescenceTexture!==void 0&&g.push(l.assignTexture(i,"iridescenceMap",_.iridescenceTexture)),_.iridescenceIor!==void 0&&(i.iridescenceIOR=_.iridescenceIor),i.iridescenceThicknessRange===void 0&&(i.iridescenceThicknessRange=[100,400]),_.iridescenceThicknessMinimum!==void 0&&(i.iridescenceThicknessRange[0]=_.iridescenceThicknessMinimum),_.iridescenceThicknessMaximum!==void 0&&(i.iridescenceThicknessRange[1]=_.iridescenceThicknessMaximum),_.iridescenceThicknessTexture!==void 0&&g.push(l.assignTexture(i,"iridescenceThicknessMap",_.iridescenceThicknessTexture)),Promise.all(g)}}class k_e{constructor(t){this.parser=t,this.name=Zn.KHR_MATERIALS_SHEEN}getMaterialType(t){const l=this.parser.json.materials[t];return!l.extensions||!l.extensions[this.name]?null:ip}extendMaterialParams(t,i){const l=this.parser,d=l.json.materials[t];if(!d.extensions||!d.extensions[this.name])return Promise.resolve();const g=[];i.sheenColor=new Fn(0,0,0),i.sheenRoughness=0,i.sheen=1;const _=d.extensions[this.name];return _.sheenColorFactor!==void 0&&i.sheenColor.fromArray(_.sheenColorFactor),_.sheenRoughnessFactor!==void 0&&(i.sheenRoughness=_.sheenRoughnessFactor),_.sheenColorTexture!==void 0&&g.push(l.assignTexture(i,"sheenColorMap",_.sheenColorTexture,br)),_.sheenRoughnessTexture!==void 0&&g.push(l.assignTexture(i,"sheenRoughnessMap",_.sheenRoughnessTexture)),Promise.all(g)}}class T_e{constructor(t){this.parser=t,this.name=Zn.KHR_MATERIALS_TRANSMISSION}getMaterialType(t){const l=this.parser.json.materials[t];return!l.extensions||!l.extensions[this.name]?null:ip}extendMaterialParams(t,i){const l=this.parser,d=l.json.materials[t];if(!d.extensions||!d.extensions[this.name])return Promise.resolve();const g=[],_=d.extensions[this.name];return _.transmissionFactor!==void 0&&(i.transmission=_.transmissionFactor),_.transmissionTexture!==void 0&&g.push(l.assignTexture(i,"transmissionMap",_.transmissionTexture)),Promise.all(g)}}class M_e{constructor(t){this.parser=t,this.name=Zn.KHR_MATERIALS_VOLUME}getMaterialType(t){const l=this.parser.json.materials[t];return!l.extensions||!l.extensions[this.name]?null:ip}extendMaterialParams(t,i){const l=this.parser,d=l.json.materials[t];if(!d.extensions||!d.extensions[this.name])return Promise.resolve();const g=[],_=d.extensions[this.name];i.thickness=_.thicknessFactor!==void 0?_.thicknessFactor:0,_.thicknessTexture!==void 0&&g.push(l.assignTexture(i,"thicknessMap",_.thicknessTexture)),i.attenuationDistance=_.attenuationDistance||0;const b=_.attenuationColor||[1,1,1];return i.attenuationColor=new Fn(b[0],b[1],b[2]),Promise.all(g)}}class P_e{constructor(t){this.parser=t,this.name=Zn.KHR_MATERIALS_IOR}getMaterialType(t){const l=this.parser.json.materials[t];return!l.extensions||!l.extensions[this.name]?null:ip}extendMaterialParams(t,i){const d=this.parser.json.materials[t];if(!d.extensions||!d.extensions[this.name])return Promise.resolve();const g=d.extensions[this.name];return i.ior=g.ior!==void 0?g.ior:1.5,Promise.resolve()}}class C_e{constructor(t){this.parser=t,this.name=Zn.KHR_MATERIALS_SPECULAR}getMaterialType(t){const l=this.parser.json.materials[t];return!l.extensions||!l.extensions[this.name]?null:ip}extendMaterialParams(t,i){const l=this.parser,d=l.json.materials[t];if(!d.extensions||!d.extensions[this.name])return Promise.resolve();const g=[],_=d.extensions[this.name];i.specularIntensity=_.specularFactor!==void 0?_.specularFactor:1,_.specularTexture!==void 0&&g.push(l.assignTexture(i,"specularIntensityMap",_.specularTexture));const b=_.specularColorFactor||[1,1,1];return i.specularColor=new Fn(b[0],b[1],b[2]),_.specularColorTexture!==void 0&&g.push(l.assignTexture(i,"specularColorMap",_.specularColorTexture,br)),Promise.all(g)}}class A_e{constructor(t){this.parser=t,this.name=Zn.KHR_TEXTURE_BASISU}loadTexture(t){const i=this.parser,l=i.json,d=l.textures[t];if(!d.extensions||!d.extensions[this.name])return null;const g=d.extensions[this.name],_=i.options.ktx2Loader;if(!_){if(l.extensionsRequired&&l.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setKTX2Loader must be called before loading KTX2 textures");return null}return i.loadTextureImage(t,g.source,_)}}class I_e{constructor(t){this.parser=t,this.name=Zn.EXT_TEXTURE_WEBP,this.isSupported=null}loadTexture(t){const i=this.name,l=this.parser,d=l.json,g=d.textures[t];if(!g.extensions||!g.extensions[i])return null;const _=g.extensions[i],b=d.images[_.source];let M=l.textureLoader;if(b.uri){const I=l.options.manager.getHandler(b.uri);I!==null&&(M=I)}return this.detectSupport().then(function(I){if(I)return l.loadTextureImage(t,_.source,M);if(d.extensionsRequired&&d.extensionsRequired.indexOf(i)>=0)throw new Error("THREE.GLTFLoader: WebP required by asset but unsupported.");return l.loadTexture(t)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(t){const i=new Image;i.src="data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA",i.onload=i.onerror=function(){t(i.height===1)}})),this.isSupported}}class D_e{constructor(t){this.name=Zn.EXT_MESHOPT_COMPRESSION,this.parser=t}loadBufferView(t){const i=this.parser.json,l=i.bufferViews[t];if(l.extensions&&l.extensions[this.name]){const d=l.extensions[this.name],g=this.parser.getDependency("buffer",d.buffer),_=this.parser.options.meshoptDecoder;if(!_||!_.supported){if(i.extensionsRequired&&i.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setMeshoptDecoder must be called before loading compressed files");return null}return Promise.all([g,_.ready]).then(function(b){const M=d.byteOffset||0,I=d.byteLength||0,F=d.count,j=d.byteStride,B=new ArrayBuffer(F*j),K=new Uint8Array(b[0],M,I);return _.decodeGltfBuffer(new Uint8Array(B),F,j,K,d.mode,d.filter),B})}else return null}}const Hre="glTF",h1=12,rre={JSON:1313821514,BIN:5130562};class O_e{constructor(t){this.name=Zn.KHR_BINARY_GLTF,this.content=null,this.body=null;const i=new DataView(t,0,h1);if(this.header={magic:Xh.decodeText(new Uint8Array(t.slice(0,4))),version:i.getUint32(4,!0),length:i.getUint32(8,!0)},this.header.magic!==Hre)throw new Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");if(this.header.version<2)throw new Error("THREE.GLTFLoader: Legacy binary file detected.");const l=this.header.length-h1,d=new DataView(t,h1);let g=0;for(;g<l;){const _=d.getUint32(g,!0);g+=4;const b=d.getUint32(g,!0);if(g+=4,b===rre.JSON){const M=new Uint8Array(t,h1+g,_);this.content=Xh.decodeText(M)}else if(b===rre.BIN){const M=h1+g;this.body=t.slice(M,M+_)}g+=_}if(this.content===null)throw new Error("THREE.GLTFLoader: JSON content not found.")}}class R_e{constructor(t,i){if(!i)throw new Error("THREE.GLTFLoader: No DRACOLoader instance provided.");this.name=Zn.KHR_DRACO_MESH_COMPRESSION,this.json=t,this.dracoLoader=i,this.dracoLoader.preload()}decodePrimitive(t,i){const l=this.json,d=this.dracoLoader,g=t.extensions[this.name].bufferView,_=t.extensions[this.name].attributes,b={},M={},I={};for(const F in _){const j=NL[F]||F.toLowerCase();b[j]=_[F]}for(const F in t.attributes){const j=NL[F]||F.toLowerCase();if(_[F]!==void 0){const B=l.accessors[t.attributes[F]],K=M1[B.componentType];I[j]=K,M[j]=B.normalized===!0}}return i.getDependency("bufferView",g).then(function(F){return new Promise(function(j){d.decodeDracoFile(F,function(B){for(const K in B.attributes){const te=B.attributes[K],X=M[K];X!==void 0&&(te.normalized=X)}j(B)},b,I)})})}}class L_e{constructor(){this.name=Zn.KHR_TEXTURE_TRANSFORM}extendTexture(t,i){return i.texCoord!==void 0&&console.warn('THREE.GLTFLoader: Custom UV sets in "'+this.name+'" extension not yet supported.'),i.offset===void 0&&i.rotation===void 0&&i.scale===void 0||(t=t.clone(),i.offset!==void 0&&t.offset.fromArray(i.offset),i.rotation!==void 0&&(t.rotation=i.rotation),i.scale!==void 0&&t.repeat.fromArray(i.scale),t.needsUpdate=!0),t}}class zL extends Kd{constructor(t){super(),this.isGLTFSpecularGlossinessMaterial=!0;const i=["#ifdef USE_SPECULARMAP","	uniform sampler2D specularMap;","#endif"].join(`
`),l=["#ifdef USE_GLOSSINESSMAP","	uniform sampler2D glossinessMap;","#endif"].join(`
`),d=["vec3 specularFactor = specular;","#ifdef USE_SPECULARMAP","	vec4 texelSpecular = texture2D( specularMap, vUv );","	// reads channel RGB, compatible with a glTF Specular-Glossiness (RGBA) texture","	specularFactor *= texelSpecular.rgb;","#endif"].join(`
`),g=["float glossinessFactor = glossiness;","#ifdef USE_GLOSSINESSMAP","	vec4 texelGlossiness = texture2D( glossinessMap, vUv );","	// reads channel A, compatible with a glTF Specular-Glossiness (RGBA) texture","	glossinessFactor *= texelGlossiness.a;","#endif"].join(`
`),_=["PhysicalMaterial material;","material.diffuseColor = diffuseColor.rgb * ( 1. - max( specularFactor.r, max( specularFactor.g, specularFactor.b ) ) );","vec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );","float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );","material.roughness = max( 1.0 - glossinessFactor, 0.0525 ); // 0.0525 corresponds to the base mip of a 256 cubemap.","material.roughness += geometryRoughness;","material.roughness = min( material.roughness, 1.0 );","material.specularColor = specularFactor;"].join(`
`),b={specular:{value:new Fn().setHex(16777215)},glossiness:{value:1},specularMap:{value:null},glossinessMap:{value:null}};this._extraUniforms=b,this.onBeforeCompile=function(M){for(const I in b)M.uniforms[I]=b[I];M.fragmentShader=M.fragmentShader.replace("uniform float roughness;","uniform vec3 specular;").replace("uniform float metalness;","uniform float glossiness;").replace("#include <roughnessmap_pars_fragment>",i).replace("#include <metalnessmap_pars_fragment>",l).replace("#include <roughnessmap_fragment>",d).replace("#include <metalnessmap_fragment>",g).replace("#include <lights_physical_fragment>",_)},Object.defineProperties(this,{specular:{get:function(){return b.specular.value},set:function(M){b.specular.value=M}},specularMap:{get:function(){return b.specularMap.value},set:function(M){b.specularMap.value=M,M?this.defines.USE_SPECULARMAP="":delete this.defines.USE_SPECULARMAP}},glossiness:{get:function(){return b.glossiness.value},set:function(M){b.glossiness.value=M}},glossinessMap:{get:function(){return b.glossinessMap.value},set:function(M){b.glossinessMap.value=M,M?(this.defines.USE_GLOSSINESSMAP="",this.defines.USE_UV=""):(delete this.defines.USE_GLOSSINESSMAP,delete this.defines.USE_UV)}}}),delete this.metalness,delete this.roughness,delete this.metalnessMap,delete this.roughnessMap,this.setValues(t)}copy(t){return super.copy(t),this.specularMap=t.specularMap,this.specular.copy(t.specular),this.glossinessMap=t.glossinessMap,this.glossiness=t.glossiness,delete this.metalness,delete this.roughness,delete this.metalnessMap,delete this.roughnessMap,this}}class z_e{constructor(){this.name=Zn.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS,this.specularGlossinessParams=["color","map","lightMap","lightMapIntensity","aoMap","aoMapIntensity","emissive","emissiveIntensity","emissiveMap","bumpMap","bumpScale","normalMap","normalMapType","displacementMap","displacementScale","displacementBias","specularMap","specular","glossinessMap","glossiness","alphaMap","envMap","envMapIntensity"]}getMaterialType(){return zL}extendParams(t,i,l){const d=i.extensions[this.name];t.color=new Fn(1,1,1),t.opacity=1;const g=[];if(Array.isArray(d.diffuseFactor)){const _=d.diffuseFactor;t.color.fromArray(_),t.opacity=_[3]}if(d.diffuseTexture!==void 0&&g.push(l.assignTexture(t,"map",d.diffuseTexture,br)),t.emissive=new Fn(0,0,0),t.glossiness=d.glossinessFactor!==void 0?d.glossinessFactor:1,t.specular=new Fn(1,1,1),Array.isArray(d.specularFactor)&&t.specular.fromArray(d.specularFactor),d.specularGlossinessTexture!==void 0){const _=d.specularGlossinessTexture;g.push(l.assignTexture(t,"glossinessMap",_)),g.push(l.assignTexture(t,"specularMap",_,br))}return Promise.all(g)}createMaterial(t){const i=new zL(t);return i.fog=!0,i.color=t.color,i.map=t.map===void 0?null:t.map,i.lightMap=null,i.lightMapIntensity=1,i.aoMap=t.aoMap===void 0?null:t.aoMap,i.aoMapIntensity=1,i.emissive=t.emissive,i.emissiveIntensity=t.emissiveIntensity===void 0?1:t.emissiveIntensity,i.emissiveMap=t.emissiveMap===void 0?null:t.emissiveMap,i.bumpMap=t.bumpMap===void 0?null:t.bumpMap,i.bumpScale=1,i.normalMap=t.normalMap===void 0?null:t.normalMap,i.normalMapType=qL,t.normalScale&&(i.normalScale=t.normalScale),i.displacementMap=null,i.displacementScale=1,i.displacementBias=0,i.specularMap=t.specularMap===void 0?null:t.specularMap,i.specular=t.specular,i.glossinessMap=t.glossinessMap===void 0?null:t.glossinessMap,i.glossiness=t.glossiness,i.alphaMap=null,i.envMap=t.envMap===void 0?null:t.envMap,i.envMapIntensity=1,i}}class N_e{constructor(){this.name=Zn.KHR_MESH_QUANTIZATION}}class Gre extends C1{constructor(t,i,l,d){super(t,i,l,d)}copySampleValue_(t){const i=this.resultBuffer,l=this.sampleValues,d=this.valueSize,g=t*d*3+d;for(let _=0;_!==d;_++)i[_]=l[g+_];return i}interpolate_(t,i,l,d){const g=this.resultBuffer,_=this.sampleValues,b=this.valueSize,M=b*2,I=b*3,F=d-i,j=(l-i)/F,B=j*j,K=B*j,te=t*I,X=te-I,O=-2*K+3*B,W=K-B,we=1-O,R=W-B+j;for(let se=0;se!==b;se++){const me=_[X+se+b],ze=_[X+se+M]*F,ee=_[te+se+b],fe=_[te+se]*F;g[se]=we*me+R*ze+O*ee+W*fe}return g}}const F_e=new Zs;class j_e extends Gre{interpolate_(t,i,l,d){const g=super.interpolate_(t,i,l,d);return F_e.fromArray(g).normalize().toArray(g),g}}const Zc={FLOAT:5126,FLOAT_MAT3:35675,FLOAT_MAT4:35676,FLOAT_VEC2:35664,FLOAT_VEC3:35665,FLOAT_VEC4:35666,LINEAR:9729,REPEAT:10497,SAMPLER_2D:35678,POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6,UNSIGNED_BYTE:5121,UNSIGNED_SHORT:5123},M1={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},ire={9728:Qi,9729:ea,9984:CL,9985:gre,9986:AL,9987:R0},ore={33071:Ja,33648:sP,10497:C0},are={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},NL={POSITION:"position",NORMAL:"normal",TANGENT:"tangent",TEXCOORD_0:"uv",TEXCOORD_1:"uv2",COLOR_0:"color",WEIGHTS_0:"skinWeight",JOINTS_0:"skinIndex"},Hd={scale:"scale",translation:"position",rotation:"quaternion",weights:"morphTargetInfluences"},B_e={CUBICSPLINE:void 0,LINEAR:I0,STEP:w1},kL={OPAQUE:"OPAQUE",MASK:"MASK",BLEND:"BLEND"};function U_e(w){return w.DefaultMaterial===void 0&&(w.DefaultMaterial=new Kd({color:16777215,emissive:0,metalness:1,roughness:1,transparent:!1,depthTest:!0,side:T0})),w.DefaultMaterial}function p1(w,t,i){for(const l in i.extensions)w[l]===void 0&&(t.userData.gltfExtensions=t.userData.gltfExtensions||{},t.userData.gltfExtensions[l]=i.extensions[l])}function Uh(w,t){t.extras!==void 0&&(typeof t.extras=="object"?Object.assign(w.userData,t.extras):console.warn("THREE.GLTFLoader: Ignoring primitive type .extras, "+t.extras))}function V_e(w,t,i){let l=!1,d=!1,g=!1;for(let I=0,F=t.length;I<F;I++){const j=t[I];if(j.POSITION!==void 0&&(l=!0),j.NORMAL!==void 0&&(d=!0),j.COLOR_0!==void 0&&(g=!0),l&&d&&g)break}if(!l&&!d&&!g)return Promise.resolve(w);const _=[],b=[],M=[];for(let I=0,F=t.length;I<F;I++){const j=t[I];if(l){const B=j.POSITION!==void 0?i.getDependency("accessor",j.POSITION):w.attributes.position;_.push(B)}if(d){const B=j.NORMAL!==void 0?i.getDependency("accessor",j.NORMAL):w.attributes.normal;b.push(B)}if(g){const B=j.COLOR_0!==void 0?i.getDependency("accessor",j.COLOR_0):w.attributes.color;M.push(B)}}return Promise.all([Promise.all(_),Promise.all(b),Promise.all(M)]).then(function(I){const F=I[0],j=I[1],B=I[2];return l&&(w.morphAttributes.position=F),d&&(w.morphAttributes.normal=j),g&&(w.morphAttributes.color=B),w.morphTargetsRelative=!0,w})}function H_e(w,t){if(w.updateMorphTargets(),t.weights!==void 0)for(let i=0,l=t.weights.length;i<l;i++)w.morphTargetInfluences[i]=t.weights[i];if(t.extras&&Array.isArray(t.extras.targetNames)){const i=t.extras.targetNames;if(w.morphTargetInfluences.length===i.length){w.morphTargetDictionary={};for(let l=0,d=i.length;l<d;l++)w.morphTargetDictionary[i[l]]=l}else console.warn("THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.")}}function G_e(w){const t=w.extensions&&w.extensions[Zn.KHR_DRACO_MESH_COMPRESSION];let i;return t?i="draco:"+t.bufferView+":"+t.indices+":"+sre(t.attributes):i=w.indices+":"+sre(w.attributes)+":"+w.mode,i}function sre(w){let t="";const i=Object.keys(w).sort();for(let l=0,d=i.length;l<d;l++)t+=i[l]+":"+w[i[l]]+";";return t}function FL(w){switch(w){case Int8Array:return 1/127;case Uint8Array:return 1/255;case Int16Array:return 1/32767;case Uint16Array:return 1/65535;default:throw new Error("THREE.GLTFLoader: Unsupported normalized accessor component type.")}}function W_e(w){return w.search(/\.jpe?g($|\?)/i)>0||w.search(/^data\:image\/jpeg/)===0?"image/jpeg":w.search(/\.webp($|\?)/i)>0||w.search(/^data\:image\/webp/)===0?"image/webp":"image/png"}class q_e{constructor(t={},i={}){this.json=t,this.extensions={},this.plugins={},this.options=i,this.cache=new b_e,this.associations=new Map,this.primitiveCache={},this.meshCache={refs:{},uses:{}},this.cameraCache={refs:{},uses:{}},this.lightCache={refs:{},uses:{}},this.sourceCache={},this.textureCache={},this.nodeNamesUsed={};const l=/^((?!chrome|android).)*safari/i.test(navigator.userAgent)===!0,d=navigator.userAgent.indexOf("Firefox")>-1,g=d?navigator.userAgent.match(/Firefox\/([0-9]+)\./)[1]:-1;typeof createImageBitmap=="undefined"||l||d&&g<98?this.textureLoader=new Qbe(this.options.manager):this.textureLoader=new s_e(this.options.manager),this.textureLoader.setCrossOrigin(this.options.crossOrigin),this.textureLoader.setRequestHeader(this.options.requestHeader),this.fileLoader=new Ure(this.options.manager),this.fileLoader.setResponseType("arraybuffer"),this.options.crossOrigin==="use-credentials"&&this.fileLoader.setWithCredentials(!0)}setExtensions(t){this.extensions=t}setPlugins(t){this.plugins=t}parse(t,i){const l=this,d=this.json,g=this.extensions;this.cache.removeAll(),this._invokeAll(function(_){return _._markDefs&&_._markDefs()}),Promise.all(this._invokeAll(function(_){return _.beforeRoot&&_.beforeRoot()})).then(function(){return Promise.all([l.getDependencies("scene"),l.getDependencies("animation"),l.getDependencies("camera")])}).then(function(_){const b={scene:_[0][d.scene||0],scenes:_[0],animations:_[1],cameras:_[2],asset:d.asset,parser:l,userData:{}};p1(g,b,d),Uh(b,d),Promise.all(l._invokeAll(function(M){return M.afterRoot&&M.afterRoot(b)})).then(function(){t(b)})}).catch(i)}_markDefs(){const t=this.json.nodes||[],i=this.json.skins||[],l=this.json.meshes||[];for(let d=0,g=i.length;d<g;d++){const _=i[d].joints;for(let b=0,M=_.length;b<M;b++)t[_[b]].isBone=!0}for(let d=0,g=t.length;d<g;d++){const _=t[d];_.mesh!==void 0&&(this._addNodeRef(this.meshCache,_.mesh),_.skin!==void 0&&(l[_.mesh].isSkinnedMesh=!0)),_.camera!==void 0&&this._addNodeRef(this.cameraCache,_.camera)}}_addNodeRef(t,i){i!==void 0&&(t.refs[i]===void 0&&(t.refs[i]=t.uses[i]=0),t.refs[i]++)}_getNodeRef(t,i,l){if(t.refs[i]<=1)return l;const d=l.clone(),g=(_,b)=>{const M=this.associations.get(_);M!=null&&this.associations.set(b,M);for(const[I,F]of _.children.entries())g(F,b.children[I])};return g(l,d),d.name+="_instance_"+t.uses[i]++,d}_invokeOne(t){const i=Object.values(this.plugins);i.push(this);for(let l=0;l<i.length;l++){const d=t(i[l]);if(d)return d}return null}_invokeAll(t){const i=Object.values(this.plugins);i.unshift(this);const l=[];for(let d=0;d<i.length;d++){const g=t(i[d]);g&&l.push(g)}return l}getDependency(t,i){const l=t+":"+i;let d=this.cache.get(l);if(!d){switch(t){case"scene":d=this.loadScene(i);break;case"node":d=this.loadNode(i);break;case"mesh":d=this._invokeOne(function(g){return g.loadMesh&&g.loadMesh(i)});break;case"accessor":d=this.loadAccessor(i);break;case"bufferView":d=this._invokeOne(function(g){return g.loadBufferView&&g.loadBufferView(i)});break;case"buffer":d=this.loadBuffer(i);break;case"material":d=this._invokeOne(function(g){return g.loadMaterial&&g.loadMaterial(i)});break;case"texture":d=this._invokeOne(function(g){return g.loadTexture&&g.loadTexture(i)});break;case"skin":d=this.loadSkin(i);break;case"animation":d=this._invokeOne(function(g){return g.loadAnimation&&g.loadAnimation(i)});break;case"camera":d=this.loadCamera(i);break;default:throw new Error("Unknown type: "+t)}this.cache.add(l,d)}return d}getDependencies(t){let i=this.cache.get(t);if(!i){const l=this,d=this.json[t+(t==="mesh"?"es":"s")]||[];i=Promise.all(d.map(function(g,_){return l.getDependency(t,_)})),this.cache.add(t,i)}return i}loadBuffer(t){const i=this.json.buffers[t],l=this.fileLoader;if(i.type&&i.type!=="arraybuffer")throw new Error("THREE.GLTFLoader: "+i.type+" buffer type is not supported.");if(i.uri===void 0&&t===0)return Promise.resolve(this.extensions[Zn.KHR_BINARY_GLTF].body);const d=this.options;return new Promise(function(g,_){l.load(Xh.resolveURL(i.uri,d.path),g,void 0,function(){_(new Error('THREE.GLTFLoader: Failed to load buffer "'+i.uri+'".'))})})}loadBufferView(t){const i=this.json.bufferViews[t];return this.getDependency("buffer",i.buffer).then(function(l){const d=i.byteLength||0,g=i.byteOffset||0;return l.slice(g,g+d)})}loadAccessor(t){const i=this,l=this.json,d=this.json.accessors[t];if(d.bufferView===void 0&&d.sparse===void 0)return Promise.resolve(null);const g=[];return d.bufferView!==void 0?g.push(this.getDependency("bufferView",d.bufferView)):g.push(null),d.sparse!==void 0&&(g.push(this.getDependency("bufferView",d.sparse.indices.bufferView)),g.push(this.getDependency("bufferView",d.sparse.values.bufferView))),Promise.all(g).then(function(_){const b=_[0],M=are[d.type],I=M1[d.componentType],F=I.BYTES_PER_ELEMENT,j=F*M,B=d.byteOffset||0,K=d.bufferView!==void 0?l.bufferViews[d.bufferView].byteStride:void 0,te=d.normalized===!0;let X,O;if(K&&K!==j){const W=Math.floor(B/K),we="InterleavedBuffer:"+d.bufferView+":"+d.componentType+":"+W+":"+d.count;let R=i.cache.get(we);R||(X=new I(b,W*K,d.count*K/F),R=new Lbe(X,K/F),i.cache.add(we,R)),O=new JL(R,M,B%K/F,te)}else b===null?X=new I(d.count*M):X=new I(b,B,d.count*M),O=new xa(X,M,te);if(d.sparse!==void 0){const W=are.SCALAR,we=M1[d.sparse.indices.componentType],R=d.sparse.indices.byteOffset||0,se=d.sparse.values.byteOffset||0,me=new we(_[1],R,d.sparse.count*W),ze=new I(_[2],se,d.sparse.count*M);b!==null&&(O=new xa(O.array.slice(),O.itemSize,O.normalized));for(let ee=0,fe=me.length;ee<fe;ee++){const Te=me[ee];if(O.setX(Te,ze[ee*M]),M>=2&&O.setY(Te,ze[ee*M+1]),M>=3&&O.setZ(Te,ze[ee*M+2]),M>=4&&O.setW(Te,ze[ee*M+3]),M>=5)throw new Error("THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.")}}return O})}loadTexture(t){const i=this.json,l=this.options,g=i.textures[t].source,_=i.images[g];let b=this.textureLoader;if(_.uri){const M=l.manager.getHandler(_.uri);M!==null&&(b=M)}return this.loadTextureImage(t,g,b)}loadTextureImage(t,i,l){const d=this,g=this.json,_=g.textures[t],b=g.images[i],M=(b.uri||b.bufferView)+":"+_.sampler;if(this.textureCache[M])return this.textureCache[M];const I=this.loadImageSource(i,l).then(function(F){F.flipY=!1,_.name&&(F.name=_.name);const B=(g.samplers||{})[_.sampler]||{};return F.magFilter=ire[B.magFilter]||ea,F.minFilter=ire[B.minFilter]||R0,F.wrapS=ore[B.wrapS]||C0,F.wrapT=ore[B.wrapT]||C0,d.associations.set(F,{textures:t}),F}).catch(function(){return null});return this.textureCache[M]=I,I}loadImageSource(t,i){const l=this,d=this.json,g=this.options;if(this.sourceCache[t]!==void 0)return this.sourceCache[t].then(j=>j.clone());const _=d.images[t],b=self.URL||self.webkitURL;let M=_.uri||"",I=!1;if(_.bufferView!==void 0)M=l.getDependency("bufferView",_.bufferView).then(function(j){I=!0;const B=new Blob([j],{type:_.mimeType});return M=b.createObjectURL(B),M});else if(_.uri===void 0)throw new Error("THREE.GLTFLoader: Image "+t+" is missing URI and bufferView");const F=Promise.resolve(M).then(function(j){return new Promise(function(B,K){let te=B;i.isImageBitmapLoader===!0&&(te=function(X){const O=new Fo(X);O.needsUpdate=!0,B(O)}),i.load(Xh.resolveURL(j,g.path),te,void 0,K)})}).then(function(j){return I===!0&&b.revokeObjectURL(M),j.userData.mimeType=_.mimeType||W_e(_.uri),j}).catch(function(j){throw console.error("THREE.GLTFLoader: Couldn't load texture",M),j});return this.sourceCache[t]=F,F}assignTexture(t,i,l,d){const g=this;return this.getDependency("texture",l.index).then(function(_){if(l.texCoord!==void 0&&l.texCoord!=0&&!(i==="aoMap"&&l.texCoord==1)&&console.warn("THREE.GLTFLoader: Custom UV set "+l.texCoord+" for texture "+i+" not yet supported."),g.extensions[Zn.KHR_TEXTURE_TRANSFORM]){const b=l.extensions!==void 0?l.extensions[Zn.KHR_TEXTURE_TRANSFORM]:void 0;if(b){const M=g.associations.get(_);_=g.extensions[Zn.KHR_TEXTURE_TRANSFORM].extendTexture(_,b),g.associations.set(_,M)}}return d!==void 0&&(_.encoding=d),t[i]=_,_})}assignFinalMaterial(t){const i=t.geometry;let l=t.material;const d=i.attributes.tangent===void 0,g=i.attributes.color!==void 0,_=i.attributes.normal===void 0;if(t.isPoints){const b="PointsMaterial:"+l.uuid;let M=this.cache.get(b);M||(M=new jre,Vl.prototype.copy.call(M,l),M.color.copy(l.color),M.map=l.map,M.sizeAttenuation=!1,this.cache.add(b,M)),l=M}else if(t.isLine){const b="LineBasicMaterial:"+l.uuid;let M=this.cache.get(b);M||(M=new Fre,Vl.prototype.copy.call(M,l),M.color.copy(l.color),this.cache.add(b,M)),l=M}if(d||g||_){let b="ClonedMaterial:"+l.uuid+":";l.isGLTFSpecularGlossinessMaterial&&(b+="specular-glossiness:"),d&&(b+="derivative-tangents:"),g&&(b+="vertex-colors:"),_&&(b+="flat-shading:");let M=this.cache.get(b);M||(M=l.clone(),g&&(M.vertexColors=!0),_&&(M.flatShading=!0),d&&(M.normalScale&&(M.normalScale.y*=-1),M.clearcoatNormalScale&&(M.clearcoatNormalScale.y*=-1)),this.cache.add(b,M),this.associations.set(M,this.associations.get(l))),l=M}l.aoMap&&i.attributes.uv2===void 0&&i.attributes.uv!==void 0&&i.setAttribute("uv2",i.attributes.uv),t.material=l}getMaterialType(){return Kd}loadMaterial(t){const i=this,l=this.json,d=this.extensions,g=l.materials[t];let _;const b={},M=g.extensions||{},I=[];if(M[Zn.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS]){const j=d[Zn.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS];_=j.getMaterialType(),I.push(j.extendParams(b,g,i))}else if(M[Zn.KHR_MATERIALS_UNLIT]){const j=d[Zn.KHR_MATERIALS_UNLIT];_=j.getMaterialType(),I.push(j.extendParams(b,g,i))}else{const j=g.pbrMetallicRoughness||{};if(b.color=new Fn(1,1,1),b.opacity=1,Array.isArray(j.baseColorFactor)){const B=j.baseColorFactor;b.color.fromArray(B),b.opacity=B[3]}j.baseColorTexture!==void 0&&I.push(i.assignTexture(b,"map",j.baseColorTexture,br)),b.metalness=j.metallicFactor!==void 0?j.metallicFactor:1,b.roughness=j.roughnessFactor!==void 0?j.roughnessFactor:1,j.metallicRoughnessTexture!==void 0&&(I.push(i.assignTexture(b,"metalnessMap",j.metallicRoughnessTexture)),I.push(i.assignTexture(b,"roughnessMap",j.metallicRoughnessTexture))),_=this._invokeOne(function(B){return B.getMaterialType&&B.getMaterialType(t)}),I.push(Promise.all(this._invokeAll(function(B){return B.extendMaterialParams&&B.extendMaterialParams(t,b)})))}g.doubleSided===!0&&(b.side=Zh);const F=g.alphaMode||kL.OPAQUE;if(F===kL.BLEND?(b.transparent=!0,b.depthWrite=!1):(b.transparent=!1,F===kL.MASK&&(b.alphaTest=g.alphaCutoff!==void 0?g.alphaCutoff:.5)),g.normalTexture!==void 0&&_!==Wh&&(I.push(i.assignTexture(b,"normalMap",g.normalTexture)),b.normalScale=new Rn(1,1),g.normalTexture.scale!==void 0)){const j=g.normalTexture.scale;b.normalScale.set(j,j)}return g.occlusionTexture!==void 0&&_!==Wh&&(I.push(i.assignTexture(b,"aoMap",g.occlusionTexture)),g.occlusionTexture.strength!==void 0&&(b.aoMapIntensity=g.occlusionTexture.strength)),g.emissiveFactor!==void 0&&_!==Wh&&(b.emissive=new Fn().fromArray(g.emissiveFactor)),g.emissiveTexture!==void 0&&_!==Wh&&I.push(i.assignTexture(b,"emissiveMap",g.emissiveTexture,br)),Promise.all(I).then(function(){let j;return _===zL?j=d[Zn.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS].createMaterial(b):j=new _(b),g.name&&(j.name=g.name),Uh(j,g),i.associations.set(j,{materials:t}),g.extensions&&p1(d,j,g),j})}createUniqueName(t){const i=_r.sanitizeNodeName(t||"");let l=i;for(let d=1;this.nodeNamesUsed[l];++d)l=i+"_"+d;return this.nodeNamesUsed[l]=!0,l}loadGeometries(t){const i=this,l=this.extensions,d=this.primitiveCache;function g(b){return l[Zn.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(b,i).then(function(M){return lre(M,b,i)})}const _=[];for(let b=0,M=t.length;b<M;b++){const I=t[b],F=G_e(I),j=d[F];if(j)_.push(j.promise);else{let B;I.extensions&&I.extensions[Zn.KHR_DRACO_MESH_COMPRESSION]?B=g(I):B=lre(new es,I,i),d[F]={primitive:I,promise:B},_.push(B)}}return Promise.all(_)}loadMesh(t){const i=this,l=this.json,d=this.extensions,g=l.meshes[t],_=g.primitives,b=[];for(let M=0,I=_.length;M<I;M++){const F=_[M].material===void 0?U_e(this.cache):this.getDependency("material",_[M].material);b.push(F)}return b.push(i.loadGeometries(_)),Promise.all(b).then(function(M){const I=M.slice(0,M.length-1),F=M[M.length-1],j=[];for(let K=0,te=F.length;K<te;K++){const X=F[K],O=_[K];let W;const we=I[K];if(O.mode===Zc.TRIANGLES||O.mode===Zc.TRIANGLE_STRIP||O.mode===Zc.TRIANGLE_FAN||O.mode===void 0)W=g.isSkinnedMesh===!0?new Nbe(X,we):new vo(X,we),W.isSkinnedMesh===!0&&!W.geometry.attributes.skinWeight.normalized&&W.normalizeSkinWeights(),O.mode===Zc.TRIANGLE_STRIP?W.geometry=cre(W.geometry,yme):O.mode===Zc.TRIANGLE_FAN&&(W.geometry=cre(W.geometry,yre));else if(O.mode===Zc.LINES)W=new Bbe(X,we);else if(O.mode===Zc.LINE_STRIP)W=new ez(X,we);else if(O.mode===Zc.LINE_LOOP)W=new Ube(X,we);else if(O.mode===Zc.POINTS)W=new Vbe(X,we);else throw new Error("THREE.GLTFLoader: Primitive mode unsupported: "+O.mode);Object.keys(W.geometry.morphAttributes).length>0&&H_e(W,g),W.name=i.createUniqueName(g.name||"mesh_"+t),Uh(W,g),O.extensions&&p1(d,W,O),i.assignFinalMaterial(W),j.push(W)}for(let K=0,te=j.length;K<te;K++)i.associations.set(j[K],{meshes:t,primitives:K});if(j.length===1)return j[0];const B=new Wd;i.associations.set(B,{meshes:t});for(let K=0,te=j.length;K<te;K++)B.add(j[K]);return B})}loadCamera(t){let i;const l=this.json.cameras[t],d=l[l.type];if(!d){console.warn("THREE.GLTFLoader: Missing camera parameters.");return}return l.type==="perspective"?i=new zo(Fme.radToDeg(d.yfov),d.aspectRatio||1,d.znear||1,d.zfar||2e6):l.type==="orthographic"&&(i=new ZL(-d.xmag,d.xmag,d.ymag,-d.ymag,d.znear,d.zfar)),l.name&&(i.name=this.createUniqueName(l.name)),Uh(i,l),Promise.resolve(i)}loadSkin(t){const i=this.json.skins[t],l={joints:i.joints};return i.inverseBindMatrices===void 0?Promise.resolve(l):this.getDependency("accessor",i.inverseBindMatrices).then(function(d){return l.inverseBindMatrices=d,l})}loadAnimation(t){const l=this.json.animations[t],d=[],g=[],_=[],b=[],M=[];for(let I=0,F=l.channels.length;I<F;I++){const j=l.channels[I],B=l.samplers[j.sampler],K=j.target,te=K.node!==void 0?K.node:K.id,X=l.parameters!==void 0?l.parameters[B.input]:B.input,O=l.parameters!==void 0?l.parameters[B.output]:B.output;d.push(this.getDependency("node",te)),g.push(this.getDependency("accessor",X)),_.push(this.getDependency("accessor",O)),b.push(B),M.push(K)}return Promise.all([Promise.all(d),Promise.all(g),Promise.all(_),Promise.all(b),Promise.all(M)]).then(function(I){const F=I[0],j=I[1],B=I[2],K=I[3],te=I[4],X=[];for(let W=0,we=F.length;W<we;W++){const R=F[W],se=j[W],me=B[W],ze=K[W],ee=te[W];if(R===void 0)continue;R.updateMatrix(),R.matrixAutoUpdate=!0;let fe;switch(Hd[ee.path]){case Hd.weights:fe=k1;break;case Hd.rotation:fe=tp;break;case Hd.position:case Hd.scale:default:fe=T1;break}const Te=R.name?R.name:R.uuid,Y=ze.interpolation!==void 0?B_e[ze.interpolation]:I0,qe=[];Hd[ee.path]===Hd.weights?R.traverse(function(xt){xt.morphTargetInfluences&&qe.push(xt.name?xt.name:xt.uuid)}):qe.push(Te);let Tt=me.array;if(me.normalized){const xt=FL(Tt.constructor),Ke=new Float32Array(Tt.length);for(let _e=0,Qe=Tt.length;_e<Qe;_e++)Ke[_e]=Tt[_e]*xt;Tt=Ke}for(let xt=0,Ke=qe.length;xt<Ke;xt++){const _e=new fe(qe[xt]+"."+Hd[ee.path],se.array,Tt,Y);ze.interpolation==="CUBICSPLINE"&&(_e.createInterpolant=function(Ge){const yt=this instanceof tp?j_e:Gre;return new yt(this.times,this.values,this.getValueSize()/3,Ge)},_e.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline=!0),X.push(_e)}}const O=l.name?l.name:"animation_"+t;return new Kbe(O,void 0,X)})}createNodeMesh(t){const i=this.json,l=this,d=i.nodes[t];return d.mesh===void 0?null:l.getDependency("mesh",d.mesh).then(function(g){const _=l._getNodeRef(l.meshCache,d.mesh,g);return d.weights!==void 0&&_.traverse(function(b){if(!!b.isMesh)for(let M=0,I=d.weights.length;M<I;M++)b.morphTargetInfluences[M]=d.weights[M]}),_})}loadNode(t){const i=this.json,l=this.extensions,d=this,g=i.nodes[t],_=g.name?d.createUniqueName(g.name):"";return function(){const b=[],M=d._invokeOne(function(I){return I.createNodeMesh&&I.createNodeMesh(t)});return M&&b.push(M),g.camera!==void 0&&b.push(d.getDependency("camera",g.camera).then(function(I){return d._getNodeRef(d.cameraCache,g.camera,I)})),d._invokeAll(function(I){return I.createNodeAttachment&&I.createNodeAttachment(t)}).forEach(function(I){b.push(I)}),Promise.all(b)}().then(function(b){let M;if(g.isBone===!0?M=new Nre:b.length>1?M=new Wd:b.length===1?M=b[0]:M=new yi,M!==b[0])for(let I=0,F=b.length;I<F;I++)M.add(b[I]);if(g.name&&(M.userData.name=g.name,M.name=_),Uh(M,g),g.extensions&&p1(l,M,g),g.matrix!==void 0){const I=new cr;I.fromArray(g.matrix),M.applyMatrix4(I)}else g.translation!==void 0&&M.position.fromArray(g.translation),g.rotation!==void 0&&M.quaternion.fromArray(g.rotation),g.scale!==void 0&&M.scale.fromArray(g.scale);return d.associations.has(M)||d.associations.set(M,{}),d.associations.get(M).nodes=t,M})}loadScene(t){const i=this.json,l=this.extensions,d=this.json.scenes[t],g=this,_=new Wd;d.name&&(_.name=g.createUniqueName(d.name)),Uh(_,d),d.extensions&&p1(l,_,d);const b=d.nodes||[],M=[];for(let I=0,F=b.length;I<F;I++)M.push(Wre(b[I],_,i,g));return Promise.all(M).then(function(){const I=F=>{const j=new Map;for(const[B,K]of g.associations)(B instanceof Vl||B instanceof Fo)&&j.set(B,K);return F.traverse(B=>{const K=g.associations.get(B);K!=null&&j.set(B,K)}),j};return g.associations=I(_),_})}}function Wre(w,t,i,l){const d=i.nodes[w];return l.getDependency("node",w).then(function(g){if(d.skin===void 0)return g;let _;return l.getDependency("skin",d.skin).then(function(b){_=b;const M=[];for(let I=0,F=_.joints.length;I<F;I++)M.push(l.getDependency("node",_.joints[I]));return Promise.all(M)}).then(function(b){return g.traverse(function(M){if(!M.isMesh)return;const I=[],F=[];for(let j=0,B=b.length;j<B;j++){const K=b[j];if(K){I.push(K);const te=new cr;_.inverseBindMatrices!==void 0&&te.fromArray(_.inverseBindMatrices.array,j*16),F.push(te)}else console.warn('THREE.GLTFLoader: Joint "%s" could not be found.',_.joints[j])}M.bind(new QL(I,F),M.matrixWorld)}),g})}).then(function(g){t.add(g);const _=[];if(d.children){const b=d.children;for(let M=0,I=b.length;M<I;M++){const F=b[M];_.push(Wre(F,g,i,l))}}return Promise.all(_)})}function K_e(w,t,i){const l=t.attributes,d=new rp;if(l.POSITION!==void 0){const b=i.json.accessors[l.POSITION],M=b.min,I=b.max;if(M!==void 0&&I!==void 0){if(d.set(new Ne(M[0],M[1],M[2]),new Ne(I[0],I[1],I[2])),b.normalized){const F=FL(M1[b.componentType]);d.min.multiplyScalar(F),d.max.multiplyScalar(F)}}else{console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.");return}}else return;const g=t.targets;if(g!==void 0){const b=new Ne,M=new Ne;for(let I=0,F=g.length;I<F;I++){const j=g[I];if(j.POSITION!==void 0){const B=i.json.accessors[j.POSITION],K=B.min,te=B.max;if(K!==void 0&&te!==void 0){if(M.setX(Math.max(Math.abs(K[0]),Math.abs(te[0]))),M.setY(Math.max(Math.abs(K[1]),Math.abs(te[1]))),M.setZ(Math.max(Math.abs(K[2]),Math.abs(te[2]))),B.normalized){const X=FL(M1[B.componentType]);M.multiplyScalar(X)}b.max(M)}else console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.")}}d.expandByVector(b)}w.boundingBox=d;const _=new L0;d.getCenter(_.center),_.radius=d.min.distanceTo(d.max)/2,w.boundingSphere=_}function lre(w,t,i){const l=t.attributes,d=[];function g(_,b){return i.getDependency("accessor",_).then(function(M){w.setAttribute(b,M)})}for(const _ in l){const b=NL[_]||_.toLowerCase();b in w.attributes||d.push(g(l[_],b))}if(t.indices!==void 0&&!w.index){const _=i.getDependency("accessor",t.indices).then(function(b){w.setIndex(b)});d.push(_)}return Uh(w,t),K_e(w,t,i),Promise.all(d).then(function(){return t.targets!==void 0?V_e(w,t.targets,i):w})}function cre(w,t){let i=w.getIndex();if(i===null){const _=[],b=w.getAttribute("position");if(b!==void 0){for(let M=0;M<b.count;M++)_.push(M);w.setIndex(_),i=w.getIndex()}else return console.error("THREE.GLTFLoader.toTrianglesDrawMode(): Undefined position attribute. Processing not possible."),w}const l=i.count-2,d=[];if(t===yre)for(let _=1;_<=l;_++)d.push(i.getX(0)),d.push(i.getX(_)),d.push(i.getX(_+1));else for(let _=0;_<l;_++)_%2===0?(d.push(i.getX(_)),d.push(i.getX(_+1)),d.push(i.getX(_+2))):(d.push(i.getX(_+2)),d.push(i.getX(_+1)),d.push(i.getX(_)));d.length/3!==l&&console.error("THREE.GLTFLoader.toTrianglesDrawMode(): Unable to generate correct amount of triangles.");const g=w.clone();return g.setIndex(d),g}var $r=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{};function X_e(w){return w&&w.__esModule&&Object.prototype.hasOwnProperty.call(w,"default")?w.default:w}function rP(w){throw new Error('Could not dynamically require "'+w+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var jL={exports:{}},Mt={};(function(w){var t=Object.defineProperty,i=Object.defineProperties,l=Object.getOwnPropertyDescriptors,d=Object.getOwnPropertySymbols,g=Object.prototype.hasOwnProperty,_=Object.prototype.propertyIsEnumerable,b=(Z,pe,Re)=>pe in Z?t(Z,pe,{enumerable:!0,configurable:!0,writable:!0,value:Re}):Z[pe]=Re,M=(Z,pe)=>{for(var Re in pe||(pe={}))g.call(pe,Re)&&b(Z,Re,pe[Re]);if(d)for(var Re of d(pe))_.call(pe,Re)&&b(Z,Re,pe[Re]);return Z},I=(Z,pe)=>i(Z,l(pe)),F=Z=>t(Z,"__esModule",{value:!0}),j=(Z,pe)=>{F(Z);for(var Re in pe)t(Z,Re,{get:pe[Re],enumerable:!0})};j(w,{Atom:()=>zp,PointerProxy:()=>vu,Ticker:()=>jp,getPointerParts:()=>Kl,isPointer:()=>Ta,isPrism:()=>$l,iterateAndCountTicks:()=>af,iterateOver:()=>Bp,pointer:()=>ef,pointerToPrism:()=>gu,prism:()=>Pa,val:()=>of});var B=Array.isArray,K=B,te=typeof $r=="object"&&$r&&$r.Object===Object&&$r,X=te,O=typeof self=="object"&&self&&self.Object===Object&&self,W=X||O||Function("return this")(),we=W,R=we.Symbol,se=R,me=Object.prototype,ze=me.hasOwnProperty,ee=me.toString,fe=se?se.toStringTag:void 0;function Te(Z){var pe=ze.call(Z,fe),Re=Z[fe];try{Z[fe]=void 0;var lt=!0}catch{}var yn=ee.call(Z);return lt&&(pe?Z[fe]=Re:delete Z[fe]),yn}var Y=Te,qe=Object.prototype,Tt=qe.toString;function xt(Z){return Tt.call(Z)}var Ke=xt,_e="[object Null]",Qe="[object Undefined]",Ge=se?se.toStringTag:void 0;function yt(Z){return Z==null?Z===void 0?Qe:_e:Ge&&Ge in Object(Z)?Y(Z):Ke(Z)}var ft=yt;function gt(Z){return Z!=null&&typeof Z=="object"}var zt=gt,kt="[object Symbol]";function Rt(Z){return typeof Z=="symbol"||zt(Z)&&ft(Z)==kt}var Yt=Rt,Jt=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,pt=/^\w*$/;function Yn(Z,pe){if(K(Z))return!1;var Re=typeof Z;return Re=="number"||Re=="symbol"||Re=="boolean"||Z==null||Yt(Z)?!0:pt.test(Z)||!Jt.test(Z)||pe!=null&&Z in Object(pe)}var An=Yn;function xn(Z){var pe=typeof Z;return Z!=null&&(pe=="object"||pe=="function")}var Xt=xn,Tn="[object AsyncFunction]",Ln="[object Function]",hn="[object GeneratorFunction]",Mr="[object Proxy]";function Or(Z){if(!Xt(Z))return!1;var pe=ft(Z);return pe==Ln||pe==hn||pe==Tn||pe==Mr}var jr=Or,dr=we["__core-js_shared__"],Wn=dr,qn=function(){var Z=/[^.]+$/.exec(Wn&&Wn.keys&&Wn.keys.IE_PROTO||"");return Z?"Symbol(src)_1."+Z:""}();function pr(Z){return!!qn&&qn in Z}var Zr=pr,Se=Function.prototype,he=Se.toString;function ut(Z){if(Z!=null){try{return he.call(Z)}catch{}try{return Z+""}catch{}}return""}var Nt=ut,jt=/[\\^$.*+?()[\]{}|]/g,qt=/^\[object .+?Constructor\]$/,vn=Function.prototype,ve=Object.prototype,Et=vn.toString,Ht=ve.hasOwnProperty,Ut=RegExp("^"+Et.call(Ht).replace(jt,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function Ie(Z){if(!Xt(Z)||Zr(Z))return!1;var pe=jr(Z)?Ut:qt;return pe.test(Nt(Z))}var Gt=Ie;function Bt(Z,pe){return Z==null?void 0:Z[pe]}var fn=Bt;function Kt(Z,pe){var Re=fn(Z,pe);return Gt(Re)?Re:void 0}var tn=Kt,Ft=tn(Object,"create"),pn=Ft;function zn(){this.__data__=pn?pn(null):{},this.size=0}var Bn=zn;function ti(Z){var pe=this.has(Z)&&delete this.__data__[Z];return this.size-=pe?1:0,pe}var Ni=ti,Uo="__lodash_hash_undefined__",ns=Object.prototype,Js=ns.hasOwnProperty;function Mi(Z){var pe=this.__data__;if(pn){var Re=pe[Z];return Re===Uo?void 0:Re}return Js.call(pe,Z)?pe[Z]:void 0}var rs=Mi,Wl=Object.prototype,bi=Wl.hasOwnProperty;function Fi(Z){var pe=this.__data__;return pn?pe[Z]!==void 0:bi.call(pe,Z)}var eu=Fi,ye="__lodash_hash_undefined__";function nt(Z,pe){var Re=this.__data__;return this.size+=this.has(Z)?0:1,Re[Z]=pn&&pe===void 0?ye:pe,this}var dt=nt;function at(Z){var pe=-1,Re=Z==null?0:Z.length;for(this.clear();++pe<Re;){var lt=Z[pe];this.set(lt[0],lt[1])}}at.prototype.clear=Bn,at.prototype.delete=Ni,at.prototype.get=rs,at.prototype.has=eu,at.prototype.set=dt;var bt=at;function wn(){this.__data__=[],this.size=0}var En=wn;function Sn(Z,pe){return Z===pe||Z!==Z&&pe!==pe}var Dn=Sn;function Vn(Z,pe){for(var Re=Z.length;Re--;)if(Dn(Z[Re][0],pe))return Re;return-1}var jn=Vn,Hn=Array.prototype,xr=Hn.splice;function ta(Z){var pe=this.__data__,Re=jn(pe,Z);if(Re<0)return!1;var lt=pe.length-1;return Re==lt?pe.pop():xr.call(pe,Re,1),--this.size,!0}var ni=ta;function Pi(Z){var pe=this.__data__,Re=jn(pe,Z);return Re<0?void 0:pe[Re][1]}var to=Pi;function Gn(Z){return jn(this.__data__,Z)>-1}var na=Gn;function kr(Z,pe){var Re=this.__data__,lt=jn(Re,Z);return lt<0?(++this.size,Re.push([Z,pe])):Re[lt][1]=pe,this}var ji=kr;function ci(Z){var pe=-1,Re=Z==null?0:Z.length;for(this.clear();++pe<Re;){var lt=Z[pe];this.set(lt[0],lt[1])}}ci.prototype.clear=En,ci.prototype.delete=ni,ci.prototype.get=to,ci.prototype.has=na,ci.prototype.set=ji;var _i=ci,ra=tn(we,"Map"),ri=ra;function ia(){this.size=0,this.__data__={hash:new bt,map:new(ri||_i),string:new bt}}var yo=ia;function ui(Z){var pe=typeof Z;return pe=="string"||pe=="number"||pe=="symbol"||pe=="boolean"?Z!=="__proto__":Z===null}var op=ui;function U0(Z,pe){var Re=Z.__data__;return op(pe)?Re[typeof pe=="string"?"string":"hash"]:Re.map}var wa=U0;function Qs(Z){var pe=wa(this,Z).delete(Z);return this.size-=pe?1:0,pe}var V0=Qs;function Sa(Z){return wa(this,Z).get(Z)}var tu=Sa;function H0(Z){return wa(this,Z).has(Z)}var ap=H0;function sp(Z,pe){var Re=wa(this,Z),lt=Re.size;return Re.set(Z,pe),this.size+=Re.size==lt?0:1,this}var lp=sp;function is(Z){var pe=-1,Re=Z==null?0:Z.length;for(this.clear();++pe<Re;){var lt=Z[pe];this.set(lt[0],lt[1])}}is.prototype.clear=yo,is.prototype.delete=V0,is.prototype.get=tu,is.prototype.has=ap,is.prototype.set=lp;var nu=is,cp="Expected a function";function ru(Z,pe){if(typeof Z!="function"||pe!=null&&typeof pe!="function")throw new TypeError(cp);var Re=function(){var lt=arguments,yn=pe?pe.apply(this,lt):lt[0],Jn=Re.cache;if(Jn.has(yn))return Jn.get(yn);var xi=Z.apply(this,lt);return Re.cache=Jn.set(yn,xi)||Jn,xi};return Re.cache=new(ru.Cache||nu),Re}ru.Cache=nu;var iu=ru,el=500;function ou(Z){var pe=iu(Z,function(lt){return Re.size===el&&Re.clear(),lt}),Re=pe.cache;return pe}var Xd=ou,tl=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,G0=/\\(\\)?/g,W0=Xd(function(Z){var pe=[];return Z.charCodeAt(0)===46&&pe.push(""),Z.replace(tl,function(Re,lt,yn,Jn){pe.push(yn?Jn.replace(G0,"$1"):lt||Re)}),pe}),up=W0;function dp(Z,pe){for(var Re=-1,lt=Z==null?0:Z.length,yn=Array(lt);++Re<lt;)yn[Re]=pe(Z[Re],Re,Z);return yn}var Ea=dp,ql=1/0,fp=se?se.prototype:void 0,$d=fp?fp.toString:void 0;function Zd(Z){if(typeof Z=="string")return Z;if(K(Z))return Ea(Z,Zd)+"";if(Yt(Z))return $d?$d.call(Z):"";var pe=Z+"";return pe=="0"&&1/Z==-ql?"-0":pe}var hp=Zd;function pp(Z){return Z==null?"":hp(Z)}var mp=pp;function gp(Z,pe){return K(Z)?Z:An(Z,pe)?[Z]:up(mp(Z))}var vp=gp,os=1/0;function au(Z){if(typeof Z=="string"||Yt(Z))return Z;var pe=Z+"";return pe=="0"&&1/Z==-os?"-0":pe}var q0=au;function su(Z,pe){pe=vp(pe,Z);for(var Re=0,lt=pe.length;Z!=null&&Re<lt;)Z=Z[q0(pe[Re++])];return Re&&Re==lt?Z:void 0}var K0=su;function X0(Z,pe,Re){var lt=Z==null?void 0:K0(Z,pe);return lt===void 0?Re:lt}var ka=X0;function as(Z,pe){return function(Re){return Z(pe(Re))}}var yp=as,lu=yp(Object.getPrototypeOf,Object),$0=lu,Z0="[object Object]",bp=Function.prototype,Y0=Object.prototype,_p=bp.toString,Yd=Y0.hasOwnProperty,xp=_p.call(Object);function wp(Z){if(!zt(Z)||ft(Z)!=Z0)return!1;var pe=$0(Z);if(pe===null)return!0;var Re=Yd.call(pe,"constructor")&&pe.constructor;return typeof Re=="function"&&Re instanceof Re&&_p.call(Re)==xp}var Jd=wp;function J0(Z){var pe=Z==null?0:Z.length;return pe?Z[pe-1]:void 0}var Sp=J0,cu=new WeakMap,nl=new WeakMap,Qd=Symbol("pointerMeta"),Ep={get(Z,pe){if(pe===Qd)return cu.get(Z);let Re=nl.get(Z);Re||(Re=new Map,nl.set(Z,Re));const lt=Re.get(pe);if(lt!==void 0)return lt;const yn=cu.get(Z),Jn=Xl({root:yn.root,path:[...yn.path,pe]});return Re.set(pe,Jn),Jn}},oa=Z=>Z[Qd],Kl=Z=>{const{root:pe,path:Re}=oa(Z);return{root:pe,path:Re}};function Xl(Z){var pe;const Re={root:Z.root,path:(pe=Z.path)!=null?pe:[]},lt={};return cu.set(lt,Re),new Proxy(lt,Ep)}var ef=Xl,Ta=Z=>Z&&!!oa(Z);function rl(Z,pe,Re){return pe.length===0?Re(Z):ss(Z,pe,Re)}var ss=(Z,pe,Re)=>{if(pe.length===0)return Re(Z);if(Array.isArray(Z)){let[lt,...yn]=pe;lt=parseInt(String(lt),10),isNaN(lt)&&(lt=0);const Jn=Z[lt],xi=ss(Jn,yn,Re);if(Jn===xi)return Z;const Vo=[...Z];return Vo.splice(lt,1,xi),Vo}else if(typeof Z=="object"&&Z!==null){const[lt,...yn]=pe,Jn=Z[lt],xi=ss(Jn,yn,Re);return Jn===xi?Z:I(M({},Z),{[lt]:xi})}else{const[lt,...yn]=pe;return{[lt]:ss(void 0,yn,Re)}}},Yr=class{constructor(){this._head=void 0}peek(){return this._head&&this._head.data}pop(){const Z=this._head;if(!!Z)return this._head=Z.next,Z.data}push(Z){const pe={next:this._head,data:Z};this._head=pe}};function $l(Z){return!!(Z&&Z.isPrism&&Z.isPrism===!0)}function tf(){const Z=()=>{},pe=new Yr,Re=Z;return{type:"Dataverse_discoveryMechanism",startIgnoringDependencies:()=>{pe.push(Re)},stopIgnoringDependencies:()=>{pe.peek()!==Re||pe.pop()},reportResolutionStart:ls=>{const ec=pe.peek();ec&&ec(ls),pe.push(Re)},reportResolutionEnd:ls=>{pe.pop()},pushCollector:ls=>{pe.push(ls)},popCollector:ls=>{if(pe.peek()!==ls)throw new Error("Popped collector is not on top of the stack");pe.pop()}}}function kp(){const Z="__dataverse_discoveryMechanism_sharedStack",pe=typeof window!="undefined"?window:typeof $r!="undefined"?$r:{};if(pe){const Re=pe[Z];if(Re&&typeof Re=="object"&&Re.type==="Dataverse_discoveryMechanism")return Re;{const lt=tf();return pe[Z]=lt,lt}}else return tf()}var{startIgnoringDependencies:Ma,stopIgnoringDependencies:Zl,reportResolutionEnd:Q0,reportResolutionStart:uu,pushCollector:Yl,popCollector:ev}=kp(),nf=()=>{},tv=class{constructor(Z,pe){this._fn=Z,this._prismInstance=pe,this._didMarkDependentsAsStale=!1,this._isFresh=!1,this._cacheOfDendencyValues=new Map,this._dependents=new Set,this._dependencies=new Set,this._possiblyStaleDeps=new Set,this._scope=new Mp(this),this._lastValue=void 0,this._forciblySetToStale=!1,this._reactToDependencyGoingStale=Re=>{this._possiblyStaleDeps.add(Re),this._markAsStale()};for(const Re of this._dependencies)Re._addDependent(this._reactToDependencyGoingStale);Ma(),this.getValue(),Zl()}get hasDependents(){return this._dependents.size>0}removeDependent(Z){this._dependents.delete(Z)}addDependent(Z){this._dependents.add(Z)}destroy(){for(const Z of this._dependencies)Z._removeDependent(this._reactToDependencyGoingStale);Pp(this._scope)}getValue(){if(!this._isFresh){const Z=this._recalculate();this._lastValue=Z,this._isFresh=!0,this._didMarkDependentsAsStale=!1,this._forciblySetToStale=!1}return this._lastValue}_recalculate(){let Z;if(!this._forciblySetToStale&&this._possiblyStaleDeps.size>0){let lt=!1;Ma();for(const yn of this._possiblyStaleDeps)if(this._cacheOfDendencyValues.get(yn)!==yn.getValue()){lt=!0;break}if(Zl(),this._possiblyStaleDeps.clear(),!lt)return this._lastValue}const pe=new Set;this._cacheOfDendencyValues.clear();const Re=lt=>{pe.add(lt),this._addDependency(lt)};Yl(Re),ii.push(this._scope);try{Z=this._fn()}catch(lt){console.error(lt)}finally{ii.pop()!==this._scope&&console.warn("The Prism hook stack has slipped. This is a bug.")}ev(Re);for(const lt of this._dependencies)pe.has(lt)||this._removeDependency(lt);this._dependencies=pe,Ma();for(const lt of pe)this._cacheOfDendencyValues.set(lt,lt.getValue());return Zl(),Z}forceStale(){this._forciblySetToStale=!0,this._markAsStale()}_markAsStale(){if(!this._didMarkDependentsAsStale){this._didMarkDependentsAsStale=!0,this._isFresh=!1;for(const Z of this._dependents)Z(this._prismInstance)}}_addDependency(Z){this._dependencies.has(Z)||(this._dependencies.add(Z),Z._addDependent(this._reactToDependencyGoingStale))}_removeDependency(Z){!this._dependencies.has(Z)||(this._dependencies.delete(Z),Z._removeDependent(this._reactToDependencyGoingStale))}},rf={},Tp=class{constructor(Z){this._fn=Z,this.isPrism=!0,this._state={hot:!1,handle:void 0}}get isHot(){return this._state.hot}onChange(Z,pe,Re=!1){const lt=()=>{Z.onThisOrNextTick(Jn)};let yn=rf;const Jn=()=>{const Vo=this.getValue();Vo!==yn&&(yn=Vo,pe(Vo))};return this._addDependent(lt),Re&&(yn=this.getValue(),pe(yn)),()=>{this._removeDependent(lt),Z.offThisOrNextTick(Jn),Z.offNextTick(Jn)}}onStale(Z){const pe=()=>{this._removeDependent(Re)},Re=()=>Z();return this._addDependent(Re),pe}keepHot(){return this.onStale(()=>{})}_addDependent(Z){this._state.hot||this._goHot(),this._state.handle.addDependent(Z)}_goHot(){const Z=new tv(this._fn,this);this._state={hot:!0,handle:Z}}_removeDependent(Z){const pe=this._state;if(!pe.hot)return;const Re=pe.handle;Re.removeDependent(Z),Re.hasDependents||(this._state={hot:!1,handle:void 0},Re.destroy())}getValue(){uu(this);const Z=this._state;let pe;return Z.hot?pe=Z.handle.getValue():pe=aa(this._fn),Q0(this),pe}},Mp=class{constructor(Z){this._hotHandle=Z,this._refs=new Map,this.isPrismScope=!0,this.subs={},this.effects=new Map,this.memos=new Map}ref(Z,pe){let Re=this._refs.get(Z);if(Re!==void 0)return Re;{const lt={current:pe};return this._refs.set(Z,lt),lt}}effect(Z,pe,Re){let lt=this.effects.get(Z);lt===void 0&&(lt={cleanup:nf,deps:void 0},this.effects.set(Z,lt)),Cp(lt.deps,Re)&&(lt.cleanup(),Ma(),lt.cleanup=il(pe,nf).value,Zl(),lt.deps=Re)}memo(Z,pe,Re){let lt=this.memos.get(Z);return lt===void 0&&(lt={cachedValue:null,deps:void 0},this.memos.set(Z,lt)),Cp(lt.deps,Re)&&(Ma(),lt.cachedValue=il(pe,void 0).value,Zl(),lt.deps=Re),lt.cachedValue}state(Z,pe){const{value:Re,setValue:lt}=this.memo("state/"+Z,()=>{const yn={current:pe};return{value:yn,setValue:xi=>{yn.current=xi,this._hotHandle.forceStale()}}},[]);return[Re.current,lt]}sub(Z){return this.subs[Z]||(this.subs[Z]=new Mp(this._hotHandle)),this.subs[Z]}cleanupEffects(){for(const Z of this.effects.values())il(Z.cleanup,void 0);this.effects.clear()}source(Z,pe){const Re="$$source/blah";return this.effect(Re,()=>Z(()=>{this._hotHandle.forceStale()}),[Z]),pe()}};function Pp(Z){for(const pe of Object.values(Z.subs))Pp(pe);Z.cleanupEffects()}function il(Z,pe){try{return{value:Z(),ok:!0}}catch(Re){return setTimeout(function(){throw Re}),{value:pe,ok:!1}}}var ii=new Yr;function nv(Z,pe){const Re=ii.peek();if(!Re)throw new Error("prism.ref() is called outside of a prism() call.");return Re.ref(Z,pe)}function du(Z,pe,Re){const lt=ii.peek();if(!lt)throw new Error("prism.effect() is called outside of a prism() call.");return lt.effect(Z,pe,Re)}function Cp(Z,pe){if(Z===void 0||pe===void 0)return!0;const Re=Z.length;if(Re!==pe.length)return!0;for(let lt=0;lt<Re;lt++)if(Z[lt]!==pe[lt])return!0;return!1}function Ap(Z,pe,Re){const lt=ii.peek();if(!lt)throw new Error("prism.memo() is called outside of a prism() call.");return lt.memo(Z,pe,Re)}function Ci(Z,pe){const Re=ii.peek();if(!Re)throw new Error("prism.state() is called outside of a prism() call.");return Re.state(Z,pe)}function Ip(){if(!ii.peek())throw new Error("The parent function is called outside of a prism() call.")}function Jl(Z,pe){const Re=ii.peek();if(!Re)throw new Error("prism.scope() is called outside of a prism() call.");const lt=Re.sub(Z);ii.push(lt);const yn=il(pe,void 0).value;return ii.pop(),yn}function fu(Z,pe,Re){return Ap(Z,()=>Hr(pe),Re).getValue()}function Dp(){return!!ii.peek()}function hu(Z,pe){const Re=ii.peek();if(!Re)throw new Error("prism.source() is called outside of a prism() call.");return Re.source(Z,pe)}var Hr=Z=>new Tp(Z),Ql=class{effect(Z,pe,Re){console.warn("prism.effect() does not run in cold prisms")}memo(Z,pe,Re){return pe()}state(Z,pe){return[pe,()=>{}]}ref(Z,pe){return{current:pe}}sub(Z){return new Ql}source(Z,pe){return pe()}};function aa(Z){const pe=new Ql;ii.push(pe);let Re;try{Re=Z()}catch(lt){console.error(lt)}finally{ii.pop()!==pe&&console.warn("The Prism hook stack has slipped. This is a bug.")}return Re}Hr.ref=nv,Hr.effect=du,Hr.memo=Ap,Hr.ensurePrism=Ip,Hr.state=Ci,Hr.scope=Jl,Hr.sub=fu,Hr.inPrism=Dp,Hr.source=hu;var Pa=Hr,Op;(function(Z){Z[Z.Dict=0]="Dict",Z[Z.Array=1]="Array",Z[Z.Other=2]="Other"})(Op||(Op={}));var ar=Z=>Array.isArray(Z)?1:Jd(Z)?0:2,pu=(Z,pe,Re=ar(Z))=>Re===0&&typeof pe=="string"||Re===1&&Rp(pe)?Z[pe]:void 0,Rp=Z=>{const pe=typeof Z=="number"?Z:parseInt(Z,10);return!isNaN(pe)&&pe>=0&&pe<1/0&&(pe|0)===pe},Lp=class{constructor(Z,pe){this._parent=Z,this._path=pe,this.children=new Map,this.identityChangeListeners=new Set}addIdentityChangeListener(Z){this.identityChangeListeners.add(Z)}removeIdentityChangeListener(Z){this.identityChangeListeners.delete(Z),this._checkForGC()}removeChild(Z){this.children.delete(Z),this._checkForGC()}getChild(Z){return this.children.get(Z)}getOrCreateChild(Z){let pe=this.children.get(Z);return pe||(pe=pe=new Lp(this,this._path.concat([Z])),this.children.set(Z,pe)),pe}_checkForGC(){this.identityChangeListeners.size>0||this.children.size>0||this._parent&&this._parent.removeChild(Sp(this._path))}},zp=class{constructor(Z){this.$$isPointerToPrismProvider=!0,this.pointer=ef({root:this,path:[]}),this.prism=this.pointerToPrism(this.pointer),this._onPointerValueChange=(pe,Re)=>{const{path:lt}=Kl(pe),yn=this._getOrCreateScopeForPath(lt);return yn.identityChangeListeners.add(Re),()=>{yn.identityChangeListeners.delete(Re)}},this._currentState=Z,this._rootScope=new Lp(void 0,[])}set(Z){const pe=this._currentState;this._currentState=Z,this._checkUpdates(this._rootScope,pe,Z)}get(){return this._currentState}getByPointer(Z){const pe=Ta(Z)?Z:Z(this.pointer),Re=Kl(pe).path;return this._getIn(Re)}_getIn(Z){return Z.length===0?this.get():ka(this.get(),Z)}reduce(Z){this.set(Z(this.get()))}reduceByPointer(Z,pe){const Re=Ta(Z)?Z:Z(this.pointer),lt=Kl(Re).path,yn=rl(this.get(),lt,pe);this.set(yn)}setByPointer(Z,pe){this.reduceByPointer(Z,()=>pe)}_checkUpdates(Z,pe,Re){if(pe===Re)return;for(const Jn of Z.identityChangeListeners)Jn(Re);if(Z.children.size===0)return;const lt=ar(pe),yn=ar(Re);if(!(lt===2&&lt===yn))for(const[Jn,xi]of Z.children){const Vo=pu(pe,Jn,lt),sf=pu(Re,Jn,yn);this._checkUpdates(xi,Vo,sf)}}_getOrCreateScopeForPath(Z){let pe=this._rootScope;for(const Re of Z)pe=pe.getOrCreateChild(Re);return pe}pointerToPrism(Z){const{path:pe}=Kl(Z),Re=yn=>this._onPointerValueChange(Z,yn),lt=()=>this._getIn(pe);return Pa(()=>Pa.source(Re,lt))}},mu=new WeakMap;function Np(Z){return typeof Z=="object"&&Z!==null&&Z.$$isPointerToPrismProvider===!0}var gu=Z=>{const pe=oa(Z);let Re=mu.get(pe);if(!Re){const lt=pe.root;if(!Np(lt))throw new Error("Cannot run pointerToPrism() on a pointer whose root is not an PointerToPrismProvider");Re=lt.pointerToPrism(Z),mu.set(pe,Re)}return Re},of=Z=>Ta(Z)?gu(Z).getValue():$l(Z)?Z.getValue():Z;function*af(Z){let pe;if(Ta(Z))pe=gu(Z);else if($l(Z))pe=Z;else throw new Error("Only pointers and prisms are supported");let Re=0;const lt=pe.onStale(()=>{Re++});try{for(;;){const yn=Re;Re=0,yield{value:pe.getValue(),ticks:yn}}}finally{lt()}}var Fp=60*3,jp=class{constructor(Z){this._conf=Z,this._ticking=!1,this._dormant=!0,this._numberOfDormantTicks=0,this.__ticks=0,this._scheduledForThisOrNextTick=new Set,this._scheduledForNextTick=new Set,this._timeAtCurrentTick=0}get dormant(){return this._dormant}onThisOrNextTick(Z){this._scheduledForThisOrNextTick.add(Z),this._dormant&&this._goActive()}onNextTick(Z){this._scheduledForNextTick.add(Z),this._dormant&&this._goActive()}offThisOrNextTick(Z){this._scheduledForThisOrNextTick.delete(Z)}offNextTick(Z){this._scheduledForNextTick.delete(Z)}get time(){return this._ticking?this._timeAtCurrentTick:performance.now()}_goActive(){var Z,pe;!this._dormant||(this._dormant=!1,(pe=(Z=this._conf)==null?void 0:Z.onActive)==null||pe.call(Z))}_goDormant(){var Z,pe;this._dormant||(this._dormant=!0,this._numberOfDormantTicks=0,(pe=(Z=this._conf)==null?void 0:Z.onDormant)==null||pe.call(Z))}tick(Z=performance.now()){if(this.__ticks++,!this._dormant&&this._scheduledForNextTick.size===0&&this._scheduledForThisOrNextTick.size===0&&(this._numberOfDormantTicks++,this._numberOfDormantTicks>=Fp)){this._goDormant();return}this._ticking=!0,this._timeAtCurrentTick=Z;for(const pe of this._scheduledForNextTick)this._scheduledForThisOrNextTick.add(pe);this._scheduledForNextTick.clear(),this._tick(0),this._ticking=!1}_tick(Z){const pe=this.time;if(Z>10&&console.warn("_tick() recursing for 10 times"),Z>100)throw new Error("Maximum recursion limit for _tick()");const Re=this._scheduledForThisOrNextTick;this._scheduledForThisOrNextTick=new Set;for(const lt of Re)lt(pe);if(this._scheduledForThisOrNextTick.size>0)return this._tick(Z+1)}};function*Bp(Z){let pe;if(Ta(Z))pe=gu(Z);else if($l(Z))pe=Z;else throw new Error("Only pointers and prisms are supported");const Re=new jp,lt=pe.onChange(Re,yn=>{});try{for(;;)Re.tick(),yield pe.getValue()}finally{lt()}}var vu=class{constructor(Z){this.$$isPointerToPrismProvider=!0,this._currentPointerBox=new zp(Z),this.pointer=ef({root:this,path:[]})}setPointer(Z){this._currentPointerBox.set(Z)}pointerToPrism(Z){const{path:pe}=oa(Z);return Pa(()=>{const Re=this._currentPointerBox.prism.getValue(),lt=pe.reduce((yn,Jn)=>yn[Jn],Re);return of(lt)})}}})(Mt);(function(w,t){var i=Object.create,l=Object.freeze,d=Object.defineProperty,g=Object.defineProperties,_=Object.getOwnPropertyDescriptor,b=Object.getOwnPropertyDescriptors,M=Object.getOwnPropertyNames,I=Object.getOwnPropertySymbols,F=Object.getPrototypeOf,j=Object.prototype.hasOwnProperty,B=Object.prototype.propertyIsEnumerable,K=(e,n)=>{if(n=Symbol[e])return n;throw Error("Symbol."+e+" is not defined")},te=Math.pow,X=(e,n,r)=>n in e?d(e,n,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[n]=r,O=(e,n)=>{for(var r in n||(n={}))j.call(n,r)&&X(e,r,n[r]);if(I)for(var r of I(n))B.call(n,r)&&X(e,r,n[r]);return e},W=(e,n)=>g(e,b(n)),we=(e,n)=>{var r={};for(var a in e)j.call(e,a)&&n.indexOf(a)<0&&(r[a]=e[a]);if(e!=null&&I)for(var a of I(e))n.indexOf(a)<0&&B.call(e,a)&&(r[a]=e[a]);return r},R=(e,n)=>()=>(e&&(n=e(e=0)),n),se=(e,n)=>()=>(n||e((n={exports:{}}).exports,n),n.exports),me=(e,n)=>{for(var r in n)d(e,r,{get:n[r],enumerable:!0})},ze=(e,n,r,a)=>{if(n&&typeof n=="object"||typeof n=="function")for(let c of M(n))!j.call(e,c)&&c!==r&&d(e,c,{get:()=>n[c],enumerable:!(a=_(n,c))||a.enumerable});return e},ee=(e,n,r)=>(r=e!=null?i(F(e)):{},ze(n||!e||!e.__esModule?d(r,"default",{value:e,enumerable:!0}):r,e)),fe=e=>ze(d({},"__esModule",{value:!0}),e),Te=(e,n,r)=>(X(e,typeof n!="symbol"?n+"":n,r),r),Y=(e,n)=>l(d(e,"raw",{value:l(n||e.slice())})),qe=(e,n,r)=>new Promise((a,c)=>{var u=v=>{try{p(r.next(v))}catch(y){c(y)}},f=v=>{try{p(r.throw(v))}catch(y){c(y)}},p=v=>v.done?a(v.value):Promise.resolve(v.value).then(u,f);p((r=r.apply(e,n)).next())}),Tt=function(e,n){this[0]=e,this[1]=n},xt=e=>{var n=e[K("asyncIterator")],r=!1,a,c={};return n==null?(n=e[K("iterator")](),a=u=>c[u]=f=>n[u](f)):(n=n.call(e),a=u=>c[u]=f=>{if(r){if(r=!1,u==="throw")throw f;return f}return r=!0,{done:!1,value:new Tt(new Promise(p=>{var v=n[u](f);if(!(v instanceof Object))throw TypeError("Object expected");p(v)}),1)}}),c[K("iterator")]=()=>c,a("next"),"throw"in n?a("throw"):c.throw=u=>{throw u},"return"in n&&a("return"),c};function Ke(e){Qe=e}function _e(){return Qe}var Qe,Ge=R(()=>{});function yt(e,n,r=[]){if(typeof e=="object"&&e){if(ft(e)||gt(e)){n(e,r);return}for(let[a,c]of Object.entries(e))yt(c,n,[...r,a])}else{if(e==null)return;n(e,r)}}var ft,gt,zt=R(()=>{ft=e=>typeof e=="object"&&e!==null&&Object.hasOwnProperty.call(e,"type")&&e.type==="image"&&Object.hasOwnProperty.call(e,"id")&&typeof e.id=="string"&&e.id!=="",gt=e=>typeof e=="object"&&e!==null&&Object.hasOwnProperty.call(e,"r")&&Object.hasOwnProperty.call(e,"g")&&Object.hasOwnProperty.call(e,"b")&&Object.hasOwnProperty.call(e,"a")&&typeof e.r=="number"&&typeof e.g=="number"&&typeof e.b=="number"&&typeof e.a=="number"});function kt(e){return n=>typeof n=="object"&&!!n&&n.type===e}var Rt,Yt,Jt,pt,Yn,An,xn,Xt,Tn=R(()=>{Rt=kt("Theatre_Project"),Yt=kt("Theatre_Sheet"),Jt=kt("Theatre_SheetTemplate"),pt=kt("Theatre_SheetObject"),Yn=kt("Theatre_Sequence"),An=kt("Theatre_SheetObjectTemplate"),xn=kt("Theatre_Sheet_PublicAPI"),Xt=kt("Theatre_SheetObject_PublicAPI")}),Ln,hn,Mr=R(()=>{Ln=typeof $r=="object"&&$r&&$r.Object===Object&&$r,hn=Ln}),Or,jr,dr,Wn=R(()=>{Mr(),Or=typeof self=="object"&&self&&self.Object===Object&&self,jr=hn||Or||Function("return this")(),dr=jr}),qn,pr,Zr=R(()=>{Wn(),qn=dr.Symbol,pr=qn});function Se(e){var n=ut.call(e,jt),r=e[jt];try{e[jt]=void 0;var a=!0}catch{}var c=Nt.call(e);return a&&(n?e[jt]=r:delete e[jt]),c}var he,ut,Nt,jt,qt,vn=R(()=>{Zr(),he=Object.prototype,ut=he.hasOwnProperty,Nt=he.toString,jt=pr?pr.toStringTag:void 0,qt=Se});function ve(e){return Ht.call(e)}var Et,Ht,Ut,Ie=R(()=>{Et=Object.prototype,Ht=Et.toString,Ut=ve});function Gt(e){return e==null?e===void 0?fn:Bt:Kt&&Kt in Object(e)?qt(e):Ut(e)}var Bt,fn,Kt,tn,Ft=R(()=>{Zr(),vn(),Ie(),Bt="[object Null]",fn="[object Undefined]",Kt=pr?pr.toStringTag:void 0,tn=Gt});function pn(e){return e!=null&&typeof e=="object"}var zn,Bn=R(()=>{zn=pn});function ti(e){return typeof e=="symbol"||zn(e)&&tn(e)==Ni}var Ni,Uo,ns=R(()=>{Ft(),Bn(),Ni="[object Symbol]",Uo=ti});function Js(e,n){for(var r=-1,a=e==null?0:e.length,c=Array(a);++r<a;)c[r]=n(e[r],r,e);return c}var Mi,rs=R(()=>{Mi=Js}),Wl,bi,Fi=R(()=>{Wl=Array.isArray,bi=Wl});function eu(e){if(typeof e=="string")return e;if(bi(e))return Mi(e,eu)+"";if(Uo(e))return dt?dt.call(e):"";var n=e+"";return n=="0"&&1/e==-ye?"-0":n}var ye,nt,dt,at,bt=R(()=>{Zr(),rs(),Fi(),ns(),ye=1/0,nt=pr?pr.prototype:void 0,dt=nt?nt.toString:void 0,at=eu});function wn(e){for(var n=e.length;n--&&En.test(e.charAt(n)););return n}var En,Sn,Dn=R(()=>{En=/\s/,Sn=wn});function Vn(e){return e&&e.slice(0,Sn(e)+1).replace(jn,"")}var jn,Hn,xr=R(()=>{Dn(),jn=/^\s+/,Hn=Vn});function ta(e){var n=typeof e;return e!=null&&(n=="object"||n=="function")}var ni,Pi=R(()=>{ni=ta});function to(e){if(typeof e=="number")return e;if(Uo(e))return Gn;if(ni(e)){var n=typeof e.valueOf=="function"?e.valueOf():e;e=ni(n)?n+"":n}if(typeof e!="string")return e===0?e:+e;e=Hn(e);var r=kr.test(e);return r||ji.test(e)?ci(e.slice(2),r?2:8):na.test(e)?Gn:+e}var Gn,na,kr,ji,ci,_i,ra=R(()=>{xr(),Pi(),ns(),Gn=0/0,na=/^[-+]0x[0-9a-f]+$/i,kr=/^0b[01]+$/i,ji=/^0o[0-7]+$/i,ci=parseInt,_i=to});function ri(e){if(!e)return e===0?e:0;if(e=_i(e),e===ia||e===-ia){var n=e<0?-1:1;return n*yo}return e===e?e:0}var ia,yo,ui,op=R(()=>{ra(),ia=1/0,yo=17976931348623157e292,ui=ri});function U0(e){var n=ui(e),r=n%1;return n===n?r?n-r:n:0}var wa,Qs=R(()=>{op(),wa=U0});function V0(e){return e}var Sa,tu=R(()=>{Sa=V0});function H0(e){if(!ni(e))return!1;var n=tn(e);return n==sp||n==lp||n==ap||n==is}var ap,sp,lp,is,nu,cp=R(()=>{Ft(),Pi(),ap="[object AsyncFunction]",sp="[object Function]",lp="[object GeneratorFunction]",is="[object Proxy]",nu=H0}),ru,iu,el=R(()=>{Wn(),ru=dr["__core-js_shared__"],iu=ru});function ou(e){return!!Xd&&Xd in e}var Xd,tl,G0=R(()=>{el(),Xd=function(){var e=/[^.]+$/.exec(iu&&iu.keys&&iu.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}(),tl=ou});function W0(e){if(e!=null){try{return dp.call(e)}catch{}try{return e+""}catch{}}return""}var up,dp,Ea,ql=R(()=>{up=Function.prototype,dp=up.toString,Ea=W0});function fp(e){if(!ni(e)||tl(e))return!1;var n=nu(e)?vp:Zd;return n.test(Ea(e))}var $d,Zd,hp,pp,mp,gp,vp,os,au=R(()=>{cp(),G0(),Pi(),ql(),$d=/[\\^$.*+?()[\]{}|]/g,Zd=/^\[object .+?Constructor\]$/,hp=Function.prototype,pp=Object.prototype,mp=hp.toString,gp=pp.hasOwnProperty,vp=RegExp("^"+mp.call(gp).replace($d,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),os=fp});function q0(e,n){return e==null?void 0:e[n]}var su,K0=R(()=>{su=q0});function X0(e,n){var r=su(e,n);return os(r)?r:void 0}var ka,as=R(()=>{au(),K0(),ka=X0}),yp,lu,$0=R(()=>{as(),Wn(),yp=ka(dr,"WeakMap"),lu=yp});function Z0(e,n,r){switch(r.length){case 0:return e.call(n);case 1:return e.call(n,r[0]);case 2:return e.call(n,r[0],r[1]);case 3:return e.call(n,r[0],r[1],r[2])}return e.apply(n,r)}var bp,Y0=R(()=>{bp=Z0});function _p(){}var Yd,xp=R(()=>{Yd=_p});function wp(e,n){var r=-1,a=e.length;for(n||(n=Array(a));++r<a;)n[r]=e[r];return n}var Jd,J0=R(()=>{Jd=wp});function Sp(e){var n=0,r=0;return function(){var a=Qd(),c=nl-(a-r);if(r=a,c>0){if(++n>=cu)return arguments[0]}else n=0;return e.apply(void 0,arguments)}}var cu,nl,Qd,Ep,oa=R(()=>{cu=800,nl=16,Qd=Date.now,Ep=Sp});function Kl(e){return function(){return e}}var Xl,ef=R(()=>{Xl=Kl}),Ta,rl,ss=R(()=>{as(),Ta=function(){try{var e=ka(Object,"defineProperty");return e({},"",{}),e}catch{}}(),rl=Ta}),Yr,$l,tf=R(()=>{ef(),ss(),tu(),Yr=rl?function(e,n){return rl(e,"toString",{configurable:!0,enumerable:!1,value:Xl(n),writable:!0})}:Sa,$l=Yr}),kp,Ma,Zl=R(()=>{tf(),oa(),kp=Ep($l),Ma=kp});function Q0(e,n,r,a){for(var c=e.length,u=r+(a?1:-1);a?u--:++u<c;)if(n(e[u],u,e))return u;return-1}var uu,Yl=R(()=>{uu=Q0});function ev(e){return e!==e}var nf,tv=R(()=>{nf=ev});function rf(e,n,r){for(var a=r-1,c=e.length;++a<c;)if(e[a]===n)return a;return-1}var Tp,Mp=R(()=>{Tp=rf});function Pp(e,n,r){return n===n?Tp(e,n,r):uu(e,nf,r)}var il,ii=R(()=>{Yl(),tv(),Mp(),il=Pp});function nv(e,n){var r=e==null?0:e.length;return!!r&&il(e,n,0)>-1}var du,Cp=R(()=>{ii(),du=nv});function Ap(e,n){var r=typeof e;return n=n==null?Ci:n,!!n&&(r=="number"||r!="symbol"&&Ip.test(e))&&e>-1&&e%1==0&&e<n}var Ci,Ip,Jl,fu=R(()=>{Ci=9007199254740991,Ip=/^(?:0|[1-9]\d*)$/,Jl=Ap});function Dp(e,n,r){n=="__proto__"&&rl?rl(e,n,{configurable:!0,enumerable:!0,value:r,writable:!0}):e[n]=r}var hu,Hr=R(()=>{ss(),hu=Dp});function Ql(e,n){return e===n||e!==e&&n!==n}var aa,Pa=R(()=>{aa=Ql});function Op(e,n,r){var a=e[n];(!(pu.call(e,n)&&aa(a,r))||r===void 0&&!(n in e))&&hu(e,n,r)}var ar,pu,Rp,Lp=R(()=>{Hr(),Pa(),ar=Object.prototype,pu=ar.hasOwnProperty,Rp=Op});function zp(e,n,r){return n=mu(n===void 0?e.length-1:n,0),function(){for(var a=arguments,c=-1,u=mu(a.length-n,0),f=Array(u);++c<u;)f[c]=a[n+c];c=-1;for(var p=Array(n+1);++c<n;)p[c]=a[c];return p[n]=r(f),bp(e,this,p)}}var mu,Np,gu=R(()=>{Y0(),mu=Math.max,Np=zp});function of(e,n){return Ma(Np(e,n,Sa),e+"")}var af,Fp=R(()=>{tu(),gu(),Zl(),af=of});function jp(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=Bp}var Bp,vu,Z=R(()=>{Bp=9007199254740991,vu=jp});function pe(e){return e!=null&&vu(e.length)&&!nu(e)}var Re,lt=R(()=>{cp(),Z(),Re=pe});function yn(e,n,r){if(!ni(r))return!1;var a=typeof n;return(a=="number"?Re(r)&&Jl(n,r.length):a=="string"&&n in r)?aa(r[n],e):!1}var Jn,xi=R(()=>{Pa(),lt(),fu(),Pi(),Jn=yn});function Vo(e){var n=e&&e.constructor,r=typeof n=="function"&&n.prototype||sf;return e===r}var sf,ls,ec=R(()=>{sf=Object.prototype,ls=Vo});function R1(e,n){for(var r=-1,a=Array(e);++r<e;)a[r]=n(r);return a}var L1,mP=R(()=>{L1=R1});function gP(e){return zn(e)&&tn(e)==z1}var z1,rv,vP=R(()=>{Ft(),Bn(),z1="[object Arguments]",rv=gP}),iv,lf,N1,F1,yu,ov=R(()=>{vP(),Bn(),iv=Object.prototype,lf=iv.hasOwnProperty,N1=iv.propertyIsEnumerable,F1=rv(function(){return arguments}())?rv:function(e){return zn(e)&&lf.call(e,"callee")&&!N1.call(e,"callee")},yu=F1});function j1(){return!1}var B1,yP=R(()=>{B1=j1}),cf,av,U1,sv,V1,lv,uf,H1=R(()=>{Wn(),yP(),cf=t&&!t.nodeType&&t,av=cf&&!0&&w&&!w.nodeType&&w,U1=av&&av.exports===cf,sv=U1?dr.Buffer:void 0,V1=sv?sv.isBuffer:void 0,lv=V1||B1,uf=lv});function bP(e){return zn(e)&&vu(e.length)&&!!wr[tn(e)]}var G1,cv,W1,q1,uv,dv,K1,fv,X1,$1,df,Z1,Y1,J1,Q1,ex,tx,nx,rx,ix,ox,ax,sx,lx,wr,cx,_P=R(()=>{Ft(),Z(),Bn(),G1="[object Arguments]",cv="[object Array]",W1="[object Boolean]",q1="[object Date]",uv="[object Error]",dv="[object Function]",K1="[object Map]",fv="[object Number]",X1="[object Object]",$1="[object RegExp]",df="[object Set]",Z1="[object String]",Y1="[object WeakMap]",J1="[object ArrayBuffer]",Q1="[object DataView]",ex="[object Float32Array]",tx="[object Float64Array]",nx="[object Int8Array]",rx="[object Int16Array]",ix="[object Int32Array]",ox="[object Uint8Array]",ax="[object Uint8ClampedArray]",sx="[object Uint16Array]",lx="[object Uint32Array]",wr={},wr[ex]=wr[tx]=wr[nx]=wr[rx]=wr[ix]=wr[ox]=wr[ax]=wr[sx]=wr[lx]=!0,wr[G1]=wr[cv]=wr[J1]=wr[W1]=wr[Q1]=wr[q1]=wr[uv]=wr[dv]=wr[K1]=wr[fv]=wr[X1]=wr[$1]=wr[df]=wr[Z1]=wr[Y1]=!1,cx=bP});function xP(e){return function(n){return e(n)}}var Up,hv=R(()=>{Up=xP}),pv,bu,ux,Vp,dx,mr,wP=R(()=>{Mr(),pv=t&&!t.nodeType&&t,bu=pv&&!0&&w&&!w.nodeType&&w,ux=bu&&bu.exports===pv,Vp=ux&&hn.process,dx=function(){try{var e=bu&&bu.require&&bu.require("util").types;return e||Vp&&Vp.binding&&Vp.binding("util")}catch{}}(),mr=dx}),mv,fx,ff,gv=R(()=>{_P(),hv(),wP(),mv=mr&&mr.isTypedArray,fx=mv?Up(mv):cx,ff=fx});function hf(e,n){var r=bi(e),a=!r&&yu(e),c=!r&&!a&&uf(e),u=!r&&!a&&!c&&ff(e),f=r||a||c||u,p=f?L1(e.length,String):[],v=p.length;for(var y in e)(n||Hp.call(e,y))&&!(f&&(y=="length"||c&&(y=="offset"||y=="parent")||u&&(y=="buffer"||y=="byteLength"||y=="byteOffset")||Jl(y,v)))&&p.push(y);return p}var hx,Hp,px,_u=R(()=>{mP(),ov(),Fi(),H1(),fu(),gv(),hx=Object.prototype,Hp=hx.hasOwnProperty,px=hf});function mx(e,n){return function(r){return e(n(r))}}var vv,yv=R(()=>{vv=mx}),gx,vx,SP=R(()=>{yv(),gx=vv(Object.keys,Object),vx=gx});function yx(e){if(!ls(e))return vx(e);var n=[];for(var r in Object(e))bv.call(e,r)&&r!="constructor"&&n.push(r);return n}var bx,bv,_x,EP=R(()=>{ec(),SP(),bx=Object.prototype,bv=bx.hasOwnProperty,_x=yx});function kP(e){return Re(e)?px(e):_x(e)}var Gp,_v=R(()=>{_u(),EP(),lt(),Gp=kP});function TP(e,n){if(bi(e))return!1;var r=typeof e;return r=="number"||r=="symbol"||r=="boolean"||e==null||Uo(e)?!0:xu.test(e)||!xx.test(e)||n!=null&&e in Object(n)}var xx,xu,Wp,xv=R(()=>{Fi(),ns(),xx=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,xu=/^\w*$/,Wp=TP}),wx,wu,qp=R(()=>{as(),wx=ka(Object,"create"),wu=wx});function MP(){this.__data__=wu?wu(null):{},this.size=0}var Sx,wv=R(()=>{qp(),Sx=MP});function PP(e){var n=this.has(e)&&delete this.__data__[e];return this.size-=n?1:0,n}var Sv,CP=R(()=>{Sv=PP});function Ev(e){var n=this.__data__;if(wu){var r=n[e];return r===Ex?void 0:r}return Tx.call(n,e)?n[e]:void 0}var Ex,kx,Tx,kv,AP=R(()=>{qp(),Ex="__lodash_hash_undefined__",kx=Object.prototype,Tx=kx.hasOwnProperty,kv=Ev});function IP(e){var n=this.__data__;return wu?n[e]!==void 0:Px.call(n,e)}var Mx,Px,Cx,Ax=R(()=>{qp(),Mx=Object.prototype,Px=Mx.hasOwnProperty,Cx=IP});function DP(e,n){var r=this.__data__;return this.size+=this.has(e)?0:1,r[e]=wu&&n===void 0?Ix:n,this}var Ix,Dx,OP=R(()=>{qp(),Ix="__lodash_hash_undefined__",Dx=DP});function Su(e){var n=-1,r=e==null?0:e.length;for(this.clear();++n<r;){var a=e[n];this.set(a[0],a[1])}}var Tv,RP=R(()=>{wv(),CP(),AP(),Ax(),OP(),Su.prototype.clear=Sx,Su.prototype.delete=Sv,Su.prototype.get=kv,Su.prototype.has=Cx,Su.prototype.set=Dx,Tv=Su});function LP(){this.__data__=[],this.size=0}var Ox,zP=R(()=>{Ox=LP});function NP(e,n){for(var r=e.length;r--;)if(aa(e[r][0],n))return r;return-1}var tc,Kp=R(()=>{Pa(),tc=NP});function FP(e){var n=this.__data__,r=tc(n,e);if(r<0)return!1;var a=n.length-1;return r==a?n.pop():Rx.call(n,r,1),--this.size,!0}var Mv,Rx,Lx,jP=R(()=>{Kp(),Mv=Array.prototype,Rx=Mv.splice,Lx=FP});function BP(e){var n=this.__data__,r=tc(n,e);return r<0?void 0:n[r][1]}var zx,UP=R(()=>{Kp(),zx=BP});function Pv(e){return tc(this.__data__,e)>-1}var Xp,VP=R(()=>{Kp(),Xp=Pv});function Nx(e,n){var r=this.__data__,a=tc(r,e);return a<0?(++this.size,r.push([e,n])):r[a][1]=n,this}var Cv,Fx=R(()=>{Kp(),Cv=Nx});function Eu(e){var n=-1,r=e==null?0:e.length;for(this.clear();++n<r;){var a=e[n];this.set(a[0],a[1])}}var ku,pf=R(()=>{zP(),jP(),UP(),VP(),Fx(),Eu.prototype.clear=Ox,Eu.prototype.delete=Lx,Eu.prototype.get=zx,Eu.prototype.has=Xp,Eu.prototype.set=Cv,ku=Eu}),jx,Tu,Av=R(()=>{as(),Wn(),jx=ka(dr,"Map"),Tu=jx});function HP(){this.size=0,this.__data__={hash:new Tv,map:new(Tu||ku),string:new Tv}}var Bx,GP=R(()=>{RP(),pf(),Av(),Bx=HP});function WP(e){var n=typeof e;return n=="string"||n=="number"||n=="symbol"||n=="boolean"?e!=="__proto__":e===null}var Ux,qP=R(()=>{Ux=WP});function KP(e,n){var r=e.__data__;return Ux(n)?r[typeof n=="string"?"string":"hash"]:r.map}var mf,gf=R(()=>{qP(),mf=KP});function XP(e){var n=mf(this,e).delete(e);return this.size-=n?1:0,n}var Vx,$P=R(()=>{gf(),Vx=XP});function ZP(e){return mf(this,e).get(e)}var Hx,YP=R(()=>{gf(),Hx=ZP});function JP(e){return mf(this,e).has(e)}var Gx,QP=R(()=>{gf(),Gx=JP});function eC(e,n){var r=mf(this,e),a=r.size;return r.set(e,n),this.size+=r.size==a?0:1,this}var Wx,Mu=R(()=>{gf(),Wx=eC});function Ca(e){var n=-1,r=e==null?0:e.length;for(this.clear();++n<r;){var a=e[n];this.set(a[0],a[1])}}var vf,Iv=R(()=>{GP(),$P(),YP(),QP(),Mu(),Ca.prototype.clear=Bx,Ca.prototype.delete=Vx,Ca.prototype.get=Hx,Ca.prototype.has=Gx,Ca.prototype.set=Wx,vf=Ca});function Dv(e,n){if(typeof e!="function"||n!=null&&typeof n!="function")throw new TypeError(qx);var r=function(){var a=arguments,c=n?n.apply(this,a):a[0],u=r.cache;if(u.has(c))return u.get(c);var f=e.apply(this,a);return r.cache=u.set(c,f)||u,f};return r.cache=new(Dv.Cache||vf),r}var qx,$p,Ov=R(()=>{Iv(),qx="Expected a function",Dv.Cache=vf,$p=Dv});function tC(e){var n=$p(e,function(a){return r.size===Rv&&r.clear(),a}),r=n.cache;return n}var Rv,Lv,nC=R(()=>{Ov(),Rv=500,Lv=tC}),Kx,Xx,$x,Zx,Yx=R(()=>{nC(),Kx=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Xx=/\\(\\)?/g,$x=Lv(function(e){var n=[];return e.charCodeAt(0)===46&&n.push(""),e.replace(Kx,function(r,a,c,u){n.push(c?u.replace(Xx,"$1"):a||r)}),n}),Zx=$x});function rC(e){return e==null?"":at(e)}var Zp,zv=R(()=>{bt(),Zp=rC});function iC(e,n){return bi(e)?e:Wp(e,n)?[e]:Zx(Zp(e))}var Pu,Nv=R(()=>{Fi(),xv(),Yx(),zv(),Pu=iC});function oC(e){if(typeof e=="string"||Uo(e))return e;var n=e+"";return n=="0"&&1/e==-Jx?"-0":n}var Jx,Cu,Au=R(()=>{ns(),Jx=1/0,Cu=oC});function aC(e,n){n=Pu(n,e);for(var r=0,a=n.length;e!=null&&r<a;)e=e[Cu(n[r++])];return r&&r==a?e:void 0}var Yp,Fv=R(()=>{Nv(),Au(),Yp=aC});function Qx(e,n,r){var a=e==null?void 0:Yp(e,n);return a===void 0?r:a}var nc,rc=R(()=>{Fv(),nc=Qx});function sC(e,n){for(var r=-1,a=n.length,c=e.length;++r<a;)e[c+r]=n[r];return e}var jv,ew=R(()=>{jv=sC});function Bv(e){return bi(e)||yu(e)||!!(Uv&&e&&e[Uv])}var Uv,Jp,lC=R(()=>{Zr(),ov(),Fi(),Uv=pr?pr.isConcatSpreadable:void 0,Jp=Bv});function Qp(e,n,r,a,c){var u=-1,f=e.length;for(r||(r=Jp),c||(c=[]);++u<f;){var p=e[u];n>0&&r(p)?n>1?Qp(p,n-1,r,a,c):jv(c,p):a||(c[c.length]=p)}return c}var Vv,cC=R(()=>{ew(),lC(),Vv=Qp}),Hv,Gv,tw=R(()=>{yv(),Hv=vv(Object.getPrototypeOf,Object),Gv=Hv});function nw(e){if(!zn(e)||tn(e)!=rw)return!1;var n=Gv(e);if(n===null)return!0;var r=aw.call(n,"constructor")&&n.constructor;return typeof r=="function"&&r instanceof r&&Wv.call(r)==ol}var rw,iw,ow,Wv,aw,ol,al,sw=R(()=>{Ft(),tw(),Bn(),rw="[object Object]",iw=Function.prototype,ow=Object.prototype,Wv=iw.toString,aw=ow.hasOwnProperty,ol=Wv.call(Object),al=nw});function uC(e){var n=Math[e];return function(r,a){if(r=_i(r),a=a==null?0:cw(wa(a),292),a&&lw(r)){var c=(Zp(r)+"e").split("e"),u=n(c[0]+"e"+(+c[1]+a));return c=(Zp(u)+"e").split("e"),+(c[0]+"e"+(+c[1]-a))}return n(r)}}var lw,cw,uw,em=R(()=>{Wn(),Qs(),ra(),zv(),lw=dr.isFinite,cw=Math.min,uw=uC});function dC(e,n,r){return e===e&&(r!==void 0&&(e=e<=r?e:r),n!==void 0&&(e=e>=n?e:n)),e}var tm,fC=R(()=>{tm=dC});function hC(e,n,r){return r===void 0&&(r=n,n=void 0),r!==void 0&&(r=_i(r),r=r===r?r:0),n!==void 0&&(n=_i(n),n=n===n?n:0),tm(_i(e),n,r)}var Pr,nm=R(()=>{fC(),ra(),Pr=hC});function pC(){this.__data__=new ku,this.size=0}var qv,dw=R(()=>{pf(),qv=pC});function mC(e){var n=this.__data__,r=n.delete(e);return this.size=n.size,r}var fw,gC=R(()=>{fw=mC});function vC(e){return this.__data__.get(e)}var hw,yC=R(()=>{hw=vC});function bC(e){return this.__data__.has(e)}var pw,_C=R(()=>{pw=bC});function xC(e,n){var r=this.__data__;if(r instanceof ku){var a=r.__data__;if(!Tu||a.length<mw-1)return a.push([e,n]),this.size=++r.size,this;r=this.__data__=new vf(a)}return r.set(e,n),this.size=r.size,this}var mw,gw,wC=R(()=>{pf(),Av(),Iv(),mw=200,gw=xC});function Iu(e){var n=this.__data__=new ku(e);this.size=n.size}var yf,vw=R(()=>{pf(),dw(),gC(),yC(),_C(),wC(),Iu.prototype.clear=qv,Iu.prototype.delete=fw,Iu.prototype.get=hw,Iu.prototype.has=pw,Iu.prototype.set=gw,yf=Iu});function SC(e,n){for(var r=-1,a=e==null?0:e.length,c=0,u=[];++r<a;){var f=e[r];n(f,r,e)&&(u[c++]=f)}return u}var yw,EC=R(()=>{yw=SC});function kC(){return[]}var bw,TC=R(()=>{bw=kC}),_w,xw,Kv,ww,Sw,MC=R(()=>{EC(),TC(),_w=Object.prototype,xw=_w.propertyIsEnumerable,Kv=Object.getOwnPropertySymbols,ww=Kv?function(e){return e==null?[]:(e=Object(e),yw(Kv(e),function(n){return xw.call(e,n)}))}:bw,Sw=ww});function PC(e,n,r){var a=n(e);return bi(e)?a:jv(a,r(e))}var Ew,kw=R(()=>{ew(),Fi(),Ew=PC});function CC(e){return Ew(e,Gp,Sw)}var Xv,AC=R(()=>{kw(),MC(),_v(),Xv=CC}),Tw,rm,Mw=R(()=>{as(),Wn(),Tw=ka(dr,"DataView"),rm=Tw}),Pw,im,IC=R(()=>{as(),Wn(),Pw=ka(dr,"Promise"),im=Pw}),Cw,ic,$v=R(()=>{as(),Wn(),Cw=ka(dr,"Set"),ic=Cw}),Zv,Aw,Yv,Jv,om,Qv,Iw,Dw,ey,Ow,Rw,sl,ty,DC=R(()=>{Mw(),Av(),IC(),$v(),$0(),Ft(),ql(),Zv="[object Map]",Aw="[object Object]",Yv="[object Promise]",Jv="[object Set]",om="[object WeakMap]",Qv="[object DataView]",Iw=Ea(rm),Dw=Ea(Tu),ey=Ea(im),Ow=Ea(ic),Rw=Ea(lu),sl=tn,(rm&&sl(new rm(new ArrayBuffer(1)))!=Qv||Tu&&sl(new Tu)!=Zv||im&&sl(im.resolve())!=Yv||ic&&sl(new ic)!=Jv||lu&&sl(new lu)!=om)&&(sl=function(e){var n=tn(e),r=n==Aw?e.constructor:void 0,a=r?Ea(r):"";if(a)switch(a){case Iw:return Qv;case Dw:return Zv;case ey:return Yv;case Ow:return Jv;case Rw:return om}return n}),ty=sl}),Lw,ny,OC=R(()=>{Wn(),Lw=dr.Uint8Array,ny=Lw});function RC(e){return this.__data__.set(e,zw),this}var zw,Nw,LC=R(()=>{zw="__lodash_hash_undefined__",Nw=RC});function zC(e){return this.__data__.has(e)}var Fw,NC=R(()=>{Fw=zC});function am(e){var n=-1,r=e==null?0:e.length;for(this.__data__=new vf;++n<r;)this.add(e[n])}var fr,bf=R(()=>{Iv(),LC(),NC(),am.prototype.add=am.prototype.push=Nw,am.prototype.has=Fw,fr=am});function FC(e,n){for(var r=-1,a=e==null?0:e.length;++r<a;)if(n(e[r],r,e))return!0;return!1}var jw,jC=R(()=>{jw=FC});function BC(e,n){return e.has(n)}var ry,Bw=R(()=>{ry=BC});function UC(e,n,r,a,c,u){var f=r&Uw,p=e.length,v=n.length;if(p!=v&&!(f&&v>p))return!1;var y=u.get(e),k=u.get(n);if(y&&k)return y==n&&k==e;var P=-1,T=!0,E=r&Vw?new fr:void 0;for(u.set(e,n),u.set(n,e);++P<p;){var A=e[P],C=n[P];if(a)var L=f?a(C,A,P,n,e,u):a(A,C,P,e,n,u);if(L!==void 0){if(L)continue;T=!1;break}if(E){if(!jw(n,function(N,U){if(!ry(E,U)&&(A===N||c(A,N,r,a,u)))return E.push(U)})){T=!1;break}}else if(!(A===C||c(A,C,r,a,u))){T=!1;break}}return u.delete(e),u.delete(n),T}var Uw,Vw,iy,_f=R(()=>{bf(),jC(),Bw(),Uw=1,Vw=2,iy=UC});function VC(e){var n=-1,r=Array(e.size);return e.forEach(function(a,c){r[++n]=[c,a]}),r}var Hw,HC=R(()=>{Hw=VC});function GC(e){var n=-1,r=Array(e.size);return e.forEach(function(a){r[++n]=a}),r}var sm,oy=R(()=>{sm=GC});function WC(e,n,r,a,c,u,f){switch(r){case tS:if(e.byteLength!=n.byteLength||e.byteOffset!=n.byteOffset)return!1;e=e.buffer,n=n.buffer;case eS:return!(e.byteLength!=n.byteLength||!u(new ny(e),new ny(n)));case Ww:case qw:case $w:return aa(+e,+n);case Kw:return e.name==n.name&&e.message==n.message;case Zw:case Jw:return e==n+"";case Xw:var p=Hw;case Yw:var v=a&Gw;if(p||(p=sm),e.size!=n.size&&!v)return!1;var y=f.get(e);if(y)return y==n;a|=ay,f.set(e,n);var k=iy(p(e),p(n),a,c,u,f);return f.delete(e),k;case Qw:if(lm)return lm.call(e)==lm.call(n)}return!1}var Gw,ay,Ww,qw,Kw,Xw,$w,Zw,Yw,Jw,Qw,eS,tS,sy,lm,nS,qC=R(()=>{Zr(),OC(),Pa(),_f(),HC(),oy(),Gw=1,ay=2,Ww="[object Boolean]",qw="[object Date]",Kw="[object Error]",Xw="[object Map]",$w="[object Number]",Zw="[object RegExp]",Yw="[object Set]",Jw="[object String]",Qw="[object Symbol]",eS="[object ArrayBuffer]",tS="[object DataView]",sy=pr?pr.prototype:void 0,lm=sy?sy.valueOf:void 0,nS=WC});function KC(e,n,r,a,c,u){var f=r&rS,p=Xv(e),v=p.length,y=Xv(n),k=y.length;if(v!=k&&!f)return!1;for(var P=v;P--;){var T=p[P];if(!(f?T in n:cm.call(n,T)))return!1}var E=u.get(e),A=u.get(n);if(E&&A)return E==n&&A==e;var C=!0;u.set(e,n),u.set(n,e);for(var L=f;++P<v;){T=p[P];var N=e[T],U=n[T];if(a)var G=f?a(U,N,T,n,e,u):a(N,U,T,e,n,u);if(!(G===void 0?N===U||c(N,U,r,a,u):G)){C=!1;break}L||(L=T=="constructor")}if(C&&!L){var Q=e.constructor,J=n.constructor;Q!=J&&"constructor"in e&&"constructor"in n&&!(typeof Q=="function"&&Q instanceof Q&&typeof J=="function"&&J instanceof J)&&(C=!1)}return u.delete(e),u.delete(n),C}var rS,ly,cm,iS,XC=R(()=>{AC(),rS=1,ly=Object.prototype,cm=ly.hasOwnProperty,iS=KC});function $C(e,n,r,a,c,u){var f=bi(e),p=bi(n),v=f?uy:ty(e),y=p?uy:ty(n);v=v==cy?xf:v,y=y==cy?xf:y;var k=v==xf,P=y==xf,T=v==y;if(T&&uf(e)){if(!uf(n))return!1;f=!0,k=!1}if(T&&!k)return u||(u=new yf),f||ff(e)?iy(e,n,r,a,c,u):nS(e,n,v,r,a,c,u);if(!(r&oS)){var E=k&&um.call(e,"__wrapped__"),A=P&&um.call(n,"__wrapped__");if(E||A){var C=E?e.value():e,L=A?n.value():n;return u||(u=new yf),c(C,L,r,a,u)}}return T?(u||(u=new yf),iS(e,n,r,a,c,u)):!1}var oS,cy,uy,xf,aS,um,dy,dm=R(()=>{vw(),_f(),qC(),XC(),DC(),Fi(),H1(),gv(),oS=1,cy="[object Arguments]",uy="[object Array]",xf="[object Object]",aS=Object.prototype,um=aS.hasOwnProperty,dy=$C});function sS(e,n,r,a,c){return e===n?!0:e==null||n==null||!zn(e)&&!zn(n)?e!==e&&n!==n:dy(e,n,r,a,sS,c)}var fm,lS=R(()=>{dm(),Bn(),fm=sS});function ZC(e,n,r,a){var c=r.length,u=c,f=!a;if(e==null)return!u;for(e=Object(e);c--;){var p=r[c];if(f&&p[2]?p[1]!==e[p[0]]:!(p[0]in e))return!1}for(;++c<u;){p=r[c];var v=p[0],y=e[v],k=p[1];if(f&&p[2]){if(y===void 0&&!(v in e))return!1}else{var P=new yf;if(a)var T=a(y,k,v,e,n,P);if(!(T===void 0?fm(k,y,fy|hy,a,P):T))return!1}}return!0}var fy,hy,cS,YC=R(()=>{vw(),lS(),fy=1,hy=2,cS=ZC});function JC(e){return e===e&&!ni(e)}var py,uS=R(()=>{Pi(),py=JC});function dS(e){for(var n=Gp(e),r=n.length;r--;){var a=n[r],c=e[a];n[r]=[a,c,py(c)]}return n}var fS,QC=R(()=>{uS(),_v(),fS=dS});function e3(e,n){return function(r){return r==null?!1:r[e]===n&&(n!==void 0||e in Object(r))}}var hm,hS=R(()=>{hm=e3});function t3(e){var n=fS(e);return n.length==1&&n[0][2]?hm(n[0][0],n[0][1]):function(r){return r===e||cS(r,e,n)}}var pS,n3=R(()=>{YC(),QC(),hS(),pS=t3});function r3(e,n){return e!=null&&n in Object(e)}var mS,i3=R(()=>{mS=r3});function o3(e,n,r){n=Pu(n,e);for(var a=-1,c=n.length,u=!1;++a<c;){var f=Cu(n[a]);if(!(u=e!=null&&r(e,f)))break;e=e[f]}return u||++a!=c?u:(c=e==null?0:e.length,!!c&&vu(c)&&Jl(f,c)&&(bi(e)||yu(e)))}var gS,a3=R(()=>{Nv(),ov(),Fi(),fu(),Z(),Au(),gS=o3});function s3(e,n){return e!=null&&gS(e,n,mS)}var vS,l3=R(()=>{i3(),a3(),vS=s3});function yS(e,n){return Wp(e)&&py(n)?hm(Cu(e),n):function(r){var a=nc(r,e);return a===void 0&&a===n?vS(r,e):fm(n,a,bS|_S)}}var bS,_S,xS,c3=R(()=>{lS(),rc(),l3(),xv(),uS(),hS(),Au(),bS=1,_S=2,xS=yS});function u3(e){return function(n){return n==null?void 0:n[e]}}var wS,d3=R(()=>{wS=u3});function f3(e){return function(n){return Yp(n,e)}}var SS,h3=R(()=>{Fv(),SS=f3});function p3(e){return Wp(e)?wS(Cu(e)):SS(e)}var ES,m3=R(()=>{d3(),h3(),xv(),Au(),ES=p3});function my(e){return typeof e=="function"?e:e==null?Sa:typeof e=="object"?bi(e)?xS(e[0],e[1]):pS(e):ES(e)}var Du,wf=R(()=>{n3(),c3(),tu(),Fi(),m3(),Du=my});function g3(e,n,r,a){for(var c=-1,u=e==null?0:e.length;++c<u;){var f=e[c];n(a,f,r(f),e)}return a}var kS,v3=R(()=>{kS=g3});function y3(e){return function(n,r,a){for(var c=-1,u=Object(n),f=a(n),p=f.length;p--;){var v=f[e?p:++c];if(r(u[v],v,u)===!1)break}return n}}var TS,b3=R(()=>{TS=y3}),MS,PS,_3=R(()=>{b3(),MS=TS(),PS=MS});function x3(e,n){return e&&PS(e,n,Gp)}var gy,CS=R(()=>{_3(),_v(),gy=x3});function w3(e,n){return function(r,a){if(r==null)return r;if(!Re(r))return e(r,a);for(var c=r.length,u=n?c:-1,f=Object(r);(n?u--:++u<c)&&a(f[u],u,f)!==!1;);return r}}var AS,S3=R(()=>{lt(),AS=w3}),IS,pm,DS=R(()=>{CS(),S3(),IS=AS(gy),pm=IS});function E3(e,n,r,a){return pm(e,function(c,u,f){n(a,c,r(c),f)}),a}var vy,k3=R(()=>{DS(),vy=E3});function T3(e,n){return function(r,a){var c=bi(r)?kS:vy,u=n?n():{};return c(r,e,Du(a,2),u)}}var OS,M3=R(()=>{v3(),k3(),wf(),Fi(),OS=T3}),RS,mm,yy=R(()=>{Wn(),RS=function(){return dr.Date.now()},mm=RS});function by(e,n,r){var a,c,u,f,p,v,y=0,k=!1,P=!1,T=!0;if(typeof e!="function")throw new TypeError(LS);n=_i(n)||0,ni(r)&&(k=!!r.leading,P="maxWait"in r,u=P?_y(_i(r.maxWait)||0,n):u,T="trailing"in r?!!r.trailing:T);function E(ie){var xe=a,Me=c;return a=c=void 0,y=ie,f=e.apply(Me,xe),f}function A(ie){return y=ie,p=setTimeout(N,n),k?E(ie):f}function C(ie){var xe=ie-v,Me=ie-y,ue=n-xe;return P?xy(ue,u-Me):ue}function L(ie){var xe=ie-v,Me=ie-y;return v===void 0||xe>=n||xe<0||P&&Me>=u}function N(){var ie=mm();if(L(ie))return U(ie);p=setTimeout(N,C(ie))}function U(ie){return p=void 0,T&&a?E(ie):(a=c=void 0,f)}function G(){p!==void 0&&clearTimeout(p),y=0,a=v=c=p=void 0}function Q(){return p===void 0?f:U(mm())}function J(){var ie=mm(),xe=L(ie);if(a=arguments,c=this,v=ie,xe){if(p===void 0)return A(v);if(P)return clearTimeout(p),p=setTimeout(N,n),E(v)}return p===void 0&&(p=setTimeout(N,n)),f}return J.cancel=G,J.flush=Q,J}var LS,_y,xy,gm,zS=R(()=>{Pi(),yy(),ra(),LS="Expected a function",_y=Math.max,xy=Math.min,gm=by});function NS(e,n,r){for(var a=-1,c=e==null?0:e.length;++a<c;)if(r(n,e[a]))return!0;return!1}var wy,P3=R(()=>{wy=NS});function C3(e){var n=e==null?0:e.length;return n?e[n-1]:void 0}var oc,Sf=R(()=>{oc=C3});function A3(e,n,r){var a=e==null?0:e.length;if(!a)return-1;var c=r==null?0:wa(r);return c<0&&(c=FS(a+c,0)),uu(e,Du(n,3),c)}var FS,Sy,jS=R(()=>{Yl(),wf(),Qs(),FS=Math.max,Sy=A3});function I3(e,n,r){var a=e==null?0:e.length;if(!a)return-1;var c=a-1;return r!==void 0&&(c=wa(r),c=r<0?BS(a+c,0):US(c,a-1)),uu(e,Du(n,3),c,!0)}var BS,US,VS,Ef=R(()=>{Yl(),wf(),Qs(),BS=Math.max,US=Math.min,VS=I3});function D3(e,n){var r=-1,a=Re(e)?Array(e.length):[];return pm(e,function(c,u,f){a[++r]=n(c,u,f)}),a}var Ey,O3=R(()=>{DS(),lt(),Ey=D3});function R3(e,n,r){return e>=kf(n,r)&&e<HS(n,r)}var HS,kf,vm,L3=R(()=>{HS=Math.max,kf=Math.min,vm=R3});function z3(e,n,r){return n=ui(n),r===void 0?(r=n,n=0):r=ui(r),e=_i(e),vm(e,n,r)}var hr,bo=R(()=>{L3(),op(),ra(),hr=z3});function _o(e){return typeof e=="number"&&e==wa(e)}var cs,gr=R(()=>{Qs(),cs=_o}),Aa,Ou,N3=R(()=>{Hr(),M3(),Aa=OS(function(e,n,r){hu(e,r,n)}),Ou=Aa});function F3(e,n){var r={};return n=Du(n,3),gy(e,function(a,c,u){hu(r,c,n(a,c,u))}),r}var ac,GS=R(()=>{Hr(),CS(),wf(),ac=F3});function j3(e,n,r,a){if(!ni(e))return e;n=Pu(n,e);for(var c=-1,u=n.length,f=u-1,p=e;p!=null&&++c<u;){var v=Cu(n[c]),y=r;if(v==="__proto__"||v==="constructor"||v==="prototype")return e;if(c!=f){var k=p[v];y=a?a(k,v,p):void 0,y===void 0&&(y=ni(k)?k:Jl(n[c+1])?[]:{})}Rp(p,v,y),p=p[v]}return e}var ky,WS=R(()=>{Lp(),Nv(),fu(),Pi(),Au(),ky=j3});function ym(e,n){var r=e.length;for(e.sort(n);r--;)e[r]=e[r].value;return e}var Ty,B3=R(()=>{Ty=ym});function qS(e,n){if(e!==n){var r=e!==void 0,a=e===null,c=e===e,u=Uo(e),f=n!==void 0,p=n===null,v=n===n,y=Uo(n);if(!p&&!y&&!u&&e>n||u&&f&&v&&!p&&!y||a&&f&&v||!r&&v||!c)return 1;if(!a&&!u&&!y&&e<n||y&&r&&c&&!a&&!u||p&&r&&c||!f&&c||!v)return-1}return 0}var My,KS=R(()=>{ns(),My=qS});function U3(e,n,r){for(var a=-1,c=e.criteria,u=n.criteria,f=c.length,p=r.length;++a<f;){var v=My(c[a],u[a]);if(v){if(a>=p)return v;var y=r[a];return v*(y=="desc"?-1:1)}}return e.index-n.index}var XS,$S=R(()=>{KS(),XS=U3});function V3(e,n,r){n.length?n=Mi(n,function(u){return bi(u)?function(f){return Yp(f,u.length===1?u[0]:u)}:u}):n=[Sa];var a=-1;n=Mi(n,Up(Du));var c=Ey(e,function(u,f,p){var v=Mi(n,function(y){return y(u)});return{criteria:v,index:++a,value:u}});return Ty(c,function(u,f){return XS(u,f,r)})}var ZS,Tf=R(()=>{rs(),Fv(),wf(),O3(),B3(),hv(),$S(),tu(),Fi(),ZS=V3});function YS(e,n,r,a){for(var c=r-1,u=e.length;++c<u;)if(a(e[c],n))return c;return-1}var JS,H3=R(()=>{JS=YS});function di(e,n,r,a){var c=a?JS:il,u=-1,f=n.length,p=e;for(e===n&&(n=Jd(n)),r&&(p=Mi(e,Up(r)));++u<f;)for(var v=0,y=n[u],k=r?r(y):y;(v=c(p,k,v,a))>-1;)p!==e&&Py.call(p,v,1),Py.call(e,v,1);return e}var us,Py,Mf,G3=R(()=>{rs(),ii(),H3(),hv(),J0(),us=Array.prototype,Py=us.splice,Mf=di});function W3(e,n){return e&&e.length&&n&&n.length?Mf(e,n):e}var QS,q3=R(()=>{G3(),QS=W3}),bm,eE,_m=R(()=>{Fp(),q3(),bm=af(QS),eE=bm}),sc,tE,K3=R(()=>{em(),sc=uw("round"),tE=sc});function nE(e,n,r){return e==null?e:ky(e,n,r)}var ll,Cy=R(()=>{WS(),ll=nE}),Pf,Ay,rE=R(()=>{cC(),Tf(),Fp(),xi(),Pf=af(function(e,n){if(e==null)return[];var r=n.length;return r>1&&Jn(e,n[0],n[1])?n=[]:r>2&&Jn(n[0],n[1],n[2])&&(n=[n[0]]),ZS(e,Vv(n,1),[])}),Ay=Pf}),iE,oE,aE,X3=R(()=>{$v(),xp(),oy(),iE=1/0,oE=ic&&1/sm(new ic([,-0]))[1]==iE?function(e){return new ic(e)}:Yd,aE=oE});function $3(e,n,r){var a=-1,c=du,u=e.length,f=!0,p=[],v=p;if(r)f=!1,c=wy;else if(u>=sE){var y=n?null:aE(e);if(y)return sm(y);f=!1,c=ry,v=new fr}else v=n?[]:p;e:for(;++a<u;){var k=e[a],P=n?n(k):k;if(k=r||k!==0?k:0,f&&P===P){for(var T=v.length;T--;)if(v[T]===P)continue e;n&&v.push(P),p.push(k)}else c(v,P,r)||(v!==p&&v.push(P),p.push(k))}return p}var sE,lE,lc=R(()=>{bf(),Cp(),P3(),Bw(),X3(),oy(),sE=200,lE=$3});function cc(e){return e&&e.length?lE(e):[]}var xo,Iy=R(()=>{lc(),xo=cc}),Jr=R(()=>{nm(),zS(),jS(),bo(),gr(),sw(),Sf(),GS(),Ov(),K3(),Iy()}),Z3=se((e,n)=>{var r;n.exports=typeof queueMicrotask=="function"?queueMicrotask.bind(typeof window!="undefined"?window:$r):a=>(r||(r=Promise.resolve())).then(a).catch(c=>setTimeout(()=>{throw c},0))}),cE=se(e=>{var n=Symbol.for("react.element"),r=Symbol.for("react.portal"),a=Symbol.for("react.fragment"),c=Symbol.for("react.strict_mode"),u=Symbol.for("react.profiler"),f=Symbol.for("react.provider"),p=Symbol.for("react.context"),v=Symbol.for("react.forward_ref"),y=Symbol.for("react.suspense"),k=Symbol.for("react.memo"),P=Symbol.for("react.lazy"),T=Symbol.iterator;function E(ae){return ae===null||typeof ae!="object"?null:(ae=T&&ae[T]||ae["@@iterator"],typeof ae=="function"?ae:null)}var A={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},C=Object.assign,L={};function N(ae,de,Ze){this.props=ae,this.context=de,this.refs=L,this.updater=Ze||A}N.prototype.isReactComponent={},N.prototype.setState=function(ae,de){if(typeof ae!="object"&&typeof ae!="function"&&ae!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,ae,de,"setState")},N.prototype.forceUpdate=function(ae){this.updater.enqueueForceUpdate(this,ae,"forceUpdate")};function U(){}U.prototype=N.prototype;function G(ae,de,Ze){this.props=ae,this.context=de,this.refs=L,this.updater=Ze||A}var Q=G.prototype=new U;Q.constructor=G,C(Q,N.prototype),Q.isPureReactComponent=!0;var J=Array.isArray,ie=Object.prototype.hasOwnProperty,xe={current:null},Me={key:!0,ref:!0,__self:!0,__source:!0};function ue(ae,de,Ze){var et,rt={},Ue=null,$t=null;if(de!=null)for(et in de.ref!==void 0&&($t=de.ref),de.key!==void 0&&(Ue=""+de.key),de)ie.call(de,et)&&!Me.hasOwnProperty(et)&&(rt[et]=de[et]);var ht=arguments.length-2;if(ht===1)rt.children=Ze;else if(1<ht){for(var Wt=Array(ht),on=0;on<ht;on++)Wt[on]=arguments[on+2];rt.children=Wt}if(ae&&ae.defaultProps)for(et in ht=ae.defaultProps,ht)rt[et]===void 0&&(rt[et]=ht[et]);return{$$typeof:n,type:ae,key:Ue,ref:$t,props:rt,_owner:xe.current}}function Ae(ae,de){return{$$typeof:n,type:ae.type,key:de,ref:ae.ref,props:ae.props,_owner:ae._owner}}function We(ae){return typeof ae=="object"&&ae!==null&&ae.$$typeof===n}function oe(ae){var de={"=":"=0",":":"=2"};return"$"+ae.replace(/[=:]/g,function(Ze){return de[Ze]})}var De=/\/+/g;function q(ae,de){return typeof ae=="object"&&ae!==null&&ae.key!=null?oe(""+ae.key):de.toString(36)}function Fe(ae,de,Ze,et,rt){var Ue=typeof ae;(Ue==="undefined"||Ue==="boolean")&&(ae=null);var $t=!1;if(ae===null)$t=!0;else switch(Ue){case"string":case"number":$t=!0;break;case"object":switch(ae.$$typeof){case n:case r:$t=!0}}if($t)return $t=ae,rt=rt($t),ae=et===""?"."+q($t,0):et,J(rt)?(Ze="",ae!=null&&(Ze=ae.replace(De,"$&/")+"/"),Fe(rt,de,Ze,"",function(on){return on})):rt!=null&&(We(rt)&&(rt=Ae(rt,Ze+(!rt.key||$t&&$t.key===rt.key?"":(""+rt.key).replace(De,"$&/")+"/")+ae)),de.push(rt)),1;if($t=0,et=et===""?".":et+":",J(ae))for(var ht=0;ht<ae.length;ht++){Ue=ae[ht];var Wt=et+q(Ue,ht);$t+=Fe(Ue,de,Ze,Wt,rt)}else if(Wt=E(ae),typeof Wt=="function")for(ae=Wt.call(ae),ht=0;!(Ue=ae.next()).done;)Ue=Ue.value,Wt=et+q(Ue,ht++),$t+=Fe(Ue,de,Ze,Wt,rt);else if(Ue==="object")throw de=String(ae),Error("Objects are not valid as a React child (found: "+(de==="[object Object]"?"object with keys {"+Object.keys(ae).join(", ")+"}":de)+"). If you meant to render a collection of children, use an array instead.");return $t}function Pt(ae,de,Ze){if(ae==null)return ae;var et=[],rt=0;return Fe(ae,et,"","",function(Ue){return de.call(Ze,Ue,rt++)}),et}function Pe(ae){if(ae._status===-1){var de=ae._result;de=de(),de.then(function(Ze){(ae._status===0||ae._status===-1)&&(ae._status=1,ae._result=Ze)},function(Ze){(ae._status===0||ae._status===-1)&&(ae._status=2,ae._result=Ze)}),ae._status===-1&&(ae._status=0,ae._result=de)}if(ae._status===1)return ae._result.default;throw ae._result}var ke={current:null},Be={transition:null},mt={ReactCurrentDispatcher:ke,ReactCurrentBatchConfig:Be,ReactCurrentOwner:xe};e.Children={map:Pt,forEach:function(ae,de,Ze){Pt(ae,function(){de.apply(this,arguments)},Ze)},count:function(ae){var de=0;return Pt(ae,function(){de++}),de},toArray:function(ae){return Pt(ae,function(de){return de})||[]},only:function(ae){if(!We(ae))throw Error("React.Children.only expected to receive a single React element child.");return ae}},e.Component=N,e.Fragment=a,e.Profiler=u,e.PureComponent=G,e.StrictMode=c,e.Suspense=y,e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=mt,e.cloneElement=function(ae,de,Ze){if(ae==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+ae+".");var et=C({},ae.props),rt=ae.key,Ue=ae.ref,$t=ae._owner;if(de!=null){if(de.ref!==void 0&&(Ue=de.ref,$t=xe.current),de.key!==void 0&&(rt=""+de.key),ae.type&&ae.type.defaultProps)var ht=ae.type.defaultProps;for(Wt in de)ie.call(de,Wt)&&!Me.hasOwnProperty(Wt)&&(et[Wt]=de[Wt]===void 0&&ht!==void 0?ht[Wt]:de[Wt])}var Wt=arguments.length-2;if(Wt===1)et.children=Ze;else if(1<Wt){ht=Array(Wt);for(var on=0;on<Wt;on++)ht[on]=arguments[on+2];et.children=ht}return{$$typeof:n,type:ae.type,key:rt,ref:Ue,props:et,_owner:$t}},e.createContext=function(ae){return ae={$$typeof:p,_currentValue:ae,_currentValue2:ae,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},ae.Provider={$$typeof:f,_context:ae},ae.Consumer=ae},e.createElement=ue,e.createFactory=function(ae){var de=ue.bind(null,ae);return de.type=ae,de},e.createRef=function(){return{current:null}},e.forwardRef=function(ae){return{$$typeof:v,render:ae}},e.isValidElement=We,e.lazy=function(ae){return{$$typeof:P,_payload:{_status:-1,_result:ae},_init:Pe}},e.memo=function(ae,de){return{$$typeof:k,type:ae,compare:de===void 0?null:de}},e.startTransition=function(ae){var de=Be.transition;Be.transition={};try{ae()}finally{Be.transition=de}},e.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")},e.useCallback=function(ae,de){return ke.current.useCallback(ae,de)},e.useContext=function(ae){return ke.current.useContext(ae)},e.useDebugValue=function(){},e.useDeferredValue=function(ae){return ke.current.useDeferredValue(ae)},e.useEffect=function(ae,de){return ke.current.useEffect(ae,de)},e.useId=function(){return ke.current.useId()},e.useImperativeHandle=function(ae,de,Ze){return ke.current.useImperativeHandle(ae,de,Ze)},e.useInsertionEffect=function(ae,de){return ke.current.useInsertionEffect(ae,de)},e.useLayoutEffect=function(ae,de){return ke.current.useLayoutEffect(ae,de)},e.useMemo=function(ae,de){return ke.current.useMemo(ae,de)},e.useReducer=function(ae,de,Ze){return ke.current.useReducer(ae,de,Ze)},e.useRef=function(ae){return ke.current.useRef(ae)},e.useState=function(ae){return ke.current.useState(ae)},e.useSyncExternalStore=function(ae,de,Ze){return ke.current.useSyncExternalStore(ae,de,Ze)},e.useTransition=function(){return ke.current.useTransition()},e.version="18.2.0"}),Oe=se((e,n)=>{n.exports=cE()}),Dy=se(e=>{function n(ke,Be){var mt=ke.length;ke.push(Be);e:for(;0<mt;){var ae=mt-1>>>1,de=ke[ae];if(0<c(de,Be))ke[ae]=Be,ke[mt]=de,mt=ae;else break e}}function r(ke){return ke.length===0?null:ke[0]}function a(ke){if(ke.length===0)return null;var Be=ke[0],mt=ke.pop();if(mt!==Be){ke[0]=mt;e:for(var ae=0,de=ke.length,Ze=de>>>1;ae<Ze;){var et=2*(ae+1)-1,rt=ke[et],Ue=et+1,$t=ke[Ue];if(0>c(rt,mt))Ue<de&&0>c($t,rt)?(ke[ae]=$t,ke[Ue]=mt,ae=Ue):(ke[ae]=rt,ke[et]=mt,ae=et);else if(Ue<de&&0>c($t,mt))ke[ae]=$t,ke[Ue]=mt,ae=Ue;else break e}}return Be}function c(ke,Be){var mt=ke.sortIndex-Be.sortIndex;return mt!==0?mt:ke.id-Be.id}typeof performance=="object"&&typeof performance.now=="function"?(u=performance,e.unstable_now=function(){return u.now()}):(f=Date,p=f.now(),e.unstable_now=function(){return f.now()-p});var u,f,p,v=[],y=[],k=1,P=null,T=3,E=!1,A=!1,C=!1,L=typeof setTimeout=="function"?setTimeout:null,N=typeof clearTimeout=="function"?clearTimeout:null,U=typeof setImmediate!="undefined"?setImmediate:null;typeof navigator!="undefined"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function G(ke){for(var Be=r(y);Be!==null;){if(Be.callback===null)a(y);else if(Be.startTime<=ke)a(y),Be.sortIndex=Be.expirationTime,n(v,Be);else break;Be=r(y)}}function Q(ke){if(C=!1,G(ke),!A)if(r(v)!==null)A=!0,Pt(J);else{var Be=r(y);Be!==null&&Pe(Q,Be.startTime-ke)}}function J(ke,Be){A=!1,C&&(C=!1,N(Me),Me=-1),E=!0;var mt=T;try{for(G(Be),P=r(v);P!==null&&(!(P.expirationTime>Be)||ke&&!We());){var ae=P.callback;if(typeof ae=="function"){P.callback=null,T=P.priorityLevel;var de=ae(P.expirationTime<=Be);Be=e.unstable_now(),typeof de=="function"?P.callback=de:P===r(v)&&a(v),G(Be)}else a(v);P=r(v)}if(P!==null)var Ze=!0;else{var et=r(y);et!==null&&Pe(Q,et.startTime-Be),Ze=!1}return Ze}finally{P=null,T=mt,E=!1}}var ie=!1,xe=null,Me=-1,ue=5,Ae=-1;function We(){return!(e.unstable_now()-Ae<ue)}function oe(){if(xe!==null){var ke=e.unstable_now();Ae=ke;var Be=!0;try{Be=xe(!0,ke)}finally{Be?De():(ie=!1,xe=null)}}else ie=!1}var De;typeof U=="function"?De=function(){U(oe)}:typeof MessageChannel!="undefined"?(q=new MessageChannel,Fe=q.port2,q.port1.onmessage=oe,De=function(){Fe.postMessage(null)}):De=function(){L(oe,0)};var q,Fe;function Pt(ke){xe=ke,ie||(ie=!0,De())}function Pe(ke,Be){Me=L(function(){ke(e.unstable_now())},Be)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(ke){ke.callback=null},e.unstable_continueExecution=function(){A||E||(A=!0,Pt(J))},e.unstable_forceFrameRate=function(ke){0>ke||125<ke?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):ue=0<ke?Math.floor(1e3/ke):5},e.unstable_getCurrentPriorityLevel=function(){return T},e.unstable_getFirstCallbackNode=function(){return r(v)},e.unstable_next=function(ke){switch(T){case 1:case 2:case 3:var Be=3;break;default:Be=T}var mt=T;T=Be;try{return ke()}finally{T=mt}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(ke,Be){switch(ke){case 1:case 2:case 3:case 4:case 5:break;default:ke=3}var mt=T;T=ke;try{return Be()}finally{T=mt}},e.unstable_scheduleCallback=function(ke,Be,mt){var ae=e.unstable_now();switch(typeof mt=="object"&&mt!==null?(mt=mt.delay,mt=typeof mt=="number"&&0<mt?ae+mt:ae):mt=ae,ke){case 1:var de=-1;break;case 2:de=250;break;case 5:de=1073741823;break;case 4:de=1e4;break;default:de=5e3}return de=mt+de,ke={id:k++,callback:Be,priorityLevel:ke,startTime:mt,expirationTime:de,sortIndex:-1},mt>ae?(ke.sortIndex=mt,n(y,ke),r(v)===null&&ke===r(y)&&(C?(N(Me),Me=-1):C=!0,Pe(Q,mt-ae))):(ke.sortIndex=de,n(v,ke),A||E||(A=!0,Pt(J))),ke},e.unstable_shouldYield=We,e.unstable_wrapCallback=function(ke){var Be=T;return function(){var mt=T;T=Be;try{return ke.apply(this,arguments)}finally{T=mt}}}}),Y3=se((e,n)=>{n.exports=Dy()}),J3=se(e=>{var n=Oe(),r=Y3();function a(o){for(var s="https://reactjs.org/docs/error-decoder.html?invariant="+o,m=1;m<arguments.length;m++)s+="&args[]="+encodeURIComponent(arguments[m]);return"Minified React error #"+o+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var c=new Set,u={};function f(o,s){p(o,s),p(o+"Capture",s)}function p(o,s){for(u[o]=s,o=0;o<s.length;o++)c.add(s[o])}var v=!(typeof window=="undefined"||typeof window.document=="undefined"||typeof window.document.createElement=="undefined"),y=Object.prototype.hasOwnProperty,k=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,P={},T={};function E(o){return y.call(T,o)?!0:y.call(P,o)?!1:k.test(o)?T[o]=!0:(P[o]=!0,!1)}function A(o,s,m,S){if(m!==null&&m.type===0)return!1;switch(typeof s){case"function":case"symbol":return!0;case"boolean":return S?!1:m!==null?!m.acceptsBooleans:(o=o.toLowerCase().slice(0,5),o!=="data-"&&o!=="aria-");default:return!1}}function C(o,s,m,S){if(s===null||typeof s=="undefined"||A(o,s,m,S))return!0;if(S)return!1;if(m!==null)switch(m.type){case 3:return!s;case 4:return s===!1;case 5:return isNaN(s);case 6:return isNaN(s)||1>s}return!1}function L(o,s,m,S,z,V,re){this.acceptsBooleans=s===2||s===3||s===4,this.attributeName=S,this.attributeNamespace=z,this.mustUseProperty=m,this.propertyName=o,this.type=s,this.sanitizeURL=V,this.removeEmptyString=re}var N={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(o){N[o]=new L(o,0,!1,o,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(o){var s=o[0];N[s]=new L(s,1,!1,o[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(o){N[o]=new L(o,2,!1,o.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(o){N[o]=new L(o,2,!1,o,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(o){N[o]=new L(o,3,!1,o.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(o){N[o]=new L(o,3,!0,o,null,!1,!1)}),["capture","download"].forEach(function(o){N[o]=new L(o,4,!1,o,null,!1,!1)}),["cols","rows","size","span"].forEach(function(o){N[o]=new L(o,6,!1,o,null,!1,!1)}),["rowSpan","start"].forEach(function(o){N[o]=new L(o,5,!1,o.toLowerCase(),null,!1,!1)});var U=/[\-:]([a-z])/g;function G(o){return o[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(o){var s=o.replace(U,G);N[s]=new L(s,1,!1,o,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(o){var s=o.replace(U,G);N[s]=new L(s,1,!1,o,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(o){var s=o.replace(U,G);N[s]=new L(s,1,!1,o,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(o){N[o]=new L(o,1,!1,o.toLowerCase(),null,!1,!1)}),N.xlinkHref=new L("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(o){N[o]=new L(o,1,!1,o.toLowerCase(),null,!0,!0)});function Q(o,s,m,S){var z=N.hasOwnProperty(s)?N[s]:null;(z!==null?z.type!==0:S||!(2<s.length)||s[0]!=="o"&&s[0]!=="O"||s[1]!=="n"&&s[1]!=="N")&&(C(s,m,z,S)&&(m=null),S||z===null?E(s)&&(m===null?o.removeAttribute(s):o.setAttribute(s,""+m)):z.mustUseProperty?o[z.propertyName]=m===null?z.type===3?!1:"":m:(s=z.attributeName,S=z.attributeNamespace,m===null?o.removeAttribute(s):(z=z.type,m=z===3||z===4&&m===!0?"":""+m,S?o.setAttributeNS(S,s,m):o.setAttribute(s,m))))}var J=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,ie=Symbol.for("react.element"),xe=Symbol.for("react.portal"),Me=Symbol.for("react.fragment"),ue=Symbol.for("react.strict_mode"),Ae=Symbol.for("react.profiler"),We=Symbol.for("react.provider"),oe=Symbol.for("react.context"),De=Symbol.for("react.forward_ref"),q=Symbol.for("react.suspense"),Fe=Symbol.for("react.suspense_list"),Pt=Symbol.for("react.memo"),Pe=Symbol.for("react.lazy"),ke=Symbol.for("react.offscreen"),Be=Symbol.iterator;function mt(o){return o===null||typeof o!="object"?null:(o=Be&&o[Be]||o["@@iterator"],typeof o=="function"?o:null)}var ae=Object.assign,de;function Ze(o){if(de===void 0)try{throw Error()}catch(m){var s=m.stack.trim().match(/\n( *(at )?)/);de=s&&s[1]||""}return`
`+de+o}var et=!1;function rt(o,s){if(!o||et)return"";et=!0;var m=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(s)if(s=function(){throw Error()},Object.defineProperty(s.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(s,[])}catch(st){var S=st}Reflect.construct(o,[],s)}else{try{s.call()}catch(st){S=st}o.call(s.prototype)}else{try{throw Error()}catch(st){S=st}o()}}catch(st){if(st&&S&&typeof st.stack=="string"){for(var z=st.stack.split(`
`),V=S.stack.split(`
`),re=z.length-1,Ee=V.length-1;1<=re&&0<=Ee&&z[re]!==V[Ee];)Ee--;for(;1<=re&&0<=Ee;re--,Ee--)if(z[re]!==V[Ee]){if(re!==1||Ee!==1)do if(re--,Ee--,0>Ee||z[re]!==V[Ee]){var Le=`
`+z[re].replace(" at new "," at ");return o.displayName&&Le.includes("<anonymous>")&&(Le=Le.replace("<anonymous>",o.displayName)),Le}while(1<=re&&0<=Ee);break}}}finally{et=!1,Error.prepareStackTrace=m}return(o=o?o.displayName||o.name:"")?Ze(o):""}function Ue(o){switch(o.tag){case 5:return Ze(o.type);case 16:return Ze("Lazy");case 13:return Ze("Suspense");case 19:return Ze("SuspenseList");case 0:case 2:case 15:return o=rt(o.type,!1),o;case 11:return o=rt(o.type.render,!1),o;case 1:return o=rt(o.type,!0),o;default:return""}}function $t(o){if(o==null)return null;if(typeof o=="function")return o.displayName||o.name||null;if(typeof o=="string")return o;switch(o){case Me:return"Fragment";case xe:return"Portal";case Ae:return"Profiler";case ue:return"StrictMode";case q:return"Suspense";case Fe:return"SuspenseList"}if(typeof o=="object")switch(o.$$typeof){case oe:return(o.displayName||"Context")+".Consumer";case We:return(o._context.displayName||"Context")+".Provider";case De:var s=o.render;return o=o.displayName,o||(o=s.displayName||s.name||"",o=o!==""?"ForwardRef("+o+")":"ForwardRef"),o;case Pt:return s=o.displayName||null,s!==null?s:$t(o.type)||"Memo";case Pe:s=o._payload,o=o._init;try{return $t(o(s))}catch{}}return null}function ht(o){var s=o.type;switch(o.tag){case 24:return"Cache";case 9:return(s.displayName||"Context")+".Consumer";case 10:return(s._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return o=s.render,o=o.displayName||o.name||"",s.displayName||(o!==""?"ForwardRef("+o+")":"ForwardRef");case 7:return"Fragment";case 5:return s;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return $t(s);case 8:return s===ue?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof s=="function")return s.displayName||s.name||null;if(typeof s=="string")return s}return null}function Wt(o){switch(typeof o){case"boolean":case"number":case"string":case"undefined":return o;case"object":return o;default:return""}}function on(o){var s=o.type;return(o=o.nodeName)&&o.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function gn(o){var s=on(o)?"checked":"value",m=Object.getOwnPropertyDescriptor(o.constructor.prototype,s),S=""+o[s];if(!o.hasOwnProperty(s)&&typeof m!="undefined"&&typeof m.get=="function"&&typeof m.set=="function"){var z=m.get,V=m.set;return Object.defineProperty(o,s,{configurable:!0,get:function(){return z.call(this)},set:function(re){S=""+re,V.call(this,re)}}),Object.defineProperty(o,s,{enumerable:m.enumerable}),{getValue:function(){return S},setValue:function(re){S=""+re},stopTracking:function(){o._valueTracker=null,delete o[s]}}}}function dn(o){o._valueTracker||(o._valueTracker=gn(o))}function sr(o){if(!o)return!1;var s=o._valueTracker;if(!s)return!0;var m=s.getValue(),S="";return o&&(S=on(o)?o.checked?"true":"false":o.value),o=S,o!==m?(s.setValue(o),!0):!1}function $(o){if(o=o||(typeof document!="undefined"?document:void 0),typeof o=="undefined")return null;try{return o.activeElement||o.body}catch{return o.body}}function ot(o,s){var m=s.checked;return ae({},s,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:m!=null?m:o._wrapperState.initialChecked})}function it(o,s){var m=s.defaultValue==null?"":s.defaultValue,S=s.checked!=null?s.checked:s.defaultChecked;m=Wt(s.value!=null?s.value:m),o._wrapperState={initialChecked:S,initialValue:m,controlled:s.type==="checkbox"||s.type==="radio"?s.checked!=null:s.value!=null}}function be(o,s){s=s.checked,s!=null&&Q(o,"checked",s,!1)}function ge(o,s){be(o,s);var m=Wt(s.value),S=s.type;if(m!=null)S==="number"?(m===0&&o.value===""||o.value!=m)&&(o.value=""+m):o.value!==""+m&&(o.value=""+m);else if(S==="submit"||S==="reset"){o.removeAttribute("value");return}s.hasOwnProperty("value")?vt(o,s.type,m):s.hasOwnProperty("defaultValue")&&vt(o,s.type,Wt(s.defaultValue)),s.checked==null&&s.defaultChecked!=null&&(o.defaultChecked=!!s.defaultChecked)}function Ve(o,s,m){if(s.hasOwnProperty("value")||s.hasOwnProperty("defaultValue")){var S=s.type;if(!(S!=="submit"&&S!=="reset"||s.value!==void 0&&s.value!==null))return;s=""+o._wrapperState.initialValue,m||s===o.value||(o.value=s),o.defaultValue=s}m=o.name,m!==""&&(o.name=""),o.defaultChecked=!!o._wrapperState.initialChecked,m!==""&&(o.name=m)}function vt(o,s,m){(s!=="number"||$(o.ownerDocument)!==o)&&(m==null?o.defaultValue=""+o._wrapperState.initialValue:o.defaultValue!==""+m&&(o.defaultValue=""+m))}var wt=Array.isArray;function Ye(o,s,m,S){if(o=o.options,s){s={};for(var z=0;z<m.length;z++)s["$"+m[z]]=!0;for(m=0;m<o.length;m++)z=s.hasOwnProperty("$"+o[m].value),o[m].selected!==z&&(o[m].selected=z),z&&S&&(o[m].defaultSelected=!0)}else{for(m=""+Wt(m),s=null,z=0;z<o.length;z++){if(o[z].value===m){o[z].selected=!0,S&&(o[z].defaultSelected=!0);return}s!==null||o[z].disabled||(s=o[z])}s!==null&&(s.selected=!0)}}function Ct(o,s){if(s.dangerouslySetInnerHTML!=null)throw Error(a(91));return ae({},s,{value:void 0,defaultValue:void 0,children:""+o._wrapperState.initialValue})}function _t(o,s){var m=s.value;if(m==null){if(m=s.children,s=s.defaultValue,m!=null){if(s!=null)throw Error(a(92));if(wt(m)){if(1<m.length)throw Error(a(93));m=m[0]}s=m}s==null&&(s=""),m=s}o._wrapperState={initialValue:Wt(m)}}function St(o,s){var m=Wt(s.value),S=Wt(s.defaultValue);m!=null&&(m=""+m,m!==o.value&&(o.value=m),s.defaultValue==null&&o.defaultValue!==m&&(o.defaultValue=m)),S!=null&&(o.defaultValue=""+S)}function un(o){var s=o.textContent;s===o._wrapperState.initialValue&&s!==""&&s!==null&&(o.value=s)}function ir(o){switch(o){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Pn(o,s){return o==null||o==="http://www.w3.org/1999/xhtml"?ir(s):o==="http://www.w3.org/2000/svg"&&s==="foreignObject"?"http://www.w3.org/1999/xhtml":o}var Zi,gd=function(o){return typeof MSApp!="undefined"&&MSApp.execUnsafeLocalFunction?function(s,m,S,z){MSApp.execUnsafeLocalFunction(function(){return o(s,m,S,z)})}:o}(function(o,s){if(o.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in o)o.innerHTML=s;else{for(Zi=Zi||document.createElement("div"),Zi.innerHTML="<svg>"+s.valueOf().toString()+"</svg>",s=Zi.firstChild;o.firstChild;)o.removeChild(o.firstChild);for(;s.firstChild;)o.appendChild(s.firstChild)}});function lo(o,s){if(s){var m=o.firstChild;if(m&&m===o.lastChild&&m.nodeType===3){m.nodeValue=s;return}}o.textContent=s}var Ds={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},qr=["Webkit","ms","Moz","O"];Object.keys(Ds).forEach(function(o){qr.forEach(function(s){s=s+o.charAt(0).toUpperCase()+o.substring(1),Ds[s]=Ds[o]})});function wh(o,s,m){return s==null||typeof s=="boolean"||s===""?"":m||typeof s!="number"||s===0||Ds.hasOwnProperty(o)&&Ds[o]?(""+s).trim():s+"px"}function Dg(o,s){o=o.style;for(var m in s)if(s.hasOwnProperty(m)){var S=m.indexOf("--")===0,z=wh(m,s[m],S);m==="float"&&(m="cssFloat"),S?o.setProperty(m,z):o[m]=z}}var Os=ae({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Og(o,s){if(s){if(Os[o]&&(s.children!=null||s.dangerouslySetInnerHTML!=null))throw Error(a(137,o));if(s.dangerouslySetInnerHTML!=null){if(s.children!=null)throw Error(a(60));if(typeof s.dangerouslySetInnerHTML!="object"||!("__html"in s.dangerouslySetInnerHTML))throw Error(a(61))}if(s.style!=null&&typeof s.style!="object")throw Error(a(62))}}function E_(o,s){if(o.indexOf("-")===-1)return typeof s.is=="string";switch(o){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var k_=null;function T_(o){return o=o.target||o.srcElement||window,o.correspondingUseElement&&(o=o.correspondingUseElement),o.nodeType===3?o.parentNode:o}var Rg=null,Ga=null,Rs=null;function UJ(o){if(o=K_(o)){if(typeof Rg!="function")throw Error(a(280));var s=o.stateNode;s&&(s=ZT(s),Rg(o.stateNode,o.type,s))}}function VJ(o){Ga?Rs?Rs.push(o):Rs=[o]:Ga=o}function HJ(){if(Ga){var o=Ga,s=Rs;if(Rs=Ga=null,UJ(o),s)for(o=0;o<s.length;o++)UJ(s[o])}}function GJ(o,s){return o(s)}function WJ(){}var uR=!1;function qJ(o,s,m){if(uR)return o(s,m);uR=!0;try{return GJ(o,s,m)}finally{uR=!1,(Ga!==null||Rs!==null)&&(WJ(),HJ())}}function M_(o,s){var m=o.stateNode;if(m===null)return null;var S=ZT(m);if(S===null)return null;m=S[s];e:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(S=!S.disabled)||(o=o.type,S=!(o==="button"||o==="input"||o==="select"||o==="textarea")),o=!S;break e;default:o=!1}if(o)return null;if(m&&typeof m!="function")throw Error(a(231,s,typeof m));return m}var dR=!1;if(v)try{Lg={},Object.defineProperty(Lg,"passive",{get:function(){dR=!0}}),window.addEventListener("test",Lg,Lg),window.removeEventListener("test",Lg,Lg)}catch{dR=!1}var Lg;function Ofe(o,s,m,S,z,V,re,Ee,Le){var st=Array.prototype.slice.call(arguments,3);try{s.apply(m,st)}catch(Dt){this.onError(Dt)}}var P_=!1,kT=null,TT=!1,fR=null,Rfe={onError:function(o){P_=!0,kT=o}};function Lfe(o,s,m,S,z,V,re,Ee,Le){P_=!1,kT=null,Ofe.apply(Rfe,arguments)}function zfe(o,s,m,S,z,V,re,Ee,Le){if(Lfe.apply(this,arguments),P_){if(P_){var st=kT;P_=!1,kT=null}else throw Error(a(198));TT||(TT=!0,fR=st)}}function Sh(o){var s=o,m=o;if(o.alternate)for(;s.return;)s=s.return;else{o=s;do s=o,s.flags&4098&&(m=s.return),o=s.return;while(o)}return s.tag===3?m:null}function KJ(o){if(o.tag===13){var s=o.memoizedState;if(s===null&&(o=o.alternate,o!==null&&(s=o.memoizedState)),s!==null)return s.dehydrated}return null}function XJ(o){if(Sh(o)!==o)throw Error(a(188))}function Nfe(o){var s=o.alternate;if(!s){if(s=Sh(o),s===null)throw Error(a(188));return s!==o?null:o}for(var m=o,S=s;;){var z=m.return;if(z===null)break;var V=z.alternate;if(V===null){if(S=z.return,S!==null){m=S;continue}break}if(z.child===V.child){for(V=z.child;V;){if(V===m)return XJ(z),o;if(V===S)return XJ(z),s;V=V.sibling}throw Error(a(188))}if(m.return!==S.return)m=z,S=V;else{for(var re=!1,Ee=z.child;Ee;){if(Ee===m){re=!0,m=z,S=V;break}if(Ee===S){re=!0,S=z,m=V;break}Ee=Ee.sibling}if(!re){for(Ee=V.child;Ee;){if(Ee===m){re=!0,m=V,S=z;break}if(Ee===S){re=!0,S=V,m=z;break}Ee=Ee.sibling}if(!re)throw Error(a(189))}}if(m.alternate!==S)throw Error(a(190))}if(m.tag!==3)throw Error(a(188));return m.stateNode.current===m?o:s}function $J(o){return o=Nfe(o),o!==null?ZJ(o):null}function ZJ(o){if(o.tag===5||o.tag===6)return o;for(o=o.child;o!==null;){var s=ZJ(o);if(s!==null)return s;o=o.sibling}return null}var YJ=r.unstable_scheduleCallback,JJ=r.unstable_cancelCallback,Ffe=r.unstable_shouldYield,jfe=r.unstable_requestPaint,si=r.unstable_now,Bfe=r.unstable_getCurrentPriorityLevel,hR=r.unstable_ImmediatePriority,QJ=r.unstable_UserBlockingPriority,MT=r.unstable_NormalPriority,Ufe=r.unstable_LowPriority,eQ=r.unstable_IdlePriority,PT=null,zl=null;function Vfe(o){if(zl&&typeof zl.onCommitFiberRoot=="function")try{zl.onCommitFiberRoot(PT,o,void 0,(o.current.flags&128)===128)}catch{}}var Ls=Math.clz32?Math.clz32:Wfe,Hfe=Math.log,Gfe=Math.LN2;function Wfe(o){return o>>>=0,o===0?32:31-(Hfe(o)/Gfe|0)|0}var CT=64,AT=4194304;function C_(o){switch(o&-o){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return o&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return o}}function IT(o,s){var m=o.pendingLanes;if(m===0)return 0;var S=0,z=o.suspendedLanes,V=o.pingedLanes,re=m&268435455;if(re!==0){var Ee=re&~z;Ee!==0?S=C_(Ee):(V&=re,V!==0&&(S=C_(V)))}else re=m&~z,re!==0?S=C_(re):V!==0&&(S=C_(V));if(S===0)return 0;if(s!==0&&s!==S&&!(s&z)&&(z=S&-S,V=s&-s,z>=V||z===16&&(V&4194240)!==0))return s;if(S&4&&(S|=m&16),s=o.entangledLanes,s!==0)for(o=o.entanglements,s&=S;0<s;)m=31-Ls(s),z=1<<m,S|=o[m],s&=~z;return S}function qfe(o,s){switch(o){case 1:case 2:case 4:return s+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Kfe(o,s){for(var m=o.suspendedLanes,S=o.pingedLanes,z=o.expirationTimes,V=o.pendingLanes;0<V;){var re=31-Ls(V),Ee=1<<re,Le=z[re];Le===-1?(!(Ee&m)||Ee&S)&&(z[re]=qfe(Ee,s)):Le<=s&&(o.expiredLanes|=Ee),V&=~Ee}}function pR(o){return o=o.pendingLanes&-1073741825,o!==0?o:o&1073741824?1073741824:0}function tQ(){var o=CT;return CT<<=1,!(CT&4194240)&&(CT=64),o}function mR(o){for(var s=[],m=0;31>m;m++)s.push(o);return s}function A_(o,s,m){o.pendingLanes|=s,s!==536870912&&(o.suspendedLanes=0,o.pingedLanes=0),o=o.eventTimes,s=31-Ls(s),o[s]=m}function Xfe(o,s){var m=o.pendingLanes&~s;o.pendingLanes=s,o.suspendedLanes=0,o.pingedLanes=0,o.expiredLanes&=s,o.mutableReadLanes&=s,o.entangledLanes&=s,s=o.entanglements;var S=o.eventTimes;for(o=o.expirationTimes;0<m;){var z=31-Ls(m),V=1<<z;s[z]=0,S[z]=-1,o[z]=-1,m&=~V}}function gR(o,s){var m=o.entangledLanes|=s;for(o=o.entanglements;m;){var S=31-Ls(m),z=1<<S;z&s|o[S]&s&&(o[S]|=s),m&=~z}}var yr=0;function nQ(o){return o&=-o,1<o?4<o?o&268435455?16:536870912:4:1}var rQ,vR,iQ,oQ,aQ,yR=!1,DT=[],vd=null,yd=null,bd=null,I_=new Map,D_=new Map,_d=[],$fe="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function sQ(o,s){switch(o){case"focusin":case"focusout":vd=null;break;case"dragenter":case"dragleave":yd=null;break;case"mouseover":case"mouseout":bd=null;break;case"pointerover":case"pointerout":I_.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":D_.delete(s.pointerId)}}function O_(o,s,m,S,z,V){return o===null||o.nativeEvent!==V?(o={blockedOn:s,domEventName:m,eventSystemFlags:S,nativeEvent:V,targetContainers:[z]},s!==null&&(s=K_(s),s!==null&&vR(s)),o):(o.eventSystemFlags|=S,s=o.targetContainers,z!==null&&s.indexOf(z)===-1&&s.push(z),o)}function Zfe(o,s,m,S,z){switch(s){case"focusin":return vd=O_(vd,o,s,m,S,z),!0;case"dragenter":return yd=O_(yd,o,s,m,S,z),!0;case"mouseover":return bd=O_(bd,o,s,m,S,z),!0;case"pointerover":var V=z.pointerId;return I_.set(V,O_(I_.get(V)||null,o,s,m,S,z)),!0;case"gotpointercapture":return V=z.pointerId,D_.set(V,O_(D_.get(V)||null,o,s,m,S,z)),!0}return!1}function lQ(o){var s=Eh(o.target);if(s!==null){var m=Sh(s);if(m!==null){if(s=m.tag,s===13){if(s=KJ(m),s!==null){o.blockedOn=s,aQ(o.priority,function(){iQ(m)});return}}else if(s===3&&m.stateNode.current.memoizedState.isDehydrated){o.blockedOn=m.tag===3?m.stateNode.containerInfo:null;return}}}o.blockedOn=null}function OT(o){if(o.blockedOn!==null)return!1;for(var s=o.targetContainers;0<s.length;){var m=_R(o.domEventName,o.eventSystemFlags,s[0],o.nativeEvent);if(m===null){m=o.nativeEvent;var S=new m.constructor(m.type,m);k_=S,m.target.dispatchEvent(S),k_=null}else return s=K_(m),s!==null&&vR(s),o.blockedOn=m,!1;s.shift()}return!0}function cQ(o,s,m){OT(o)&&m.delete(s)}function Yfe(){yR=!1,vd!==null&&OT(vd)&&(vd=null),yd!==null&&OT(yd)&&(yd=null),bd!==null&&OT(bd)&&(bd=null),I_.forEach(cQ),D_.forEach(cQ)}function R_(o,s){o.blockedOn===s&&(o.blockedOn=null,yR||(yR=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,Yfe)))}function L_(o){function s(z){return R_(z,o)}if(0<DT.length){R_(DT[0],o);for(var m=1;m<DT.length;m++){var S=DT[m];S.blockedOn===o&&(S.blockedOn=null)}}for(vd!==null&&R_(vd,o),yd!==null&&R_(yd,o),bd!==null&&R_(bd,o),I_.forEach(s),D_.forEach(s),m=0;m<_d.length;m++)S=_d[m],S.blockedOn===o&&(S.blockedOn=null);for(;0<_d.length&&(m=_d[0],m.blockedOn===null);)lQ(m),m.blockedOn===null&&_d.shift()}var zg=J.ReactCurrentBatchConfig,RT=!0;function Jfe(o,s,m,S){var z=yr,V=zg.transition;zg.transition=null;try{yr=1,bR(o,s,m,S)}finally{yr=z,zg.transition=V}}function Qfe(o,s,m,S){var z=yr,V=zg.transition;zg.transition=null;try{yr=4,bR(o,s,m,S)}finally{yr=z,zg.transition=V}}function bR(o,s,m,S){if(RT){var z=_R(o,s,m,S);if(z===null)LR(o,s,S,LT,m),sQ(o,S);else if(Zfe(z,o,s,m,S))S.stopPropagation();else if(sQ(o,S),s&4&&-1<$fe.indexOf(o)){for(;z!==null;){var V=K_(z);if(V!==null&&rQ(V),V=_R(o,s,m,S),V===null&&LR(o,s,S,LT,m),V===z)break;z=V}z!==null&&S.stopPropagation()}else LR(o,s,S,null,m)}}var LT=null;function _R(o,s,m,S){if(LT=null,o=T_(S),o=Eh(o),o!==null)if(s=Sh(o),s===null)o=null;else if(m=s.tag,m===13){if(o=KJ(s),o!==null)return o;o=null}else if(m===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;o=null}else s!==o&&(o=null);return LT=o,null}function uQ(o){switch(o){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Bfe()){case hR:return 1;case QJ:return 4;case MT:case Ufe:return 16;case eQ:return 536870912;default:return 16}default:return 16}}var xd=null,xR=null,zT=null;function dQ(){if(zT)return zT;var o,s=xR,m=s.length,S,z="value"in xd?xd.value:xd.textContent,V=z.length;for(o=0;o<m&&s[o]===z[o];o++);var re=m-o;for(S=1;S<=re&&s[m-S]===z[V-S];S++);return zT=z.slice(o,1<S?1-S:void 0)}function NT(o){var s=o.keyCode;return"charCode"in o?(o=o.charCode,o===0&&s===13&&(o=13)):o=s,o===10&&(o=13),32<=o||o===13?o:0}function FT(){return!0}function fQ(){return!1}function ma(o){function s(m,S,z,V,re){this._reactName=m,this._targetInst=z,this.type=S,this.nativeEvent=V,this.target=re,this.currentTarget=null;for(var Ee in o)o.hasOwnProperty(Ee)&&(m=o[Ee],this[Ee]=m?m(V):V[Ee]);return this.isDefaultPrevented=(V.defaultPrevented!=null?V.defaultPrevented:V.returnValue===!1)?FT:fQ,this.isPropagationStopped=fQ,this}return ae(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var m=this.nativeEvent;m&&(m.preventDefault?m.preventDefault():typeof m.returnValue!="unknown"&&(m.returnValue=!1),this.isDefaultPrevented=FT)},stopPropagation:function(){var m=this.nativeEvent;m&&(m.stopPropagation?m.stopPropagation():typeof m.cancelBubble!="unknown"&&(m.cancelBubble=!0),this.isPropagationStopped=FT)},persist:function(){},isPersistent:FT}),s}var Ng={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(o){return o.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},wR=ma(Ng),z_=ae({},Ng,{view:0,detail:0}),ehe=ma(z_),SR,ER,N_,jT=ae({},z_,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:TR,button:0,buttons:0,relatedTarget:function(o){return o.relatedTarget===void 0?o.fromElement===o.srcElement?o.toElement:o.fromElement:o.relatedTarget},movementX:function(o){return"movementX"in o?o.movementX:(o!==N_&&(N_&&o.type==="mousemove"?(SR=o.screenX-N_.screenX,ER=o.screenY-N_.screenY):ER=SR=0,N_=o),SR)},movementY:function(o){return"movementY"in o?o.movementY:ER}}),hQ=ma(jT),the=ae({},jT,{dataTransfer:0}),nhe=ma(the),rhe=ae({},z_,{relatedTarget:0}),kR=ma(rhe),ihe=ae({},Ng,{animationName:0,elapsedTime:0,pseudoElement:0}),ohe=ma(ihe),ahe=ae({},Ng,{clipboardData:function(o){return"clipboardData"in o?o.clipboardData:window.clipboardData}}),she=ma(ahe),lhe=ae({},Ng,{data:0}),pQ=ma(lhe),che={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},uhe={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},dhe={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function fhe(o){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(o):(o=dhe[o])?!!s[o]:!1}function TR(){return fhe}var hhe=ae({},z_,{key:function(o){if(o.key){var s=che[o.key]||o.key;if(s!=="Unidentified")return s}return o.type==="keypress"?(o=NT(o),o===13?"Enter":String.fromCharCode(o)):o.type==="keydown"||o.type==="keyup"?uhe[o.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:TR,charCode:function(o){return o.type==="keypress"?NT(o):0},keyCode:function(o){return o.type==="keydown"||o.type==="keyup"?o.keyCode:0},which:function(o){return o.type==="keypress"?NT(o):o.type==="keydown"||o.type==="keyup"?o.keyCode:0}}),phe=ma(hhe),mhe=ae({},jT,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),mQ=ma(mhe),ghe=ae({},z_,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:TR}),vhe=ma(ghe),yhe=ae({},Ng,{propertyName:0,elapsedTime:0,pseudoElement:0}),bhe=ma(yhe),_he=ae({},jT,{deltaX:function(o){return"deltaX"in o?o.deltaX:"wheelDeltaX"in o?-o.wheelDeltaX:0},deltaY:function(o){return"deltaY"in o?o.deltaY:"wheelDeltaY"in o?-o.wheelDeltaY:"wheelDelta"in o?-o.wheelDelta:0},deltaZ:0,deltaMode:0}),xhe=ma(_he),whe=[9,13,27,32],MR=v&&"CompositionEvent"in window,F_=null;v&&"documentMode"in document&&(F_=document.documentMode);var She=v&&"TextEvent"in window&&!F_,gQ=v&&(!MR||F_&&8<F_&&11>=F_),vQ=String.fromCharCode(32),yQ=!1;function bQ(o,s){switch(o){case"keyup":return whe.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function _Q(o){return o=o.detail,typeof o=="object"&&"data"in o?o.data:null}var Fg=!1;function Ehe(o,s){switch(o){case"compositionend":return _Q(s);case"keypress":return s.which!==32?null:(yQ=!0,vQ);case"textInput":return o=s.data,o===vQ&&yQ?null:o;default:return null}}function khe(o,s){if(Fg)return o==="compositionend"||!MR&&bQ(o,s)?(o=dQ(),zT=xR=xd=null,Fg=!1,o):null;switch(o){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return gQ&&s.locale!=="ko"?null:s.data;default:return null}}var The={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function xQ(o){var s=o&&o.nodeName&&o.nodeName.toLowerCase();return s==="input"?!!The[o.type]:s==="textarea"}function wQ(o,s,m,S){VJ(S),s=KT(s,"onChange"),0<s.length&&(m=new wR("onChange","change",null,m,S),o.push({event:m,listeners:s}))}var j_=null,B_=null;function Mhe(o){UQ(o,0)}function BT(o){var s=Hg(o);if(sr(s))return o}function Phe(o,s){if(o==="change")return s}var SQ=!1;v&&(v?(UT="oninput"in document,UT||(CR=document.createElement("div"),CR.setAttribute("oninput","return;"),UT=typeof CR.oninput=="function"),PR=UT):PR=!1,SQ=PR&&(!document.documentMode||9<document.documentMode));var PR,UT,CR;function EQ(){j_&&(j_.detachEvent("onpropertychange",kQ),B_=j_=null)}function kQ(o){if(o.propertyName==="value"&&BT(B_)){var s=[];wQ(s,B_,o,T_(o)),qJ(Mhe,s)}}function Che(o,s,m){o==="focusin"?(EQ(),j_=s,B_=m,j_.attachEvent("onpropertychange",kQ)):o==="focusout"&&EQ()}function Ahe(o){if(o==="selectionchange"||o==="keyup"||o==="keydown")return BT(B_)}function Ihe(o,s){if(o==="click")return BT(s)}function Dhe(o,s){if(o==="input"||o==="change")return BT(s)}function Ohe(o,s){return o===s&&(o!==0||1/o===1/s)||o!==o&&s!==s}var zs=typeof Object.is=="function"?Object.is:Ohe;function U_(o,s){if(zs(o,s))return!0;if(typeof o!="object"||o===null||typeof s!="object"||s===null)return!1;var m=Object.keys(o),S=Object.keys(s);if(m.length!==S.length)return!1;for(S=0;S<m.length;S++){var z=m[S];if(!y.call(s,z)||!zs(o[z],s[z]))return!1}return!0}function TQ(o){for(;o&&o.firstChild;)o=o.firstChild;return o}function MQ(o,s){var m=TQ(o);o=0;for(var S;m;){if(m.nodeType===3){if(S=o+m.textContent.length,o<=s&&S>=s)return{node:m,offset:s-o};o=S}e:{for(;m;){if(m.nextSibling){m=m.nextSibling;break e}m=m.parentNode}m=void 0}m=TQ(m)}}function PQ(o,s){return o&&s?o===s?!0:o&&o.nodeType===3?!1:s&&s.nodeType===3?PQ(o,s.parentNode):"contains"in o?o.contains(s):o.compareDocumentPosition?!!(o.compareDocumentPosition(s)&16):!1:!1}function CQ(){for(var o=window,s=$();s instanceof o.HTMLIFrameElement;){try{var m=typeof s.contentWindow.location.href=="string"}catch{m=!1}if(m)o=s.contentWindow;else break;s=$(o.document)}return s}function AR(o){var s=o&&o.nodeName&&o.nodeName.toLowerCase();return s&&(s==="input"&&(o.type==="text"||o.type==="search"||o.type==="tel"||o.type==="url"||o.type==="password")||s==="textarea"||o.contentEditable==="true")}function Rhe(o){var s=CQ(),m=o.focusedElem,S=o.selectionRange;if(s!==m&&m&&m.ownerDocument&&PQ(m.ownerDocument.documentElement,m)){if(S!==null&&AR(m)){if(s=S.start,o=S.end,o===void 0&&(o=s),"selectionStart"in m)m.selectionStart=s,m.selectionEnd=Math.min(o,m.value.length);else if(o=(s=m.ownerDocument||document)&&s.defaultView||window,o.getSelection){o=o.getSelection();var z=m.textContent.length,V=Math.min(S.start,z);S=S.end===void 0?V:Math.min(S.end,z),!o.extend&&V>S&&(z=S,S=V,V=z),z=MQ(m,V);var re=MQ(m,S);z&&re&&(o.rangeCount!==1||o.anchorNode!==z.node||o.anchorOffset!==z.offset||o.focusNode!==re.node||o.focusOffset!==re.offset)&&(s=s.createRange(),s.setStart(z.node,z.offset),o.removeAllRanges(),V>S?(o.addRange(s),o.extend(re.node,re.offset)):(s.setEnd(re.node,re.offset),o.addRange(s)))}}for(s=[],o=m;o=o.parentNode;)o.nodeType===1&&s.push({element:o,left:o.scrollLeft,top:o.scrollTop});for(typeof m.focus=="function"&&m.focus(),m=0;m<s.length;m++)o=s[m],o.element.scrollLeft=o.left,o.element.scrollTop=o.top}}var Lhe=v&&"documentMode"in document&&11>=document.documentMode,jg=null,IR=null,V_=null,DR=!1;function AQ(o,s,m){var S=m.window===m?m.document:m.nodeType===9?m:m.ownerDocument;DR||jg==null||jg!==$(S)||(S=jg,"selectionStart"in S&&AR(S)?S={start:S.selectionStart,end:S.selectionEnd}:(S=(S.ownerDocument&&S.ownerDocument.defaultView||window).getSelection(),S={anchorNode:S.anchorNode,anchorOffset:S.anchorOffset,focusNode:S.focusNode,focusOffset:S.focusOffset}),V_&&U_(V_,S)||(V_=S,S=KT(IR,"onSelect"),0<S.length&&(s=new wR("onSelect","select",null,s,m),o.push({event:s,listeners:S}),s.target=jg)))}function VT(o,s){var m={};return m[o.toLowerCase()]=s.toLowerCase(),m["Webkit"+o]="webkit"+s,m["Moz"+o]="moz"+s,m}var Bg={animationend:VT("Animation","AnimationEnd"),animationiteration:VT("Animation","AnimationIteration"),animationstart:VT("Animation","AnimationStart"),transitionend:VT("Transition","TransitionEnd")},OR={},IQ={};v&&(IQ=document.createElement("div").style,"AnimationEvent"in window||(delete Bg.animationend.animation,delete Bg.animationiteration.animation,delete Bg.animationstart.animation),"TransitionEvent"in window||delete Bg.transitionend.transition);function HT(o){if(OR[o])return OR[o];if(!Bg[o])return o;var s=Bg[o],m;for(m in s)if(s.hasOwnProperty(m)&&m in IQ)return OR[o]=s[m];return o}var DQ=HT("animationend"),OQ=HT("animationiteration"),RQ=HT("animationstart"),LQ=HT("transitionend"),zQ=new Map,NQ="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function wd(o,s){zQ.set(o,s),f(s,[o])}for(WT=0;WT<NQ.length;WT++)GT=NQ[WT],FQ=GT.toLowerCase(),jQ=GT[0].toUpperCase()+GT.slice(1),wd(FQ,"on"+jQ);var GT,FQ,jQ,WT;wd(DQ,"onAnimationEnd"),wd(OQ,"onAnimationIteration"),wd(RQ,"onAnimationStart"),wd("dblclick","onDoubleClick"),wd("focusin","onFocus"),wd("focusout","onBlur"),wd(LQ,"onTransitionEnd"),p("onMouseEnter",["mouseout","mouseover"]),p("onMouseLeave",["mouseout","mouseover"]),p("onPointerEnter",["pointerout","pointerover"]),p("onPointerLeave",["pointerout","pointerover"]),f("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),f("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),f("onBeforeInput",["compositionend","keypress","textInput","paste"]),f("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),f("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),f("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var H_="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),zhe=new Set("cancel close invalid load scroll toggle".split(" ").concat(H_));function BQ(o,s,m){var S=o.type||"unknown-event";o.currentTarget=m,zfe(S,s,void 0,o),o.currentTarget=null}function UQ(o,s){s=(s&4)!==0;for(var m=0;m<o.length;m++){var S=o[m],z=S.event;S=S.listeners;e:{var V=void 0;if(s)for(var re=S.length-1;0<=re;re--){var Ee=S[re],Le=Ee.instance,st=Ee.currentTarget;if(Ee=Ee.listener,Le!==V&&z.isPropagationStopped())break e;BQ(z,Ee,st),V=Le}else for(re=0;re<S.length;re++){if(Ee=S[re],Le=Ee.instance,st=Ee.currentTarget,Ee=Ee.listener,Le!==V&&z.isPropagationStopped())break e;BQ(z,Ee,st),V=Le}}}if(TT)throw o=fR,TT=!1,fR=null,o}function Nr(o,s){var m=s[UR];m===void 0&&(m=s[UR]=new Set);var S=o+"__bubble";m.has(S)||(VQ(s,o,2,!1),m.add(S))}function RR(o,s,m){var S=0;s&&(S|=4),VQ(m,o,S,s)}var qT="_reactListening"+Math.random().toString(36).slice(2);function G_(o){if(!o[qT]){o[qT]=!0,c.forEach(function(m){m!=="selectionchange"&&(zhe.has(m)||RR(m,!1,o),RR(m,!0,o))});var s=o.nodeType===9?o:o.ownerDocument;s===null||s[qT]||(s[qT]=!0,RR("selectionchange",!1,s))}}function VQ(o,s,m,S){switch(uQ(s)){case 1:var z=Jfe;break;case 4:z=Qfe;break;default:z=bR}m=z.bind(null,s,m,o),z=void 0,!dR||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(z=!0),S?z!==void 0?o.addEventListener(s,m,{capture:!0,passive:z}):o.addEventListener(s,m,!0):z!==void 0?o.addEventListener(s,m,{passive:z}):o.addEventListener(s,m,!1)}function LR(o,s,m,S,z){var V=S;if(!(s&1)&&!(s&2)&&S!==null)e:for(;;){if(S===null)return;var re=S.tag;if(re===3||re===4){var Ee=S.stateNode.containerInfo;if(Ee===z||Ee.nodeType===8&&Ee.parentNode===z)break;if(re===4)for(re=S.return;re!==null;){var Le=re.tag;if((Le===3||Le===4)&&(Le=re.stateNode.containerInfo,Le===z||Le.nodeType===8&&Le.parentNode===z))return;re=re.return}for(;Ee!==null;){if(re=Eh(Ee),re===null)return;if(Le=re.tag,Le===5||Le===6){S=V=re;continue e}Ee=Ee.parentNode}}S=S.return}qJ(function(){var st=V,Dt=T_(m),Lt=[];e:{var At=zQ.get(o);if(At!==void 0){var en=wR,an=o;switch(o){case"keypress":if(NT(m)===0)break e;case"keydown":case"keyup":en=phe;break;case"focusin":an="focus",en=kR;break;case"focusout":an="blur",en=kR;break;case"beforeblur":case"afterblur":en=kR;break;case"click":if(m.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":en=hQ;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":en=nhe;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":en=vhe;break;case DQ:case OQ:case RQ:en=ohe;break;case LQ:en=bhe;break;case"scroll":en=ehe;break;case"wheel":en=xhe;break;case"copy":case"cut":case"paste":en=she;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":en=mQ}var ln=(s&4)!==0,li=!ln&&o==="scroll",Je=ln?At!==null?At+"Capture":null:At;ln=[];for(var je=st,tt;je!==null;){tt=je;var Vt=tt.stateNode;if(tt.tag===5&&Vt!==null&&(tt=Vt,Je!==null&&(Vt=M_(je,Je),Vt!=null&&ln.push(W_(je,Vt,tt)))),li)break;je=je.return}0<ln.length&&(At=new en(At,an,null,m,Dt),Lt.push({event:At,listeners:ln}))}}if(!(s&7)){e:{if(At=o==="mouseover"||o==="pointerover",en=o==="mouseout"||o==="pointerout",At&&m!==k_&&(an=m.relatedTarget||m.fromElement)&&(Eh(an)||an[zc]))break e;if((en||At)&&(At=Dt.window===Dt?Dt:(At=Dt.ownerDocument)?At.defaultView||At.parentWindow:window,en?(an=m.relatedTarget||m.toElement,en=st,an=an?Eh(an):null,an!==null&&(li=Sh(an),an!==li||an.tag!==5&&an.tag!==6)&&(an=null)):(en=null,an=st),en!==an)){if(ln=hQ,Vt="onMouseLeave",Je="onMouseEnter",je="mouse",(o==="pointerout"||o==="pointerover")&&(ln=mQ,Vt="onPointerLeave",Je="onPointerEnter",je="pointer"),li=en==null?At:Hg(en),tt=an==null?At:Hg(an),At=new ln(Vt,je+"leave",en,m,Dt),At.target=li,At.relatedTarget=tt,Vt=null,Eh(Dt)===st&&(ln=new ln(Je,je+"enter",an,m,Dt),ln.target=tt,ln.relatedTarget=li,Vt=ln),li=Vt,en&&an)t:{for(ln=en,Je=an,je=0,tt=ln;tt;tt=Ug(tt))je++;for(tt=0,Vt=Je;Vt;Vt=Ug(Vt))tt++;for(;0<je-tt;)ln=Ug(ln),je--;for(;0<tt-je;)Je=Ug(Je),tt--;for(;je--;){if(ln===Je||Je!==null&&ln===Je.alternate)break t;ln=Ug(ln),Je=Ug(Je)}ln=null}else ln=null;en!==null&&HQ(Lt,At,en,ln,!1),an!==null&&li!==null&&HQ(Lt,li,an,ln,!0)}}e:{if(At=st?Hg(st):window,en=At.nodeName&&At.nodeName.toLowerCase(),en==="select"||en==="input"&&At.type==="file")var cn=Phe;else if(xQ(At))if(SQ)cn=Dhe;else{cn=Ahe;var bn=Che}else(en=At.nodeName)&&en.toLowerCase()==="input"&&(At.type==="checkbox"||At.type==="radio")&&(cn=Ihe);if(cn&&(cn=cn(o,st))){wQ(Lt,cn,m,Dt);break e}bn&&bn(o,At,st),o==="focusout"&&(bn=At._wrapperState)&&bn.controlled&&At.type==="number"&&vt(At,"number",At.value)}switch(bn=st?Hg(st):window,o){case"focusin":(xQ(bn)||bn.contentEditable==="true")&&(jg=bn,IR=st,V_=null);break;case"focusout":V_=IR=jg=null;break;case"mousedown":DR=!0;break;case"contextmenu":case"mouseup":case"dragend":DR=!1,AQ(Lt,m,Dt);break;case"selectionchange":if(Lhe)break;case"keydown":case"keyup":AQ(Lt,m,Dt)}var _n;if(MR)e:{switch(o){case"compositionstart":var Cn="onCompositionStart";break e;case"compositionend":Cn="onCompositionEnd";break e;case"compositionupdate":Cn="onCompositionUpdate";break e}Cn=void 0}else Fg?bQ(o,m)&&(Cn="onCompositionEnd"):o==="keydown"&&m.keyCode===229&&(Cn="onCompositionStart");Cn&&(gQ&&m.locale!=="ko"&&(Fg||Cn!=="onCompositionStart"?Cn==="onCompositionEnd"&&Fg&&(_n=dQ()):(xd=Dt,xR="value"in xd?xd.value:xd.textContent,Fg=!0)),bn=KT(st,Cn),0<bn.length&&(Cn=new pQ(Cn,o,null,m,Dt),Lt.push({event:Cn,listeners:bn}),_n?Cn.data=_n:(_n=_Q(m),_n!==null&&(Cn.data=_n)))),(_n=She?Ehe(o,m):khe(o,m))&&(st=KT(st,"onBeforeInput"),0<st.length&&(Dt=new pQ("onBeforeInput","beforeinput",null,m,Dt),Lt.push({event:Dt,listeners:st}),Dt.data=_n))}UQ(Lt,s)})}function W_(o,s,m){return{instance:o,listener:s,currentTarget:m}}function KT(o,s){for(var m=s+"Capture",S=[];o!==null;){var z=o,V=z.stateNode;z.tag===5&&V!==null&&(z=V,V=M_(o,m),V!=null&&S.unshift(W_(o,V,z)),V=M_(o,s),V!=null&&S.push(W_(o,V,z))),o=o.return}return S}function Ug(o){if(o===null)return null;do o=o.return;while(o&&o.tag!==5);return o||null}function HQ(o,s,m,S,z){for(var V=s._reactName,re=[];m!==null&&m!==S;){var Ee=m,Le=Ee.alternate,st=Ee.stateNode;if(Le!==null&&Le===S)break;Ee.tag===5&&st!==null&&(Ee=st,z?(Le=M_(m,V),Le!=null&&re.unshift(W_(m,Le,Ee))):z||(Le=M_(m,V),Le!=null&&re.push(W_(m,Le,Ee)))),m=m.return}re.length!==0&&o.push({event:s,listeners:re})}var Nhe=/\r\n?/g,Fhe=/\u0000|\uFFFD/g;function GQ(o){return(typeof o=="string"?o:""+o).replace(Nhe,`
`).replace(Fhe,"")}function XT(o,s,m){if(s=GQ(s),GQ(o)!==s&&m)throw Error(a(425))}function $T(){}var zR=null,NR=null;function FR(o,s){return o==="textarea"||o==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var jR=typeof setTimeout=="function"?setTimeout:void 0,jhe=typeof clearTimeout=="function"?clearTimeout:void 0,WQ=typeof Promise=="function"?Promise:void 0,Bhe=typeof queueMicrotask=="function"?queueMicrotask:typeof WQ!="undefined"?function(o){return WQ.resolve(null).then(o).catch(Uhe)}:jR;function Uhe(o){setTimeout(function(){throw o})}function BR(o,s){var m=s,S=0;do{var z=m.nextSibling;if(o.removeChild(m),z&&z.nodeType===8)if(m=z.data,m==="/$"){if(S===0){o.removeChild(z),L_(s);return}S--}else m!=="$"&&m!=="$?"&&m!=="$!"||S++;m=z}while(m);L_(s)}function Sd(o){for(;o!=null;o=o.nextSibling){var s=o.nodeType;if(s===1||s===3)break;if(s===8){if(s=o.data,s==="$"||s==="$!"||s==="$?")break;if(s==="/$")return null}}return o}function qQ(o){o=o.previousSibling;for(var s=0;o;){if(o.nodeType===8){var m=o.data;if(m==="$"||m==="$!"||m==="$?"){if(s===0)return o;s--}else m==="/$"&&s++}o=o.previousSibling}return null}var Vg=Math.random().toString(36).slice(2),Nl="__reactFiber$"+Vg,q_="__reactProps$"+Vg,zc="__reactContainer$"+Vg,UR="__reactEvents$"+Vg,Vhe="__reactListeners$"+Vg,Hhe="__reactHandles$"+Vg;function Eh(o){var s=o[Nl];if(s)return s;for(var m=o.parentNode;m;){if(s=m[zc]||m[Nl]){if(m=s.alternate,s.child!==null||m!==null&&m.child!==null)for(o=qQ(o);o!==null;){if(m=o[Nl])return m;o=qQ(o)}return s}o=m,m=o.parentNode}return null}function K_(o){return o=o[Nl]||o[zc],!o||o.tag!==5&&o.tag!==6&&o.tag!==13&&o.tag!==3?null:o}function Hg(o){if(o.tag===5||o.tag===6)return o.stateNode;throw Error(a(33))}function ZT(o){return o[q_]||null}var VR=[],Gg=-1;function Ed(o){return{current:o}}function Fr(o){0>Gg||(o.current=VR[Gg],VR[Gg]=null,Gg--)}function Dr(o,s){Gg++,VR[Gg]=o.current,o.current=s}var kd={},co=Ed(kd),$o=Ed(!1),kh=kd;function Wg(o,s){var m=o.type.contextTypes;if(!m)return kd;var S=o.stateNode;if(S&&S.__reactInternalMemoizedUnmaskedChildContext===s)return S.__reactInternalMemoizedMaskedChildContext;var z={},V;for(V in m)z[V]=s[V];return S&&(o=o.stateNode,o.__reactInternalMemoizedUnmaskedChildContext=s,o.__reactInternalMemoizedMaskedChildContext=z),z}function Zo(o){return o=o.childContextTypes,o!=null}function YT(){Fr($o),Fr(co)}function KQ(o,s,m){if(co.current!==kd)throw Error(a(168));Dr(co,s),Dr($o,m)}function XQ(o,s,m){var S=o.stateNode;if(s=s.childContextTypes,typeof S.getChildContext!="function")return m;S=S.getChildContext();for(var z in S)if(!(z in s))throw Error(a(108,ht(o)||"Unknown",z));return ae({},m,S)}function JT(o){return o=(o=o.stateNode)&&o.__reactInternalMemoizedMergedChildContext||kd,kh=co.current,Dr(co,o),Dr($o,$o.current),!0}function $Q(o,s,m){var S=o.stateNode;if(!S)throw Error(a(169));m?(o=XQ(o,s,kh),S.__reactInternalMemoizedMergedChildContext=o,Fr($o),Fr(co),Dr(co,o)):Fr($o),Dr($o,m)}var Nc=null,QT=!1,HR=!1;function ZQ(o){Nc===null?Nc=[o]:Nc.push(o)}function Ghe(o){QT=!0,ZQ(o)}function Td(){if(!HR&&Nc!==null){HR=!0;var o=0,s=yr;try{var m=Nc;for(yr=1;o<m.length;o++){var S=m[o];do S=S(!0);while(S!==null)}Nc=null,QT=!1}catch(z){throw Nc!==null&&(Nc=Nc.slice(o+1)),YJ(hR,Td),z}finally{yr=s,HR=!1}}return null}var qg=[],Kg=0,eM=null,tM=0,Wa=[],qa=0,Th=null,Fc=1,jc="";function Mh(o,s){qg[Kg++]=tM,qg[Kg++]=eM,eM=o,tM=s}function YQ(o,s,m){Wa[qa++]=Fc,Wa[qa++]=jc,Wa[qa++]=Th,Th=o;var S=Fc;o=jc;var z=32-Ls(S)-1;S&=~(1<<z),m+=1;var V=32-Ls(s)+z;if(30<V){var re=z-z%5;V=(S&(1<<re)-1).toString(32),S>>=re,z-=re,Fc=1<<32-Ls(s)+z|m<<z|S,jc=V+o}else Fc=1<<V|m<<z|S,jc=o}function GR(o){o.return!==null&&(Mh(o,1),YQ(o,1,0))}function WR(o){for(;o===eM;)eM=qg[--Kg],qg[Kg]=null,tM=qg[--Kg],qg[Kg]=null;for(;o===Th;)Th=Wa[--qa],Wa[qa]=null,jc=Wa[--qa],Wa[qa]=null,Fc=Wa[--qa],Wa[qa]=null}var ga=null,va=null,Ur=!1,Ns=null;function JQ(o,s){var m=Za(5,null,null,0);m.elementType="DELETED",m.stateNode=s,m.return=o,s=o.deletions,s===null?(o.deletions=[m],o.flags|=16):s.push(m)}function QQ(o,s){switch(o.tag){case 5:var m=o.type;return s=s.nodeType!==1||m.toLowerCase()!==s.nodeName.toLowerCase()?null:s,s!==null?(o.stateNode=s,ga=o,va=Sd(s.firstChild),!0):!1;case 6:return s=o.pendingProps===""||s.nodeType!==3?null:s,s!==null?(o.stateNode=s,ga=o,va=null,!0):!1;case 13:return s=s.nodeType!==8?null:s,s!==null?(m=Th!==null?{id:Fc,overflow:jc}:null,o.memoizedState={dehydrated:s,treeContext:m,retryLane:1073741824},m=Za(18,null,null,0),m.stateNode=s,m.return=o,o.child=m,ga=o,va=null,!0):!1;default:return!1}}function qR(o){return(o.mode&1)!==0&&(o.flags&128)===0}function KR(o){if(Ur){var s=va;if(s){var m=s;if(!QQ(o,s)){if(qR(o))throw Error(a(418));s=Sd(m.nextSibling);var S=ga;s&&QQ(o,s)?JQ(S,m):(o.flags=o.flags&-4097|2,Ur=!1,ga=o)}}else{if(qR(o))throw Error(a(418));o.flags=o.flags&-4097|2,Ur=!1,ga=o}}}function eee(o){for(o=o.return;o!==null&&o.tag!==5&&o.tag!==3&&o.tag!==13;)o=o.return;ga=o}function nM(o){if(o!==ga)return!1;if(!Ur)return eee(o),Ur=!0,!1;var s;if((s=o.tag!==3)&&!(s=o.tag!==5)&&(s=o.type,s=s!=="head"&&s!=="body"&&!FR(o.type,o.memoizedProps)),s&&(s=va)){if(qR(o))throw tee(),Error(a(418));for(;s;)JQ(o,s),s=Sd(s.nextSibling)}if(eee(o),o.tag===13){if(o=o.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(a(317));e:{for(o=o.nextSibling,s=0;o;){if(o.nodeType===8){var m=o.data;if(m==="/$"){if(s===0){va=Sd(o.nextSibling);break e}s--}else m!=="$"&&m!=="$!"&&m!=="$?"||s++}o=o.nextSibling}va=null}}else va=ga?Sd(o.stateNode.nextSibling):null;return!0}function tee(){for(var o=va;o;)o=Sd(o.nextSibling)}function Xg(){va=ga=null,Ur=!1}function XR(o){Ns===null?Ns=[o]:Ns.push(o)}var Whe=J.ReactCurrentBatchConfig;function Fs(o,s){if(o&&o.defaultProps){s=ae({},s),o=o.defaultProps;for(var m in o)s[m]===void 0&&(s[m]=o[m]);return s}return s}var rM=Ed(null),iM=null,$g=null,$R=null;function ZR(){$R=$g=iM=null}function YR(o){var s=rM.current;Fr(rM),o._currentValue=s}function JR(o,s,m){for(;o!==null;){var S=o.alternate;if((o.childLanes&s)!==s?(o.childLanes|=s,S!==null&&(S.childLanes|=s)):S!==null&&(S.childLanes&s)!==s&&(S.childLanes|=s),o===m)break;o=o.return}}function Zg(o,s){iM=o,$R=$g=null,o=o.dependencies,o!==null&&o.firstContext!==null&&(o.lanes&s&&(Yo=!0),o.firstContext=null)}function Ka(o){var s=o._currentValue;if($R!==o)if(o={context:o,memoizedValue:s,next:null},$g===null){if(iM===null)throw Error(a(308));$g=o,iM.dependencies={lanes:0,firstContext:o}}else $g=$g.next=o;return s}var Ph=null;function QR(o){Ph===null?Ph=[o]:Ph.push(o)}function nee(o,s,m,S){var z=s.interleaved;return z===null?(m.next=m,QR(s)):(m.next=z.next,z.next=m),s.interleaved=m,Bc(o,S)}function Bc(o,s){o.lanes|=s;var m=o.alternate;for(m!==null&&(m.lanes|=s),m=o,o=o.return;o!==null;)o.childLanes|=s,m=o.alternate,m!==null&&(m.childLanes|=s),m=o,o=o.return;return m.tag===3?m.stateNode:null}var Md=!1;function e4(o){o.updateQueue={baseState:o.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function ree(o,s){o=o.updateQueue,s.updateQueue===o&&(s.updateQueue={baseState:o.baseState,firstBaseUpdate:o.firstBaseUpdate,lastBaseUpdate:o.lastBaseUpdate,shared:o.shared,effects:o.effects})}function Uc(o,s){return{eventTime:o,lane:s,tag:0,payload:null,callback:null,next:null}}function Pd(o,s,m){var S=o.updateQueue;if(S===null)return null;if(S=S.shared,or&2){var z=S.pending;return z===null?s.next=s:(s.next=z.next,z.next=s),S.pending=s,Bc(o,m)}return z=S.interleaved,z===null?(s.next=s,QR(S)):(s.next=z.next,z.next=s),S.interleaved=s,Bc(o,m)}function oM(o,s,m){if(s=s.updateQueue,s!==null&&(s=s.shared,(m&4194240)!==0)){var S=s.lanes;S&=o.pendingLanes,m|=S,s.lanes=m,gR(o,m)}}function iee(o,s){var m=o.updateQueue,S=o.alternate;if(S!==null&&(S=S.updateQueue,m===S)){var z=null,V=null;if(m=m.firstBaseUpdate,m!==null){do{var re={eventTime:m.eventTime,lane:m.lane,tag:m.tag,payload:m.payload,callback:m.callback,next:null};V===null?z=V=re:V=V.next=re,m=m.next}while(m!==null);V===null?z=V=s:V=V.next=s}else z=V=s;m={baseState:S.baseState,firstBaseUpdate:z,lastBaseUpdate:V,shared:S.shared,effects:S.effects},o.updateQueue=m;return}o=m.lastBaseUpdate,o===null?m.firstBaseUpdate=s:o.next=s,m.lastBaseUpdate=s}function aM(o,s,m,S){var z=o.updateQueue;Md=!1;var V=z.firstBaseUpdate,re=z.lastBaseUpdate,Ee=z.shared.pending;if(Ee!==null){z.shared.pending=null;var Le=Ee,st=Le.next;Le.next=null,re===null?V=st:re.next=st,re=Le;var Dt=o.alternate;Dt!==null&&(Dt=Dt.updateQueue,Ee=Dt.lastBaseUpdate,Ee!==re&&(Ee===null?Dt.firstBaseUpdate=st:Ee.next=st,Dt.lastBaseUpdate=Le))}if(V!==null){var Lt=z.baseState;re=0,Dt=st=Le=null,Ee=V;do{var At=Ee.lane,en=Ee.eventTime;if((S&At)===At){Dt!==null&&(Dt=Dt.next={eventTime:en,lane:0,tag:Ee.tag,payload:Ee.payload,callback:Ee.callback,next:null});e:{var an=o,ln=Ee;switch(At=s,en=m,ln.tag){case 1:if(an=ln.payload,typeof an=="function"){Lt=an.call(en,Lt,At);break e}Lt=an;break e;case 3:an.flags=an.flags&-65537|128;case 0:if(an=ln.payload,At=typeof an=="function"?an.call(en,Lt,At):an,At==null)break e;Lt=ae({},Lt,At);break e;case 2:Md=!0}}Ee.callback!==null&&Ee.lane!==0&&(o.flags|=64,At=z.effects,At===null?z.effects=[Ee]:At.push(Ee))}else en={eventTime:en,lane:At,tag:Ee.tag,payload:Ee.payload,callback:Ee.callback,next:null},Dt===null?(st=Dt=en,Le=Lt):Dt=Dt.next=en,re|=At;if(Ee=Ee.next,Ee===null){if(Ee=z.shared.pending,Ee===null)break;At=Ee,Ee=At.next,At.next=null,z.lastBaseUpdate=At,z.shared.pending=null}}while(1);if(Dt===null&&(Le=Lt),z.baseState=Le,z.firstBaseUpdate=st,z.lastBaseUpdate=Dt,s=z.shared.interleaved,s!==null){z=s;do re|=z.lane,z=z.next;while(z!==s)}else V===null&&(z.shared.lanes=0);Ih|=re,o.lanes=re,o.memoizedState=Lt}}function oee(o,s,m){if(o=s.effects,s.effects=null,o!==null)for(s=0;s<o.length;s++){var S=o[s],z=S.callback;if(z!==null){if(S.callback=null,S=m,typeof z!="function")throw Error(a(191,z));z.call(S)}}}var aee=new n.Component().refs;function t4(o,s,m,S){s=o.memoizedState,m=m(S,s),m=m==null?s:ae({},s,m),o.memoizedState=m,o.lanes===0&&(o.updateQueue.baseState=m)}var sM={isMounted:function(o){return(o=o._reactInternals)?Sh(o)===o:!1},enqueueSetState:function(o,s,m){o=o._reactInternals;var S=Ro(),z=Dd(o),V=Uc(S,z);V.payload=s,m!=null&&(V.callback=m),s=Pd(o,V,z),s!==null&&(Us(s,o,z,S),oM(s,o,z))},enqueueReplaceState:function(o,s,m){o=o._reactInternals;var S=Ro(),z=Dd(o),V=Uc(S,z);V.tag=1,V.payload=s,m!=null&&(V.callback=m),s=Pd(o,V,z),s!==null&&(Us(s,o,z,S),oM(s,o,z))},enqueueForceUpdate:function(o,s){o=o._reactInternals;var m=Ro(),S=Dd(o),z=Uc(m,S);z.tag=2,s!=null&&(z.callback=s),s=Pd(o,z,S),s!==null&&(Us(s,o,S,m),oM(s,o,S))}};function see(o,s,m,S,z,V,re){return o=o.stateNode,typeof o.shouldComponentUpdate=="function"?o.shouldComponentUpdate(S,V,re):s.prototype&&s.prototype.isPureReactComponent?!U_(m,S)||!U_(z,V):!0}function lee(o,s,m){var S=!1,z=kd,V=s.contextType;return typeof V=="object"&&V!==null?V=Ka(V):(z=Zo(s)?kh:co.current,S=s.contextTypes,V=(S=S!=null)?Wg(o,z):kd),s=new s(m,V),o.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,s.updater=sM,o.stateNode=s,s._reactInternals=o,S&&(o=o.stateNode,o.__reactInternalMemoizedUnmaskedChildContext=z,o.__reactInternalMemoizedMaskedChildContext=V),s}function cee(o,s,m,S){o=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(m,S),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(m,S),s.state!==o&&sM.enqueueReplaceState(s,s.state,null)}function n4(o,s,m,S){var z=o.stateNode;z.props=m,z.state=o.memoizedState,z.refs=aee,e4(o);var V=s.contextType;typeof V=="object"&&V!==null?z.context=Ka(V):(V=Zo(s)?kh:co.current,z.context=Wg(o,V)),z.state=o.memoizedState,V=s.getDerivedStateFromProps,typeof V=="function"&&(t4(o,s,V,m),z.state=o.memoizedState),typeof s.getDerivedStateFromProps=="function"||typeof z.getSnapshotBeforeUpdate=="function"||typeof z.UNSAFE_componentWillMount!="function"&&typeof z.componentWillMount!="function"||(s=z.state,typeof z.componentWillMount=="function"&&z.componentWillMount(),typeof z.UNSAFE_componentWillMount=="function"&&z.UNSAFE_componentWillMount(),s!==z.state&&sM.enqueueReplaceState(z,z.state,null),aM(o,m,z,S),z.state=o.memoizedState),typeof z.componentDidMount=="function"&&(o.flags|=4194308)}function X_(o,s,m){if(o=m.ref,o!==null&&typeof o!="function"&&typeof o!="object"){if(m._owner){if(m=m._owner,m){if(m.tag!==1)throw Error(a(309));var S=m.stateNode}if(!S)throw Error(a(147,o));var z=S,V=""+o;return s!==null&&s.ref!==null&&typeof s.ref=="function"&&s.ref._stringRef===V?s.ref:(s=function(re){var Ee=z.refs;Ee===aee&&(Ee=z.refs={}),re===null?delete Ee[V]:Ee[V]=re},s._stringRef=V,s)}if(typeof o!="string")throw Error(a(284));if(!m._owner)throw Error(a(290,o))}return o}function lM(o,s){throw o=Object.prototype.toString.call(s),Error(a(31,o==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":o))}function uee(o){var s=o._init;return s(o._payload)}function dee(o){function s(Je,je){if(o){var tt=Je.deletions;tt===null?(Je.deletions=[je],Je.flags|=16):tt.push(je)}}function m(Je,je){if(!o)return null;for(;je!==null;)s(Je,je),je=je.sibling;return null}function S(Je,je){for(Je=new Map;je!==null;)je.key!==null?Je.set(je.key,je):Je.set(je.index,je),je=je.sibling;return Je}function z(Je,je){return Je=Rd(Je,je),Je.index=0,Je.sibling=null,Je}function V(Je,je,tt){return Je.index=tt,o?(tt=Je.alternate,tt!==null?(tt=tt.index,tt<je?(Je.flags|=2,je):tt):(Je.flags|=2,je)):(Je.flags|=1048576,je)}function re(Je){return o&&Je.alternate===null&&(Je.flags|=2),Je}function Ee(Je,je,tt,Vt){return je===null||je.tag!==6?(je=F4(tt,Je.mode,Vt),je.return=Je,je):(je=z(je,tt),je.return=Je,je)}function Le(Je,je,tt,Vt){var cn=tt.type;return cn===Me?Dt(Je,je,tt.props.children,Vt,tt.key):je!==null&&(je.elementType===cn||typeof cn=="object"&&cn!==null&&cn.$$typeof===Pe&&uee(cn)===je.type)?(Vt=z(je,tt.props),Vt.ref=X_(Je,je,tt),Vt.return=Je,Vt):(Vt=MM(tt.type,tt.key,tt.props,null,Je.mode,Vt),Vt.ref=X_(Je,je,tt),Vt.return=Je,Vt)}function st(Je,je,tt,Vt){return je===null||je.tag!==4||je.stateNode.containerInfo!==tt.containerInfo||je.stateNode.implementation!==tt.implementation?(je=j4(tt,Je.mode,Vt),je.return=Je,je):(je=z(je,tt.children||[]),je.return=Je,je)}function Dt(Je,je,tt,Vt,cn){return je===null||je.tag!==7?(je=Lh(tt,Je.mode,Vt,cn),je.return=Je,je):(je=z(je,tt),je.return=Je,je)}function Lt(Je,je,tt){if(typeof je=="string"&&je!==""||typeof je=="number")return je=F4(""+je,Je.mode,tt),je.return=Je,je;if(typeof je=="object"&&je!==null){switch(je.$$typeof){case ie:return tt=MM(je.type,je.key,je.props,null,Je.mode,tt),tt.ref=X_(Je,null,je),tt.return=Je,tt;case xe:return je=j4(je,Je.mode,tt),je.return=Je,je;case Pe:var Vt=je._init;return Lt(Je,Vt(je._payload),tt)}if(wt(je)||mt(je))return je=Lh(je,Je.mode,tt,null),je.return=Je,je;lM(Je,je)}return null}function At(Je,je,tt,Vt){var cn=je!==null?je.key:null;if(typeof tt=="string"&&tt!==""||typeof tt=="number")return cn!==null?null:Ee(Je,je,""+tt,Vt);if(typeof tt=="object"&&tt!==null){switch(tt.$$typeof){case ie:return tt.key===cn?Le(Je,je,tt,Vt):null;case xe:return tt.key===cn?st(Je,je,tt,Vt):null;case Pe:return cn=tt._init,At(Je,je,cn(tt._payload),Vt)}if(wt(tt)||mt(tt))return cn!==null?null:Dt(Je,je,tt,Vt,null);lM(Je,tt)}return null}function en(Je,je,tt,Vt,cn){if(typeof Vt=="string"&&Vt!==""||typeof Vt=="number")return Je=Je.get(tt)||null,Ee(je,Je,""+Vt,cn);if(typeof Vt=="object"&&Vt!==null){switch(Vt.$$typeof){case ie:return Je=Je.get(Vt.key===null?tt:Vt.key)||null,Le(je,Je,Vt,cn);case xe:return Je=Je.get(Vt.key===null?tt:Vt.key)||null,st(je,Je,Vt,cn);case Pe:var bn=Vt._init;return en(Je,je,tt,bn(Vt._payload),cn)}if(wt(Vt)||mt(Vt))return Je=Je.get(tt)||null,Dt(je,Je,Vt,cn,null);lM(je,Vt)}return null}function an(Je,je,tt,Vt){for(var cn=null,bn=null,_n=je,Cn=je=0,Li=null;_n!==null&&Cn<tt.length;Cn++){_n.index>Cn?(Li=_n,_n=null):Li=_n.sibling;var lr=At(Je,_n,tt[Cn],Vt);if(lr===null){_n===null&&(_n=Li);break}o&&_n&&lr.alternate===null&&s(Je,_n),je=V(lr,je,Cn),bn===null?cn=lr:bn.sibling=lr,bn=lr,_n=Li}if(Cn===tt.length)return m(Je,_n),Ur&&Mh(Je,Cn),cn;if(_n===null){for(;Cn<tt.length;Cn++)_n=Lt(Je,tt[Cn],Vt),_n!==null&&(je=V(_n,je,Cn),bn===null?cn=_n:bn.sibling=_n,bn=_n);return Ur&&Mh(Je,Cn),cn}for(_n=S(Je,_n);Cn<tt.length;Cn++)Li=en(_n,Je,Cn,tt[Cn],Vt),Li!==null&&(o&&Li.alternate!==null&&_n.delete(Li.key===null?Cn:Li.key),je=V(Li,je,Cn),bn===null?cn=Li:bn.sibling=Li,bn=Li);return o&&_n.forEach(function(Ld){return s(Je,Ld)}),Ur&&Mh(Je,Cn),cn}function ln(Je,je,tt,Vt){var cn=mt(tt);if(typeof cn!="function")throw Error(a(150));if(tt=cn.call(tt),tt==null)throw Error(a(151));for(var bn=cn=null,_n=je,Cn=je=0,Li=null,lr=tt.next();_n!==null&&!lr.done;Cn++,lr=tt.next()){_n.index>Cn?(Li=_n,_n=null):Li=_n.sibling;var Ld=At(Je,_n,lr.value,Vt);if(Ld===null){_n===null&&(_n=Li);break}o&&_n&&Ld.alternate===null&&s(Je,_n),je=V(Ld,je,Cn),bn===null?cn=Ld:bn.sibling=Ld,bn=Ld,_n=Li}if(lr.done)return m(Je,_n),Ur&&Mh(Je,Cn),cn;if(_n===null){for(;!lr.done;Cn++,lr=tt.next())lr=Lt(Je,lr.value,Vt),lr!==null&&(je=V(lr,je,Cn),bn===null?cn=lr:bn.sibling=lr,bn=lr);return Ur&&Mh(Je,Cn),cn}for(_n=S(Je,_n);!lr.done;Cn++,lr=tt.next())lr=en(_n,Je,Cn,lr.value,Vt),lr!==null&&(o&&lr.alternate!==null&&_n.delete(lr.key===null?Cn:lr.key),je=V(lr,je,Cn),bn===null?cn=lr:bn.sibling=lr,bn=lr);return o&&_n.forEach(function(Epe){return s(Je,Epe)}),Ur&&Mh(Je,Cn),cn}function li(Je,je,tt,Vt){if(typeof tt=="object"&&tt!==null&&tt.type===Me&&tt.key===null&&(tt=tt.props.children),typeof tt=="object"&&tt!==null){switch(tt.$$typeof){case ie:e:{for(var cn=tt.key,bn=je;bn!==null;){if(bn.key===cn){if(cn=tt.type,cn===Me){if(bn.tag===7){m(Je,bn.sibling),je=z(bn,tt.props.children),je.return=Je,Je=je;break e}}else if(bn.elementType===cn||typeof cn=="object"&&cn!==null&&cn.$$typeof===Pe&&uee(cn)===bn.type){m(Je,bn.sibling),je=z(bn,tt.props),je.ref=X_(Je,bn,tt),je.return=Je,Je=je;break e}m(Je,bn);break}else s(Je,bn);bn=bn.sibling}tt.type===Me?(je=Lh(tt.props.children,Je.mode,Vt,tt.key),je.return=Je,Je=je):(Vt=MM(tt.type,tt.key,tt.props,null,Je.mode,Vt),Vt.ref=X_(Je,je,tt),Vt.return=Je,Je=Vt)}return re(Je);case xe:e:{for(bn=tt.key;je!==null;){if(je.key===bn)if(je.tag===4&&je.stateNode.containerInfo===tt.containerInfo&&je.stateNode.implementation===tt.implementation){m(Je,je.sibling),je=z(je,tt.children||[]),je.return=Je,Je=je;break e}else{m(Je,je);break}else s(Je,je);je=je.sibling}je=j4(tt,Je.mode,Vt),je.return=Je,Je=je}return re(Je);case Pe:return bn=tt._init,li(Je,je,bn(tt._payload),Vt)}if(wt(tt))return an(Je,je,tt,Vt);if(mt(tt))return ln(Je,je,tt,Vt);lM(Je,tt)}return typeof tt=="string"&&tt!==""||typeof tt=="number"?(tt=""+tt,je!==null&&je.tag===6?(m(Je,je.sibling),je=z(je,tt),je.return=Je,Je=je):(m(Je,je),je=F4(tt,Je.mode,Vt),je.return=Je,Je=je),re(Je)):m(Je,je)}return li}var Yg=dee(!0),fee=dee(!1),$_={},Fl=Ed($_),Z_=Ed($_),Y_=Ed($_);function Ch(o){if(o===$_)throw Error(a(174));return o}function r4(o,s){switch(Dr(Y_,s),Dr(Z_,o),Dr(Fl,$_),o=s.nodeType,o){case 9:case 11:s=(s=s.documentElement)?s.namespaceURI:Pn(null,"");break;default:o=o===8?s.parentNode:s,s=o.namespaceURI||null,o=o.tagName,s=Pn(s,o)}Fr(Fl),Dr(Fl,s)}function Jg(){Fr(Fl),Fr(Z_),Fr(Y_)}function hee(o){Ch(Y_.current);var s=Ch(Fl.current),m=Pn(s,o.type);s!==m&&(Dr(Z_,o),Dr(Fl,m))}function i4(o){Z_.current===o&&(Fr(Fl),Fr(Z_))}var Kr=Ed(0);function cM(o){for(var s=o;s!==null;){if(s.tag===13){var m=s.memoizedState;if(m!==null&&(m=m.dehydrated,m===null||m.data==="$?"||m.data==="$!"))return s}else if(s.tag===19&&s.memoizedProps.revealOrder!==void 0){if(s.flags&128)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===o)break;for(;s.sibling===null;){if(s.return===null||s.return===o)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}var o4=[];function a4(){for(var o=0;o<o4.length;o++)o4[o]._workInProgressVersionPrimary=null;o4.length=0}var uM=J.ReactCurrentDispatcher,s4=J.ReactCurrentBatchConfig,Ah=0,Xr=null,Ei=null,Oi=null,dM=!1,J_=!1,Q_=0,qhe=0;function uo(){throw Error(a(321))}function l4(o,s){if(s===null)return!1;for(var m=0;m<s.length&&m<o.length;m++)if(!zs(o[m],s[m]))return!1;return!0}function c4(o,s,m,S,z,V){if(Ah=V,Xr=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,uM.current=o===null||o.memoizedState===null?Zhe:Yhe,o=m(S,z),J_){V=0;do{if(J_=!1,Q_=0,25<=V)throw Error(a(301));V+=1,Oi=Ei=null,s.updateQueue=null,uM.current=Jhe,o=m(S,z)}while(J_)}if(uM.current=pM,s=Ei!==null&&Ei.next!==null,Ah=0,Oi=Ei=Xr=null,dM=!1,s)throw Error(a(300));return o}function u4(){var o=Q_!==0;return Q_=0,o}function jl(){var o={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Oi===null?Xr.memoizedState=Oi=o:Oi=Oi.next=o,Oi}function Xa(){if(Ei===null){var o=Xr.alternate;o=o!==null?o.memoizedState:null}else o=Ei.next;var s=Oi===null?Xr.memoizedState:Oi.next;if(s!==null)Oi=s,Ei=o;else{if(o===null)throw Error(a(310));Ei=o,o={memoizedState:Ei.memoizedState,baseState:Ei.baseState,baseQueue:Ei.baseQueue,queue:Ei.queue,next:null},Oi===null?Xr.memoizedState=Oi=o:Oi=Oi.next=o}return Oi}function e1(o,s){return typeof s=="function"?s(o):s}function d4(o){var s=Xa(),m=s.queue;if(m===null)throw Error(a(311));m.lastRenderedReducer=o;var S=Ei,z=S.baseQueue,V=m.pending;if(V!==null){if(z!==null){var re=z.next;z.next=V.next,V.next=re}S.baseQueue=z=V,m.pending=null}if(z!==null){V=z.next,S=S.baseState;var Ee=re=null,Le=null,st=V;do{var Dt=st.lane;if((Ah&Dt)===Dt)Le!==null&&(Le=Le.next={lane:0,action:st.action,hasEagerState:st.hasEagerState,eagerState:st.eagerState,next:null}),S=st.hasEagerState?st.eagerState:o(S,st.action);else{var Lt={lane:Dt,action:st.action,hasEagerState:st.hasEagerState,eagerState:st.eagerState,next:null};Le===null?(Ee=Le=Lt,re=S):Le=Le.next=Lt,Xr.lanes|=Dt,Ih|=Dt}st=st.next}while(st!==null&&st!==V);Le===null?re=S:Le.next=Ee,zs(S,s.memoizedState)||(Yo=!0),s.memoizedState=S,s.baseState=re,s.baseQueue=Le,m.lastRenderedState=S}if(o=m.interleaved,o!==null){z=o;do V=z.lane,Xr.lanes|=V,Ih|=V,z=z.next;while(z!==o)}else z===null&&(m.lanes=0);return[s.memoizedState,m.dispatch]}function f4(o){var s=Xa(),m=s.queue;if(m===null)throw Error(a(311));m.lastRenderedReducer=o;var S=m.dispatch,z=m.pending,V=s.memoizedState;if(z!==null){m.pending=null;var re=z=z.next;do V=o(V,re.action),re=re.next;while(re!==z);zs(V,s.memoizedState)||(Yo=!0),s.memoizedState=V,s.baseQueue===null&&(s.baseState=V),m.lastRenderedState=V}return[V,S]}function pee(){}function mee(o,s){var m=Xr,S=Xa(),z=s(),V=!zs(S.memoizedState,z);if(V&&(S.memoizedState=z,Yo=!0),S=S.queue,h4(yee.bind(null,m,S,o),[o]),S.getSnapshot!==s||V||Oi!==null&&Oi.memoizedState.tag&1){if(m.flags|=2048,t1(9,vee.bind(null,m,S,z,s),void 0,null),Ri===null)throw Error(a(349));Ah&30||gee(m,s,z)}return z}function gee(o,s,m){o.flags|=16384,o={getSnapshot:s,value:m},s=Xr.updateQueue,s===null?(s={lastEffect:null,stores:null},Xr.updateQueue=s,s.stores=[o]):(m=s.stores,m===null?s.stores=[o]:m.push(o))}function vee(o,s,m,S){s.value=m,s.getSnapshot=S,bee(s)&&_ee(o)}function yee(o,s,m){return m(function(){bee(s)&&_ee(o)})}function bee(o){var s=o.getSnapshot;o=o.value;try{var m=s();return!zs(o,m)}catch{return!0}}function _ee(o){var s=Bc(o,1);s!==null&&Us(s,o,1,-1)}function xee(o){var s=jl();return typeof o=="function"&&(o=o()),s.memoizedState=s.baseState=o,o={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e1,lastRenderedState:o},s.queue=o,o=o.dispatch=$he.bind(null,Xr,o),[s.memoizedState,o]}function t1(o,s,m,S){return o={tag:o,create:s,destroy:m,deps:S,next:null},s=Xr.updateQueue,s===null?(s={lastEffect:null,stores:null},Xr.updateQueue=s,s.lastEffect=o.next=o):(m=s.lastEffect,m===null?s.lastEffect=o.next=o:(S=m.next,m.next=o,o.next=S,s.lastEffect=o)),o}function wee(){return Xa().memoizedState}function fM(o,s,m,S){var z=jl();Xr.flags|=o,z.memoizedState=t1(1|s,m,void 0,S===void 0?null:S)}function hM(o,s,m,S){var z=Xa();S=S===void 0?null:S;var V=void 0;if(Ei!==null){var re=Ei.memoizedState;if(V=re.destroy,S!==null&&l4(S,re.deps)){z.memoizedState=t1(s,m,V,S);return}}Xr.flags|=o,z.memoizedState=t1(1|s,m,V,S)}function See(o,s){return fM(8390656,8,o,s)}function h4(o,s){return hM(2048,8,o,s)}function Eee(o,s){return hM(4,2,o,s)}function kee(o,s){return hM(4,4,o,s)}function Tee(o,s){if(typeof s=="function")return o=o(),s(o),function(){s(null)};if(s!=null)return o=o(),s.current=o,function(){s.current=null}}function Mee(o,s,m){return m=m!=null?m.concat([o]):null,hM(4,4,Tee.bind(null,s,o),m)}function p4(){}function Pee(o,s){var m=Xa();s=s===void 0?null:s;var S=m.memoizedState;return S!==null&&s!==null&&l4(s,S[1])?S[0]:(m.memoizedState=[o,s],o)}function Cee(o,s){var m=Xa();s=s===void 0?null:s;var S=m.memoizedState;return S!==null&&s!==null&&l4(s,S[1])?S[0]:(o=o(),m.memoizedState=[o,s],o)}function Aee(o,s,m){return Ah&21?(zs(m,s)||(m=tQ(),Xr.lanes|=m,Ih|=m,o.baseState=!0),s):(o.baseState&&(o.baseState=!1,Yo=!0),o.memoizedState=m)}function Khe(o,s){var m=yr;yr=m!==0&&4>m?m:4,o(!0);var S=s4.transition;s4.transition={};try{o(!1),s()}finally{yr=m,s4.transition=S}}function Iee(){return Xa().memoizedState}function Xhe(o,s,m){var S=Dd(o);if(m={lane:S,action:m,hasEagerState:!1,eagerState:null,next:null},Dee(o))Oee(s,m);else if(m=nee(o,s,m,S),m!==null){var z=Ro();Us(m,o,S,z),Ree(m,s,S)}}function $he(o,s,m){var S=Dd(o),z={lane:S,action:m,hasEagerState:!1,eagerState:null,next:null};if(Dee(o))Oee(s,z);else{var V=o.alternate;if(o.lanes===0&&(V===null||V.lanes===0)&&(V=s.lastRenderedReducer,V!==null))try{var re=s.lastRenderedState,Ee=V(re,m);if(z.hasEagerState=!0,z.eagerState=Ee,zs(Ee,re)){var Le=s.interleaved;Le===null?(z.next=z,QR(s)):(z.next=Le.next,Le.next=z),s.interleaved=z;return}}catch{}finally{}m=nee(o,s,z,S),m!==null&&(z=Ro(),Us(m,o,S,z),Ree(m,s,S))}}function Dee(o){var s=o.alternate;return o===Xr||s!==null&&s===Xr}function Oee(o,s){J_=dM=!0;var m=o.pending;m===null?s.next=s:(s.next=m.next,m.next=s),o.pending=s}function Ree(o,s,m){if(m&4194240){var S=s.lanes;S&=o.pendingLanes,m|=S,s.lanes=m,gR(o,m)}}var pM={readContext:Ka,useCallback:uo,useContext:uo,useEffect:uo,useImperativeHandle:uo,useInsertionEffect:uo,useLayoutEffect:uo,useMemo:uo,useReducer:uo,useRef:uo,useState:uo,useDebugValue:uo,useDeferredValue:uo,useTransition:uo,useMutableSource:uo,useSyncExternalStore:uo,useId:uo,unstable_isNewReconciler:!1},Zhe={readContext:Ka,useCallback:function(o,s){return jl().memoizedState=[o,s===void 0?null:s],o},useContext:Ka,useEffect:See,useImperativeHandle:function(o,s,m){return m=m!=null?m.concat([o]):null,fM(4194308,4,Tee.bind(null,s,o),m)},useLayoutEffect:function(o,s){return fM(4194308,4,o,s)},useInsertionEffect:function(o,s){return fM(4,2,o,s)},useMemo:function(o,s){var m=jl();return s=s===void 0?null:s,o=o(),m.memoizedState=[o,s],o},useReducer:function(o,s,m){var S=jl();return s=m!==void 0?m(s):s,S.memoizedState=S.baseState=s,o={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:o,lastRenderedState:s},S.queue=o,o=o.dispatch=Xhe.bind(null,Xr,o),[S.memoizedState,o]},useRef:function(o){var s=jl();return o={current:o},s.memoizedState=o},useState:xee,useDebugValue:p4,useDeferredValue:function(o){return jl().memoizedState=o},useTransition:function(){var o=xee(!1),s=o[0];return o=Khe.bind(null,o[1]),jl().memoizedState=o,[s,o]},useMutableSource:function(){},useSyncExternalStore:function(o,s,m){var S=Xr,z=jl();if(Ur){if(m===void 0)throw Error(a(407));m=m()}else{if(m=s(),Ri===null)throw Error(a(349));Ah&30||gee(S,s,m)}z.memoizedState=m;var V={value:m,getSnapshot:s};return z.queue=V,See(yee.bind(null,S,V,o),[o]),S.flags|=2048,t1(9,vee.bind(null,S,V,m,s),void 0,null),m},useId:function(){var o=jl(),s=Ri.identifierPrefix;if(Ur){var m=jc,S=Fc;m=(S&~(1<<32-Ls(S)-1)).toString(32)+m,s=":"+s+"R"+m,m=Q_++,0<m&&(s+="H"+m.toString(32)),s+=":"}else m=qhe++,s=":"+s+"r"+m.toString(32)+":";return o.memoizedState=s},unstable_isNewReconciler:!1},Yhe={readContext:Ka,useCallback:Pee,useContext:Ka,useEffect:h4,useImperativeHandle:Mee,useInsertionEffect:Eee,useLayoutEffect:kee,useMemo:Cee,useReducer:d4,useRef:wee,useState:function(){return d4(e1)},useDebugValue:p4,useDeferredValue:function(o){var s=Xa();return Aee(s,Ei.memoizedState,o)},useTransition:function(){var o=d4(e1)[0],s=Xa().memoizedState;return[o,s]},useMutableSource:pee,useSyncExternalStore:mee,useId:Iee,unstable_isNewReconciler:!1},Jhe={readContext:Ka,useCallback:Pee,useContext:Ka,useEffect:h4,useImperativeHandle:Mee,useInsertionEffect:Eee,useLayoutEffect:kee,useMemo:Cee,useReducer:f4,useRef:wee,useState:function(){return f4(e1)},useDebugValue:p4,useDeferredValue:function(o){var s=Xa();return Ei===null?s.memoizedState=o:Aee(s,Ei.memoizedState,o)},useTransition:function(){var o=f4(e1)[0],s=Xa().memoizedState;return[o,s]},useMutableSource:pee,useSyncExternalStore:mee,useId:Iee,unstable_isNewReconciler:!1};function Qg(o,s){try{var m="",S=s;do m+=Ue(S),S=S.return;while(S);var z=m}catch(V){z=`
Error generating stack: `+V.message+`
`+V.stack}return{value:o,source:s,stack:z,digest:null}}function m4(o,s,m){return{value:o,source:null,stack:m!=null?m:null,digest:s!=null?s:null}}function g4(o,s){try{console.error(s.value)}catch(m){setTimeout(function(){throw m})}}var Qhe=typeof WeakMap=="function"?WeakMap:Map;function Lee(o,s,m){m=Uc(-1,m),m.tag=3,m.payload={element:null};var S=s.value;return m.callback=function(){xM||(xM=!0,A4=S),g4(o,s)},m}function zee(o,s,m){m=Uc(-1,m),m.tag=3;var S=o.type.getDerivedStateFromError;if(typeof S=="function"){var z=s.value;m.payload=function(){return S(z)},m.callback=function(){g4(o,s)}}var V=o.stateNode;return V!==null&&typeof V.componentDidCatch=="function"&&(m.callback=function(){g4(o,s),typeof S!="function"&&(Ad===null?Ad=new Set([this]):Ad.add(this));var re=s.stack;this.componentDidCatch(s.value,{componentStack:re!==null?re:""})}),m}function Nee(o,s,m){var S=o.pingCache;if(S===null){S=o.pingCache=new Qhe;var z=new Set;S.set(s,z)}else z=S.get(s),z===void 0&&(z=new Set,S.set(s,z));z.has(m)||(z.add(m),o=hpe.bind(null,o,s,m),s.then(o,o))}function Fee(o){do{var s;if((s=o.tag===13)&&(s=o.memoizedState,s=s!==null?s.dehydrated!==null:!0),s)return o;o=o.return}while(o!==null);return null}function jee(o,s,m,S,z){return o.mode&1?(o.flags|=65536,o.lanes=z,o):(o===s?o.flags|=65536:(o.flags|=128,m.flags|=131072,m.flags&=-52805,m.tag===1&&(m.alternate===null?m.tag=17:(s=Uc(-1,1),s.tag=2,Pd(m,s,1))),m.lanes|=1),o)}var epe=J.ReactCurrentOwner,Yo=!1;function Oo(o,s,m,S){s.child=o===null?fee(s,null,m,S):Yg(s,o.child,m,S)}function Bee(o,s,m,S,z){m=m.render;var V=s.ref;return Zg(s,z),S=c4(o,s,m,S,V,z),m=u4(),o!==null&&!Yo?(s.updateQueue=o.updateQueue,s.flags&=-2053,o.lanes&=~z,Vc(o,s,z)):(Ur&&m&&GR(s),s.flags|=1,Oo(o,s,S,z),s.child)}function Uee(o,s,m,S,z){if(o===null){var V=m.type;return typeof V=="function"&&!N4(V)&&V.defaultProps===void 0&&m.compare===null&&m.defaultProps===void 0?(s.tag=15,s.type=V,Vee(o,s,V,S,z)):(o=MM(m.type,null,S,s,s.mode,z),o.ref=s.ref,o.return=s,s.child=o)}if(V=o.child,!(o.lanes&z)){var re=V.memoizedProps;if(m=m.compare,m=m!==null?m:U_,m(re,S)&&o.ref===s.ref)return Vc(o,s,z)}return s.flags|=1,o=Rd(V,S),o.ref=s.ref,o.return=s,s.child=o}function Vee(o,s,m,S,z){if(o!==null){var V=o.memoizedProps;if(U_(V,S)&&o.ref===s.ref)if(Yo=!1,s.pendingProps=S=V,(o.lanes&z)!==0)o.flags&131072&&(Yo=!0);else return s.lanes=o.lanes,Vc(o,s,z)}return v4(o,s,m,S,z)}function Hee(o,s,m){var S=s.pendingProps,z=S.children,V=o!==null?o.memoizedState:null;if(S.mode==="hidden")if(!(s.mode&1))s.memoizedState={baseLanes:0,cachePool:null,transitions:null},Dr(t0,ya),ya|=m;else{if(!(m&1073741824))return o=V!==null?V.baseLanes|m:m,s.lanes=s.childLanes=1073741824,s.memoizedState={baseLanes:o,cachePool:null,transitions:null},s.updateQueue=null,Dr(t0,ya),ya|=o,null;s.memoizedState={baseLanes:0,cachePool:null,transitions:null},S=V!==null?V.baseLanes:m,Dr(t0,ya),ya|=S}else V!==null?(S=V.baseLanes|m,s.memoizedState=null):S=m,Dr(t0,ya),ya|=S;return Oo(o,s,z,m),s.child}function Gee(o,s){var m=s.ref;(o===null&&m!==null||o!==null&&o.ref!==m)&&(s.flags|=512,s.flags|=2097152)}function v4(o,s,m,S,z){var V=Zo(m)?kh:co.current;return V=Wg(s,V),Zg(s,z),m=c4(o,s,m,S,V,z),S=u4(),o!==null&&!Yo?(s.updateQueue=o.updateQueue,s.flags&=-2053,o.lanes&=~z,Vc(o,s,z)):(Ur&&S&&GR(s),s.flags|=1,Oo(o,s,m,z),s.child)}function Wee(o,s,m,S,z){if(Zo(m)){var V=!0;JT(s)}else V=!1;if(Zg(s,z),s.stateNode===null)gM(o,s),lee(s,m,S),n4(s,m,S,z),S=!0;else if(o===null){var re=s.stateNode,Ee=s.memoizedProps;re.props=Ee;var Le=re.context,st=m.contextType;typeof st=="object"&&st!==null?st=Ka(st):(st=Zo(m)?kh:co.current,st=Wg(s,st));var Dt=m.getDerivedStateFromProps,Lt=typeof Dt=="function"||typeof re.getSnapshotBeforeUpdate=="function";Lt||typeof re.UNSAFE_componentWillReceiveProps!="function"&&typeof re.componentWillReceiveProps!="function"||(Ee!==S||Le!==st)&&cee(s,re,S,st),Md=!1;var At=s.memoizedState;re.state=At,aM(s,S,re,z),Le=s.memoizedState,Ee!==S||At!==Le||$o.current||Md?(typeof Dt=="function"&&(t4(s,m,Dt,S),Le=s.memoizedState),(Ee=Md||see(s,m,Ee,S,At,Le,st))?(Lt||typeof re.UNSAFE_componentWillMount!="function"&&typeof re.componentWillMount!="function"||(typeof re.componentWillMount=="function"&&re.componentWillMount(),typeof re.UNSAFE_componentWillMount=="function"&&re.UNSAFE_componentWillMount()),typeof re.componentDidMount=="function"&&(s.flags|=4194308)):(typeof re.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=S,s.memoizedState=Le),re.props=S,re.state=Le,re.context=st,S=Ee):(typeof re.componentDidMount=="function"&&(s.flags|=4194308),S=!1)}else{re=s.stateNode,ree(o,s),Ee=s.memoizedProps,st=s.type===s.elementType?Ee:Fs(s.type,Ee),re.props=st,Lt=s.pendingProps,At=re.context,Le=m.contextType,typeof Le=="object"&&Le!==null?Le=Ka(Le):(Le=Zo(m)?kh:co.current,Le=Wg(s,Le));var en=m.getDerivedStateFromProps;(Dt=typeof en=="function"||typeof re.getSnapshotBeforeUpdate=="function")||typeof re.UNSAFE_componentWillReceiveProps!="function"&&typeof re.componentWillReceiveProps!="function"||(Ee!==Lt||At!==Le)&&cee(s,re,S,Le),Md=!1,At=s.memoizedState,re.state=At,aM(s,S,re,z);var an=s.memoizedState;Ee!==Lt||At!==an||$o.current||Md?(typeof en=="function"&&(t4(s,m,en,S),an=s.memoizedState),(st=Md||see(s,m,st,S,At,an,Le)||!1)?(Dt||typeof re.UNSAFE_componentWillUpdate!="function"&&typeof re.componentWillUpdate!="function"||(typeof re.componentWillUpdate=="function"&&re.componentWillUpdate(S,an,Le),typeof re.UNSAFE_componentWillUpdate=="function"&&re.UNSAFE_componentWillUpdate(S,an,Le)),typeof re.componentDidUpdate=="function"&&(s.flags|=4),typeof re.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof re.componentDidUpdate!="function"||Ee===o.memoizedProps&&At===o.memoizedState||(s.flags|=4),typeof re.getSnapshotBeforeUpdate!="function"||Ee===o.memoizedProps&&At===o.memoizedState||(s.flags|=1024),s.memoizedProps=S,s.memoizedState=an),re.props=S,re.state=an,re.context=Le,S=st):(typeof re.componentDidUpdate!="function"||Ee===o.memoizedProps&&At===o.memoizedState||(s.flags|=4),typeof re.getSnapshotBeforeUpdate!="function"||Ee===o.memoizedProps&&At===o.memoizedState||(s.flags|=1024),S=!1)}return y4(o,s,m,S,V,z)}function y4(o,s,m,S,z,V){Gee(o,s);var re=(s.flags&128)!==0;if(!S&&!re)return z&&$Q(s,m,!1),Vc(o,s,V);S=s.stateNode,epe.current=s;var Ee=re&&typeof m.getDerivedStateFromError!="function"?null:S.render();return s.flags|=1,o!==null&&re?(s.child=Yg(s,o.child,null,V),s.child=Yg(s,null,Ee,V)):Oo(o,s,Ee,V),s.memoizedState=S.state,z&&$Q(s,m,!0),s.child}function qee(o){var s=o.stateNode;s.pendingContext?KQ(o,s.pendingContext,s.pendingContext!==s.context):s.context&&KQ(o,s.context,!1),r4(o,s.containerInfo)}function Kee(o,s,m,S,z){return Xg(),XR(z),s.flags|=256,Oo(o,s,m,S),s.child}var b4={dehydrated:null,treeContext:null,retryLane:0};function _4(o){return{baseLanes:o,cachePool:null,transitions:null}}function Xee(o,s,m){var S=s.pendingProps,z=Kr.current,V=!1,re=(s.flags&128)!==0,Ee;if((Ee=re)||(Ee=o!==null&&o.memoizedState===null?!1:(z&2)!==0),Ee?(V=!0,s.flags&=-129):(o===null||o.memoizedState!==null)&&(z|=1),Dr(Kr,z&1),o===null)return KR(s),o=s.memoizedState,o!==null&&(o=o.dehydrated,o!==null)?(s.mode&1?o.data==="$!"?s.lanes=8:s.lanes=1073741824:s.lanes=1,null):(re=S.children,o=S.fallback,V?(S=s.mode,V=s.child,re={mode:"hidden",children:re},!(S&1)&&V!==null?(V.childLanes=0,V.pendingProps=re):V=PM(re,S,0,null),o=Lh(o,S,m,null),V.return=s,o.return=s,V.sibling=o,s.child=V,s.child.memoizedState=_4(m),s.memoizedState=b4,o):x4(s,re));if(z=o.memoizedState,z!==null&&(Ee=z.dehydrated,Ee!==null))return tpe(o,s,re,S,Ee,z,m);if(V){V=S.fallback,re=s.mode,z=o.child,Ee=z.sibling;var Le={mode:"hidden",children:S.children};return!(re&1)&&s.child!==z?(S=s.child,S.childLanes=0,S.pendingProps=Le,s.deletions=null):(S=Rd(z,Le),S.subtreeFlags=z.subtreeFlags&14680064),Ee!==null?V=Rd(Ee,V):(V=Lh(V,re,m,null),V.flags|=2),V.return=s,S.return=s,S.sibling=V,s.child=S,S=V,V=s.child,re=o.child.memoizedState,re=re===null?_4(m):{baseLanes:re.baseLanes|m,cachePool:null,transitions:re.transitions},V.memoizedState=re,V.childLanes=o.childLanes&~m,s.memoizedState=b4,S}return V=o.child,o=V.sibling,S=Rd(V,{mode:"visible",children:S.children}),!(s.mode&1)&&(S.lanes=m),S.return=s,S.sibling=null,o!==null&&(m=s.deletions,m===null?(s.deletions=[o],s.flags|=16):m.push(o)),s.child=S,s.memoizedState=null,S}function x4(o,s){return s=PM({mode:"visible",children:s},o.mode,0,null),s.return=o,o.child=s}function mM(o,s,m,S){return S!==null&&XR(S),Yg(s,o.child,null,m),o=x4(s,s.pendingProps.children),o.flags|=2,s.memoizedState=null,o}function tpe(o,s,m,S,z,V,re){if(m)return s.flags&256?(s.flags&=-257,S=m4(Error(a(422))),mM(o,s,re,S)):s.memoizedState!==null?(s.child=o.child,s.flags|=128,null):(V=S.fallback,z=s.mode,S=PM({mode:"visible",children:S.children},z,0,null),V=Lh(V,z,re,null),V.flags|=2,S.return=s,V.return=s,S.sibling=V,s.child=S,s.mode&1&&Yg(s,o.child,null,re),s.child.memoizedState=_4(re),s.memoizedState=b4,V);if(!(s.mode&1))return mM(o,s,re,null);if(z.data==="$!"){if(S=z.nextSibling&&z.nextSibling.dataset,S)var Ee=S.dgst;return S=Ee,V=Error(a(419)),S=m4(V,S,void 0),mM(o,s,re,S)}if(Ee=(re&o.childLanes)!==0,Yo||Ee){if(S=Ri,S!==null){switch(re&-re){case 4:z=2;break;case 16:z=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:z=32;break;case 536870912:z=268435456;break;default:z=0}z=z&(S.suspendedLanes|re)?0:z,z!==0&&z!==V.retryLane&&(V.retryLane=z,Bc(o,z),Us(S,o,z,-1))}return z4(),S=m4(Error(a(421))),mM(o,s,re,S)}return z.data==="$?"?(s.flags|=128,s.child=o.child,s=ppe.bind(null,o),z._reactRetry=s,null):(o=V.treeContext,va=Sd(z.nextSibling),ga=s,Ur=!0,Ns=null,o!==null&&(Wa[qa++]=Fc,Wa[qa++]=jc,Wa[qa++]=Th,Fc=o.id,jc=o.overflow,Th=s),s=x4(s,S.children),s.flags|=4096,s)}function $ee(o,s,m){o.lanes|=s;var S=o.alternate;S!==null&&(S.lanes|=s),JR(o.return,s,m)}function w4(o,s,m,S,z){var V=o.memoizedState;V===null?o.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:S,tail:m,tailMode:z}:(V.isBackwards=s,V.rendering=null,V.renderingStartTime=0,V.last=S,V.tail=m,V.tailMode=z)}function Zee(o,s,m){var S=s.pendingProps,z=S.revealOrder,V=S.tail;if(Oo(o,s,S.children,m),S=Kr.current,S&2)S=S&1|2,s.flags|=128;else{if(o!==null&&o.flags&128)e:for(o=s.child;o!==null;){if(o.tag===13)o.memoizedState!==null&&$ee(o,m,s);else if(o.tag===19)$ee(o,m,s);else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===s)break e;for(;o.sibling===null;){if(o.return===null||o.return===s)break e;o=o.return}o.sibling.return=o.return,o=o.sibling}S&=1}if(Dr(Kr,S),!(s.mode&1))s.memoizedState=null;else switch(z){case"forwards":for(m=s.child,z=null;m!==null;)o=m.alternate,o!==null&&cM(o)===null&&(z=m),m=m.sibling;m=z,m===null?(z=s.child,s.child=null):(z=m.sibling,m.sibling=null),w4(s,!1,z,m,V);break;case"backwards":for(m=null,z=s.child,s.child=null;z!==null;){if(o=z.alternate,o!==null&&cM(o)===null){s.child=z;break}o=z.sibling,z.sibling=m,m=z,z=o}w4(s,!0,m,null,V);break;case"together":w4(s,!1,null,null,void 0);break;default:s.memoizedState=null}return s.child}function gM(o,s){!(s.mode&1)&&o!==null&&(o.alternate=null,s.alternate=null,s.flags|=2)}function Vc(o,s,m){if(o!==null&&(s.dependencies=o.dependencies),Ih|=s.lanes,!(m&s.childLanes))return null;if(o!==null&&s.child!==o.child)throw Error(a(153));if(s.child!==null){for(o=s.child,m=Rd(o,o.pendingProps),s.child=m,m.return=s;o.sibling!==null;)o=o.sibling,m=m.sibling=Rd(o,o.pendingProps),m.return=s;m.sibling=null}return s.child}function npe(o,s,m){switch(s.tag){case 3:qee(s),Xg();break;case 5:hee(s);break;case 1:Zo(s.type)&&JT(s);break;case 4:r4(s,s.stateNode.containerInfo);break;case 10:var S=s.type._context,z=s.memoizedProps.value;Dr(rM,S._currentValue),S._currentValue=z;break;case 13:if(S=s.memoizedState,S!==null)return S.dehydrated!==null?(Dr(Kr,Kr.current&1),s.flags|=128,null):m&s.child.childLanes?Xee(o,s,m):(Dr(Kr,Kr.current&1),o=Vc(o,s,m),o!==null?o.sibling:null);Dr(Kr,Kr.current&1);break;case 19:if(S=(m&s.childLanes)!==0,o.flags&128){if(S)return Zee(o,s,m);s.flags|=128}if(z=s.memoizedState,z!==null&&(z.rendering=null,z.tail=null,z.lastEffect=null),Dr(Kr,Kr.current),S)break;return null;case 22:case 23:return s.lanes=0,Hee(o,s,m)}return Vc(o,s,m)}var Yee,S4,Jee,Qee;Yee=function(o,s){for(var m=s.child;m!==null;){if(m.tag===5||m.tag===6)o.appendChild(m.stateNode);else if(m.tag!==4&&m.child!==null){m.child.return=m,m=m.child;continue}if(m===s)break;for(;m.sibling===null;){if(m.return===null||m.return===s)return;m=m.return}m.sibling.return=m.return,m=m.sibling}},S4=function(){},Jee=function(o,s,m,S){var z=o.memoizedProps;if(z!==S){o=s.stateNode,Ch(Fl.current);var V=null;switch(m){case"input":z=ot(o,z),S=ot(o,S),V=[];break;case"select":z=ae({},z,{value:void 0}),S=ae({},S,{value:void 0}),V=[];break;case"textarea":z=Ct(o,z),S=Ct(o,S),V=[];break;default:typeof z.onClick!="function"&&typeof S.onClick=="function"&&(o.onclick=$T)}Og(m,S);var re;m=null;for(st in z)if(!S.hasOwnProperty(st)&&z.hasOwnProperty(st)&&z[st]!=null)if(st==="style"){var Ee=z[st];for(re in Ee)Ee.hasOwnProperty(re)&&(m||(m={}),m[re]="")}else st!=="dangerouslySetInnerHTML"&&st!=="children"&&st!=="suppressContentEditableWarning"&&st!=="suppressHydrationWarning"&&st!=="autoFocus"&&(u.hasOwnProperty(st)?V||(V=[]):(V=V||[]).push(st,null));for(st in S){var Le=S[st];if(Ee=z!=null?z[st]:void 0,S.hasOwnProperty(st)&&Le!==Ee&&(Le!=null||Ee!=null))if(st==="style")if(Ee){for(re in Ee)!Ee.hasOwnProperty(re)||Le&&Le.hasOwnProperty(re)||(m||(m={}),m[re]="");for(re in Le)Le.hasOwnProperty(re)&&Ee[re]!==Le[re]&&(m||(m={}),m[re]=Le[re])}else m||(V||(V=[]),V.push(st,m)),m=Le;else st==="dangerouslySetInnerHTML"?(Le=Le?Le.__html:void 0,Ee=Ee?Ee.__html:void 0,Le!=null&&Ee!==Le&&(V=V||[]).push(st,Le)):st==="children"?typeof Le!="string"&&typeof Le!="number"||(V=V||[]).push(st,""+Le):st!=="suppressContentEditableWarning"&&st!=="suppressHydrationWarning"&&(u.hasOwnProperty(st)?(Le!=null&&st==="onScroll"&&Nr("scroll",o),V||Ee===Le||(V=[])):(V=V||[]).push(st,Le))}m&&(V=V||[]).push("style",m);var st=V;(s.updateQueue=st)&&(s.flags|=4)}},Qee=function(o,s,m,S){m!==S&&(s.flags|=4)};function n1(o,s){if(!Ur)switch(o.tailMode){case"hidden":s=o.tail;for(var m=null;s!==null;)s.alternate!==null&&(m=s),s=s.sibling;m===null?o.tail=null:m.sibling=null;break;case"collapsed":m=o.tail;for(var S=null;m!==null;)m.alternate!==null&&(S=m),m=m.sibling;S===null?s||o.tail===null?o.tail=null:o.tail.sibling=null:S.sibling=null}}function fo(o){var s=o.alternate!==null&&o.alternate.child===o.child,m=0,S=0;if(s)for(var z=o.child;z!==null;)m|=z.lanes|z.childLanes,S|=z.subtreeFlags&14680064,S|=z.flags&14680064,z.return=o,z=z.sibling;else for(z=o.child;z!==null;)m|=z.lanes|z.childLanes,S|=z.subtreeFlags,S|=z.flags,z.return=o,z=z.sibling;return o.subtreeFlags|=S,o.childLanes=m,s}function rpe(o,s,m){var S=s.pendingProps;switch(WR(s),s.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return fo(s),null;case 1:return Zo(s.type)&&YT(),fo(s),null;case 3:return S=s.stateNode,Jg(),Fr($o),Fr(co),a4(),S.pendingContext&&(S.context=S.pendingContext,S.pendingContext=null),(o===null||o.child===null)&&(nM(s)?s.flags|=4:o===null||o.memoizedState.isDehydrated&&!(s.flags&256)||(s.flags|=1024,Ns!==null&&(O4(Ns),Ns=null))),S4(o,s),fo(s),null;case 5:i4(s);var z=Ch(Y_.current);if(m=s.type,o!==null&&s.stateNode!=null)Jee(o,s,m,S,z),o.ref!==s.ref&&(s.flags|=512,s.flags|=2097152);else{if(!S){if(s.stateNode===null)throw Error(a(166));return fo(s),null}if(o=Ch(Fl.current),nM(s)){S=s.stateNode,m=s.type;var V=s.memoizedProps;switch(S[Nl]=s,S[q_]=V,o=(s.mode&1)!==0,m){case"dialog":Nr("cancel",S),Nr("close",S);break;case"iframe":case"object":case"embed":Nr("load",S);break;case"video":case"audio":for(z=0;z<H_.length;z++)Nr(H_[z],S);break;case"source":Nr("error",S);break;case"img":case"image":case"link":Nr("error",S),Nr("load",S);break;case"details":Nr("toggle",S);break;case"input":it(S,V),Nr("invalid",S);break;case"select":S._wrapperState={wasMultiple:!!V.multiple},Nr("invalid",S);break;case"textarea":_t(S,V),Nr("invalid",S)}Og(m,V),z=null;for(var re in V)if(V.hasOwnProperty(re)){var Ee=V[re];re==="children"?typeof Ee=="string"?S.textContent!==Ee&&(V.suppressHydrationWarning!==!0&&XT(S.textContent,Ee,o),z=["children",Ee]):typeof Ee=="number"&&S.textContent!==""+Ee&&(V.suppressHydrationWarning!==!0&&XT(S.textContent,Ee,o),z=["children",""+Ee]):u.hasOwnProperty(re)&&Ee!=null&&re==="onScroll"&&Nr("scroll",S)}switch(m){case"input":dn(S),Ve(S,V,!0);break;case"textarea":dn(S),un(S);break;case"select":case"option":break;default:typeof V.onClick=="function"&&(S.onclick=$T)}S=z,s.updateQueue=S,S!==null&&(s.flags|=4)}else{re=z.nodeType===9?z:z.ownerDocument,o==="http://www.w3.org/1999/xhtml"&&(o=ir(m)),o==="http://www.w3.org/1999/xhtml"?m==="script"?(o=re.createElement("div"),o.innerHTML="<script><\/script>",o=o.removeChild(o.firstChild)):typeof S.is=="string"?o=re.createElement(m,{is:S.is}):(o=re.createElement(m),m==="select"&&(re=o,S.multiple?re.multiple=!0:S.size&&(re.size=S.size))):o=re.createElementNS(o,m),o[Nl]=s,o[q_]=S,Yee(o,s,!1,!1),s.stateNode=o;e:{switch(re=E_(m,S),m){case"dialog":Nr("cancel",o),Nr("close",o),z=S;break;case"iframe":case"object":case"embed":Nr("load",o),z=S;break;case"video":case"audio":for(z=0;z<H_.length;z++)Nr(H_[z],o);z=S;break;case"source":Nr("error",o),z=S;break;case"img":case"image":case"link":Nr("error",o),Nr("load",o),z=S;break;case"details":Nr("toggle",o),z=S;break;case"input":it(o,S),z=ot(o,S),Nr("invalid",o);break;case"option":z=S;break;case"select":o._wrapperState={wasMultiple:!!S.multiple},z=ae({},S,{value:void 0}),Nr("invalid",o);break;case"textarea":_t(o,S),z=Ct(o,S),Nr("invalid",o);break;default:z=S}Og(m,z),Ee=z;for(V in Ee)if(Ee.hasOwnProperty(V)){var Le=Ee[V];V==="style"?Dg(o,Le):V==="dangerouslySetInnerHTML"?(Le=Le?Le.__html:void 0,Le!=null&&gd(o,Le)):V==="children"?typeof Le=="string"?(m!=="textarea"||Le!=="")&&lo(o,Le):typeof Le=="number"&&lo(o,""+Le):V!=="suppressContentEditableWarning"&&V!=="suppressHydrationWarning"&&V!=="autoFocus"&&(u.hasOwnProperty(V)?Le!=null&&V==="onScroll"&&Nr("scroll",o):Le!=null&&Q(o,V,Le,re))}switch(m){case"input":dn(o),Ve(o,S,!1);break;case"textarea":dn(o),un(o);break;case"option":S.value!=null&&o.setAttribute("value",""+Wt(S.value));break;case"select":o.multiple=!!S.multiple,V=S.value,V!=null?Ye(o,!!S.multiple,V,!1):S.defaultValue!=null&&Ye(o,!!S.multiple,S.defaultValue,!0);break;default:typeof z.onClick=="function"&&(o.onclick=$T)}switch(m){case"button":case"input":case"select":case"textarea":S=!!S.autoFocus;break e;case"img":S=!0;break e;default:S=!1}}S&&(s.flags|=4)}s.ref!==null&&(s.flags|=512,s.flags|=2097152)}return fo(s),null;case 6:if(o&&s.stateNode!=null)Qee(o,s,o.memoizedProps,S);else{if(typeof S!="string"&&s.stateNode===null)throw Error(a(166));if(m=Ch(Y_.current),Ch(Fl.current),nM(s)){if(S=s.stateNode,m=s.memoizedProps,S[Nl]=s,(V=S.nodeValue!==m)&&(o=ga,o!==null))switch(o.tag){case 3:XT(S.nodeValue,m,(o.mode&1)!==0);break;case 5:o.memoizedProps.suppressHydrationWarning!==!0&&XT(S.nodeValue,m,(o.mode&1)!==0)}V&&(s.flags|=4)}else S=(m.nodeType===9?m:m.ownerDocument).createTextNode(S),S[Nl]=s,s.stateNode=S}return fo(s),null;case 13:if(Fr(Kr),S=s.memoizedState,o===null||o.memoizedState!==null&&o.memoizedState.dehydrated!==null){if(Ur&&va!==null&&s.mode&1&&!(s.flags&128))tee(),Xg(),s.flags|=98560,V=!1;else if(V=nM(s),S!==null&&S.dehydrated!==null){if(o===null){if(!V)throw Error(a(318));if(V=s.memoizedState,V=V!==null?V.dehydrated:null,!V)throw Error(a(317));V[Nl]=s}else Xg(),!(s.flags&128)&&(s.memoizedState=null),s.flags|=4;fo(s),V=!1}else Ns!==null&&(O4(Ns),Ns=null),V=!0;if(!V)return s.flags&65536?s:null}return s.flags&128?(s.lanes=m,s):(S=S!==null,S!==(o!==null&&o.memoizedState!==null)&&S&&(s.child.flags|=8192,s.mode&1&&(o===null||Kr.current&1?ki===0&&(ki=3):z4())),s.updateQueue!==null&&(s.flags|=4),fo(s),null);case 4:return Jg(),S4(o,s),o===null&&G_(s.stateNode.containerInfo),fo(s),null;case 10:return YR(s.type._context),fo(s),null;case 17:return Zo(s.type)&&YT(),fo(s),null;case 19:if(Fr(Kr),V=s.memoizedState,V===null)return fo(s),null;if(S=(s.flags&128)!==0,re=V.rendering,re===null)if(S)n1(V,!1);else{if(ki!==0||o!==null&&o.flags&128)for(o=s.child;o!==null;){if(re=cM(o),re!==null){for(s.flags|=128,n1(V,!1),S=re.updateQueue,S!==null&&(s.updateQueue=S,s.flags|=4),s.subtreeFlags=0,S=m,m=s.child;m!==null;)V=m,o=S,V.flags&=14680066,re=V.alternate,re===null?(V.childLanes=0,V.lanes=o,V.child=null,V.subtreeFlags=0,V.memoizedProps=null,V.memoizedState=null,V.updateQueue=null,V.dependencies=null,V.stateNode=null):(V.childLanes=re.childLanes,V.lanes=re.lanes,V.child=re.child,V.subtreeFlags=0,V.deletions=null,V.memoizedProps=re.memoizedProps,V.memoizedState=re.memoizedState,V.updateQueue=re.updateQueue,V.type=re.type,o=re.dependencies,V.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext}),m=m.sibling;return Dr(Kr,Kr.current&1|2),s.child}o=o.sibling}V.tail!==null&&si()>n0&&(s.flags|=128,S=!0,n1(V,!1),s.lanes=4194304)}else{if(!S)if(o=cM(re),o!==null){if(s.flags|=128,S=!0,m=o.updateQueue,m!==null&&(s.updateQueue=m,s.flags|=4),n1(V,!0),V.tail===null&&V.tailMode==="hidden"&&!re.alternate&&!Ur)return fo(s),null}else 2*si()-V.renderingStartTime>n0&&m!==1073741824&&(s.flags|=128,S=!0,n1(V,!1),s.lanes=4194304);V.isBackwards?(re.sibling=s.child,s.child=re):(m=V.last,m!==null?m.sibling=re:s.child=re,V.last=re)}return V.tail!==null?(s=V.tail,V.rendering=s,V.tail=s.sibling,V.renderingStartTime=si(),s.sibling=null,m=Kr.current,Dr(Kr,S?m&1|2:m&1),s):(fo(s),null);case 22:case 23:return L4(),S=s.memoizedState!==null,o!==null&&o.memoizedState!==null!==S&&(s.flags|=8192),S&&s.mode&1?ya&1073741824&&(fo(s),s.subtreeFlags&6&&(s.flags|=8192)):fo(s),null;case 24:return null;case 25:return null}throw Error(a(156,s.tag))}function ipe(o,s){switch(WR(s),s.tag){case 1:return Zo(s.type)&&YT(),o=s.flags,o&65536?(s.flags=o&-65537|128,s):null;case 3:return Jg(),Fr($o),Fr(co),a4(),o=s.flags,o&65536&&!(o&128)?(s.flags=o&-65537|128,s):null;case 5:return i4(s),null;case 13:if(Fr(Kr),o=s.memoizedState,o!==null&&o.dehydrated!==null){if(s.alternate===null)throw Error(a(340));Xg()}return o=s.flags,o&65536?(s.flags=o&-65537|128,s):null;case 19:return Fr(Kr),null;case 4:return Jg(),null;case 10:return YR(s.type._context),null;case 22:case 23:return L4(),null;case 24:return null;default:return null}}var vM=!1,ho=!1,ope=typeof WeakSet=="function"?WeakSet:Set,rn=null;function e0(o,s){var m=o.ref;if(m!==null)if(typeof m=="function")try{m(null)}catch(S){ei(o,s,S)}else m.current=null}function ete(o,s,m){try{m()}catch(S){ei(o,s,S)}}var tte=!1;function ape(o,s){if(zR=RT,o=CQ(),AR(o)){if("selectionStart"in o)var m={start:o.selectionStart,end:o.selectionEnd};else e:{m=(m=o.ownerDocument)&&m.defaultView||window;var S=m.getSelection&&m.getSelection();if(S&&S.rangeCount!==0){m=S.anchorNode;var z=S.anchorOffset,V=S.focusNode;S=S.focusOffset;try{m.nodeType,V.nodeType}catch{m=null;break e}var re=0,Ee=-1,Le=-1,st=0,Dt=0,Lt=o,At=null;t:for(;;){for(var en;Lt!==m||z!==0&&Lt.nodeType!==3||(Ee=re+z),Lt!==V||S!==0&&Lt.nodeType!==3||(Le=re+S),Lt.nodeType===3&&(re+=Lt.nodeValue.length),(en=Lt.firstChild)!==null;)At=Lt,Lt=en;for(;;){if(Lt===o)break t;if(At===m&&++st===z&&(Ee=re),At===V&&++Dt===S&&(Le=re),(en=Lt.nextSibling)!==null)break;Lt=At,At=Lt.parentNode}Lt=en}m=Ee===-1||Le===-1?null:{start:Ee,end:Le}}else m=null}m=m||{start:0,end:0}}else m=null;for(NR={focusedElem:o,selectionRange:m},RT=!1,rn=s;rn!==null;)if(s=rn,o=s.child,(s.subtreeFlags&1028)!==0&&o!==null)o.return=s,rn=o;else for(;rn!==null;){s=rn;try{var an=s.alternate;if(s.flags&1024)switch(s.tag){case 0:case 11:case 15:break;case 1:if(an!==null){var ln=an.memoizedProps,li=an.memoizedState,Je=s.stateNode,je=Je.getSnapshotBeforeUpdate(s.elementType===s.type?ln:Fs(s.type,ln),li);Je.__reactInternalSnapshotBeforeUpdate=je}break;case 3:var tt=s.stateNode.containerInfo;tt.nodeType===1?tt.textContent="":tt.nodeType===9&&tt.documentElement&&tt.removeChild(tt.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(a(163))}}catch(Vt){ei(s,s.return,Vt)}if(o=s.sibling,o!==null){o.return=s.return,rn=o;break}rn=s.return}return an=tte,tte=!1,an}function r1(o,s,m){var S=s.updateQueue;if(S=S!==null?S.lastEffect:null,S!==null){var z=S=S.next;do{if((z.tag&o)===o){var V=z.destroy;z.destroy=void 0,V!==void 0&&ete(s,m,V)}z=z.next}while(z!==S)}}function yM(o,s){if(s=s.updateQueue,s=s!==null?s.lastEffect:null,s!==null){var m=s=s.next;do{if((m.tag&o)===o){var S=m.create;m.destroy=S()}m=m.next}while(m!==s)}}function E4(o){var s=o.ref;if(s!==null){var m=o.stateNode;switch(o.tag){case 5:o=m;break;default:o=m}typeof s=="function"?s(o):s.current=o}}function nte(o){var s=o.alternate;s!==null&&(o.alternate=null,nte(s)),o.child=null,o.deletions=null,o.sibling=null,o.tag===5&&(s=o.stateNode,s!==null&&(delete s[Nl],delete s[q_],delete s[UR],delete s[Vhe],delete s[Hhe])),o.stateNode=null,o.return=null,o.dependencies=null,o.memoizedProps=null,o.memoizedState=null,o.pendingProps=null,o.stateNode=null,o.updateQueue=null}function rte(o){return o.tag===5||o.tag===3||o.tag===4}function ite(o){e:for(;;){for(;o.sibling===null;){if(o.return===null||rte(o.return))return null;o=o.return}for(o.sibling.return=o.return,o=o.sibling;o.tag!==5&&o.tag!==6&&o.tag!==18;){if(o.flags&2||o.child===null||o.tag===4)continue e;o.child.return=o,o=o.child}if(!(o.flags&2))return o.stateNode}}function k4(o,s,m){var S=o.tag;if(S===5||S===6)o=o.stateNode,s?m.nodeType===8?m.parentNode.insertBefore(o,s):m.insertBefore(o,s):(m.nodeType===8?(s=m.parentNode,s.insertBefore(o,m)):(s=m,s.appendChild(o)),m=m._reactRootContainer,m!=null||s.onclick!==null||(s.onclick=$T));else if(S!==4&&(o=o.child,o!==null))for(k4(o,s,m),o=o.sibling;o!==null;)k4(o,s,m),o=o.sibling}function T4(o,s,m){var S=o.tag;if(S===5||S===6)o=o.stateNode,s?m.insertBefore(o,s):m.appendChild(o);else if(S!==4&&(o=o.child,o!==null))for(T4(o,s,m),o=o.sibling;o!==null;)T4(o,s,m),o=o.sibling}var Yi=null,js=!1;function Cd(o,s,m){for(m=m.child;m!==null;)ote(o,s,m),m=m.sibling}function ote(o,s,m){if(zl&&typeof zl.onCommitFiberUnmount=="function")try{zl.onCommitFiberUnmount(PT,m)}catch{}switch(m.tag){case 5:ho||e0(m,s);case 6:var S=Yi,z=js;Yi=null,Cd(o,s,m),Yi=S,js=z,Yi!==null&&(js?(o=Yi,m=m.stateNode,o.nodeType===8?o.parentNode.removeChild(m):o.removeChild(m)):Yi.removeChild(m.stateNode));break;case 18:Yi!==null&&(js?(o=Yi,m=m.stateNode,o.nodeType===8?BR(o.parentNode,m):o.nodeType===1&&BR(o,m),L_(o)):BR(Yi,m.stateNode));break;case 4:S=Yi,z=js,Yi=m.stateNode.containerInfo,js=!0,Cd(o,s,m),Yi=S,js=z;break;case 0:case 11:case 14:case 15:if(!ho&&(S=m.updateQueue,S!==null&&(S=S.lastEffect,S!==null))){z=S=S.next;do{var V=z,re=V.destroy;V=V.tag,re!==void 0&&(V&2||V&4)&&ete(m,s,re),z=z.next}while(z!==S)}Cd(o,s,m);break;case 1:if(!ho&&(e0(m,s),S=m.stateNode,typeof S.componentWillUnmount=="function"))try{S.props=m.memoizedProps,S.state=m.memoizedState,S.componentWillUnmount()}catch(Ee){ei(m,s,Ee)}Cd(o,s,m);break;case 21:Cd(o,s,m);break;case 22:m.mode&1?(ho=(S=ho)||m.memoizedState!==null,Cd(o,s,m),ho=S):Cd(o,s,m);break;default:Cd(o,s,m)}}function ate(o){var s=o.updateQueue;if(s!==null){o.updateQueue=null;var m=o.stateNode;m===null&&(m=o.stateNode=new ope),s.forEach(function(S){var z=mpe.bind(null,o,S);m.has(S)||(m.add(S),S.then(z,z))})}}function Bs(o,s){var m=s.deletions;if(m!==null)for(var S=0;S<m.length;S++){var z=m[S];try{var V=o,re=s,Ee=re;e:for(;Ee!==null;){switch(Ee.tag){case 5:Yi=Ee.stateNode,js=!1;break e;case 3:Yi=Ee.stateNode.containerInfo,js=!0;break e;case 4:Yi=Ee.stateNode.containerInfo,js=!0;break e}Ee=Ee.return}if(Yi===null)throw Error(a(160));ote(V,re,z),Yi=null,js=!1;var Le=z.alternate;Le!==null&&(Le.return=null),z.return=null}catch(st){ei(z,s,st)}}if(s.subtreeFlags&12854)for(s=s.child;s!==null;)ste(s,o),s=s.sibling}function ste(o,s){var m=o.alternate,S=o.flags;switch(o.tag){case 0:case 11:case 14:case 15:if(Bs(s,o),Bl(o),S&4){try{r1(3,o,o.return),yM(3,o)}catch(ln){ei(o,o.return,ln)}try{r1(5,o,o.return)}catch(ln){ei(o,o.return,ln)}}break;case 1:Bs(s,o),Bl(o),S&512&&m!==null&&e0(m,m.return);break;case 5:if(Bs(s,o),Bl(o),S&512&&m!==null&&e0(m,m.return),o.flags&32){var z=o.stateNode;try{lo(z,"")}catch(ln){ei(o,o.return,ln)}}if(S&4&&(z=o.stateNode,z!=null)){var V=o.memoizedProps,re=m!==null?m.memoizedProps:V,Ee=o.type,Le=o.updateQueue;if(o.updateQueue=null,Le!==null)try{Ee==="input"&&V.type==="radio"&&V.name!=null&&be(z,V),E_(Ee,re);var st=E_(Ee,V);for(re=0;re<Le.length;re+=2){var Dt=Le[re],Lt=Le[re+1];Dt==="style"?Dg(z,Lt):Dt==="dangerouslySetInnerHTML"?gd(z,Lt):Dt==="children"?lo(z,Lt):Q(z,Dt,Lt,st)}switch(Ee){case"input":ge(z,V);break;case"textarea":St(z,V);break;case"select":var At=z._wrapperState.wasMultiple;z._wrapperState.wasMultiple=!!V.multiple;var en=V.value;en!=null?Ye(z,!!V.multiple,en,!1):At!==!!V.multiple&&(V.defaultValue!=null?Ye(z,!!V.multiple,V.defaultValue,!0):Ye(z,!!V.multiple,V.multiple?[]:"",!1))}z[q_]=V}catch(ln){ei(o,o.return,ln)}}break;case 6:if(Bs(s,o),Bl(o),S&4){if(o.stateNode===null)throw Error(a(162));z=o.stateNode,V=o.memoizedProps;try{z.nodeValue=V}catch(ln){ei(o,o.return,ln)}}break;case 3:if(Bs(s,o),Bl(o),S&4&&m!==null&&m.memoizedState.isDehydrated)try{L_(s.containerInfo)}catch(ln){ei(o,o.return,ln)}break;case 4:Bs(s,o),Bl(o);break;case 13:Bs(s,o),Bl(o),z=o.child,z.flags&8192&&(V=z.memoizedState!==null,z.stateNode.isHidden=V,!V||z.alternate!==null&&z.alternate.memoizedState!==null||(C4=si())),S&4&&ate(o);break;case 22:if(Dt=m!==null&&m.memoizedState!==null,o.mode&1?(ho=(st=ho)||Dt,Bs(s,o),ho=st):Bs(s,o),Bl(o),S&8192){if(st=o.memoizedState!==null,(o.stateNode.isHidden=st)&&!Dt&&o.mode&1)for(rn=o,Dt=o.child;Dt!==null;){for(Lt=rn=Dt;rn!==null;){switch(At=rn,en=At.child,At.tag){case 0:case 11:case 14:case 15:r1(4,At,At.return);break;case 1:e0(At,At.return);var an=At.stateNode;if(typeof an.componentWillUnmount=="function"){S=At,m=At.return;try{s=S,an.props=s.memoizedProps,an.state=s.memoizedState,an.componentWillUnmount()}catch(ln){ei(S,m,ln)}}break;case 5:e0(At,At.return);break;case 22:if(At.memoizedState!==null){ute(Lt);continue}}en!==null?(en.return=At,rn=en):ute(Lt)}Dt=Dt.sibling}e:for(Dt=null,Lt=o;;){if(Lt.tag===5){if(Dt===null){Dt=Lt;try{z=Lt.stateNode,st?(V=z.style,typeof V.setProperty=="function"?V.setProperty("display","none","important"):V.display="none"):(Ee=Lt.stateNode,Le=Lt.memoizedProps.style,re=Le!=null&&Le.hasOwnProperty("display")?Le.display:null,Ee.style.display=wh("display",re))}catch(ln){ei(o,o.return,ln)}}}else if(Lt.tag===6){if(Dt===null)try{Lt.stateNode.nodeValue=st?"":Lt.memoizedProps}catch(ln){ei(o,o.return,ln)}}else if((Lt.tag!==22&&Lt.tag!==23||Lt.memoizedState===null||Lt===o)&&Lt.child!==null){Lt.child.return=Lt,Lt=Lt.child;continue}if(Lt===o)break e;for(;Lt.sibling===null;){if(Lt.return===null||Lt.return===o)break e;Dt===Lt&&(Dt=null),Lt=Lt.return}Dt===Lt&&(Dt=null),Lt.sibling.return=Lt.return,Lt=Lt.sibling}}break;case 19:Bs(s,o),Bl(o),S&4&&ate(o);break;case 21:break;default:Bs(s,o),Bl(o)}}function Bl(o){var s=o.flags;if(s&2){try{e:{for(var m=o.return;m!==null;){if(rte(m)){var S=m;break e}m=m.return}throw Error(a(160))}switch(S.tag){case 5:var z=S.stateNode;S.flags&32&&(lo(z,""),S.flags&=-33);var V=ite(o);T4(o,V,z);break;case 3:case 4:var re=S.stateNode.containerInfo,Ee=ite(o);k4(o,Ee,re);break;default:throw Error(a(161))}}catch(Le){ei(o,o.return,Le)}o.flags&=-3}s&4096&&(o.flags&=-4097)}function spe(o,s,m){rn=o,lte(o)}function lte(o,s,m){for(var S=(o.mode&1)!==0;rn!==null;){var z=rn,V=z.child;if(z.tag===22&&S){var re=z.memoizedState!==null||vM;if(!re){var Ee=z.alternate,Le=Ee!==null&&Ee.memoizedState!==null||ho;Ee=vM;var st=ho;if(vM=re,(ho=Le)&&!st)for(rn=z;rn!==null;)re=rn,Le=re.child,re.tag===22&&re.memoizedState!==null?dte(z):Le!==null?(Le.return=re,rn=Le):dte(z);for(;V!==null;)rn=V,lte(V),V=V.sibling;rn=z,vM=Ee,ho=st}cte(o)}else z.subtreeFlags&8772&&V!==null?(V.return=z,rn=V):cte(o)}}function cte(o){for(;rn!==null;){var s=rn;if(s.flags&8772){var m=s.alternate;try{if(s.flags&8772)switch(s.tag){case 0:case 11:case 15:ho||yM(5,s);break;case 1:var S=s.stateNode;if(s.flags&4&&!ho)if(m===null)S.componentDidMount();else{var z=s.elementType===s.type?m.memoizedProps:Fs(s.type,m.memoizedProps);S.componentDidUpdate(z,m.memoizedState,S.__reactInternalSnapshotBeforeUpdate)}var V=s.updateQueue;V!==null&&oee(s,V,S);break;case 3:var re=s.updateQueue;if(re!==null){if(m=null,s.child!==null)switch(s.child.tag){case 5:m=s.child.stateNode;break;case 1:m=s.child.stateNode}oee(s,re,m)}break;case 5:var Ee=s.stateNode;if(m===null&&s.flags&4){m=Ee;var Le=s.memoizedProps;switch(s.type){case"button":case"input":case"select":case"textarea":Le.autoFocus&&m.focus();break;case"img":Le.src&&(m.src=Le.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(s.memoizedState===null){var st=s.alternate;if(st!==null){var Dt=st.memoizedState;if(Dt!==null){var Lt=Dt.dehydrated;Lt!==null&&L_(Lt)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(a(163))}ho||s.flags&512&&E4(s)}catch(At){ei(s,s.return,At)}}if(s===o){rn=null;break}if(m=s.sibling,m!==null){m.return=s.return,rn=m;break}rn=s.return}}function ute(o){for(;rn!==null;){var s=rn;if(s===o){rn=null;break}var m=s.sibling;if(m!==null){m.return=s.return,rn=m;break}rn=s.return}}function dte(o){for(;rn!==null;){var s=rn;try{switch(s.tag){case 0:case 11:case 15:var m=s.return;try{yM(4,s)}catch(Le){ei(s,m,Le)}break;case 1:var S=s.stateNode;if(typeof S.componentDidMount=="function"){var z=s.return;try{S.componentDidMount()}catch(Le){ei(s,z,Le)}}var V=s.return;try{E4(s)}catch(Le){ei(s,V,Le)}break;case 5:var re=s.return;try{E4(s)}catch(Le){ei(s,re,Le)}}}catch(Le){ei(s,s.return,Le)}if(s===o){rn=null;break}var Ee=s.sibling;if(Ee!==null){Ee.return=s.return,rn=Ee;break}rn=s.return}}var lpe=Math.ceil,bM=J.ReactCurrentDispatcher,M4=J.ReactCurrentOwner,$a=J.ReactCurrentBatchConfig,or=0,Ri=null,gi=null,Ji=0,ya=0,t0=Ed(0),ki=0,i1=null,Ih=0,_M=0,P4=0,o1=null,Jo=null,C4=0,n0=1/0,Hc=null,xM=!1,A4=null,Ad=null,wM=!1,Id=null,SM=0,a1=0,I4=null,EM=-1,kM=0;function Ro(){return or&6?si():EM!==-1?EM:EM=si()}function Dd(o){return o.mode&1?or&2&&Ji!==0?Ji&-Ji:Whe.transition!==null?(kM===0&&(kM=tQ()),kM):(o=yr,o!==0||(o=window.event,o=o===void 0?16:uQ(o.type)),o):1}function Us(o,s,m,S){if(50<a1)throw a1=0,I4=null,Error(a(185));A_(o,m,S),(!(or&2)||o!==Ri)&&(o===Ri&&(!(or&2)&&(_M|=m),ki===4&&Od(o,Ji)),Qo(o,S),m===1&&or===0&&!(s.mode&1)&&(n0=si()+500,QT&&Td()))}function Qo(o,s){var m=o.callbackNode;Kfe(o,s);var S=IT(o,o===Ri?Ji:0);if(S===0)m!==null&&JJ(m),o.callbackNode=null,o.callbackPriority=0;else if(s=S&-S,o.callbackPriority!==s){if(m!=null&&JJ(m),s===1)o.tag===0?Ghe(hte.bind(null,o)):ZQ(hte.bind(null,o)),Bhe(function(){!(or&6)&&Td()}),m=null;else{switch(nQ(S)){case 1:m=hR;break;case 4:m=QJ;break;case 16:m=MT;break;case 536870912:m=eQ;break;default:m=MT}m=xte(m,fte.bind(null,o))}o.callbackPriority=s,o.callbackNode=m}}function fte(o,s){if(EM=-1,kM=0,or&6)throw Error(a(327));var m=o.callbackNode;if(r0()&&o.callbackNode!==m)return null;var S=IT(o,o===Ri?Ji:0);if(S===0)return null;if(S&30||S&o.expiredLanes||s)s=TM(o,S);else{s=S;var z=or;or|=2;var V=mte();(Ri!==o||Ji!==s)&&(Hc=null,n0=si()+500,Oh(o,s));do try{dpe();break}catch(Ee){pte(o,Ee)}while(1);ZR(),bM.current=V,or=z,gi!==null?s=0:(Ri=null,Ji=0,s=ki)}if(s!==0){if(s===2&&(z=pR(o),z!==0&&(S=z,s=D4(o,z))),s===1)throw m=i1,Oh(o,0),Od(o,S),Qo(o,si()),m;if(s===6)Od(o,S);else{if(z=o.current.alternate,!(S&30)&&!cpe(z)&&(s=TM(o,S),s===2&&(V=pR(o),V!==0&&(S=V,s=D4(o,V))),s===1))throw m=i1,Oh(o,0),Od(o,S),Qo(o,si()),m;switch(o.finishedWork=z,o.finishedLanes=S,s){case 0:case 1:throw Error(a(345));case 2:Rh(o,Jo,Hc);break;case 3:if(Od(o,S),(S&130023424)===S&&(s=C4+500-si(),10<s)){if(IT(o,0)!==0)break;if(z=o.suspendedLanes,(z&S)!==S){Ro(),o.pingedLanes|=o.suspendedLanes&z;break}o.timeoutHandle=jR(Rh.bind(null,o,Jo,Hc),s);break}Rh(o,Jo,Hc);break;case 4:if(Od(o,S),(S&4194240)===S)break;for(s=o.eventTimes,z=-1;0<S;){var re=31-Ls(S);V=1<<re,re=s[re],re>z&&(z=re),S&=~V}if(S=z,S=si()-S,S=(120>S?120:480>S?480:1080>S?1080:1920>S?1920:3e3>S?3e3:4320>S?4320:1960*lpe(S/1960))-S,10<S){o.timeoutHandle=jR(Rh.bind(null,o,Jo,Hc),S);break}Rh(o,Jo,Hc);break;case 5:Rh(o,Jo,Hc);break;default:throw Error(a(329))}}}return Qo(o,si()),o.callbackNode===m?fte.bind(null,o):null}function D4(o,s){var m=o1;return o.current.memoizedState.isDehydrated&&(Oh(o,s).flags|=256),o=TM(o,s),o!==2&&(s=Jo,Jo=m,s!==null&&O4(s)),o}function O4(o){Jo===null?Jo=o:Jo.push.apply(Jo,o)}function cpe(o){for(var s=o;;){if(s.flags&16384){var m=s.updateQueue;if(m!==null&&(m=m.stores,m!==null))for(var S=0;S<m.length;S++){var z=m[S],V=z.getSnapshot;z=z.value;try{if(!zs(V(),z))return!1}catch{return!1}}}if(m=s.child,s.subtreeFlags&16384&&m!==null)m.return=s,s=m;else{if(s===o)break;for(;s.sibling===null;){if(s.return===null||s.return===o)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function Od(o,s){for(s&=~P4,s&=~_M,o.suspendedLanes|=s,o.pingedLanes&=~s,o=o.expirationTimes;0<s;){var m=31-Ls(s),S=1<<m;o[m]=-1,s&=~S}}function hte(o){if(or&6)throw Error(a(327));r0();var s=IT(o,0);if(!(s&1))return Qo(o,si()),null;var m=TM(o,s);if(o.tag!==0&&m===2){var S=pR(o);S!==0&&(s=S,m=D4(o,S))}if(m===1)throw m=i1,Oh(o,0),Od(o,s),Qo(o,si()),m;if(m===6)throw Error(a(345));return o.finishedWork=o.current.alternate,o.finishedLanes=s,Rh(o,Jo,Hc),Qo(o,si()),null}function R4(o,s){var m=or;or|=1;try{return o(s)}finally{or=m,or===0&&(n0=si()+500,QT&&Td())}}function Dh(o){Id!==null&&Id.tag===0&&!(or&6)&&r0();var s=or;or|=1;var m=$a.transition,S=yr;try{if($a.transition=null,yr=1,o)return o()}finally{yr=S,$a.transition=m,or=s,!(or&6)&&Td()}}function L4(){ya=t0.current,Fr(t0)}function Oh(o,s){o.finishedWork=null,o.finishedLanes=0;var m=o.timeoutHandle;if(m!==-1&&(o.timeoutHandle=-1,jhe(m)),gi!==null)for(m=gi.return;m!==null;){var S=m;switch(WR(S),S.tag){case 1:S=S.type.childContextTypes,S!=null&&YT();break;case 3:Jg(),Fr($o),Fr(co),a4();break;case 5:i4(S);break;case 4:Jg();break;case 13:Fr(Kr);break;case 19:Fr(Kr);break;case 10:YR(S.type._context);break;case 22:case 23:L4()}m=m.return}if(Ri=o,gi=o=Rd(o.current,null),Ji=ya=s,ki=0,i1=null,P4=_M=Ih=0,Jo=o1=null,Ph!==null){for(s=0;s<Ph.length;s++)if(m=Ph[s],S=m.interleaved,S!==null){m.interleaved=null;var z=S.next,V=m.pending;if(V!==null){var re=V.next;V.next=z,S.next=re}m.pending=S}Ph=null}return o}function pte(o,s){do{var m=gi;try{if(ZR(),uM.current=pM,dM){for(var S=Xr.memoizedState;S!==null;){var z=S.queue;z!==null&&(z.pending=null),S=S.next}dM=!1}if(Ah=0,Oi=Ei=Xr=null,J_=!1,Q_=0,M4.current=null,m===null||m.return===null){ki=1,i1=s,gi=null;break}e:{var V=o,re=m.return,Ee=m,Le=s;if(s=Ji,Ee.flags|=32768,Le!==null&&typeof Le=="object"&&typeof Le.then=="function"){var st=Le,Dt=Ee,Lt=Dt.tag;if(!(Dt.mode&1)&&(Lt===0||Lt===11||Lt===15)){var At=Dt.alternate;At?(Dt.updateQueue=At.updateQueue,Dt.memoizedState=At.memoizedState,Dt.lanes=At.lanes):(Dt.updateQueue=null,Dt.memoizedState=null)}var en=Fee(re);if(en!==null){en.flags&=-257,jee(en,re,Ee,V,s),en.mode&1&&Nee(V,st,s),s=en,Le=st;var an=s.updateQueue;if(an===null){var ln=new Set;ln.add(Le),s.updateQueue=ln}else an.add(Le);break e}else{if(!(s&1)){Nee(V,st,s),z4();break e}Le=Error(a(426))}}else if(Ur&&Ee.mode&1){var li=Fee(re);if(li!==null){!(li.flags&65536)&&(li.flags|=256),jee(li,re,Ee,V,s),XR(Qg(Le,Ee));break e}}V=Le=Qg(Le,Ee),ki!==4&&(ki=2),o1===null?o1=[V]:o1.push(V),V=re;do{switch(V.tag){case 3:V.flags|=65536,s&=-s,V.lanes|=s;var Je=Lee(V,Le,s);iee(V,Je);break e;case 1:Ee=Le;var je=V.type,tt=V.stateNode;if(!(V.flags&128)&&(typeof je.getDerivedStateFromError=="function"||tt!==null&&typeof tt.componentDidCatch=="function"&&(Ad===null||!Ad.has(tt)))){V.flags|=65536,s&=-s,V.lanes|=s;var Vt=zee(V,Ee,s);iee(V,Vt);break e}}V=V.return}while(V!==null)}vte(m)}catch(cn){s=cn,gi===m&&m!==null&&(gi=m=m.return);continue}break}while(1)}function mte(){var o=bM.current;return bM.current=pM,o===null?pM:o}function z4(){(ki===0||ki===3||ki===2)&&(ki=4),Ri===null||!(Ih&268435455)&&!(_M&268435455)||Od(Ri,Ji)}function TM(o,s){var m=or;or|=2;var S=mte();(Ri!==o||Ji!==s)&&(Hc=null,Oh(o,s));do try{upe();break}catch(z){pte(o,z)}while(1);if(ZR(),or=m,bM.current=S,gi!==null)throw Error(a(261));return Ri=null,Ji=0,ki}function upe(){for(;gi!==null;)gte(gi)}function dpe(){for(;gi!==null&&!Ffe();)gte(gi)}function gte(o){var s=_te(o.alternate,o,ya);o.memoizedProps=o.pendingProps,s===null?vte(o):gi=s,M4.current=null}function vte(o){var s=o;do{var m=s.alternate;if(o=s.return,s.flags&32768){if(m=ipe(m,s),m!==null){m.flags&=32767,gi=m;return}if(o!==null)o.flags|=32768,o.subtreeFlags=0,o.deletions=null;else{ki=6,gi=null;return}}else if(m=rpe(m,s,ya),m!==null){gi=m;return}if(s=s.sibling,s!==null){gi=s;return}gi=s=o}while(s!==null);ki===0&&(ki=5)}function Rh(o,s,m){var S=yr,z=$a.transition;try{$a.transition=null,yr=1,fpe(o,s,m,S)}finally{$a.transition=z,yr=S}return null}function fpe(o,s,m,S){do r0();while(Id!==null);if(or&6)throw Error(a(327));m=o.finishedWork;var z=o.finishedLanes;if(m===null)return null;if(o.finishedWork=null,o.finishedLanes=0,m===o.current)throw Error(a(177));o.callbackNode=null,o.callbackPriority=0;var V=m.lanes|m.childLanes;if(Xfe(o,V),o===Ri&&(gi=Ri=null,Ji=0),!(m.subtreeFlags&2064)&&!(m.flags&2064)||wM||(wM=!0,xte(MT,function(){return r0(),null})),V=(m.flags&15990)!==0,m.subtreeFlags&15990||V){V=$a.transition,$a.transition=null;var re=yr;yr=1;var Ee=or;or|=4,M4.current=null,ape(o,m),ste(m,o),Rhe(NR),RT=!!zR,NR=zR=null,o.current=m,spe(m),jfe(),or=Ee,yr=re,$a.transition=V}else o.current=m;if(wM&&(wM=!1,Id=o,SM=z),V=o.pendingLanes,V===0&&(Ad=null),Vfe(m.stateNode),Qo(o,si()),s!==null)for(S=o.onRecoverableError,m=0;m<s.length;m++)z=s[m],S(z.value,{componentStack:z.stack,digest:z.digest});if(xM)throw xM=!1,o=A4,A4=null,o;return SM&1&&o.tag!==0&&r0(),V=o.pendingLanes,V&1?o===I4?a1++:(a1=0,I4=o):a1=0,Td(),null}function r0(){if(Id!==null){var o=nQ(SM),s=$a.transition,m=yr;try{if($a.transition=null,yr=16>o?16:o,Id===null)var S=!1;else{if(o=Id,Id=null,SM=0,or&6)throw Error(a(331));var z=or;for(or|=4,rn=o.current;rn!==null;){var V=rn,re=V.child;if(rn.flags&16){var Ee=V.deletions;if(Ee!==null){for(var Le=0;Le<Ee.length;Le++){var st=Ee[Le];for(rn=st;rn!==null;){var Dt=rn;switch(Dt.tag){case 0:case 11:case 15:r1(8,Dt,V)}var Lt=Dt.child;if(Lt!==null)Lt.return=Dt,rn=Lt;else for(;rn!==null;){Dt=rn;var At=Dt.sibling,en=Dt.return;if(nte(Dt),Dt===st){rn=null;break}if(At!==null){At.return=en,rn=At;break}rn=en}}}var an=V.alternate;if(an!==null){var ln=an.child;if(ln!==null){an.child=null;do{var li=ln.sibling;ln.sibling=null,ln=li}while(ln!==null)}}rn=V}}if(V.subtreeFlags&2064&&re!==null)re.return=V,rn=re;else e:for(;rn!==null;){if(V=rn,V.flags&2048)switch(V.tag){case 0:case 11:case 15:r1(9,V,V.return)}var Je=V.sibling;if(Je!==null){Je.return=V.return,rn=Je;break e}rn=V.return}}var je=o.current;for(rn=je;rn!==null;){re=rn;var tt=re.child;if(re.subtreeFlags&2064&&tt!==null)tt.return=re,rn=tt;else e:for(re=je;rn!==null;){if(Ee=rn,Ee.flags&2048)try{switch(Ee.tag){case 0:case 11:case 15:yM(9,Ee)}}catch(cn){ei(Ee,Ee.return,cn)}if(Ee===re){rn=null;break e}var Vt=Ee.sibling;if(Vt!==null){Vt.return=Ee.return,rn=Vt;break e}rn=Ee.return}}if(or=z,Td(),zl&&typeof zl.onPostCommitFiberRoot=="function")try{zl.onPostCommitFiberRoot(PT,o)}catch{}S=!0}return S}finally{yr=m,$a.transition=s}}return!1}function yte(o,s,m){s=Qg(m,s),s=Lee(o,s,1),o=Pd(o,s,1),s=Ro(),o!==null&&(A_(o,1,s),Qo(o,s))}function ei(o,s,m){if(o.tag===3)yte(o,o,m);else for(;s!==null;){if(s.tag===3){yte(s,o,m);break}else if(s.tag===1){var S=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof S.componentDidCatch=="function"&&(Ad===null||!Ad.has(S))){o=Qg(m,o),o=zee(s,o,1),s=Pd(s,o,1),o=Ro(),s!==null&&(A_(s,1,o),Qo(s,o));break}}s=s.return}}function hpe(o,s,m){var S=o.pingCache;S!==null&&S.delete(s),s=Ro(),o.pingedLanes|=o.suspendedLanes&m,Ri===o&&(Ji&m)===m&&(ki===4||ki===3&&(Ji&130023424)===Ji&&500>si()-C4?Oh(o,0):P4|=m),Qo(o,s)}function bte(o,s){s===0&&(o.mode&1?(s=AT,AT<<=1,!(AT&130023424)&&(AT=4194304)):s=1);var m=Ro();o=Bc(o,s),o!==null&&(A_(o,s,m),Qo(o,m))}function ppe(o){var s=o.memoizedState,m=0;s!==null&&(m=s.retryLane),bte(o,m)}function mpe(o,s){var m=0;switch(o.tag){case 13:var S=o.stateNode,z=o.memoizedState;z!==null&&(m=z.retryLane);break;case 19:S=o.stateNode;break;default:throw Error(a(314))}S!==null&&S.delete(s),bte(o,m)}var _te;_te=function(o,s,m){if(o!==null)if(o.memoizedProps!==s.pendingProps||$o.current)Yo=!0;else{if(!(o.lanes&m)&&!(s.flags&128))return Yo=!1,npe(o,s,m);Yo=!!(o.flags&131072)}else Yo=!1,Ur&&s.flags&1048576&&YQ(s,tM,s.index);switch(s.lanes=0,s.tag){case 2:var S=s.type;gM(o,s),o=s.pendingProps;var z=Wg(s,co.current);Zg(s,m),z=c4(null,s,S,o,z,m);var V=u4();return s.flags|=1,typeof z=="object"&&z!==null&&typeof z.render=="function"&&z.$$typeof===void 0?(s.tag=1,s.memoizedState=null,s.updateQueue=null,Zo(S)?(V=!0,JT(s)):V=!1,s.memoizedState=z.state!==null&&z.state!==void 0?z.state:null,e4(s),z.updater=sM,s.stateNode=z,z._reactInternals=s,n4(s,S,o,m),s=y4(null,s,S,!0,V,m)):(s.tag=0,Ur&&V&&GR(s),Oo(null,s,z,m),s=s.child),s;case 16:S=s.elementType;e:{switch(gM(o,s),o=s.pendingProps,z=S._init,S=z(S._payload),s.type=S,z=s.tag=vpe(S),o=Fs(S,o),z){case 0:s=v4(null,s,S,o,m);break e;case 1:s=Wee(null,s,S,o,m);break e;case 11:s=Bee(null,s,S,o,m);break e;case 14:s=Uee(null,s,S,Fs(S.type,o),m);break e}throw Error(a(306,S,""))}return s;case 0:return S=s.type,z=s.pendingProps,z=s.elementType===S?z:Fs(S,z),v4(o,s,S,z,m);case 1:return S=s.type,z=s.pendingProps,z=s.elementType===S?z:Fs(S,z),Wee(o,s,S,z,m);case 3:e:{if(qee(s),o===null)throw Error(a(387));S=s.pendingProps,V=s.memoizedState,z=V.element,ree(o,s),aM(s,S,null,m);var re=s.memoizedState;if(S=re.element,V.isDehydrated)if(V={element:S,isDehydrated:!1,cache:re.cache,pendingSuspenseBoundaries:re.pendingSuspenseBoundaries,transitions:re.transitions},s.updateQueue.baseState=V,s.memoizedState=V,s.flags&256){z=Qg(Error(a(423)),s),s=Kee(o,s,S,m,z);break e}else if(S!==z){z=Qg(Error(a(424)),s),s=Kee(o,s,S,m,z);break e}else for(va=Sd(s.stateNode.containerInfo.firstChild),ga=s,Ur=!0,Ns=null,m=fee(s,null,S,m),s.child=m;m;)m.flags=m.flags&-3|4096,m=m.sibling;else{if(Xg(),S===z){s=Vc(o,s,m);break e}Oo(o,s,S,m)}s=s.child}return s;case 5:return hee(s),o===null&&KR(s),S=s.type,z=s.pendingProps,V=o!==null?o.memoizedProps:null,re=z.children,FR(S,z)?re=null:V!==null&&FR(S,V)&&(s.flags|=32),Gee(o,s),Oo(o,s,re,m),s.child;case 6:return o===null&&KR(s),null;case 13:return Xee(o,s,m);case 4:return r4(s,s.stateNode.containerInfo),S=s.pendingProps,o===null?s.child=Yg(s,null,S,m):Oo(o,s,S,m),s.child;case 11:return S=s.type,z=s.pendingProps,z=s.elementType===S?z:Fs(S,z),Bee(o,s,S,z,m);case 7:return Oo(o,s,s.pendingProps,m),s.child;case 8:return Oo(o,s,s.pendingProps.children,m),s.child;case 12:return Oo(o,s,s.pendingProps.children,m),s.child;case 10:e:{if(S=s.type._context,z=s.pendingProps,V=s.memoizedProps,re=z.value,Dr(rM,S._currentValue),S._currentValue=re,V!==null)if(zs(V.value,re)){if(V.children===z.children&&!$o.current){s=Vc(o,s,m);break e}}else for(V=s.child,V!==null&&(V.return=s);V!==null;){var Ee=V.dependencies;if(Ee!==null){re=V.child;for(var Le=Ee.firstContext;Le!==null;){if(Le.context===S){if(V.tag===1){Le=Uc(-1,m&-m),Le.tag=2;var st=V.updateQueue;if(st!==null){st=st.shared;var Dt=st.pending;Dt===null?Le.next=Le:(Le.next=Dt.next,Dt.next=Le),st.pending=Le}}V.lanes|=m,Le=V.alternate,Le!==null&&(Le.lanes|=m),JR(V.return,m,s),Ee.lanes|=m;break}Le=Le.next}}else if(V.tag===10)re=V.type===s.type?null:V.child;else if(V.tag===18){if(re=V.return,re===null)throw Error(a(341));re.lanes|=m,Ee=re.alternate,Ee!==null&&(Ee.lanes|=m),JR(re,m,s),re=V.sibling}else re=V.child;if(re!==null)re.return=V;else for(re=V;re!==null;){if(re===s){re=null;break}if(V=re.sibling,V!==null){V.return=re.return,re=V;break}re=re.return}V=re}Oo(o,s,z.children,m),s=s.child}return s;case 9:return z=s.type,S=s.pendingProps.children,Zg(s,m),z=Ka(z),S=S(z),s.flags|=1,Oo(o,s,S,m),s.child;case 14:return S=s.type,z=Fs(S,s.pendingProps),z=Fs(S.type,z),Uee(o,s,S,z,m);case 15:return Vee(o,s,s.type,s.pendingProps,m);case 17:return S=s.type,z=s.pendingProps,z=s.elementType===S?z:Fs(S,z),gM(o,s),s.tag=1,Zo(S)?(o=!0,JT(s)):o=!1,Zg(s,m),lee(s,S,z),n4(s,S,z,m),y4(null,s,S,!0,o,m);case 19:return Zee(o,s,m);case 22:return Hee(o,s,m)}throw Error(a(156,s.tag))};function xte(o,s){return YJ(o,s)}function gpe(o,s,m,S){this.tag=o,this.key=m,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=S,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Za(o,s,m,S){return new gpe(o,s,m,S)}function N4(o){return o=o.prototype,!(!o||!o.isReactComponent)}function vpe(o){if(typeof o=="function")return N4(o)?1:0;if(o!=null){if(o=o.$$typeof,o===De)return 11;if(o===Pt)return 14}return 2}function Rd(o,s){var m=o.alternate;return m===null?(m=Za(o.tag,s,o.key,o.mode),m.elementType=o.elementType,m.type=o.type,m.stateNode=o.stateNode,m.alternate=o,o.alternate=m):(m.pendingProps=s,m.type=o.type,m.flags=0,m.subtreeFlags=0,m.deletions=null),m.flags=o.flags&14680064,m.childLanes=o.childLanes,m.lanes=o.lanes,m.child=o.child,m.memoizedProps=o.memoizedProps,m.memoizedState=o.memoizedState,m.updateQueue=o.updateQueue,s=o.dependencies,m.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},m.sibling=o.sibling,m.index=o.index,m.ref=o.ref,m}function MM(o,s,m,S,z,V){var re=2;if(S=o,typeof o=="function")N4(o)&&(re=1);else if(typeof o=="string")re=5;else e:switch(o){case Me:return Lh(m.children,z,V,s);case ue:re=8,z|=8;break;case Ae:return o=Za(12,m,s,z|2),o.elementType=Ae,o.lanes=V,o;case q:return o=Za(13,m,s,z),o.elementType=q,o.lanes=V,o;case Fe:return o=Za(19,m,s,z),o.elementType=Fe,o.lanes=V,o;case ke:return PM(m,z,V,s);default:if(typeof o=="object"&&o!==null)switch(o.$$typeof){case We:re=10;break e;case oe:re=9;break e;case De:re=11;break e;case Pt:re=14;break e;case Pe:re=16,S=null;break e}throw Error(a(130,o==null?o:typeof o,""))}return s=Za(re,m,s,z),s.elementType=o,s.type=S,s.lanes=V,s}function Lh(o,s,m,S){return o=Za(7,o,S,s),o.lanes=m,o}function PM(o,s,m,S){return o=Za(22,o,S,s),o.elementType=ke,o.lanes=m,o.stateNode={isHidden:!1},o}function F4(o,s,m){return o=Za(6,o,null,s),o.lanes=m,o}function j4(o,s,m){return s=Za(4,o.children!==null?o.children:[],o.key,s),s.lanes=m,s.stateNode={containerInfo:o.containerInfo,pendingChildren:null,implementation:o.implementation},s}function ype(o,s,m,S,z){this.tag=s,this.containerInfo=o,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=mR(0),this.expirationTimes=mR(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=mR(0),this.identifierPrefix=S,this.onRecoverableError=z,this.mutableSourceEagerHydrationData=null}function B4(o,s,m,S,z,V,re,Ee,Le){return o=new ype(o,s,m,Ee,Le),s===1?(s=1,V===!0&&(s|=8)):s=0,V=Za(3,null,null,s),o.current=V,V.stateNode=o,V.memoizedState={element:S,isDehydrated:m,cache:null,transitions:null,pendingSuspenseBoundaries:null},e4(V),o}function bpe(o,s,m){var S=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:xe,key:S==null?null:""+S,children:o,containerInfo:s,implementation:m}}function wte(o){if(!o)return kd;o=o._reactInternals;e:{if(Sh(o)!==o||o.tag!==1)throw Error(a(170));var s=o;do{switch(s.tag){case 3:s=s.stateNode.context;break e;case 1:if(Zo(s.type)){s=s.stateNode.__reactInternalMemoizedMergedChildContext;break e}}s=s.return}while(s!==null);throw Error(a(171))}if(o.tag===1){var m=o.type;if(Zo(m))return XQ(o,m,s)}return s}function Ste(o,s,m,S,z,V,re,Ee,Le){return o=B4(m,S,!0,o,z,V,re,Ee,Le),o.context=wte(null),m=o.current,S=Ro(),z=Dd(m),V=Uc(S,z),V.callback=s!=null?s:null,Pd(m,V,z),o.current.lanes=z,A_(o,z,S),Qo(o,S),o}function CM(o,s,m,S){var z=s.current,V=Ro(),re=Dd(z);return m=wte(m),s.context===null?s.context=m:s.pendingContext=m,s=Uc(V,re),s.payload={element:o},S=S===void 0?null:S,S!==null&&(s.callback=S),o=Pd(z,s,re),o!==null&&(Us(o,z,re,V),oM(o,z,re)),re}function AM(o){if(o=o.current,!o.child)return null;switch(o.child.tag){case 5:return o.child.stateNode;default:return o.child.stateNode}}function Ete(o,s){if(o=o.memoizedState,o!==null&&o.dehydrated!==null){var m=o.retryLane;o.retryLane=m!==0&&m<s?m:s}}function U4(o,s){Ete(o,s),(o=o.alternate)&&Ete(o,s)}function _pe(){return null}var kte=typeof reportError=="function"?reportError:function(o){console.error(o)};function V4(o){this._internalRoot=o}IM.prototype.render=V4.prototype.render=function(o){var s=this._internalRoot;if(s===null)throw Error(a(409));CM(o,s,null,null)},IM.prototype.unmount=V4.prototype.unmount=function(){var o=this._internalRoot;if(o!==null){this._internalRoot=null;var s=o.containerInfo;Dh(function(){CM(null,o,null,null)}),s[zc]=null}};function IM(o){this._internalRoot=o}IM.prototype.unstable_scheduleHydration=function(o){if(o){var s=oQ();o={blockedOn:null,target:o,priority:s};for(var m=0;m<_d.length&&s!==0&&s<_d[m].priority;m++);_d.splice(m,0,o),m===0&&lQ(o)}};function H4(o){return!(!o||o.nodeType!==1&&o.nodeType!==9&&o.nodeType!==11)}function DM(o){return!(!o||o.nodeType!==1&&o.nodeType!==9&&o.nodeType!==11&&(o.nodeType!==8||o.nodeValue!==" react-mount-point-unstable "))}function Tte(){}function xpe(o,s,m,S,z){if(z){if(typeof S=="function"){var V=S;S=function(){var st=AM(re);V.call(st)}}var re=Ste(s,S,o,0,null,!1,!1,"",Tte);return o._reactRootContainer=re,o[zc]=re.current,G_(o.nodeType===8?o.parentNode:o),Dh(),re}for(;z=o.lastChild;)o.removeChild(z);if(typeof S=="function"){var Ee=S;S=function(){var st=AM(Le);Ee.call(st)}}var Le=B4(o,0,!1,null,null,!1,!1,"",Tte);return o._reactRootContainer=Le,o[zc]=Le.current,G_(o.nodeType===8?o.parentNode:o),Dh(function(){CM(s,Le,m,S)}),Le}function OM(o,s,m,S,z){var V=m._reactRootContainer;if(V){var re=V;if(typeof z=="function"){var Ee=z;z=function(){var Le=AM(re);Ee.call(Le)}}CM(s,re,o,z)}else re=xpe(m,s,o,z,S);return AM(re)}rQ=function(o){switch(o.tag){case 3:var s=o.stateNode;if(s.current.memoizedState.isDehydrated){var m=C_(s.pendingLanes);m!==0&&(gR(s,m|1),Qo(s,si()),!(or&6)&&(n0=si()+500,Td()))}break;case 13:Dh(function(){var S=Bc(o,1);if(S!==null){var z=Ro();Us(S,o,1,z)}}),U4(o,1)}},vR=function(o){if(o.tag===13){var s=Bc(o,134217728);if(s!==null){var m=Ro();Us(s,o,134217728,m)}U4(o,134217728)}},iQ=function(o){if(o.tag===13){var s=Dd(o),m=Bc(o,s);if(m!==null){var S=Ro();Us(m,o,s,S)}U4(o,s)}},oQ=function(){return yr},aQ=function(o,s){var m=yr;try{return yr=o,s()}finally{yr=m}},Rg=function(o,s,m){switch(s){case"input":if(ge(o,m),s=m.name,m.type==="radio"&&s!=null){for(m=o;m.parentNode;)m=m.parentNode;for(m=m.querySelectorAll("input[name="+JSON.stringify(""+s)+'][type="radio"]'),s=0;s<m.length;s++){var S=m[s];if(S!==o&&S.form===o.form){var z=ZT(S);if(!z)throw Error(a(90));sr(S),ge(S,z)}}}break;case"textarea":St(o,m);break;case"select":s=m.value,s!=null&&Ye(o,!!m.multiple,s,!1)}},GJ=R4,WJ=Dh;var wpe={usingClientEntryPoint:!1,Events:[K_,Hg,ZT,VJ,HJ,R4]},s1={findFiberByHostInstance:Eh,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},Spe={bundleType:s1.bundleType,version:s1.version,rendererPackageName:s1.rendererPackageName,rendererConfig:s1.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:J.ReactCurrentDispatcher,findHostInstanceByFiber:function(o){return o=$J(o),o===null?null:o.stateNode},findFiberByHostInstance:s1.findFiberByHostInstance||_pe,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__!="undefined"&&(l1=__REACT_DEVTOOLS_GLOBAL_HOOK__,!l1.isDisabled&&l1.supportsFiber))try{PT=l1.inject(Spe),zl=l1}catch{}var l1;e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=wpe,e.createPortal=function(o,s){var m=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!H4(s))throw Error(a(200));return bpe(o,s,null,m)},e.createRoot=function(o,s){if(!H4(o))throw Error(a(299));var m=!1,S="",z=kte;return s!=null&&(s.unstable_strictMode===!0&&(m=!0),s.identifierPrefix!==void 0&&(S=s.identifierPrefix),s.onRecoverableError!==void 0&&(z=s.onRecoverableError)),s=B4(o,1,!1,null,null,m,!1,S,z),o[zc]=s.current,G_(o.nodeType===8?o.parentNode:o),new V4(s)},e.findDOMNode=function(o){if(o==null)return null;if(o.nodeType===1)return o;var s=o._reactInternals;if(s===void 0)throw typeof o.render=="function"?Error(a(188)):(o=Object.keys(o).join(","),Error(a(268,o)));return o=$J(s),o=o===null?null:o.stateNode,o},e.flushSync=function(o){return Dh(o)},e.hydrate=function(o,s,m){if(!DM(s))throw Error(a(200));return OM(null,o,s,!0,m)},e.hydrateRoot=function(o,s,m){if(!H4(o))throw Error(a(405));var S=m!=null&&m.hydratedSources||null,z=!1,V="",re=kte;if(m!=null&&(m.unstable_strictMode===!0&&(z=!0),m.identifierPrefix!==void 0&&(V=m.identifierPrefix),m.onRecoverableError!==void 0&&(re=m.onRecoverableError)),s=Ste(s,null,o,1,m!=null?m:null,z,!1,V,re),o[zc]=s.current,G_(o),S)for(o=0;o<S.length;o++)m=S[o],z=m._getVersion,z=z(m._source),s.mutableSourceEagerHydrationData==null?s.mutableSourceEagerHydrationData=[m,z]:s.mutableSourceEagerHydrationData.push(m,z);return new IM(s)},e.render=function(o,s,m){if(!DM(s))throw Error(a(200));return OM(null,o,s,!1,m)},e.unmountComponentAtNode=function(o){if(!DM(o))throw Error(a(40));return o._reactRootContainer?(Dh(function(){OM(null,null,o,!1,function(){o._reactRootContainer=null,o[zc]=null})}),!0):!1},e.unstable_batchedUpdates=R4,e.unstable_renderSubtreeIntoContainer=function(o,s,m,S){if(!DM(m))throw Error(a(200));if(o==null||o._reactInternals===void 0)throw Error(a(38));return OM(o,s,m,!1,S)},e.version="18.2.0-next-9e3b772b8-20220608"}),Ia=se((e,n)=>{function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__=="undefined"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(a){console.error(a)}}r(),n.exports=J3()});function uE(e){let[,n]=(0,Da.useState)(0);return(0,Da.useCallback)(()=>{n(r=>r+1)},[])}function Mn(e,n,r){let a=(0,Da.useCallback)(e,n),c=(0,Da.useRef)(null);c.current?c.current.set(a):c.current=new xm.Atom(a);let u=(0,Da.useRef)(null);return u.current||(u.current=(0,xm.prism)(()=>c.current.prism.getValue()())),Cf(u.current,r)}function ds(){wm||(wm=!0,(0,dE.default)(()=>{(0,fE.unstable_batchedUpdates)(function(){for(var e,n;Ho.length>0;){let r=Ho.shift();Ru.delete(r);let a;uc&&((e=r.debug)==null||e.history.push("queue reached"));try{a=r.der.getValue()}catch(c){uc&&((n=r.debug)==null||n.history.push("queue: der.getValue() errored")),console.error("A `der.getValue()` in `usePrismInstance(der)` threw an error. This may be a zombie child issue, so we're gonna try to get its value again in a normal react render phase.If you see the same error again, then you either have an error in your prism code, or the deps array in `usePrism(fn, deps)` is missing a dependency and causing the prism to read stale values."),console.error(c),r.runUpdate();continue}a!==r.lastValue&&(r.lastValue=a,r.runUpdate())}wm=!1},1)}))}function Cf(e,n){var r;let a=uE(),c=(0,Da.useRef)(void 0);c.current||(Oy++,c.current={order:Oy,runUpdate:()=>{c.current.unmounted||a()},der:e,lastValue:void 0,unmounted:!1,queueUpdate:()=>{var f;uc&&((f=c.current.debug)==null||f.history.push("queueUpdate()")),hE(c.current)},untap:e.onStale(()=>{uc&&c.current.debug.history.push("onStale(cb)"),c.current.queueUpdate()})},uc&&(c.current.debug={label:n,traceOfFirstTimeRender:new Error,history:[]})),(0,Da.useLayoutEffect)(()=>function(){c.current.unmounted=!0,c.current.untap(),Ry(c.current)},[]),Ry(c.current);let u=c.current.der.getValue();return c.current.lastValue=u,uc&&((r=c.current.debug)==null||r.history.push("rendered")),u}var xm,dE,Da,fE,uc,In,Oy,Ho,Ru,wm,hE,pE,Ry,sn=R(()=>{xm=Mt,Jr(),dE=ee(Z3()),Da=ee(Oe()),fE=ee(Ia()),uc=!1,In=(e,n)=>Mn(()=>(0,xm.val)(e),[e],n),Oy=0,Ho=[],Ru=new Set,wm=!1,hE=e=>{pE(e),ds()},pE=e=>{if(!Ru.has(e))if(Ru.add(e),Ho.length===0)Ho.push(e);else{let n=Sy(Ho,r=>r.order>=e.order);n===-1?Ho.push(e):Ho[n].order>e.order&&Ho.splice(n,0,e)}},Ry=e=>{if(!Ru.has(e))return;Ru.delete(e);let n=Sy(Ho,r=>r===e);Ho.splice(n,1)}}),mE=se(e=>{var n=60103,r=60106,a=60107,c=60108,u=60114,f=60109,p=60110,v=60112,y=60113,k=60120,P=60115,T=60116,E=60121,A=60122,C=60117,L=60129,N=60131;typeof Symbol=="function"&&Symbol.for&&(U=Symbol.for,n=U("react.element"),r=U("react.portal"),a=U("react.fragment"),c=U("react.strict_mode"),u=U("react.profiler"),f=U("react.provider"),p=U("react.context"),v=U("react.forward_ref"),y=U("react.suspense"),k=U("react.suspense_list"),P=U("react.memo"),T=U("react.lazy"),E=U("react.block"),A=U("react.server.block"),C=U("react.fundamental"),L=U("react.debug_trace_mode"),N=U("react.legacy_hidden"));var U;function G(q){if(typeof q=="object"&&q!==null){var Fe=q.$$typeof;switch(Fe){case n:switch(q=q.type,q){case a:case u:case c:case y:case k:return q;default:switch(q=q&&q.$$typeof,q){case p:case v:case T:case P:case f:return q;default:return Fe}}case r:return Fe}}}var Q=f,J=n,ie=v,xe=a,Me=T,ue=P,Ae=r,We=u,oe=c,De=y;e.ContextConsumer=p,e.ContextProvider=Q,e.Element=J,e.ForwardRef=ie,e.Fragment=xe,e.Lazy=Me,e.Memo=ue,e.Portal=Ae,e.Profiler=We,e.StrictMode=oe,e.Suspense=De,e.isAsyncMode=function(){return!1},e.isConcurrentMode=function(){return!1},e.isContextConsumer=function(q){return G(q)===p},e.isContextProvider=function(q){return G(q)===f},e.isElement=function(q){return typeof q=="object"&&q!==null&&q.$$typeof===n},e.isForwardRef=function(q){return G(q)===v},e.isFragment=function(q){return G(q)===a},e.isLazy=function(q){return G(q)===T},e.isMemo=function(q){return G(q)===P},e.isPortal=function(q){return G(q)===r},e.isProfiler=function(q){return G(q)===u},e.isStrictMode=function(q){return G(q)===c},e.isSuspense=function(q){return G(q)===y},e.isValidElementType=function(q){return typeof q=="string"||typeof q=="function"||q===a||q===u||q===L||q===c||q===y||q===k||q===N||typeof q=="object"&&q!==null&&(q.$$typeof===T||q.$$typeof===P||q.$$typeof===f||q.$$typeof===p||q.$$typeof===v||q.$$typeof===C||q.$$typeof===E||q[0]===A)},e.typeOf=G}),Q3=se((e,n)=>{n.exports=mE()}),Lu=se((e,n)=>{n.exports=function(r,a,c,u){var f=c?c.call(u,r,a):void 0;if(f!==void 0)return!!f;if(r===a)return!0;if(typeof r!="object"||!r||typeof a!="object"||!a)return!1;var p=Object.keys(r),v=Object.keys(a);if(p.length!==v.length)return!1;for(var y=Object.prototype.hasOwnProperty.bind(a),k=0;k<p.length;k++){var P=p[k];if(!y(P))return!1;var T=r[P],E=a[P];if(f=c?c.call(u,T,E,P):void 0,f===!1||f===void 0&&T!==E)return!1}return!0}});function gE(e){function n(de,Ze,et,rt,Ue){for(var $t=0,ht=0,Wt=0,on=0,gn,dn,sr=0,$=0,ot,it=ot=gn=0,be=0,ge=0,Ve=0,vt=0,wt=et.length,Ye=wt-1,Ct,_t="",St="",un="",ir="",Pn;be<wt;){if(dn=et.charCodeAt(be),be===Ye&&ht+on+Wt+$t!==0&&(ht!==0&&(dn=ht===47?10:47),on=Wt=$t=0,wt++,Ye++),ht+on+Wt+$t===0){if(be===Ye&&(0<ge&&(_t=_t.replace(T,"")),0<_t.trim().length)){switch(dn){case 32:case 9:case 59:case 13:case 10:break;default:_t+=et.charAt(be)}dn=59}switch(dn){case 123:for(_t=_t.trim(),gn=_t.charCodeAt(0),ot=1,vt=++be;be<wt;){switch(dn=et.charCodeAt(be)){case 123:ot++;break;case 125:ot--;break;case 47:switch(dn=et.charCodeAt(be+1)){case 42:case 47:e:{for(it=be+1;it<Ye;++it)switch(et.charCodeAt(it)){case 47:if(dn===42&&et.charCodeAt(it-1)===42&&be+2!==it){be=it+1;break e}break;case 10:if(dn===47){be=it+1;break e}}be=it}}break;case 91:dn++;case 40:dn++;case 34:case 39:for(;be++<Ye&&et.charCodeAt(be)!==dn;);}if(ot===0)break;be++}switch(ot=et.substring(vt,be),gn===0&&(gn=(_t=_t.replace(P,"").trim()).charCodeAt(0)),gn){case 64:switch(0<ge&&(_t=_t.replace(T,"")),dn=_t.charCodeAt(1),dn){case 100:case 109:case 115:case 45:ge=Ze;break;default:ge=Pt}if(ot=n(Ze,ge,ot,dn,Ue+1),vt=ot.length,0<ke&&(ge=r(Pt,_t,Ve),Pn=p(3,ot,ge,Ze,De,oe,vt,dn,Ue,rt),_t=ge.join(""),Pn!==void 0&&(vt=(ot=Pn.trim()).length)===0&&(dn=0,ot="")),0<vt)switch(dn){case 115:_t=_t.replace(ie,f);case 100:case 109:case 45:ot=_t+"{"+ot+"}";break;case 107:_t=_t.replace(U,"$1 $2"),ot=_t+"{"+ot+"}",ot=Fe===1||Fe===2&&u("@"+ot,3)?"@-webkit-"+ot+"@"+ot:"@"+ot;break;default:ot=_t+ot,rt===112&&(ot=(St+=ot,""))}else ot="";break;default:ot=n(Ze,r(Ze,_t,Ve),ot,rt,Ue+1)}un+=ot,ot=Ve=ge=it=gn=0,_t="",dn=et.charCodeAt(++be);break;case 125:case 59:if(_t=(0<ge?_t.replace(T,""):_t).trim(),1<(vt=_t.length))switch(it===0&&(gn=_t.charCodeAt(0),gn===45||96<gn&&123>gn)&&(vt=(_t=_t.replace(" ",":")).length),0<ke&&(Pn=p(1,_t,Ze,de,De,oe,St.length,rt,Ue,rt))!==void 0&&(vt=(_t=Pn.trim()).length)===0&&(_t="\0\0"),gn=_t.charCodeAt(0),dn=_t.charCodeAt(1),gn){case 0:break;case 64:if(dn===105||dn===99){ir+=_t+et.charAt(be);break}default:_t.charCodeAt(vt-1)!==58&&(St+=c(_t,gn,dn,_t.charCodeAt(2)))}Ve=ge=it=gn=0,_t="",dn=et.charCodeAt(++be)}}switch(dn){case 13:case 10:ht===47?ht=0:1+gn===0&&rt!==107&&0<_t.length&&(ge=1,_t+="\0"),0<ke*mt&&p(0,_t,Ze,de,De,oe,St.length,rt,Ue,rt),oe=1,De++;break;case 59:case 125:if(ht+on+Wt+$t===0){oe++;break}default:switch(oe++,Ct=et.charAt(be),dn){case 9:case 32:if(on+$t+ht===0)switch(sr){case 44:case 58:case 9:case 32:Ct="";break;default:dn!==32&&(Ct=" ")}break;case 0:Ct="\\0";break;case 12:Ct="\\f";break;case 11:Ct="\\v";break;case 38:on+ht+$t===0&&(ge=Ve=1,Ct="\f"+Ct);break;case 108:if(on+ht+$t+q===0&&0<it)switch(be-it){case 2:sr===112&&et.charCodeAt(be-3)===58&&(q=sr);case 8:$===111&&(q=$)}break;case 58:on+ht+$t===0&&(it=be);break;case 44:ht+Wt+on+$t===0&&(ge=1,Ct+="\r");break;case 34:case 39:ht===0&&(on=on===dn?0:on===0?dn:on);break;case 91:on+ht+Wt===0&&$t++;break;case 93:on+ht+Wt===0&&$t--;break;case 41:on+ht+$t===0&&Wt--;break;case 40:if(on+ht+$t===0){if(gn===0)switch(2*sr+3*$){case 533:break;default:gn=1}Wt++}break;case 64:ht+Wt+on+$t+it+ot===0&&(ot=1);break;case 42:case 47:if(!(0<on+$t+Wt))switch(ht){case 0:switch(2*dn+3*et.charCodeAt(be+1)){case 235:ht=47;break;case 220:vt=be,ht=42}break;case 42:dn===47&&sr===42&&vt+2!==be&&(et.charCodeAt(vt+2)===33&&(St+=et.substring(vt,be+1)),Ct="",ht=0)}}ht===0&&(_t+=Ct)}$=sr,sr=dn,be++}if(vt=St.length,0<vt){if(ge=Ze,0<ke&&(Pn=p(2,St,ge,de,De,oe,vt,rt,Ue,rt),Pn!==void 0&&(St=Pn).length===0))return ir+St+un;if(St=ge.join(",")+"{"+St+"}",Fe*q!==0){switch(Fe!==2||u(St,2)||(q=0),q){case 111:St=St.replace(Q,":-moz-$1")+St;break;case 112:St=St.replace(G,"::-webkit-input-$1")+St.replace(G,"::-moz-$1")+St.replace(G,":-ms-input-$1")+St}q=0}}return ir+St+un}function r(de,Ze,et){var rt=Ze.trim().split(L);Ze=rt;var Ue=rt.length,$t=de.length;switch($t){case 0:case 1:var ht=0;for(de=$t===0?"":de[0]+" ";ht<Ue;++ht)Ze[ht]=a(de,Ze[ht],et).trim();break;default:var Wt=ht=0;for(Ze=[];ht<Ue;++ht)for(var on=0;on<$t;++on)Ze[Wt++]=a(de[on]+" ",rt[ht],et).trim()}return Ze}function a(de,Ze,et){var rt=Ze.charCodeAt(0);switch(33>rt&&(rt=(Ze=Ze.trim()).charCodeAt(0)),rt){case 38:return Ze.replace(N,"$1"+de.trim());case 58:return de.trim()+Ze.replace(N,"$1"+de.trim());default:if(0<1*et&&0<Ze.indexOf("\f"))return Ze.replace(N,(de.charCodeAt(0)===58?"":"$1")+de.trim())}return de+Ze}function c(de,Ze,et,rt){var Ue=de+";",$t=2*Ze+3*et+4*rt;if($t===944){de=Ue.indexOf(":",9)+1;var ht=Ue.substring(de,Ue.length-1).trim();return ht=Ue.substring(0,de).trim()+ht+";",Fe===1||Fe===2&&u(ht,1)?"-webkit-"+ht+ht:ht}if(Fe===0||Fe===2&&!u(Ue,1))return Ue;switch($t){case 1015:return Ue.charCodeAt(10)===97?"-webkit-"+Ue+Ue:Ue;case 951:return Ue.charCodeAt(3)===116?"-webkit-"+Ue+Ue:Ue;case 963:return Ue.charCodeAt(5)===110?"-webkit-"+Ue+Ue:Ue;case 1009:if(Ue.charCodeAt(4)!==100)break;case 969:case 942:return"-webkit-"+Ue+Ue;case 978:return"-webkit-"+Ue+"-moz-"+Ue+Ue;case 1019:case 983:return"-webkit-"+Ue+"-moz-"+Ue+"-ms-"+Ue+Ue;case 883:if(Ue.charCodeAt(8)===45)return"-webkit-"+Ue+Ue;if(0<Ue.indexOf("image-set(",11))return Ue.replace(We,"$1-webkit-$2")+Ue;break;case 932:if(Ue.charCodeAt(4)===45)switch(Ue.charCodeAt(5)){case 103:return"-webkit-box-"+Ue.replace("-grow","")+"-webkit-"+Ue+"-ms-"+Ue.replace("grow","positive")+Ue;case 115:return"-webkit-"+Ue+"-ms-"+Ue.replace("shrink","negative")+Ue;case 98:return"-webkit-"+Ue+"-ms-"+Ue.replace("basis","preferred-size")+Ue}return"-webkit-"+Ue+"-ms-"+Ue+Ue;case 964:return"-webkit-"+Ue+"-ms-flex-"+Ue+Ue;case 1023:if(Ue.charCodeAt(8)!==99)break;return ht=Ue.substring(Ue.indexOf(":",15)).replace("flex-","").replace("space-between","justify"),"-webkit-box-pack"+ht+"-webkit-"+Ue+"-ms-flex-pack"+ht+Ue;case 1005:return A.test(Ue)?Ue.replace(E,":-webkit-")+Ue.replace(E,":-moz-")+Ue:Ue;case 1e3:switch(ht=Ue.substring(13).trim(),Ze=ht.indexOf("-")+1,ht.charCodeAt(0)+ht.charCodeAt(Ze)){case 226:ht=Ue.replace(J,"tb");break;case 232:ht=Ue.replace(J,"tb-rl");break;case 220:ht=Ue.replace(J,"lr");break;default:return Ue}return"-webkit-"+Ue+"-ms-"+ht+Ue;case 1017:if(Ue.indexOf("sticky",9)===-1)break;case 975:switch(Ze=(Ue=de).length-10,ht=(Ue.charCodeAt(Ze)===33?Ue.substring(0,Ze):Ue).substring(de.indexOf(":",7)+1).trim(),$t=ht.charCodeAt(0)+(ht.charCodeAt(7)|0)){case 203:if(111>ht.charCodeAt(8))break;case 115:Ue=Ue.replace(ht,"-webkit-"+ht)+";"+Ue;break;case 207:case 102:Ue=Ue.replace(ht,"-webkit-"+(102<$t?"inline-":"")+"box")+";"+Ue.replace(ht,"-webkit-"+ht)+";"+Ue.replace(ht,"-ms-"+ht+"box")+";"+Ue}return Ue+";";case 938:if(Ue.charCodeAt(5)===45)switch(Ue.charCodeAt(6)){case 105:return ht=Ue.replace("-items",""),"-webkit-"+Ue+"-webkit-box-"+ht+"-ms-flex-"+ht+Ue;case 115:return"-webkit-"+Ue+"-ms-flex-item-"+Ue.replace(Me,"")+Ue;default:return"-webkit-"+Ue+"-ms-flex-line-pack"+Ue.replace("align-content","").replace(Me,"")+Ue}break;case 973:case 989:if(Ue.charCodeAt(3)!==45||Ue.charCodeAt(4)===122)break;case 931:case 953:if(Ae.test(de)===!0)return(ht=de.substring(de.indexOf(":")+1)).charCodeAt(0)===115?c(de.replace("stretch","fill-available"),Ze,et,rt).replace(":fill-available",":stretch"):Ue.replace(ht,"-webkit-"+ht)+Ue.replace(ht,"-moz-"+ht.replace("fill-",""))+Ue;break;case 962:if(Ue="-webkit-"+Ue+(Ue.charCodeAt(5)===102?"-ms-"+Ue:"")+Ue,et+rt===211&&Ue.charCodeAt(13)===105&&0<Ue.indexOf("transform",10))return Ue.substring(0,Ue.indexOf(";",27)+1).replace(C,"$1-webkit-$2")+Ue}return Ue}function u(de,Ze){var et=de.indexOf(Ze===1?":":"{"),rt=de.substring(0,Ze!==3?et:10);return et=de.substring(et+1,de.length-1),Be(Ze!==2?rt:rt.replace(ue,"$1"),et,Ze)}function f(de,Ze){var et=c(Ze,Ze.charCodeAt(0),Ze.charCodeAt(1),Ze.charCodeAt(2));return et!==Ze+";"?et.replace(xe," or ($1)").substring(4):"("+Ze+")"}function p(de,Ze,et,rt,Ue,$t,ht,Wt,on,gn){for(var dn=0,sr=Ze,$;dn<ke;++dn)switch($=Pe[dn].call(k,de,sr,et,rt,Ue,$t,ht,Wt,on,gn)){case void 0:case!1:case!0:case null:break;default:sr=$}if(sr!==Ze)return sr}function v(de){switch(de){case void 0:case null:ke=Pe.length=0;break;default:if(typeof de=="function")Pe[ke++]=de;else if(typeof de=="object")for(var Ze=0,et=de.length;Ze<et;++Ze)v(de[Ze]);else mt=!!de|0}return v}function y(de){return de=de.prefix,de!==void 0&&(Be=null,de?typeof de!="function"?Fe=1:(Fe=2,Be=de):Fe=0),y}function k(de,Ze){var et=de;if(33>et.charCodeAt(0)&&(et=et.trim()),ae=et,et=[ae],0<ke){var rt=p(-1,Ze,et,et,De,oe,0,0,0,0);rt!==void 0&&typeof rt=="string"&&(Ze=rt)}var Ue=n(Pt,et,Ze,0,0);return 0<ke&&(rt=p(-2,Ue,et,et,De,oe,Ue.length,0,0,0),rt!==void 0&&(Ue=rt)),ae="",q=0,oe=De=1,Ue}var P=/^\0+/g,T=/[\0\r\f]/g,E=/: */g,A=/zoo|gra/,C=/([,: ])(transform)/g,L=/,\r+?/g,N=/([\t\r\n ])*\f?&/g,U=/@(k\w+)\s*(\S*)\s*/,G=/::(place)/g,Q=/:(read-only)/g,J=/[svh]\w+-[tblr]{2}/,ie=/\(\s*(.*)\s*\)/g,xe=/([\s\S]*?);/g,Me=/-self|flex-/g,ue=/[^]*?(:[rp][el]a[\w-]+)[^]*/,Ae=/stretch|:\s*\w+\-(?:conte|avail)/,We=/([^-])(image-set\()/,oe=1,De=1,q=0,Fe=1,Pt=[],Pe=[],ke=0,Be=null,mt=0,ae="";return k.use=v,k.set=y,e!==void 0&&y(e),k}var vE,eA=R(()=>{vE=gE}),yE,bE,Sm=R(()=>{yE={animationIterationCount:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},bE=yE});function tA(e){var n=Object.create(null);return function(r){return n[r]===void 0&&(n[r]=e(r)),n[r]}}var zu,nA=R(()=>{zu=tA}),_E,xE,Ly,zy=R(()=>{nA(),_E=/^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|abbr|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|decoding|default|defer|dir|disabled|disablePictureInPicture|download|draggable|encType|enterKeyHint|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loading|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|translate|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|incremental|fallback|inert|itemProp|itemScope|itemType|itemID|itemRef|on|option|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/,xE=zu(function(e){return _E.test(e)||e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&e.charCodeAt(2)<91}),Ly=xE}),wE=se(e=>{var n=typeof Symbol=="function"&&Symbol.for,r=n?Symbol.for("react.element"):60103,a=n?Symbol.for("react.portal"):60106,c=n?Symbol.for("react.fragment"):60107,u=n?Symbol.for("react.strict_mode"):60108,f=n?Symbol.for("react.profiler"):60114,p=n?Symbol.for("react.provider"):60109,v=n?Symbol.for("react.context"):60110,y=n?Symbol.for("react.async_mode"):60111,k=n?Symbol.for("react.concurrent_mode"):60111,P=n?Symbol.for("react.forward_ref"):60112,T=n?Symbol.for("react.suspense"):60113,E=n?Symbol.for("react.suspense_list"):60120,A=n?Symbol.for("react.memo"):60115,C=n?Symbol.for("react.lazy"):60116,L=n?Symbol.for("react.block"):60121,N=n?Symbol.for("react.fundamental"):60117,U=n?Symbol.for("react.responder"):60118,G=n?Symbol.for("react.scope"):60119;function Q(ie){if(typeof ie=="object"&&ie!==null){var xe=ie.$$typeof;switch(xe){case r:switch(ie=ie.type,ie){case y:case k:case c:case f:case u:case T:return ie;default:switch(ie=ie&&ie.$$typeof,ie){case v:case P:case C:case A:case p:return ie;default:return xe}}case a:return xe}}}function J(ie){return Q(ie)===k}e.AsyncMode=y,e.ConcurrentMode=k,e.ContextConsumer=v,e.ContextProvider=p,e.Element=r,e.ForwardRef=P,e.Fragment=c,e.Lazy=C,e.Memo=A,e.Portal=a,e.Profiler=f,e.StrictMode=u,e.Suspense=T,e.isAsyncMode=function(ie){return J(ie)||Q(ie)===y},e.isConcurrentMode=J,e.isContextConsumer=function(ie){return Q(ie)===v},e.isContextProvider=function(ie){return Q(ie)===p},e.isElement=function(ie){return typeof ie=="object"&&ie!==null&&ie.$$typeof===r},e.isForwardRef=function(ie){return Q(ie)===P},e.isFragment=function(ie){return Q(ie)===c},e.isLazy=function(ie){return Q(ie)===C},e.isMemo=function(ie){return Q(ie)===A},e.isPortal=function(ie){return Q(ie)===a},e.isProfiler=function(ie){return Q(ie)===f},e.isStrictMode=function(ie){return Q(ie)===u},e.isSuspense=function(ie){return Q(ie)===T},e.isValidElementType=function(ie){return typeof ie=="string"||typeof ie=="function"||ie===c||ie===k||ie===f||ie===u||ie===T||ie===E||typeof ie=="object"&&ie!==null&&(ie.$$typeof===C||ie.$$typeof===A||ie.$$typeof===p||ie.$$typeof===v||ie.$$typeof===P||ie.$$typeof===N||ie.$$typeof===U||ie.$$typeof===G||ie.$$typeof===L)},e.typeOf=Q}),rA=se((e,n)=>{n.exports=wE()}),iA=se((e,n)=>{var r=rA(),a={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},c={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},u={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},f={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},p={};p[r.ForwardRef]=u,p[r.Memo]=f;function v(L){return r.isMemo(L)?f:p[L.$$typeof]||a}var y=Object.defineProperty,k=Object.getOwnPropertyNames,P=Object.getOwnPropertySymbols,T=Object.getOwnPropertyDescriptor,E=Object.getPrototypeOf,A=Object.prototype;function C(L,N,U){if(typeof N!="string"){if(A){var G=E(N);G&&G!==A&&C(L,G,U)}var Q=k(N);P&&(Q=Q.concat(P(N)));for(var J=v(L),ie=v(N),xe=0;xe<Q.length;++xe){var Me=Q[xe];if(!c[Me]&&!(U&&U[Me])&&!(ie&&ie[Me])&&!(J&&J[Me])){var ue=T(N,Me);try{y(L,Me,ue)}catch{}}}}return L}n.exports=C});function Br(){return(Br=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var r=arguments[n];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e}).apply(this,arguments)}function sa(e){return typeof e=="function"}function cl(e){return e.displayName||e.name||"Component"}function Ny(e){return e&&typeof e.styledComponentId=="string"}function wo(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),a=1;a<n;a++)r[a-1]=arguments[a];throw new Error("An error occurred. See https://git.io/JUIaE#"+e+" for more information."+(r.length>0?" Args: "+r.join(", "):""))}function ul(e){var n,r="";for(n=Math.abs(e);n>52;n=n/52|0)r=Wy(n%52)+r;return(Wy(n%52)+r).replace(no,"$1-$2")}function Em(e){for(var n=0;n<e.length;n+=1){var r=e[n];if(sa(r)&&!Ny(r))return!1}return!0}function SE(e){var n,r,a,c,u=e===void 0?Go:e,f=u.options,p=f===void 0?Go:f,v=u.plugins,y=v===void 0?Fu:v,k=new vE(p),P=[],T=function(C){function L(N){if(N)try{C(N+"}")}catch{}}return function(N,U,G,Q,J,ie,xe,Me,ue,Ae){switch(N){case 1:if(ue===0&&U.charCodeAt(0)===64)return C(U+";"),"";break;case 2:if(Me===0)return U+"/*|*/";break;case 3:switch(Me){case 102:case 112:return C(G[0]+U),"";default:return U+(Ae===0?"/*|*/":"")}case-2:U.split("/*|*/}").forEach(L)}}}(function(C){P.push(C)}),E=function(C,L,N){return L===0&&IE.indexOf(N[r.length])!==-1||N.match(c)?C:"."+n};function A(C,L,N,U){U===void 0&&(U="&");var G=C.replace(AE,""),Q=L&&N?N+" "+L+" { "+G+" }":G;return n=U,r=L,a=new RegExp("\\"+r+"\\b","g"),c=new RegExp("(\\"+r+"\\b){2,}"),k(N||!L?"":L,Q)}return k.use([].concat(y,[function(C,L,N){C===2&&N.length&&N[0].lastIndexOf(r)>0&&(N[0]=N[0].replace(a,E))},T,function(C){if(C===-2){var L=P;return P=[],L}}])),A.hash=y.length?y.reduce(function(C,L){return L.name||wo(15),hs(C,L.name)},5381).toString():"",A}function km(){return(0,Rr.useContext)(Lf)||$y}function EE(){return(0,Rr.useContext)(Vu)||Lm}function Tm(e){var n=(0,Rr.useState)(e.stylisPlugins),r=n[0],a=n[1],c=km(),u=(0,Rr.useMemo)(function(){var p=c;return e.sheet?p=e.sheet:e.target&&(p=p.reconstructWithOptions({target:e.target},!1)),e.disableCSSOMInjection&&(p=p.reconstructWithOptions({useCSSOMInjection:!1})),p},[e.disableCSSOMInjection,e.sheet,e.target]),f=(0,Rr.useMemo)(function(){return SE({options:{prefix:!e.disableVendorPrefixes},plugins:r})},[e.disableVendorPrefixes,r]);return(0,Rr.useEffect)(function(){(0,By.default)(r,e.stylisPlugins)||a(e.stylisPlugins)},[e.stylisPlugins]),Rr.default.createElement(Lf.Provider,{value:u},Rr.default.createElement(Vu.Provider,{value:f},e.children))}function Mm(e){return zm.test(e)?e.replace(Zy,RE).replace(OE,"-ms-"):e}function So(e,n,r,a){if(Array.isArray(e)){for(var c,u=[],f=0,p=e.length;f<p;f+=1)(c=So(e[f],n,r,a))!==""&&(Array.isArray(c)?u.push.apply(u,c):u.push(c));return u}if(h(e))return"";if(Ny(e))return"."+e.styledComponentId;if(sa(e)){if(typeof(y=e)!="function"||y.prototype&&y.prototype.isReactComponent||!n)return e;var v=e(n);return So(v,n,r,a)}var y;return e instanceof DE?r?(e.inject(r,a),e.getName(a)):e:dc(e)?function k(P,T){var E,A,C=[];for(var L in P)P.hasOwnProperty(L)&&!h(P[L])&&(Array.isArray(P[L])&&P[L].isCss||sa(P[L])?C.push(Mm(L)+":",P[L],";"):dc(P[L])?C.push.apply(C,k(P[L],L)):C.push(Mm(L)+": "+(E=L,(A=P[L])==null||typeof A=="boolean"||A===""?"":typeof A!="number"||A===0||E in bE||E.startsWith("--")?String(A).trim():A+"px")+";"));return T?[T+" {"].concat(C,["}"]):C}(e):e.toString()}function Bi(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),a=1;a<n;a++)r[a-1]=arguments[a];return sa(e)||dc(e)?x(So(If(Fu,[e].concat(r)))):r.length===0&&e.length===1&&typeof e[0]=="string"?e:x(So(If(e,r)))}function Af(e){return e.replace(H,"-").replace(ne,"")}function Pm(e){return typeof e=="string"&&!0}function Fy(e,n,r){var a=e[r];Ce(n)&&Ce(a)?Oa(a,n):e[r]=n}function Oa(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),a=1;a<n;a++)r[a-1]=arguments[a];for(var c=0,u=r;c<u.length;c++){var f=u[c];if(Ce(f))for(var p in f)He(p)&&Fy(e,f[p],p)}return e}function jy(e,n,r){var a=Ny(e),c=!Pm(e),u=n.attrs,f=u===void 0?Fu:u,p=n.componentId,v=p===void 0?function(U,G){var Q=typeof U!="string"?"sc":Af(U);ct[Q]=(ct[Q]||0)+1;var J=Q+"-"+ce("5.3.11"+Q+ct[Q]);return G?G+"-"+J:J}(n.displayName,n.parentComponentId):p,y=n.displayName,k=y===void 0?function(U){return Pm(U)?"styled."+U:"Styled("+cl(U)+")"}(e):y,P=n.displayName&&n.componentId?Af(n.displayName)+"-"+n.componentId:n.componentId||v,T=a&&e.attrs?Array.prototype.concat(e.attrs,f).filter(Boolean):f,E=n.shouldForwardProp;a&&e.shouldForwardProp&&(E=n.shouldForwardProp?function(U,G,Q){return e.shouldForwardProp(U,G,Q)&&n.shouldForwardProp(U,G,Q)}:e.shouldForwardProp);var A,C=new Xy(r,P,a?e.componentStyle:void 0),L=C.isStatic&&f.length===0,N=function(U,G){return function(Q,J,ie,xe){var Me=Q.attrs,ue=Q.componentStyle,Ae=Q.defaultProps,We=Q.foldedComponentIds,oe=Q.shouldForwardProp,De=Q.styledComponentId,q=Q.target,Fe=function(rt,Ue,$t){rt===void 0&&(rt=Go);var ht=Br({},Ue,{theme:rt}),Wt={};return $t.forEach(function(on){var gn,dn,sr,$=on;for(gn in sa($)&&($=$(ht)),$)ht[gn]=Wt[gn]=gn==="className"?(dn=Wt[gn],sr=$[gn],dn&&sr?dn+" "+sr:dn||sr):$[gn]}),[ht,Wt]}(D(J,(0,Rr.useContext)($e),Ae)||Go,J,Me),Pt=Fe[0],Pe=Fe[1],ke=function(rt,Ue,$t,ht){var Wt=km(),on=EE(),gn=Ue?rt.generateAndInjectStyles(Go,Wt,on):rt.generateAndInjectStyles($t,Wt,on);return gn}(ue,xe,Pt),Be=ie,mt=Pe.$as||J.$as||Pe.as||J.as||q,ae=Pm(mt),de=Pe!==J?Br({},J,{},Pe):J,Ze={};for(var et in de)et[0]!=="$"&&et!=="as"&&(et==="forwardedAs"?Ze.as=de[et]:(oe?oe(et,Ly,mt):!ae||Ly(et))&&(Ze[et]=de[et]));return J.style&&Pe.style!==J.style&&(Ze.style=Br({},J.style,{},Pe.style)),Ze.className=Array.prototype.concat(We,De,ke!==De?ke:null,J.className,Pe.className).filter(Boolean).join(" "),Ze.ref=Be,(0,Rr.createElement)(mt,Ze)}(A,U,G,L)};return N.displayName=k,(A=Rr.default.forwardRef(N)).attrs=T,A.componentStyle=C,A.displayName=k,A.shouldForwardProp=E,A.foldedComponentIds=a?Array.prototype.concat(e.foldedComponentIds,e.styledComponentId):Fu,A.styledComponentId=P,A.target=a?e.target:e,A.withComponent=function(U){var G=n.componentId,Q=function(ie,xe){if(ie==null)return{};var Me,ue,Ae={},We=Object.keys(ie);for(ue=0;ue<We.length;ue++)Me=We[ue],xe.indexOf(Me)>=0||(Ae[Me]=ie[Me]);return Ae}(n,["componentId"]),J=G&&G+"-"+(Pm(U)?U:Af(cl(U)));return jy(U,Br({},Q,{attrs:T,componentId:J}),r)},Object.defineProperty(A,"defaultProps",{get:function(){return this._foldedDefaultProps},set:function(U){this._foldedDefaultProps=a?Oa({},e.defaultProps,U):U}}),Object.defineProperty(A,"toString",{value:function(){return"."+A.styledComponentId}}),c&&(0,kE.default)(A,e,{attrs:!0,componentStyle:!0,displayName:!0,foldedComponentIds:!0,shouldForwardProp:!0,styledComponentId:!0,target:!0,withComponent:!0}),A}function Cm(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),a=1;a<n;a++)r[a-1]=arguments[a];var c=Bi.apply(void 0,[e].concat(r)),u="sc-global-"+ce(JSON.stringify(c)),f=new Ot(c,u);function p(y){var k=km(),P=EE(),T=(0,Rr.useContext)($e),E=(0,Rr.useRef)(k.allocateGSInstance(u)).current;return k.server&&v(E,y,k,T,P),(0,Rr.useLayoutEffect)(function(){if(!k.server)return v(E,y,k,T,P),function(){return f.removeStyles(E,k)}},[E,y,k,T,P]),null}function v(y,k,P,T,E){if(f.isStatic)f.renderStyles(y,Im,P,E);else{var A=Br({},k,{theme:D(k,T,p.defaultProps)});f.renderStyles(y,A,P,E)}}return Rr.default.memo(p)}var Nu,Rr,By,kE,If,dc,Fu,Go,la,Df,Am,Im,Dm,Of,ju,fc,fs,Om,TE,ME,Uy,Vy,Hy,wi,Gy,Rm,PE,CE,Bu,Rf,Uu,no,Wy,hs,qy,Ky,Xy,AE,IE,Lf,Vu,$y,Lm,DE,zm,Zy,OE,RE,h,x,D,H,ne,ce,Ce,He,$e,ct,It,Ot,le,Xe=R(()=>{Nu=ee(Q3()),Rr=ee(Oe()),By=ee(Lu()),eA(),Sm(),zy(),kE=ee(iA()),If=function(e,n){for(var r=[e[0]],a=0,c=n.length;a<c;a+=1)r.push(n[a],e[a+1]);return r},dc=function(e){return e!==null&&typeof e=="object"&&(e.toString?e.toString():Object.prototype.toString.call(e))==="[object Object]"&&!(0,Nu.typeOf)(e)},Fu=Object.freeze([]),Go=Object.freeze({}),la=typeof process!="undefined"&&process.env!==void 0&&({}.REACT_APP_SC_ATTR||{}.SC_ATTR)||"data-styled",Df=typeof window!="undefined"&&"HTMLElement"in window,Am=!!(typeof SC_DISABLE_SPEEDY=="boolean"?SC_DISABLE_SPEEDY:typeof process!="undefined"&&process.env!==void 0&&({}.REACT_APP_SC_DISABLE_SPEEDY!==void 0&&{}.REACT_APP_SC_DISABLE_SPEEDY!==""?{}.REACT_APP_SC_DISABLE_SPEEDY!=="false"&&{}.REACT_APP_SC_DISABLE_SPEEDY:{}.SC_DISABLE_SPEEDY!==void 0&&{}.SC_DISABLE_SPEEDY!==""&&{}.SC_DISABLE_SPEEDY!=="false"&&{}.SC_DISABLE_SPEEDY)),Im={},Dm=function(){function e(r){this.groupSizes=new Uint32Array(512),this.length=512,this.tag=r}var n=e.prototype;return n.indexOfGroup=function(r){for(var a=0,c=0;c<r;c++)a+=this.groupSizes[c];return a},n.insertRules=function(r,a){if(r>=this.groupSizes.length){for(var c=this.groupSizes,u=c.length,f=u;r>=f;)(f<<=1)<0&&wo(16,""+r);this.groupSizes=new Uint32Array(f),this.groupSizes.set(c),this.length=f;for(var p=u;p<f;p++)this.groupSizes[p]=0}for(var v=this.indexOfGroup(r+1),y=0,k=a.length;y<k;y++)this.tag.insertRule(v,a[y])&&(this.groupSizes[r]++,v++)},n.clearGroup=function(r){if(r<this.length){var a=this.groupSizes[r],c=this.indexOfGroup(r),u=c+a;this.groupSizes[r]=0;for(var f=c;f<u;f++)this.tag.deleteRule(c)}},n.getGroup=function(r){var a="";if(r>=this.length||this.groupSizes[r]===0)return a;for(var c=this.groupSizes[r],u=this.indexOfGroup(r),f=u+c,p=u;p<f;p++)a+=this.tag.getRule(p)+`/*!sc*/
`;return a},e}(),Of=new Map,ju=new Map,fc=1,fs=function(e){if(Of.has(e))return Of.get(e);for(;ju.has(fc);)fc++;var n=fc++;return Of.set(e,n),ju.set(n,e),n},Om=function(e){return ju.get(e)},TE=function(e,n){n>=fc&&(fc=n+1),Of.set(e,n),ju.set(n,e)},ME="style["+la+'][data-styled-version="5.3.11"]',Uy=new RegExp("^"+la+'\\.g(\\d+)\\[id="([\\w\\d-]+)"\\].*?"([^"]*)'),Vy=function(e,n,r){for(var a,c=r.split(","),u=0,f=c.length;u<f;u++)(a=c[u])&&e.registerName(n,a)},Hy=function(e,n){for(var r=(n.textContent||"").split(`/*!sc*/
`),a=[],c=0,u=r.length;c<u;c++){var f=r[c].trim();if(f){var p=f.match(Uy);if(p){var v=0|parseInt(p[1],10),y=p[2];v!==0&&(TE(y,v),Vy(e,y,p[3]),e.getTag().insertRules(v,a)),a.length=0}else a.push(f)}}},wi=function(){return typeof __webpack_nonce__!="undefined"?__webpack_nonce__:null},Gy=function(e){var n=document.head,r=e||n,a=document.createElement("style"),c=function(p){for(var v=p.childNodes,y=v.length;y>=0;y--){var k=v[y];if(k&&k.nodeType===1&&k.hasAttribute(la))return k}}(r),u=c!==void 0?c.nextSibling:null;a.setAttribute(la,"active"),a.setAttribute("data-styled-version","5.3.11");var f=wi();return f&&a.setAttribute("nonce",f),r.insertBefore(a,u),a},Rm=function(){function e(r){var a=this.element=Gy(r);a.appendChild(document.createTextNode("")),this.sheet=function(c){if(c.sheet)return c.sheet;for(var u=document.styleSheets,f=0,p=u.length;f<p;f++){var v=u[f];if(v.ownerNode===c)return v}wo(17)}(a),this.length=0}var n=e.prototype;return n.insertRule=function(r,a){try{return this.sheet.insertRule(a,r),this.length++,!0}catch{return!1}},n.deleteRule=function(r){this.sheet.deleteRule(r),this.length--},n.getRule=function(r){var a=this.sheet.cssRules[r];return a!==void 0&&typeof a.cssText=="string"?a.cssText:""},e}(),PE=function(){function e(r){var a=this.element=Gy(r);this.nodes=a.childNodes,this.length=0}var n=e.prototype;return n.insertRule=function(r,a){if(r<=this.length&&r>=0){var c=document.createTextNode(a),u=this.nodes[r];return this.element.insertBefore(c,u||null),this.length++,!0}return!1},n.deleteRule=function(r){this.element.removeChild(this.nodes[r]),this.length--},n.getRule=function(r){return r<this.length?this.nodes[r].textContent:""},e}(),CE=function(){function e(r){this.rules=[],this.length=0}var n=e.prototype;return n.insertRule=function(r,a){return r<=this.length&&(this.rules.splice(r,0,a),this.length++,!0)},n.deleteRule=function(r){this.rules.splice(r,1),this.length--},n.getRule=function(r){return r<this.length?this.rules[r]:""},e}(),Bu=Df,Rf={isServer:!Df,useCSSOMInjection:!Am},Uu=function(){function e(r,a,c){r===void 0&&(r=Go),a===void 0&&(a={}),this.options=Br({},Rf,{},r),this.gs=a,this.names=new Map(c),this.server=!!r.isServer,!this.server&&Df&&Bu&&(Bu=!1,function(u){for(var f=document.querySelectorAll(ME),p=0,v=f.length;p<v;p++){var y=f[p];y&&y.getAttribute(la)!=="active"&&(Hy(u,y),y.parentNode&&y.parentNode.removeChild(y))}}(this))}e.registerId=function(r){return fs(r)};var n=e.prototype;return n.reconstructWithOptions=function(r,a){return a===void 0&&(a=!0),new e(Br({},this.options,{},r),this.gs,a&&this.names||void 0)},n.allocateGSInstance=function(r){return this.gs[r]=(this.gs[r]||0)+1},n.getTag=function(){return this.tag||(this.tag=(c=(a=this.options).isServer,u=a.useCSSOMInjection,f=a.target,r=c?new CE(f):u?new Rm(f):new PE(f),new Dm(r)));var r,a,c,u,f},n.hasNameForId=function(r,a){return this.names.has(r)&&this.names.get(r).has(a)},n.registerName=function(r,a){if(fs(r),this.names.has(r))this.names.get(r).add(a);else{var c=new Set;c.add(a),this.names.set(r,c)}},n.insertRules=function(r,a,c){this.registerName(r,a),this.getTag().insertRules(fs(r),c)},n.clearNames=function(r){this.names.has(r)&&this.names.get(r).clear()},n.clearRules=function(r){this.getTag().clearGroup(fs(r)),this.clearNames(r)},n.clearTag=function(){this.tag=void 0},n.toString=function(){return function(r){for(var a=r.getTag(),c=a.length,u="",f=0;f<c;f++){var p=Om(f);if(p!==void 0){var v=r.names.get(p),y=a.getGroup(f);if(v&&y&&v.size){var k=la+".g"+f+'[id="'+p+'"]',P="";v!==void 0&&v.forEach(function(T){T.length>0&&(P+=T+",")}),u+=""+y+k+'{content:"'+P+`"}/*!sc*/
`}}}return u}(this)},e}(),no=/(a)(d)/gi,Wy=function(e){return String.fromCharCode(e+(e>25?39:97))},hs=function(e,n){for(var r=n.length;r;)e=33*e^n.charCodeAt(--r);return e},qy=function(e){return hs(5381,e)},Ky=qy("5.3.11"),Xy=function(){function e(n,r,a){this.rules=n,this.staticRulesId="",this.isStatic=(a===void 0||a.isStatic)&&Em(n),this.componentId=r,this.baseHash=hs(Ky,r),this.baseStyle=a,Uu.registerId(r)}return e.prototype.generateAndInjectStyles=function(n,r,a){var c=this.componentId,u=[];if(this.baseStyle&&u.push(this.baseStyle.generateAndInjectStyles(n,r,a)),this.isStatic&&!a.hash)if(this.staticRulesId&&r.hasNameForId(c,this.staticRulesId))u.push(this.staticRulesId);else{var f=So(this.rules,n,r,a).join(""),p=ul(hs(this.baseHash,f)>>>0);if(!r.hasNameForId(c,p)){var v=a(f,"."+p,void 0,c);r.insertRules(c,p,v)}u.push(p),this.staticRulesId=p}else{for(var y=this.rules.length,k=hs(this.baseHash,a.hash),P="",T=0;T<y;T++){var E=this.rules[T];if(typeof E=="string")P+=E;else if(E){var A=So(E,n,r,a),C=Array.isArray(A)?A.join(""):A;k=hs(k,C+T),P+=C}}if(P){var L=ul(k>>>0);if(!r.hasNameForId(c,L)){var N=a(P,"."+L,void 0,c);r.insertRules(c,L,N)}u.push(L)}}return u.join(" ")},e}(),AE=/^\s*\/\/.*$/gm,IE=[":","[",".","#"],Lf=Rr.default.createContext(),Lf.Consumer,Vu=Rr.default.createContext(),$y=(Vu.Consumer,new Uu),Lm=SE(),DE=function(){function e(n,r){var a=this;this.inject=function(c,u){u===void 0&&(u=Lm);var f=a.name+u.hash;c.hasNameForId(a.id,f)||c.insertRules(a.id,f,u(a.rules,f,"@keyframes"))},this.toString=function(){return wo(12,String(a.name))},this.name=n,this.id="sc-keyframes-"+n,this.rules=r}return e.prototype.getName=function(n){return n===void 0&&(n=Lm),this.name+n.hash},e}(),zm=/([A-Z])/,Zy=/([A-Z])/g,OE=/^ms-/,RE=function(e){return"-"+e.toLowerCase()},h=function(e){return e==null||e===!1||e===""},x=function(e){return Array.isArray(e)&&(e.isCss=!0),e},D=function(e,n,r){return r===void 0&&(r=Go),e.theme!==r.theme&&e.theme||n||r.theme},H=/[!"#$%&'()*+,./:;<=>?@[\\\]^`{|}~-]+/g,ne=/(^-|-$)/g,ce=function(e){return ul(qy(e)>>>0)},Ce=function(e){return typeof e=="function"||typeof e=="object"&&e!==null&&!Array.isArray(e)},He=function(e){return e!=="__proto__"&&e!=="constructor"&&e!=="prototype"},$e=Rr.default.createContext(),$e.Consumer,ct={},It=function(e){return function n(r,a,c){if(c===void 0&&(c=Go),!(0,Nu.isValidElementType)(a))return wo(1,String(a));var u=function(){return r(a,c,Bi.apply(void 0,arguments))};return u.withConfig=function(f){return n(r,a,Br({},c,{},f))},u.attrs=function(f){return n(r,a,Br({},c,{attrs:Array.prototype.concat(c.attrs,f).filter(Boolean)}))},u}(jy,e)},["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","marquee","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","marker","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","textPath","tspan"].forEach(function(e){It[e]=It(e)}),Ot=function(){function e(r,a){this.rules=r,this.componentId=a,this.isStatic=Em(r),Uu.registerId(this.componentId+1)}var n=e.prototype;return n.createStyles=function(r,a,c,u){var f=u(So(this.rules,a,c,u).join(""),""),p=this.componentId+r;c.insertRules(p,p,f)},n.removeStyles=function(r,a){a.clearRules(this.componentId+r)},n.renderStyles=function(r,a,c,u){r>2&&Uu.registerId(this.componentId+r),this.removeStyles(r,c),this.createStyles(r,a,c,u)},e}(),function(){function e(){var r=this;this._emitSheetCSS=function(){var a=r.instance.toString();if(!a)return"";var c=wi();return"<style "+[c&&'nonce="'+c+'"',la+'="true"','data-styled-version="5.3.11"'].filter(Boolean).join(" ")+">"+a+"</style>"},this.getStyleTags=function(){return r.sealed?wo(2):r._emitSheetCSS()},this.getStyleElement=function(){var a;if(r.sealed)return wo(2);var c=((a={})[la]="",a["data-styled-version"]="5.3.11",a.dangerouslySetInnerHTML={__html:r.instance.toString()},a),u=wi();return u&&(c.nonce=u),[Rr.default.createElement("style",Br({},c,{key:"sc-0-0"}))]},this.seal=function(){r.sealed=!0},this.instance=new Uu({isServer:!0}),this.sealed=!1}var n=e.prototype;return n.collectStyles=function(r){return this.sealed?wo(2):Rr.default.createElement(Tm,{sheet:this.instance},r)},n.interleaveWithNodeStream=function(r){return wo(3)},e}(),le=It});function Qt(){return Qt=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var r=arguments[n];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},Qt.apply(this,arguments)}var Nn=R(()=>{});function Un(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var On=R(()=>{});function Kn(e,n){return Kn=Object.setPrototypeOf||function(r,a){return r.__proto__=a,r},Kn(e,n)}var fi=R(()=>{});function ro(e,n){e.prototype=Object.create(n.prototype),e.prototype.constructor=e,Kn(e,n)}var Ai=R(()=>{fi()});function ur(e){return ur=Object.setPrototypeOf?Object.getPrototypeOf:function(n){return n.__proto__||Object.getPrototypeOf(n)},ur(e)}var Ii=R(()=>{});function Eo(e){return Function.toString.call(e).indexOf("[native code]")!==-1}var Ra=R(()=>{});function hc(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var pc=R(()=>{});function La(e,n,r){return hc()?La=Reflect.construct:La=function(a,c,u){var f=[null];f.push.apply(f,c);var p=Function.bind.apply(a,f),v=new p;return u&&Kn(v,u.prototype),v},La.apply(null,arguments)}var mc=R(()=>{fi(),pc()});function ps(e){var n=typeof Map=="function"?new Map:void 0;return ps=function(r){if(r===null||!Eo(r))return r;if(typeof r!="function")throw new TypeError("Super expression must either be null or a function");if(typeof n!="undefined"){if(n.has(r))return n.get(r);n.set(r,a)}function a(){return La(r,arguments,ur(this).constructor)}return a.prototype=Object.create(r.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),Kn(a,r)},ps(e)}var Qr=R(()=>{Ii(),fi(),Ra(),mc()}),ko=R(()=>{});function Sr(e){return e.charAt(0).toUpperCase()+e.slice(1)}function ms(e,n){if(!e)return n.toLowerCase();var r=e.split("-");if(r.length>1)return r.splice(1,0,n),r.reduce(function(c,u){return""+c+Sr(u)});var a=e.replace(/([a-z])([A-Z])/g,"$1"+n+"$2");return e===a?""+e+n:a}function gs(e,n){for(var r={},a=0;a<n.length;a+=1)(n[a]||n[a]===0)&&(r[ms(e,dz[a])]=n[a]);return r}function lz(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),a=1;a<n;a++)r[a-1]=arguments[a];var c=r[0],u=r[1],f=u===void 0?c:u,p=r[2],v=p===void 0?c:p,y=r[3],k=y===void 0?f:y,P=[c,f,v,k];return gs(e,P)}function oA(e){return Math.round(e*255)}function $re(e,n,r){return oA(e)+","+oA(n)+","+oA(r)}function Yy(e,n,r,a){if(a===void 0&&(a=$re),n===0)return a(r,r,r);var c=(e%360+360)%360/60,u=(1-Math.abs(2*r-1))*n,f=u*(1-Math.abs(c%2-1)),p=0,v=0,y=0;c>=0&&c<1?(p=u,v=f):c>=1&&c<2?(p=f,v=u):c>=2&&c<3?(v=u,y=f):c>=3&&c<4?(v=f,y=u):c>=4&&c<5?(p=f,y=u):c>=5&&c<6&&(p=u,y=f);var k=r-u/2,P=p+k,T=v+k,E=y+k;return a(P,T,E)}function Zre(e){if(typeof e!="string")return e;var n=e.toLowerCase();return fA[n]?"#"+fA[n]:e}function aA(e){if(typeof e!="string")throw new vs(3);var n=Zre(e);if(n.match(fz))return{red:parseInt(""+n[1]+n[2],16),green:parseInt(""+n[3]+n[4],16),blue:parseInt(""+n[5]+n[6],16)};if(n.match(hz)){var r=parseFloat((parseInt(""+n[7]+n[8],16)/255).toFixed(2));return{red:parseInt(""+n[1]+n[2],16),green:parseInt(""+n[3]+n[4],16),blue:parseInt(""+n[5]+n[6],16),alpha:r}}if(n.match(pz))return{red:parseInt(""+n[1]+n[1],16),green:parseInt(""+n[2]+n[2],16),blue:parseInt(""+n[3]+n[3],16)};if(n.match(mz)){var a=parseFloat((parseInt(""+n[4]+n[4],16)/255).toFixed(2));return{red:parseInt(""+n[1]+n[1],16),green:parseInt(""+n[2]+n[2],16),blue:parseInt(""+n[3]+n[3],16),alpha:a}}var c=FE.exec(n);if(c)return{red:parseInt(""+c[1],10),green:parseInt(""+c[2],10),blue:parseInt(""+c[3],10)};var u=gz.exec(n.substring(0,50));if(u)return{red:parseInt(""+u[1],10),green:parseInt(""+u[2],10),blue:parseInt(""+u[3],10),alpha:parseFloat(""+u[4])};var f=vz.exec(n);if(f){var p=parseInt(""+f[1],10),v=parseInt(""+f[2],10)/100,y=parseInt(""+f[3],10)/100,k="rgb("+Yy(p,v,y)+")",P=FE.exec(k);if(!P)throw new vs(4,n,k);return{red:parseInt(""+P[1],10),green:parseInt(""+P[2],10),blue:parseInt(""+P[3],10)}}var T=yz.exec(n.substring(0,50));if(T){var E=parseInt(""+T[1],10),A=parseInt(""+T[2],10)/100,C=parseInt(""+T[3],10)/100,L="rgb("+Yy(E,A,C)+")",N=FE.exec(L);if(!N)throw new vs(4,n,L);return{red:parseInt(""+N[1],10),green:parseInt(""+N[2],10),blue:parseInt(""+N[3],10),alpha:parseFloat(""+T[4])}}throw new vs(5)}function Yre(e){var n=e.red/255,r=e.green/255,a=e.blue/255,c=Math.max(n,r,a),u=Math.min(n,r,a),f=(c+u)/2;if(c===u)return e.alpha!==void 0?{hue:0,saturation:0,lightness:f,alpha:e.alpha}:{hue:0,saturation:0,lightness:f};var p,v=c-u,y=f>.5?v/(2-c-u):v/(c+u);switch(c){case n:p=(r-a)/v+(r<a?6:0);break;case r:p=(a-n)/v+2;break;default:p=(n-r)/v+4;break}return p*=60,e.alpha!==void 0?{hue:p,saturation:y,lightness:f,alpha:e.alpha}:{hue:p,saturation:y,lightness:f}}function sA(e){return Yre(aA(e))}function zf(e){var n=e.toString(16);return n.length===1?"0"+n:n}function lA(e){return zf(Math.round(e*255))}function Jre(e,n,r){return jE("#"+lA(e)+lA(n)+lA(r))}function LE(e,n,r){return Yy(e,n,r,Jre)}function Qre(e,n,r){if(typeof e=="number"&&typeof n=="number"&&typeof r=="number")return LE(e,n,r);if(typeof e=="object"&&n===void 0&&r===void 0)return LE(e.hue,e.saturation,e.lightness);throw new vs(1)}function eie(e,n,r,a){if(typeof e=="number"&&typeof n=="number"&&typeof r=="number"&&typeof a=="number")return a>=1?LE(e,n,r):"rgba("+Yy(e,n,r)+","+a+")";if(typeof e=="object"&&n===void 0&&r===void 0&&a===void 0)return e.alpha>=1?LE(e.hue,e.saturation,e.lightness):"rgba("+Yy(e.hue,e.saturation,e.lightness)+","+e.alpha+")";throw new vs(2)}function cA(e,n,r){if(typeof e=="number"&&typeof n=="number"&&typeof r=="number")return jE("#"+zf(e)+zf(n)+zf(r));if(typeof e=="object"&&n===void 0&&r===void 0)return jE("#"+zf(e.red)+zf(e.green)+zf(e.blue));throw new vs(6)}function cz(e,n,r,a){if(typeof e=="string"&&typeof n=="number"){var c=aA(e);return"rgba("+c.red+","+c.green+","+c.blue+","+n+")"}else{if(typeof e=="number"&&typeof n=="number"&&typeof r=="number"&&typeof a=="number")return a>=1?cA(e,n,r):"rgba("+e+","+n+","+r+","+a+")";if(typeof e=="object"&&n===void 0&&r===void 0&&a===void 0)return e.alpha>=1?cA(e.red,e.green,e.blue):"rgba("+e.red+","+e.green+","+e.blue+","+e.alpha+")"}throw new vs(7)}function uA(e){if(typeof e!="object")throw new vs(8);if(_z(e))return cz(e);if(bz(e))return cA(e);if(wz(e))return eie(e);if(xz(e))return Qre(e);throw new vs(8)}function uz(e,n,r){return function(){var a=r.concat(Array.prototype.slice.call(arguments));return a.length>=n?e.apply(this,a):uz(e,n,a)}}function zE(e){return uz(e,e.length,[])}function NE(e,n,r){return Math.max(e,Math.min(n,r))}function tie(e,n){if(n==="transparent")return n;var r=sA(n);return uA(Qt({},r,{lightness:NE(0,1,r.lightness-parseFloat(e))}))}function nie(e,n){if(n==="transparent")return n;var r=sA(n);return uA(Qt({},r,{lightness:NE(0,1,r.lightness+parseFloat(e))}))}function rie(e,n){if(n==="transparent")return n;var r=sA(n);return uA(Qt({},r,{saturation:NE(0,1,r.saturation+parseFloat(e))}))}function iie(e,n){if(n==="transparent")return n;var r=aA(n),a=typeof r.alpha=="number"?r.alpha:1,c=Qt({},r,{alpha:NE(0,1,+(a*100-parseFloat(e)*100).toFixed(2)/100)});return cz(c)}function dA(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),a=1;a<n;a++)r[a-1]=arguments[a];return Sz.indexOf(e)>=0&&e?Qt({},lz.apply(void 0,[""].concat(r)),{position:e}):lz.apply(void 0,["",e].concat(r))}var vs,dz,fA,fz,hz,pz,mz,FE,gz,vz,yz,jE,bz,_z,xz,wz,Jy,Nm,BE,ys,Sz,ca=R(()=>{Nn(),On(),Ai(),Qr(),ko(),vs=function(e){ro(n,e);function n(r){var a;return a=e.call(this,"An error occurred. See https://github.com/styled-components/polished/blob/main/src/internalHelpers/errors.md#"+r+" for more information.")||this,Un(a)}return n}(ps(Error)),dz=["Top","Right","Bottom","Left"],fA={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"639",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},fz=/^#[a-fA-F0-9]{6}$/,hz=/^#[a-fA-F0-9]{8}$/,pz=/^#[a-fA-F0-9]{3}$/,mz=/^#[a-fA-F0-9]{4}$/,FE=/^rgb\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*\)$/i,gz=/^rgba\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*([-+]?[0-9]*[.]?[0-9]+)\s*\)$/i,vz=/^hsl\(\s*(\d{0,3}[.]?[0-9]+)\s*,\s*(\d{1,3}[.]?[0-9]?)%\s*,\s*(\d{1,3}[.]?[0-9]?)%\s*\)$/i,yz=/^hsla\(\s*(\d{0,3}[.]?[0-9]+)\s*,\s*(\d{1,3}[.]?[0-9]?)%\s*,\s*(\d{1,3}[.]?[0-9]?)%\s*,\s*([-+]?[0-9]*[.]?[0-9]+)\s*\)$/i,jE=function(e){return e.length===7&&e[1]===e[2]&&e[3]===e[4]&&e[5]===e[6]?"#"+e[1]+e[3]+e[5]:e},bz=function(e){return typeof e.red=="number"&&typeof e.green=="number"&&typeof e.blue=="number"&&(typeof e.alpha!="number"||typeof e.alpha=="undefined")},_z=function(e){return typeof e.red=="number"&&typeof e.green=="number"&&typeof e.blue=="number"&&typeof e.alpha=="number"},xz=function(e){return typeof e.hue=="number"&&typeof e.saturation=="number"&&typeof e.lightness=="number"&&(typeof e.alpha!="number"||typeof e.alpha=="undefined")},wz=function(e){return typeof e.hue=="number"&&typeof e.saturation=="number"&&typeof e.lightness=="number"&&typeof e.alpha=="number"},Jy=zE(tie),Nm=zE(nie),BE=zE(rie),ys=zE(iie),Sz=["absolute","fixed","relative","static","sticky"]});function oie(e,n,r){return n in e?Object.defineProperty(e,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[n]=r,e}function Ez(e,n){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);n&&(a=a.filter(function(c){return Object.getOwnPropertyDescriptor(e,c).enumerable})),r.push.apply(r,a)}return r}function Nf(e){for(var n=1;n<arguments.length;n++){var r=arguments[n]!=null?arguments[n]:{};n%2?Ez(Object(r),!0).forEach(function(a){oie(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ez(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function Fm(e,n){if(e==null)return{};var r={},a=Object.keys(e),c,u;for(u=0;u<a.length;u++)c=a[u],!(n.indexOf(c)>=0)&&(r[c]=e[c]);return r}var Qy=R(()=>{}),kz,hA,Tz=R(()=>{kz=ee(Oe()),hA=(0,kz.createContext)({})});function aie(e,n,r){return n in e?Object.defineProperty(e,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[n]=r,e}function Mz(e,n){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);n&&(a=a.filter(function(c){return Object.getOwnPropertyDescriptor(e,c).enumerable})),r.push.apply(r,a)}return r}function jm(e){for(var n=1;n<arguments.length;n++){var r=arguments[n]!=null?arguments[n]:{};n%2?Mz(Object(r),!0).forEach(function(a){aie(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Mz(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function pA(e,n){if(e==null)return{};var r={},a=Object.keys(e),c,u;for(u=0;u<a.length;u++)c=a[u],!(n.indexOf(c)>=0)&&(r[c]=e[c]);return r}function sie(e,n){if(e){if(typeof e=="string")return Pz(e,n);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Pz(e,n)}}function Pz(e,n){(n==null||n>e.length)&&(n=e.length);for(var r=0,a=new Array(n);r<n;r++)a[r]=e[r];return a}function Cz(e,n){var r;if(typeof Symbol=="undefined"||e[Symbol.iterator]==null){if(Array.isArray(e)||(r=sie(e))||n&&e&&typeof e.length=="number"){r&&(e=r);var a=0;return function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}return r=e[Symbol.iterator](),r.next.bind(r)}var UE=R(()=>{});function lie(e){return typeof e=="function"}var mA,Az,cie=R(()=>{mA=ee(Oe()),Tz(),UE(),Az=function(e,n,r){r===void 0&&(r=n.children);var a=(0,mA.useContext)(hA);if(a.useCreateElement)return a.useCreateElement(e,n,r);if(typeof e=="string"&&lie(r)){n.children;var c=pA(n,["children"]);return r(c)}return(0,mA.createElement)(e,n,r)}});function uie(e,n,r){return n in e?Object.defineProperty(e,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[n]=r,e}function Iz(e,n){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);n&&(a=a.filter(function(c){return Object.getOwnPropertyDescriptor(e,c).enumerable})),r.push.apply(r,a)}return r}function Bm(e){for(var n=1;n<arguments.length;n++){var r=arguments[n]!=null?arguments[n]:{};n%2?Iz(Object(r),!0).forEach(function(a){uie(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Iz(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function die(e,n){if(e==null)return{};var r={},a=Object.keys(e),c,u;for(u=0;u<a.length;u++)c=a[u],!(n.indexOf(c)>=0)&&(r[c]=e[c]);return r}var Dz=R(()=>{});function fie(e){return typeof e=="object"&&e!=null}var hie=R(()=>{});function gA(e){var n;if(!fie(e))return!1;var r=Object.getPrototypeOf(e);return r==null?!0:((n=r.constructor)===null||n===void 0?void 0:n.toString())===Object.toString()}var Oz=R(()=>{hie()});function Rz(e,n){for(var r=Object.keys(e),a={},c={},u=0,f=r;u<f.length;u++){var p=f[u];n.indexOf(p)>=0?a[p]=e[p]:c[p]=e[p]}return[a,c]}function Lz(e,n){if(n===void 0&&(n=[]),!gA(e.state))return Rz(e,n);var r=Rz(e,[].concat(n,["state"])),a=r[0],c=r[1],u=a.state,f=die(a,["state"]);return[Bm(Bm({},u),f),c]}var pie=R(()=>{Dz(),Oz()});function VE(e,n){if(e===n)return!0;if(!e||!n||typeof e!="object"||typeof n!="object")return!1;var r=Object.keys(e),a=Object.keys(n),c=r.length;if(a.length!==c)return!1;for(var u=0,f=r;u<f.length;u++){var p=f[u];if(e[p]!==n[p])return!1}return!0}var vA=R(()=>{});function zz(e){return e.name==="normalizePropsAreEqualInner"?e:function(n,r){return!gA(n.state)||!gA(r.state)?e(n,r):e(Bm(Bm({},n.state),n),Bm(Bm({},r.state),r))}}var mie=R(()=>{Dz(),Oz()});function gie(e){return(0,yA.forwardRef)(e)}function vie(e,n){return(0,yA.memo)(e,n)}function eb(e){var n=e.as,r=e.useHook,a=e.memo,c=e.propsAreEqual,u=c===void 0?r==null?void 0:r.unstable_propsAreEqual:c,f=e.keys,p=f===void 0?(r==null?void 0:r.__keys)||[]:f,v=e.useCreateElement,y=v===void 0?Az:v,k=function(P,T){var E=P.as,A=E===void 0?n:E,C=pA(P,["as"]);if(r){var L,N=Lz(C,p),U=N[0],G=N[1],Q=r(U,jm({ref:T},G)),J=Q.wrapElement,ie=pA(Q,["wrapElement"]),xe=((L=A.render)===null||L===void 0?void 0:L.__keys)||A.__keys,Me=xe&&Lz(C,xe)[0],ue=Me?jm(jm({},ie),Me):ie,Ae=y(A,ue);return J?J(Ae):Ae}return y(A,jm({ref:T},C))};return k=gie(k),a&&(k=vie(k,u&&zz(u))),k.__keys=p,k.unstable_propsAreEqual=zz(u||VE),k}var yA,tb=R(()=>{yA=ee(Oe()),UE(),cie(),pie(),vA(),mie()});function Nz(e,n){(0,bA.useDebugValue)(e);var r=(0,bA.useContext)(hA);return r[e]!=null?r[e]:n}var bA,Fz=R(()=>{bA=ee(Oe()),Tz()});function yie(e,n,r){n===void 0&&(n={}),r===void 0&&(r={});var a="use"+e+"Props";(0,jz.useDebugValue)(a);var c=Nz(a);return c?c(n,r):r}var jz,bie=R(()=>{jz=ee(Oe()),Fz()});function _ie(e,n,r){n===void 0&&(n={}),r===void 0&&(r={});var a="use"+e+"Options";(0,Bz.useDebugValue)(a);var c=Nz(a);return c?jm(jm({},n),c(n,r)):n}var Bz,xie=R(()=>{Bz=ee(Oe()),Fz(),UE()});function wie(e){return Array.isArray(e)?e:typeof e!="undefined"?[e]:[]}var Sie=R(()=>{});function nb(e){var n,r,a=wie(e.compose),c=function(p,v){if(e.useOptions&&(p=e.useOptions(p,v)),e.name&&(p=_ie(e.name,p,v)),e.compose)for(var y=Cz(a),k;!(k=y()).done;){var P=k.value;p=P.__useOptions(p,v)}return p},u=function(p,v,y){if(p===void 0&&(p={}),v===void 0&&(v={}),y===void 0&&(y=!1),y||(p=c(p,v)),e.useProps&&(v=e.useProps(p,v)),e.name&&(v=yie(e.name,p,v)),e.compose)if(e.useComposeOptions&&(p=e.useComposeOptions(p,v)),e.useComposeProps)v=e.useComposeProps(p,v);else for(var k=Cz(a),P;!(P=k()).done;){var T=P.value;v=T(p,v,!0)}var E={},A=v||{};for(var C in A)A[C]!==void 0&&(E[C]=A[C]);return E};u.__useOptions=c;var f=a.reduce(function(p,v){return p.push.apply(p,v.__keys||[]),p},[]);return u.__keys=[].concat(f,((n=e.useState)===null||n===void 0?void 0:n.__keys)||[],e.keys||[]),u.unstable_propsAreEqual=e.propsAreEqual||((r=a[0])===null||r===void 0?void 0:r.unstable_propsAreEqual)||VE,u}var rb=R(()=>{ee(Oe()),bie(),UE(),xie(),vA(),Sie()});function Uz(e,n){n===void 0&&(n=null),e&&(typeof e=="function"?e(n):e.current=n)}function Vz(e,n){return(0,Hz.useMemo)(function(){return e==null&&n==null?null:function(r){Uz(e,r),Uz(n,r)}},[e,n])}var Hz,Gz=R(()=>{Hz=ee(Oe())});function _A(e){if(e.tagName==="BUTTON")return!0;if(e.tagName==="INPUT"){var n=e;return Wz.indexOf(n.type)!==-1}return!1}var Wz,xA=R(()=>{Wz=["button","color","file","image","reset","submit"]}),wA=R(()=>{}),Eie=R(()=>{wA(),ee(Oe())}),HE=R(()=>{wA(),ee(Oe()),Eie()});function qz(e){return e?e.ownerDocument||e:document}var Kz=R(()=>{});function kie(e){return e&&qz(e).defaultView||Xz}var Xz,Tie=R(()=>{Kz();try{Xz=window}catch{}});function Mie(){var e=kie();return!!(typeof e!="undefined"&&e.document&&e.document.createElement)}var GE,SA=R(()=>{Tie(),GE=Mie()}),EA,kA,TA=R(()=>{EA=ee(Oe()),SA(),kA=GE?EA.useLayoutEffect:EA.useEffect});function Um(e){var n=(0,$z.useRef)(e);return kA(function(){n.current=e}),n}var $z,Zz=R(()=>{$z=ee(Oe()),TA()});function Pie(e){return e.target===e.currentTarget}var Cie=R(()=>{});function Aie(e){var n=qz(e),r=n.activeElement;return r!=null&&r.nodeName?r:null}var Iie=R(()=>{Kz()});function Yz(e,n){return e===n||e.contains(n)}var Jz=R(()=>{});function Die(e){var n=Aie(e);if(!n)return!1;if(Yz(e,n))return!0;var r=n.getAttribute("aria-activedescendant");return r?r===e.id?!0:!!e.querySelector("#"+r):!1}var Oie=R(()=>{Iie(),Jz()});function Rie(e){return!Yz(e.currentTarget,e.target)}var Lie=R(()=>{Jz()});function WE(e){return GE?window.navigator.userAgent.indexOf(e)!==-1:!1}var zie=R(()=>{SA()});function Nie(e,n){return"matches"in e?e.matches(n):"msMatchesSelector"in e?e.msMatchesSelector(n):e.webkitMatchesSelector(n)}var Fie=R(()=>{});function jie(e){var n=e;return n.offsetWidth>0||n.offsetHeight>0||e.getClientRects().length>0}function Bie(e){return Nie(e,Qz)&&jie(e)}var Qz,Uie=R(()=>{Fie(),Qz="input:not([type='hidden']):not([disabled]), select:not([disabled]), textarea:not([disabled]), a[href], button:not([disabled]), [tabindex], iframe, object, embed, area[href], audio[controls], video[controls], [contenteditable]:not([contenteditable='false'])"}),eN,qE,tN=R(()=>{Qy(),tb(),rb(),vA(),eN=["unstable_system"],qE=nb({name:"Role",keys:eN,propsAreEqual:function(e,n){var r=e.unstable_system,a=Fm(e,["unstable_system"]),c=n.unstable_system,u=Fm(n,["unstable_system"]);return r!==c&&!VE(r,c)?!1:VE(a,u)}}),eb({as:"div",useHook:qE})});function nN(e){!Die(e)&&Bie(e)&&e.focus()}function Vie(e){return e.tagName==="BUTTON"||e.tagName==="INPUT"||e.tagName==="SELECT"||e.tagName==="TEXTAREA"||e.tagName==="A"}function Hie(e){return e.tagName==="BUTTON"||e.tagName==="INPUT"||e.tagName==="SELECT"||e.tagName==="TEXTAREA"}function Gie(e,n,r,a){return e?n&&!r?-1:void 0:n?a:a||0}function MA(e,n){return(0,Vm.useCallback)(function(r){var a;(a=e.current)===null||a===void 0||a.call(e,r),!r.defaultPrevented&&n&&(r.stopPropagation(),r.preventDefault())},[e,n])}var Vm,rN,iN,PA,Wie=R(()=>{Qy(),tb(),rb(),Vm=ee(Oe()),Gz(),xA(),HE(),Zz(),TA(),Oie(),Lie(),zie(),Uie(),tN(),rN=["disabled","focusable"],iN=WE("Mac")&&!WE("Chrome")&&(WE("Safari")||WE("Firefox")),PA=nb({name:"Tabbable",compose:qE,keys:rN,useOptions:function(e,n){var r=n.disabled;return Nf({disabled:r},e)},useProps:function(e,n){var r=n.ref,a=n.tabIndex,c=n.onClickCapture,u=n.onMouseDownCapture,f=n.onMouseDown,p=n.onKeyPressCapture,v=n.style,y=Fm(n,["ref","tabIndex","onClickCapture","onMouseDownCapture","onMouseDown","onKeyPressCapture","style"]),k=(0,Vm.useRef)(null),P=Um(c),T=Um(u),E=Um(f),A=Um(p),C=!!e.disabled&&!e.focusable,L=(0,Vm.useState)(!0),N=L[0],U=L[1],G=(0,Vm.useState)(!0),Q=G[0],J=G[1],ie=e.disabled?Nf({pointerEvents:"none"},v):v;kA(function(){var We=k.current;We&&(Vie(We)||U(!1),Hie(We)||J(!1))},[]);var xe=MA(P,e.disabled),Me=MA(T,e.disabled),ue=MA(A,e.disabled),Ae=(0,Vm.useCallback)(function(We){var oe;(oe=E.current)===null||oe===void 0||oe.call(E,We);var De=We.currentTarget;if(!We.defaultPrevented&&iN&&!Rie(We)&&_A(De)){var q=requestAnimationFrame(function(){De.removeEventListener("mouseup",Fe,!0),nN(De)}),Fe=function(){cancelAnimationFrame(q),nN(De)};De.addEventListener("mouseup",Fe,{once:!0,capture:!0})}},[]);return Nf({ref:Vz(k,r),style:ie,tabIndex:Gie(C,N,Q,a),disabled:C&&Q?!0:void 0,"aria-disabled":e.disabled?!0:void 0,onClickCapture:xe,onMouseDownCapture:Me,onMouseDown:Ae,onKeyPressCapture:ue},y)}}),eb({as:"div",useHook:PA})});function qie(e){var n=e.currentTarget;return e.isTrusted?_A(n)||n.tagName==="INPUT"||n.tagName==="TEXTAREA"||n.tagName==="A"||n.tagName==="SELECT":!1}var KE,oN,CA,Kie=R(()=>{Qy(),tb(),rb(),KE=ee(Oe()),xA(),HE(),Zz(),Cie(),Wie(),oN=["unstable_clickOnEnter","unstable_clickOnSpace"],CA=nb({name:"Clickable",compose:PA,keys:oN,useOptions:function(e){var n=e.unstable_clickOnEnter,r=n===void 0?!0:n,a=e.unstable_clickOnSpace,c=a===void 0?!0:a,u=Fm(e,["unstable_clickOnEnter","unstable_clickOnSpace"]);return Nf({unstable_clickOnEnter:r,unstable_clickOnSpace:c},u)},useProps:function(e,n){var r=n.onKeyDown,a=n.onKeyUp,c=Fm(n,["onKeyDown","onKeyUp"]),u=(0,KE.useState)(!1),f=u[0],p=u[1],v=Um(r),y=Um(a),k=(0,KE.useCallback)(function(T){var E;if((E=v.current)===null||E===void 0||E.call(v,T),!T.defaultPrevented&&!e.disabled&&!T.metaKey&&Pie(T)){var A=e.unstable_clickOnEnter&&T.key==="Enter",C=e.unstable_clickOnSpace&&T.key===" ";if(A||C){if(qie(T))return;T.preventDefault(),A?T.currentTarget.click():C&&p(!0)}}},[e.disabled,e.unstable_clickOnEnter,e.unstable_clickOnSpace]),P=(0,KE.useCallback)(function(T){var E;if((E=y.current)===null||E===void 0||E.call(y,T),!T.defaultPrevented&&!e.disabled&&!T.metaKey){var A=e.unstable_clickOnSpace&&T.key===" ";f&&A&&(p(!1),T.currentTarget.click())}},[e.disabled,e.unstable_clickOnSpace,f]);return Nf({"data-active":f||void 0,onKeyDown:k,onKeyUp:P},c)}}),eb({as:"button",memo:!0,useHook:CA})}),ib,aN,sN,lN,Xie=R(()=>{Qy(),tb(),rb(),ib=ee(Oe()),Gz(),xA(),HE(),Kie(),aN=[],sN=nb({name:"Button",compose:CA,keys:aN,useProps:function(e,n){var r=n.ref,a=Fm(n,["ref"]),c=(0,ib.useRef)(null),u=(0,ib.useState)(void 0),f=u[0],p=u[1],v=(0,ib.useState)("button"),y=v[0],k=v[1];return(0,ib.useEffect)(function(){var P=c.current;P&&(_A(P)||(P.tagName!=="A"&&p("button"),k(void 0)))},[]),Nf({ref:Vz(c,r),role:f,type:y},a)}}),lN=eb({as:"button",memo:!0,useHook:sN})}),cN,uN,dN,$ie=R(()=>{Qy(),tb(),rb(),tN(),cN=[],uN=nb({name:"Group",compose:qE,keys:cN,useProps:function(e,n){return Nf({role:"group"},n)}}),dN=eb({as:"div",useHook:uN})});function Zie(){return GE?document.body:null}var fN,Hm,Yie=R(()=>{fN=ee(Oe()),TA(),SA(),ee(Ia()),Hm=(0,fN.createContext)(Zie())}),AA,Jie=R(()=>{typeof window!="undefined"&&(AA={get passive(){}},window.addEventListener("testPassive",null,AA),window.removeEventListener("testPassive",null,AA)),typeof window!="undefined"&&window.navigator&&window.navigator.platform&&(/iP(ad|hone|od)/.test(window.navigator.platform)||window.navigator.platform==="MacIntel"&&window.navigator.maxTouchPoints>1)}),Ff=R(()=>{ee(Oe()),HE(),Xie(),$ie(),ee(Ia()),Yie(),Jie(),wA()});function Qn(e){let n=(0,IA.useMemo)(()=>{let c=e;return{get current(){return c},set current(u){c=u,a(u)}}},[]),[r,a]=(0,IA.useState)(()=>e);return[n,r]}var IA,nr=R(()=>{IA=ee(Oe())});function Qie(e){return n=>io.default.createElement(yN,null,io.default.createElement(e,O({},n)))}var io,hN,pN,tr,Gm,mN,gN,vN,DA,OA,yN,rr=R(()=>{ca(),Xe(),Xe(),io=ee(Oe()),hN=ee(Ia()),Ff(),nr(),tr=Bi(pN||(pN=Y([`
  #pointer-root & {
    pointer-events: none;
  }
  #pointer-root.normal & {
    pointer-events: auto;
  }
`]))),Gm={panel:{bg:"#282b2f",head:{title:{color:"#bbb"},punctuation:{color:"#808080"}},body:{compoudThing:{label:{get color(){return Nm(.6,Gm.panel.bg)}}}}}},gN=typeof window!="undefined"?Cm(mN||(mN=Y([`
  :host {
    all: initial;
    color: white;
    font: 11px -apple-system, BlinkMacSystemFont, Segoe WPC, Segoe Editor,
      HelveticaNeue-Light, Ubuntu, Droid Sans, sans-serif;
  }

  * {
    padding: 0;
    margin: 0;
    font-size: 100%;
    font: inherit;
    vertical-align: baseline;
    list-style: none;
  }
`]))):{},DA=le.div(vN||(vN=Y([`
  z-index: 51;
  position: fixed;
  top: 0px;
  right: 0px;
  bottom: 0px;
  left: 0px;
  pointer-events: none;
`]))),OA=e=>io.default.createElement(Tm,{disableVendorPrefixes:!0,target:e.target},io.default.createElement(io.default.Fragment,null,io.default.createElement(gN,null),e.children)),yN=e=>{let[n,r]=(0,io.useState)(null),[a,c]=(0,io.useState)(null);(0,io.useLayoutEffect)(()=>{if(!n)return;let{parentNode:p}=n;if(!p)return;let v=p.shadowRoot?parent.shadowRoot:p.attachShadow({mode:"open"});c(v)},[n]);let[u,f]=Qn(void 0);return a?hN.default.createPortal(io.default.createElement(OA,{target:a},io.default.createElement(io.default.Fragment,null,io.default.createElement(DA,{ref:u}),io.default.createElement(Hm.Provider,{value:f},e.children))),a):io.default.createElement("template",{ref:r,"shadow-root":"open"},e.children)}}),Wm,bN,_N,Hu,xN,ob,wN,SN,XE,EN,RA,dl,gc=R(()=>{rr(),Xe(),Wm={get outlinePanel(){return 1},get propsPanel(){return Wm.outlinePanel},get sequenceEditorPanel(){return this.outlinePanel-1},get toolbar(){return this.outlinePanel+1},get pluginPanes(){return this.sequenceEditorPanel-1}},bN=Gm.panel.bg,Hu=le.span(_N||(_N=Y([`
  white-space: nowrap;
`]))),ob=le.span(xN||(xN=Y([`
  white-space: nowrap;
  color: `,`;
`])),Gm.panel.head.punctuation.color),SN=le.div(wN||(wN=Y([`
  background: `,`;
  flex-grow: 1;
  overflow-y: scroll;
  padding: 0;
`])),bN),XE=18,RA=le.div(EN||(EN=Y([`
  height: `,`px;
  box-sizing: border-box;
  display: flex;
  align-items: center;
  padding: 0 10px;
  position: relative;
  color: #adadadb3;
  border-bottom: 1px solid rgb(0 0 0 / 13%);
  background-color: #25272b;
  font-size: 10px;
  font-weight: 500;
  overflow: hidden;
  white-space: nowrap;
  text-overflow: ellipsis;
`])),XE),dl=100}),kN,bs,qm=R(()=>{kN=()=>{},bs=kN});function eoe(e){return LA.createElement("svg",O({width:16,height:16,viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),LA.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M1.775 2.781a.5.5 0 01.5.5v1.7H4.67c.108-.957.92-1.7 1.905-1.7h6.608a1.917 1.917 0 110 3.834H6.574c-.78 0-1.452-.466-1.751-1.135H2.275v5.03h2.39a2.032 2.032 0 012.023-1.854h6.38a2.031 2.031 0 110 4.063h-6.38c-.83 0-1.543-.497-1.858-1.21H1.775a.5.5 0 01-.5-.5V3.281a.5.5 0 01.5-.5zm4.799 1.5h6.608a.917.917 0 110 1.834H6.574a.917.917 0 110-1.834zm.114 5.875h6.38a1.031 1.031 0 110 2.063h-6.38a1.032 1.032 0 110-2.063z",fill:"currentColor"}))}var LA,zA,toe=R(()=>{LA=ee(Oe()),zA=eoe});function noe(e){return NA.createElement("svg",O({width:16,height:16,viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),NA.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M8 10.5L4 6.654 5.2 5.5 8 8.385 10.8 5.5 12 6.654 8 10.5z",fill:"currentColor"}))}var NA,TN,roe=R(()=>{NA=ee(Oe()),TN=noe});function ioe(e){return FA.createElement("svg",O({width:16,height:16,viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),FA.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M3.5 3c-1.072 0-1.969.904-1.969 1.969 0 1 .929 1.968 1.969 1.968h9A1.969 1.969 0 1012.5 3h-9zm9 1H5.531v1.938H12.5A.969.969 0 0012.5 4zM3.5 9.14a1.969 1.969 0 000 3.938h9a1.969 1.969 0 100-3.937h-9zm9 1H8.406v1.938H12.5a.969.969 0 100-1.937z",fill:"currentColor"}))}var FA,MN,ooe=R(()=>{FA=ee(Oe()),MN=ioe});function aoe(e){return jA.createElement("svg",O({width:16,height:16,viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),jA.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M.166 7.994a2.26 2.26 0 114.518 0 2.26 2.26 0 01-4.518 0zM2.425 6.91a1.085 1.085 0 100 2.17 1.085 1.085 0 000-2.17zM5.74 7.994a2.26 2.26 0 114.519 0 2.26 2.26 0 01-4.519 0zM8 6.91a1.085 1.085 0 100 2.17 1.085 1.085 0 000-2.17zM13.575 5.735a2.26 2.26 0 100 4.519 2.26 2.26 0 000-4.52zm-1.086 2.26a1.085 1.085 0 112.171 0 1.085 1.085 0 01-2.17 0z",fill:"currentColor"}))}var jA,PN,soe=R(()=>{jA=ee(Oe()),PN=aoe});function loe(e){return BA.createElement("svg",O({width:16,height:16,viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),BA.createElement("path",{d:"M8.339 4.5l-2.055.644 4.451 1.393v2.748l-2.966.928-2.504-.783V6.738l2.42.758 2.055-.644-4.458-1.395L4 5.858v4.463L7.768 11.5 12 10.175V5.646L8.339 4.5z",fill:"currentColor"}))}var BA,UA,coe=R(()=>{BA=ee(Oe()),UA=loe});function uoe(e){return VA.createElement("svg",O({width:16,height:16,viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),VA.createElement("path",{d:"M8 1.57c-.416 0-.752.36-.752.804v.482c-1.715.372-3.006 1.994-3.006 3.938v.473c0 1.18-.407 2.32-1.14 3.205l-.173.208a.85.85 0 00-.125.864.75.75 0 00.686.475h9.019a.752.752 0 00.686-.475.845.845 0 00-.125-.864l-.174-.208a5.026 5.026 0 01-1.139-3.205v-.473c0-1.944-1.291-3.566-3.006-3.938v-.482c0-.445-.336-.804-.752-.804zm1.063 12.39c.282-.301.44-.71.44-1.138H6.496c0 .428.158.837.44 1.138.281.302.664.47 1.063.47.4 0 .783-.168 1.064-.47z",fill:"currentColor"}))}var VA,$E,doe=R(()=>{VA=ee(Oe()),$E=uoe});function foe(e){return HA.createElement("svg",O({width:16,height:16,viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),HA.createElement("path",{d:"M6.8 11.6a.6.6 0 00.6-.6V7.4a.6.6 0 00-1.2 0V11a.6.6 0 00.6.6zm6-7.2h-2.4v-.6A1.8 1.8 0 008.6 2H7.4a1.8 1.8 0 00-1.8 1.8v.6H3.2a.6.6 0 100 1.2h.6v6.6A1.8 1.8 0 005.6 14h4.8a1.8 1.8 0 001.8-1.8V5.6h.6a.6.6 0 100-1.2zm-6-.6a.6.6 0 01.6-.6h1.2a.6.6 0 01.6.6v.6H6.8v-.6zm4.2 8.4a.6.6 0 01-.6.6H5.6a.6.6 0 01-.6-.6V5.6h6v6.6zm-1.8-.6a.6.6 0 00.6-.6V7.4a.6.6 0 00-1.2 0V11a.6.6 0 00.6.6z",fill:"currentColor"}))}var HA,GA,hoe=R(()=>{HA=ee(Oe()),GA=foe}),ab=R(()=>{toe(),roe(),ooe(),soe(),coe(),doe(),hoe()}),fl,CN,ZE,AN,IN,DN,ON,RN,LN,zN,NN,FN,jN,BN,UN,VN,HN,GN,sb,YE=R(()=>{fl=ee(Oe()),Xe(),qm(),rr(),ab(),ZE=le.li(CN||(CN=Y([`
  margin: 0;
  padding: 0;
  list-style: none;
  display: flex;
  justify-content: flex-start;
  flex-direction: column;
  align-items: flex-start;
`]))),IN=le.div(AN||(AN=Y([""]))),ON=le(IN)(DN||(DN=Y([`
  position: relative;
  margin-top: 2px;
  margin-bottom: 2px;
  margin-left: calc(4px + var(--depth) * 16px);
  padding-left: 4px;
  padding-right: 8px;
  gap: 4px;
  height: 21px;
  line-height: 0;
  box-sizing: border-box;
  display: flex;
  flex-wrap: nowrap;
  align-items: center;
  pointer-events: none;
  white-space: nowrap;

  border-radius: 2px;
  box-shadow: 0 3px 4px -1px rgba(0, 0, 0, 0.48);

  color: rgba(255, 255, 255, 0.9);
  background: rgba(40, 43, 47, 0.65);
  backdrop-filter: blur(14px);
  border-bottom: 1px solid rgba(255, 255, 255, 0.08);

  &.descendant-is-selected {
    background: rgba(29, 53, 59, 0.7);
  }

  `,`;
  &:not(.not-selectable):not(.selected):hover {
    background: rgba(59, 63, 69, 0.9);

    border-bottom: 1px solid rgba(255, 255, 255, 0.24);
  }

  &:not(.not-selectable):not(.selected):active {
    background: rgba(82, 88, 96, 0.9);
    border-bottom: 1px solid rgba(255, 255, 255, 0.24);
  }

  &.selected {
    background: rgba(30, 88, 102, 0.7);
    border-bottom: 1px solid rgba(255, 255, 255, 0.08);
  }

  @supports not (backdrop-filter: blur()) {
    background: rgba(40, 43, 47, 0.95);
  }
`])),tr),LN=Bi(RN||(RN=Y([`
  font-weight: 500;
  font-size: 11px;
  & {
  }
`]))),NN=le.span(zN||(zN=Y([`
  `,`;

  `,`;
  position: relative;
  // Compensate for border bottom
  top: 0.5px;
  display: flex;
  height: 20px;
  align-items: center;
  box-sizing: border-box;
`])),LN,tr),jN=le.div(FN||(FN=Y([`
  font-weight: 500;
  display: flex;
  justify-content: center;
  align-items: center;
  position: relative;
  opacity: 0.99;
`]))),UN=le.span(BN||(BN=Y([`
  font-size: 9px;
  position: relative;
  display: block;
  transition: transform 0.1s ease-out;

  &:hover {
    transform: rotate(-20deg);
  }

  `,`.collapsed & {
    transform: rotate(-90deg);

    &:hover {
      transform: rotate(-70deg);
    }
  }
`])),ZE),HN=le.ul(VN||(VN=Y([`
  margin: 0;
  padding: 0;
  list-style: none;

  `,`.collapsed & {
    display: none;
  }
`])),ZE),GN=({label:e,children:n,depth:r,select:a,selectionStatus:c,labelDecoration:u,collapsed:f=!1,setIsCollapsed:p})=>{let v=n!==void 0;return fl.default.createElement(ZE,{style:{"--depth":r},className:f?"collapsed":""},fl.default.createElement(ON,{className:c,onClick:a!=null?a:bs,"data-header":!0},fl.default.createElement(jN,null,v?fl.default.createElement(UN,{onClick:y=>{y.stopPropagation(),y.preventDefault(),p==null||p(!f)}},fl.default.createElement(TN,null)):fl.default.createElement(UA,null)),fl.default.createElement(NN,null,fl.default.createElement("span",null,e)),u),v&&fl.default.createElement(HN,null,n))},sb=GN});function poe(e){return Object.keys(e)}function moe(e){return Object.keys((0,hl.val)(e.sheetTemplatesP))}function goe(){let e=xo(Gu().filter(n=>Yt(n)||pt(n)).map(n=>pt(n)?n.sheet:n))[0];if(e)return e.getSequence()}var hl,Gu,WN,Wu=R(()=>{hl=Mt,Tn(),Jr(),Ge(),Gu=()=>{var e;let n=(0,hl.val)(_e().projectsP),r=((e=(0,hl.val)(_e().atomP.historic.panels.outlinePanel.selection))!=null?e:[]).map(a=>{let c=n[a.projectId];if(!c)return;if(a.type==="Project")return c;if(!(0,hl.val)(c.sheetTemplatesP[a.sheetId]))return;let u=WN(c,a.sheetId);if(!u)return;if(a.type==="Sheet")return u;let f=(0,hl.val)(u.objectsP[a.objectKey]);if(f)return f});return xo(r.filter(a=>typeof a!="undefined"))},WN=(e,n)=>{let r=_e().atomP.historic.projects.stateByProjectId[e.address.projectId],a=(0,hl.val)(r.stateBySheetId[n].selectedInstanceId),c=(0,hl.val)(e.sheetTemplatesP[n]);if(c){if(a)return(0,hl.val)(c.instancesP[a]);{let u=(0,hl.val)(c.instancesP);return u[poe(u)[0]]}}}}),qN,KN,voe=R(()=>{Ge(),qN=ee(Oe()),YE(),sn(),Wu(),KN=({sheetObject:e,depth:n,overrideLabel:r})=>{let a=()=>{_e().transaction(({stateEditors:u})=>{u.studio.historic.panels.outline.selection.set([e])})},c=Mn(()=>Gu(),[]);return qN.default.createElement(sb,{select:a,label:r!=null?r:e.address.objectKey,depth:n,selectionStatus:c.includes(e)?"selected":"not-selected"})}});function WA(e){var n;let r=e.type==="namespace"?"namespace:".concat(e.sheet.address.sheetId,":").concat(e.path.join("/")):e.type==="Theatre_Project"?"project":e.type==="Theatre_Sheet"?"sheetInstance:".concat(e.address.sheetId,":").concat(e.address.sheetInstanceId):"unknown",a=e.type==="namespace"?e.sheet.address.projectId:e.address.projectId,c=(n=In(_e().atomP.ahistoric.projects.stateByProjectId[a].collapsedItemsInOutline[r]))!=null?n:!1,u=(0,XN.useCallback)(f=>{_e().transaction(({stateEditors:p})=>{p.studio.ahistoric.projects.stateByProjectId.collapsedItemsInOutline.set({projectId:a,isCollapsed:f,itemKey:r})})},[r]);return{collapsed:c,setCollapsed:u}}var XN,qA=R(()=>{XN=ee(Oe()),Ge(),sn()});function $N(e){return pl.default.createElement(pl.default.Fragment,null,[...e.namespace.entries()].map(([n,{object:r,nested:a}])=>pl.default.createElement(yoe,{key:n,label:n,object:r,nested:a,visualIndentation:e.visualIndentation,path:e.path,sheet:e.sheet})))}function yoe(e){let{nested:n,label:r,object:a,sheet:c}=e,{collapsed:u,setCollapsed:f}=WA({type:"namespace",sheet:c,path:[...e.path,r]}),p=n&&pl.default.createElement($N,{namespace:n,path:[...e.path,r],key:"namespaceTree("+r+")",visualIndentation:e.visualIndentation+1,sheet:c}),v=a&&pl.default.createElement(KN,{depth:e.visualIndentation,key:"objectPath("+a.address.objectKey+")",sheetObject:a,overrideLabel:r});return pl.default.createElement(pl.default.Fragment,{key:"".concat(r," - ").concat(e.visualIndentation)},v,p&&pl.default.createElement(sb,{selectionStatus:"not-selectable",label:r,key:"baseItem(".concat(r,")"),depth:e.visualIndentation,children:p,collapsed:u,setIsCollapsed:f}))}function ZN(e,n,r=boe(n)){let[a,...c]=r,u=e.get(a);u||(u={nested:void 0,object:void 0,path:[...r]},e.set(a,u)),c.length===0?(console.assert(!u.object,"expect not to have existing object with same name",{existing:u,object:n}),u.object=n):(u.nested||(u.nested=new Map),ZN(u.nested,n,c))}function boe(e){let n=KA.get(e);return n||(n=e.address.objectKey.split(tF),console.assert(n.length>0,"expected not empty"),KA.set(e,n)),n}var YN,pl,JN,QN,eF,tF,KA,_oe=R(()=>{sn(),YN=Mt,pl=ee(Oe()),Xe(),voe(),YE(),qA(),le.li(JN||(JN=Y([`
  color: `,`;
`])),e=>e.isSelected?"white":"hsl(1, 1%, 80%)"),QN=({sheet:e,depth:n})=>Mn(()=>{let r=(0,YN.val)(e.objectsP),a=Object.values(r).filter(u=>u!=null),c=new Map;return a.forEach(u=>{ZN(c,u)}),pl.default.createElement($N,{namespace:c,visualIndentation:n,path:[],sheet:e})},[e,n]),eF=QN,tF=/\s*\/\s*/g,KA=new WeakMap}),Km,nF,rF,iF,oF,aF,sF,xoe=R(()=>{Ge(),Wu(),sn(),Km=ee(Oe()),Xe(),_oe(),YE(),qA(),rF=le.div(nF||(nF=Y([`
  display: flex;
`]))),le.li(iF||(iF=Y([`
  color: `,`;
`])),e=>e.isSelected?"white":"hsl(1, 1%, 80%)"),aF=le.div(oF||(oF=Y([""]))),sF=({sheet:e,depth:n})=>{let{collapsed:r,setCollapsed:a}=WA(e),c=(0,Km.useCallback)(()=>{_e().transaction(({stateEditors:u})=>{u.studio.historic.panels.outline.selection.set([e])})},[e]);return Mn(()=>{let u=Gu();return Km.default.createElement(sb,{depth:n,select:c,setIsCollapsed:a,collapsed:r,selectionStatus:u.some(f=>f===e)?"selected":u.some(f=>f.type==="Theatre_SheetObject"&&f.sheet===e)?"descendant-is-selected":"not-selected",label:Km.default.createElement(rF,null,e.address.sheetId,": ",e.address.sheetInstanceId)},Km.default.createElement(aF,null,Km.default.createElement(eF,{depth:n+1,sheet:e,key:"objectList"+e.address.sheetInstanceId})))},[n,r])}}),XA,Xm,lF,cF,uF,dF,woe=R(()=>{sn(),XA=Mt,Xm=ee(Oe()),Xe(),xoe(),le.div(lF||(lF=Y([`
  display: flex;
`]))),le.li(cF||(cF=Y([`
  color: `,`;
`])),e=>e.isSelected?"white":"hsl(1, 1%, 80%)"),le.div(uF||(uF=Y([""]))),dF=({sheetId:e,depth:n,project:r})=>Mn(()=>{let a=(0,XA.val)(r.sheetTemplatesP[e]);if(!a)return Xm.default.createElement(Xm.default.Fragment,null);let c=(0,XA.val)(a.instancesP);return Xm.default.createElement(Xm.default.Fragment,null,Object.entries(c).map(([u,f])=>Xm.default.createElement(sF,{key:f.address.sheetInstanceId,sheet:f,depth:n})))},[n,e,r])}),JE,fF,hF,Soe=R(()=>{Wu(),sn(),JE=ee(Oe()),woe(),fF=({project:e,depth:n})=>Mn(()=>{if(!e)return null;let r=moe(e);return JE.default.createElement(JE.default.Fragment,null,r.map(a=>JE.default.createElement(dF,{depth:n,sheetId:a,key:"sheet-".concat(a),project:e})))},[e,n]),hF=fF}),lb,pF,mF,gF,vF,yF,Eoe=R(()=>{lb=ee(Oe()),YE(),Soe(),Ge(),sn(),Wu(),pF=Mt,Xe(),qA(),gF=le.div(mF||(mF=Y([`
  color: #ff6363;
  margin-left: 11px;
  background: #4c282d;
  padding: 2px 8px;
  border-radius: 2px;
  font-size: 10px;
  box-shadow: 0 2px 8px -4px black;
`]))),vF=({depth:e,project:n})=>{let r=Mn(()=>Gu(),[]),a=Mn(()=>{let p=n.address.projectId,v=(0,pF.val)(_e().atomP.ephemeral.coreByProject[p].loadingState);return(v==null?void 0:v.type)==="browserStateIsNotBasedOnDiskState"},[n]),c=(0,lb.useCallback)(()=>{_e().transaction(({stateEditors:p})=>{p.studio.historic.panels.outline.selection.set([n])})},[n]),{collapsed:u,setCollapsed:f}=WA(n);return lb.default.createElement(sb,{depth:e,label:n.address.projectId,setIsCollapsed:f,collapsed:u,labelDecoration:a?lb.default.createElement(gF,null,"Has Conflicts"):null,children:lb.default.createElement(hF,{project:n,depth:e+1}),selectionStatus:r.includes(n)?"selected":r.some(p=>p.address.projectId===n.address.projectId)?"descendant-is-selected":"not-selected",select:c})},yF=vF}),bF,$A,_F,xF,wF,SF,koe=R(()=>{bF=Mt,sn(),Ge(),$A=ee(Oe()),Xe(),Eoe(),xF=le.ul(_F||(_F=Y([`
  list-style: none;
  margin: 0;
  padding: 0;
  padding-right: 4px;
`]))),wF=e=>Mn(()=>{let n=(0,bF.val)(_e().projectsP);return $A.default.createElement(xF,null,Object.keys(n).map(r=>{let a=n[r];return $A.default.createElement(yF,{depth:0,project:a,key:"projectListItem-".concat(r)})}))},[]),SF=wF});function EF(e){let[n,r]=(0,ZA.useState)(!1);return(0,ZA.useEffect)(()=>{let a=u=>{let f=n?200:50,p=56,v=e==="left"?u.x<f:u.x>window.innerWidth-f;v&&(v=u.y>p),r(!!v)};document.addEventListener("mousemove",a);let c=()=>{r(!1)};return document.addEventListener("mouseleave",c),()=>{document.removeEventListener("mousemove",a),document.removeEventListener("mouseleave",c)}},[n]),n}var ZA,kF=R(()=>{ZA=ee(Oe())}),cb,$m,YA,TF,MF,PF,CF,QE,ub,AF,Toe=R(()=>{cb=ee(Oe()),Xe(),gc(),koe(),sn(),Ge(),kF(),$m=Mt,rr(),YA="44px",MF=le.div(TF||(TF=Y([`
  `,`;
  background-color: transparent;
  position: absolute;
  left: 8px;
  z-index: `,`;

  top: calc(`,` + 8px);
  height: fit-content;
  max-height: calc(100% - `,`);
  overflow-y: scroll;
  overflow-x: hidden;
  padding: 0;
  user-select: none;

  &::-webkit-scrollbar {
    display: none;
  }

  scrollbar-width: none;

  display: `,`;

  &:hover {
    display: block;
  }

  // Create a small buffer on the bottom to aid selecting the bottom item in a long, scrolling list
  &::after {
    content: '';
    display: block;
    height: 20px;
  }
`])),tr,Wm.outlinePanel,YA,YA,({pin:e})=>e?"block":"none"),PF=()=>{var e;let n=(e=In(_e().atomP.ahistoric.pinOutline))!=null?e:!0,r=In(AF),a=EF("left");return(0,cb.useLayoutEffect)(()=>{QE.set(a)},[a]),(0,cb.useEffect)(()=>()=>{ub.set(!1),QE.set(!1)},[]),cb.default.createElement(MF,{pin:n||r,onMouseEnter:()=>{ub.set(!0)},onMouseLeave:()=>{ub.set(!1)}},cb.default.createElement(SF,null))},CF=PF,QE=new $m.Atom(!1),ub=new $m.Atom(!1),AF=(0,$m.prism)(()=>{let e=(0,$m.val)(ub.prism),n=(0,$m.val)(QE.prism);return e||n})}),IF,DF,OF,Moe=R(()=>{Xe(),DF=le.input.attrs({type:"checkbox"})(IF||(IF=Y([`
  outline: none;
`]))),OF=DF});function Poe({propConfig:e,editingTools:n,value:r,autoFocus:a}){let c=(0,JA.useCallback)(u=>{n.permanentlySetValue(!!u.target.checked)},[e,n]);return JA.default.createElement(LF,{checked:r,onChange:c,autoFocus:a})}var JA,RF,LF,zF,Coe=R(()=>{JA=ee(Oe()),Xe(),Moe(),LF=le(OF)(RF||(RF=Y([`
  margin-left: 6px;

  :focus {
    outline: 1px solid #555;
  }
`]))),zF=Poe});function ek(e){return n=>{e.forEach(r=>{typeof r=="function"?r(n):r!=null&&(r.current=n)})}}var tk=R(()=>{});function QA(e,n,r){(0,NF.useEffect)(()=>{if(!e||r===!1)return;let a=Array.isArray(e)?e.filter(u=>u):[e],c=u=>{a.every(f=>!u.composedPath().includes(f))&&n(u)};return window.addEventListener("mousedown",c,{capture:!0,passive:!1}),()=>{window.removeEventListener("mousedown",c,{capture:!0,passive:!1})}},[e,r])}var NF,eI=R(()=>{NF=ee(Oe())}),vc,FF,yc,jF,BF,UF,VF,tI,HF,za,GF,ua=R(()=>{vc=ee(Oe()),Xe(),FF="pointer-root",yc="--lockedCursor",BF=le.div(jF||(jF=Y([`
  pointer-events: auto;
  &.normal {
    pointer-events: none;
  }
`]))),VF=le.div(UF||(UF=Y([`
  position: absolute;
  inset: 0;
  pointer-events: none;

  #pointer-root:not(.normal) > & {
    pointer-events: auto;
  }
`]))),tI=(0,vc.createContext)({}),HF=e=>{var n,r,a,c;let[u,f]=(0,vc.useState)([]),p=(0,vc.useMemo)(()=>({getLock:(y,k)=>{let P={className:y,cursor:k};return f(T=>[...T,P]),()=>{f(T=>T.filter(E=>E!==P))}}}),[]),v=(r=(n=u[0])==null?void 0:n.cursor)!=null?r:"";return vc.default.createElement(tI.Provider,{value:p},vc.default.createElement(BF,{id:FF,className:((c=(a=u[0])==null?void 0:a.className)!=null?c:"normal")+" "+e.className},vc.default.createElement(VF,{style:{cursor:v,[yc]:v}},e.children)))},za=(e,n,r)=>{let a=(0,vc.useContext)(tI);(0,vc.useLayoutEffect)(()=>{if(e)return a.getLock(n,r)},[e,n,r])},GF=HF});function WF(e){return db.default.createElement(nI.Provider,{value:e.logger},e.children)}function qu(e,n){let r=(0,db.useContext)(nI);return(0,db.useMemo)(()=>e?r.named(e,n):r,[r,e,n])}var db,nI,Ku=R(()=>{db=ee(Oe()),nI=db.default.createContext(null)});function Aoe(){let e=qu("PointerCapturing"),n=_s.default.useRef(null),r=()=>n.current!=null;return a=>{let c,u=f=>(c=f,n.current=f,f);return{capturing:{capturePointer(f){if(e._debug("Capturing pointer",{forDebugName:a,reason:f}),n.current!=null)throw new Error('"'.concat(a,'" attempted capturing pointer for "').concat(f,'" while already captured by "').concat(n.current.debugOwnerName,'" for "').concat(n.current.debugReason,'"'));let p=u({debugOwnerName:a,debugReason:f});return{isCapturing(){return p===n.current},release(){return p===n.current?(e._debug("Releasing pointer",{forDebugName:a,reason:f}),u(null),!0):!1}}},isPointerBeingCaptured:r},forceRelease(){c&&n.current===c&&(e._debug("Force releasing pointer",{localCapture:c}),u(null))}}}}function Ioe(e){let n=Aoe();return _s.default.createElement(rI.Provider,{value:n},_s.default.createElement(KF,{children:e.children}))}function qF(e){let n=(0,_s.useContext)(rI),r=(0,_s.useMemo)(()=>n(e),[e,n]);return(0,_s.useEffect)(()=>()=>{r.forceRelease()},[r]),r.capturing}var _s,rI,KF,iI=R(()=>{_s=ee(Oe()),Ku(),rI=_s.default.createContext(null),KF=_s.default.memo(({children:e})=>_s.default.createElement(_s.default.Fragment,null,e))}),oI,Doe=R(()=>{oI=typeof window!="undefined"&&/^((?!chrome|android).)*safari/i.test(navigator.userAgent)});function Gr(e,n){let r=(0,Zm.useRef)(n);r.current=n;let a=n.shouldPointerLock&&!oI,c=(0,Zm.useRef)({domDragStarted:!1}),{capturePointer:u}=qF("useDrag for ".concat(n.debugName)),f=(0,Zm.useRef)({onDrag:bs,onDragEnd:bs,onClick:bs}),p=(0,Zm.useRef)(),[v,y]=Qn(!1);return(0,Zm.useLayoutEffect)(()=>{if(!e)return;let k=()=>{let U=c.current.domDragStarted&&c.current.detection.detected;v.current!==U&&(v.current=U)},P=U=>{if(!c.current.domDragStarted)return;let G=c.current;if(!Ooe(U,G)&&(G.detection.detected||(G.detection.totalDistanceMoved+=Math.abs(U.movementY)+Math.abs(U.movementX),G.detection.totalDistanceMoved>XF&&(a&&e.requestPointerLock(),G.detection={detected:!0,dragMovement:{x:0,y:0},dragEventCount:0},k())),G.detection.detected)){G.detection.dragEventCount+=1;let{dragMovement:Q}=G.detection;if(a)Q.x+=U.movementX,Q.y+=U.movementY;else{let{startPos:J}=G;Q.x=U.screenX-J.x,Q.y=U.screenY-J.y}f.current.onDrag(Q.x,Q.y,U,U.movementX,U.movementY)}},T=U=>{if(A(),!c.current.domDragStarted)return;let G=c.current.detection.detected;c.current={domDragStarted:!1},n.shouldPointerLock&&!oI&&document.exitPointerLock(),f.current.onDragEnd(G),window.focus(),G||f.current.onClick(U),k()},E=()=>{document.addEventListener("mousemove",P),document.addEventListener("mouseup",T)},A=()=>{var U;(U=p.current)==null||U.release(),document.removeEventListener("mousemove",P),document.removeEventListener("mouseup",T)},C=U=>{r.current.disabled||c.current.domDragStarted&&c.current.detection.detected&&(r.current.dontBlockMouseDown||(U.stopPropagation(),U.preventDefault()),c.current.detection={detected:!1,totalDistanceMoved:0},k())},L=U=>{var G,Q,J,ie;(G=p.current)==null||G.release();let xe=r.current;if(xe.disabled===!0||!((Q=xe.buttons)!=null?Q:[0]).includes(U.button))return;let Me=xe.onDragStart(U);Me!==!1&&(f.current.onDrag=Me.onDrag,f.current.onDragEnd=(J=Me.onDragEnd)!=null?J:bs,f.current.onClick=(ie=Me.onClick)!=null?ie:bs,p.current=u("Drag start"),xe.dontBlockMouseDown||(U.stopPropagation(),U.preventDefault()),c.current={domDragStarted:!0,startPos:{x:U.screenX,y:U.screenY},detection:{detected:!1,totalDistanceMoved:0}},k(),E())},N=U=>{L(U)};return e.addEventListener("mousedown",N),e.addEventListener("click",C),()=>{var U,G;A(),e.removeEventListener("mousedown",N),e.removeEventListener("click",C),c.current.domDragStarted&&((G=(U=f.current).onDragEnd)==null||G.call(U,c.current.detection.detected)),c.current={domDragStarted:!1},k()}},[e]),za(y&&!!n.lockCSSCursorTo,"dragging",n.lockCSSCursorTo),[y]}function Ooe(e,n){return(!n.detection.detected||n.detection.detected&&n.detection.dragEventCount<3)&&(Math.abs(e.movementX)>aI||Math.abs(e.movementY)>aI)}var Zm,XF,aI,hi=R(()=>{Zm=ee(Oe()),ua(),iI(),qm(),Doe(),nr(),XF=3,aI=100});function Roe(e){return isNaN(e)?"NaN":cs(e)?e.toFixed(0):tE(e,3).toString()}var $F,ZF,bc,YF,nk,JF,QF,e6,t6,n6,r6,i6,o6,rk,sI=R(()=>{Jr(),$F=ee(Oe()),ZF=ee(Oe()),bc=ee(Oe()),Xe(),tk(),nr(),eI(),hi(),nk=le.div(YF||(YF=Y([`
  height: 100%;
  width: 100%;
  position: relative;
  z-index: 0;
  box-sizing: border-box;
  display: flex;
  align-items: center;

  &:after {
    position: absolute;
    inset: 1px 0 2px;
    display: block;
    content: ' ';
    background-color: transparent;
    border: 1px solid transparent;
    z-index: -2;
    box-sizing: border-box;
    border-radius: 1px;
  }

  &:hover,
  &.dragging,
  &.editingViaKeyboard {
    &:after {
      background-color: #10101042;
      border-color: #00000059;
    }
  }
`]))),QF=le.input(JF||(JF=Y([`
  background: transparent;
  border: 1px solid transparent;
  color: rgba(255, 255, 255, 0.9);
  padding: 1px 6px;
  font: inherit;
  outline: none;
  cursor: ew-resize;
  text-align: left;
  width: 100%;
  height: calc(100% - 4px);
  border-radius: 2px;

  &:focus {
    cursor: text;
  }
`]))),t6=le.div(e6||(e6=Y([`
  position: absolute;
  inset: 3px 2px 4px;
  transform: scale(var(--percentage), 1);
  transform-origin: top left;
  background-color: #2d5561;
  z-index: -1;
  border-radius: 2px;
  pointer-events: none;

  `,".dragging &, ",`.noFocus:hover & {
    background-color: #338198;
  }
`])),nk,nk),r6=le.div(n6||(n6=Y([`
  display: contents;
`]))),i6=e=>!0,o6=e=>{var n;let[r]=Qn({mode:"noFocus"}),a=(n=e.isValid)!=null?n:i6,c=(0,bc.useRef)(e);c.current=e;let u=(0,bc.useRef)(null);QA(u.current,()=>{u.current.blur()},r.current.mode==="editingViaKeyboard");let f=(0,bc.useRef)(null),p=(0,bc.useMemo)(()=>{let L=Me=>{let ue=Me.target,{value:Ae}=ue,We=r.current;r.current=W(O({},We),{currentEditedValueInString:Ae});let oe=parseFloat(Ae);!isFinite(oe)||!a(oe)||c.current.temporarilySetValue(oe)},N=()=>{r.current.mode==="editingViaKeyboard"&&(U(),r.current={mode:"noFocus"}),e.onBlur&&e.onBlur()},U=()=>{let Me=r.current,ue=parseFloat(Me.currentEditedValueInString);!isFinite(ue)||!a(ue)||Me.valueBeforeEditing===ue?c.current.discardTemporaryValue():c.current.permanentlySetValue(ue)},G=Me=>{Me.key==="Escape"?(c.current.discardTemporaryValue(),r.current={mode:"noFocus"},u.current.blur()):(Me.key==="Enter"||Me.key==="Tab")&&(U(),u.current.blur())},Q=Me=>{r.current.mode==="noFocus"&&(u.current.focus(),Me.preventDefault()),Me.stopPropagation()},J=()=>{r.current.mode==="noFocus"?ie():r.current.mode},ie=()=>{let Me=c.current.value;r.current={mode:"editingViaKeyboard",currentEditedValueInString:String(Me),valueBeforeEditing:Me},setTimeout(()=>{u.current.focus(),u.current.setSelectionRange(0,100)})},xe;return{inputChange:L,onBlur:N,transitionToDraggingMode:()=>{var Me;let ue=c.current.value;xe=(Me=u.current)==null?void 0:Me.getBoundingClientRect().width,r.current={mode:"dragging"};let Ae=ue,We=ue;return f.current=document.body.style.cursor,{onDrag(oe,De,q,Fe){let Pt=q.altKey?Fe/10:Fe,Pe=We+e.nudge({deltaX:Pt,deltaFraction:Pt/xe,magnitude:1});We=e.range?Pr(Pe,e.range[0],e.range[1]):Pe,c.current.temporarilySetValue(We)},onDragEnd(oe){oe?(Ae===We?c.current.discardTemporaryValue():c.current.permanentlySetValue(We),r.current={mode:"noFocus"}):(c.current.discardTemporaryValue(),r.current={mode:"noFocus"})},onClick(){u.current.focus(),u.current.setSelectionRange(0,100)}}},onInputKeyDown:G,onClick:Q,onFocus:J}},[]);(0,$F.useEffect)(()=>()=>{p.onBlur()},[]);let v=r.current.mode!=="editingViaKeyboard"?Roe(e.value):r.current.currentEditedValueInString;typeof v=="number"&&isNaN(v)&&(v="NaN");let y=[u];e.inputRef&&y.push(e.inputRef);let k=bc.default.createElement(QF,{key:"input",type:"text",onChange:p.inputChange,value:v,onBlur:p.onBlur,onKeyDown:p.onInputKeyDown,onClick:p.onClick,onFocus:p.onFocus,ref:ek(y),onMouseDown:L=>{L.stopPropagation()},onDoubleClick:L=>{L.preventDefault(),L.stopPropagation()},autoFocus:e.autoFocus}),{range:P}=e,T=parseFloat(v),E=P?bc.default.createElement(t6,{style:{"--percentage":Pr((T-P[0])/(P[1]-P[0]),0,1)}}):null,[A,C]=(0,ZF.useState)(null);return Gr(A,{debugName:"form/BasicNumberInput",onDragStart:p.transitionToDraggingMode,lockCSSCursorTo:"ew-resize",shouldPointerLock:!0,disabled:r.current.mode==="editingViaKeyboard"}),bc.default.createElement(nk,{className:e.className+" "+r.current.mode},bc.default.createElement(r6,{ref:C},k),E)},rk=o6});function Loe({propConfig:e,editingTools:n,value:r,autoFocus:a}){let c=(0,lI.useCallback)(u=>e.nudgeFn(W(O({},u),{config:e})),[e]);return lI.default.createElement(rk,{value:r,temporarilySetValue:n.temporarilySetValue,discardTemporaryValue:n.discardTemporaryValue,permanentlySetValue:n.permanentlySetValue,range:e.range,nudge:c,autoFocus:a})}var lI,cI,a6=R(()=>{sI(),lI=ee(Oe()),cI=Loe});function zoe({value:e,onChange:n,options:r,autoFocus:a}){let c=(0,fb.useCallback)(u=>{n(String(u.target.value))},[n]);return fb.default.createElement(uI,{role:"radiogroup"},Object.keys(r).map((u,f)=>fb.default.createElement(c6,{key:"label-"+f,"data-checked":e===u},r[u],fb.default.createElement(d6,{type:"radio",checked:e===u,value:u,onChange:c,name:"switchbox",autoFocus:a}))))}var fb,s6,uI,l6,c6,u6,d6,f6,Noe=R(()=>{ca(),fb=ee(Oe()),Xe(),uI=le.form(s6||(s6=Y([`
  display: flex;
  flex-direction: row;
  align-items: stretch;
  vertical-align: middle;
  justify-content: stretch;
  height: 24px;
  width: 100%;
`]))),c6=le.label(l6||(l6=Y([`
  padding: 0 0.5em;
  background: transparent;
  /* background: #373748; */
  display: flex;
  align-items: center;
  justify-content: center;
  flex-grow: 1;
  color: #a7a7a7;
  border: 1px solid transparent;
  box-sizing: border-box;
  border-right-width: 0px;

  & + &:last-child {
    border-right-width: 1px;
  }

  `,`:hover > & {
    border-color: #1c2123;
    /* background-color: #373748; */
    /* color: `,`; */
  }

  &&:hover {
    background-color: #464654;
  }

  &&[data-checked='true'] {
    color: white;
    background: #3f3f4c;
  }
`])),uI,Jy(.1,"white")),d6=le.input(u6||(u6=Y([`
  position: absolute;
  opacity: 0;
  pointer-events: none;
  width: 0;
  height: 0;
`]))),f6=zoe}),Foe=R(()=>{}),dI,fI,hI,h6=R(()=>{dI=ee(Oe()),fI={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},hI=dI.default.createContext&&dI.default.createContext(fI)});function p6(e){return e&&e.map(function(n,r){return Jm.default.createElement(n.tag,_c({key:r},n.attr),p6(n.child))})}function Ym(e){return function(n){return Jm.default.createElement(joe,_c({attr:_c({},e.attr)},n),p6(e.child))}}function joe(e){var n=function(r){var a=e.attr,c=e.size,u=e.title,f=m6(e,["attr","size","title"]),p=c||r.size||"1em",v;return r.className&&(v=r.className),e.className&&(v=(v?v+" ":"")+e.className),Jm.default.createElement("svg",_c({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},r.attr,a,f,{className:v,style:_c(_c({color:e.color||r.color},r.style),e.style),height:p,width:p,xmlns:"http://www.w3.org/2000/svg"}),u&&Jm.default.createElement("title",null,u),e.children)};return hI!==void 0?Jm.default.createElement(hI.Consumer,null,function(r){return n(r)}):n(fI)}var Jm,_c,m6,Boe=R(()=>{Jm=ee(Oe()),h6(),_c=function(){return _c=Object.assign||function(e){for(var n,r=1,a=arguments.length;r<a;r++){n=arguments[r];for(var c in n)Object.prototype.hasOwnProperty.call(n,c)&&(e[c]=n[c])}return e},_c.apply(this,arguments)},m6=function(e,n){var r={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&n.indexOf(a)<0&&(r[a]=e[a]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,a=Object.getOwnPropertySymbols(e);c<a.length;c++)n.indexOf(a[c])<0&&Object.prototype.propertyIsEnumerable.call(e,a[c])&&(r[a[c]]=e[a[c]]);return r}}),oi=R(()=>{Foe(),Boe(),h6()}),Uoe=R(()=>{oi()}),Voe=R(()=>{oi()});function Hoe(e){return Ym({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M289.94 256l95-95A24 24 0 00351 127l-95 95-95-95a24 24 0 00-34 34l95 95-95 95a24 24 0 1034 34l95-95 95 95a24 24 0 0034-34z"}}]})(e)}var Goe=R(()=>{oi()}),Woe=R(()=>{oi()}),qoe=R(()=>{oi()});function Koe(e){return Ym({tag:"svg",attr:{viewBox:"0 0 8 16"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"M5.5 3L7 4.5 3.25 8 7 11.5 5.5 13l-5-5 5-5z"}}]})(e)}function Xoe(e){return Ym({tag:"svg",attr:{viewBox:"0 0 8 16"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"M7.5 8l-5 5L1 11.5 4.75 8 1 4.5 2.5 3l5 5z"}}]})(e)}var $oe=R(()=>{oi()}),Zoe=R(()=>{oi()}),Yoe=R(()=>{oi()}),Joe=R(()=>{oi()}),Qoe=R(()=>{oi()}),eae=R(()=>{oi()}),tae=R(()=>{oi()}),nae=R(()=>{oi()}),rae=R(()=>{oi()}),iae=R(()=>{oi()});function g6(e){return Ym({tag:"svg",attr:{fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},child:[{tag:"path",attr:{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 5l7 7-7 7"}}]})(e)}var oae=R(()=>{oi()}),aae=R(()=>{oi()}),sae=R(()=>{oi()}),lae=R(()=>{oi()});function cae(e){return Ym({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none"},child:[{tag:"path",attr:{d:"M6 9.65685L7.41421 11.0711L11.6569 6.82843L15.8995 11.0711L17.3137 9.65685L11.6569 4L6 9.65685Z",fill:"currentColor"}},{tag:"path",attr:{d:"M6 14.4433L7.41421 13.0291L11.6569 17.2717L15.8995 13.0291L17.3137 14.4433L11.6569 20.1001L6 14.4433Z",fill:"currentColor"}}]})(e)}var uae=R(()=>{oi()});function dae(e){return Ym({tag:"svg",attr:{viewBox:"0 0 16 16",fill:"currentColor"},child:[{tag:"path",attr:{d:"M14 10.44l-.413.56H2.393L2 10.46 7.627 5h.827L14 10.44z"}}]})(e)}var fae=R(()=>{oi()}),Qm=R(()=>{Uoe(),Voe(),Goe(),Woe(),qoe(),$oe(),Zoe(),Yoe(),Joe(),Qoe(),eae(),tae(),nae(),rae(),iae(),oae(),aae(),sae(),lae(),uae(),fae()});function hae({value:e,onChange:n,options:r,className:a,autoFocus:c}){let u=(0,jf.useCallback)(f=>{n(String(f.target.value))},[n]);return jf.default.createElement(y6,null,jf.default.createElement(w6,{className:a,value:e,onChange:u,autoFocus:c},Object.keys(r).map((f,p)=>jf.default.createElement("option",{key:"option-"+p,value:f},r[f]))),jf.default.createElement(_6,null,jf.default.createElement(cae,null)))}var jf,v6,y6,b6,_6,x6,w6,S6,pae=R(()=>{jf=ee(Oe()),Xe(),Qm(),y6=le.div(v6||(v6=Y([`
  width: 100%;
  position: relative;
`]))),_6=le.div(b6||(b6=Y([`
  position: absolute;
  right: 0px;
  top: 0;
  bottom: 0;
  width: 1.5em;
  font-size: 14px;
  display: flex;
  align-items: center;
  color: #6b7280;
  pointer-events: none;
`]))),w6=le.select(x6||(x6=Y([`
  appearance: none;
  background-color: transparent;
  box-sizing: border-box;
  border: 1px solid transparent;
  color: rgba(255, 255, 255, 0.85);
  padding: 1px 6px;
  font: inherit;
  outline: none;
  text-align: left;
  width: 100%;
  border-radius: 2px;
  /*
  looks like putting percentages in the height of a select box doesn't work in Firefox. Not sure why.
  So we're hard-coding the height to 26px, unlike all other inputs that use a relative height.
  */
  height: 26px /* calc(100% - 4px); */;

  @supports (-moz-appearance: none) {
    /* Ugly hack to remove the extra left padding that shows up only in Firefox */
    text-indent: -2px;
  }

  &:hover,
  &:focus {
    background-color: #10101042;
    border-color: #00000059;
  }
`]))),S6=hae});function mae({propConfig:e,editingTools:n,value:r,autoFocus:a}){let c=(0,ik.useCallback)(u=>{n.permanentlySetValue(u)},[e,n]);return e.as==="menu"?ik.default.createElement(S6,{value:r,onChange:c,options:e.valuesAndLabels,autoFocus:a}):ik.default.createElement(f6,{value:r,onChange:c,options:e.valuesAndLabels,autoFocus:a})}var ik,E6,gae=R(()=>{ik=ee(Oe()),Noe(),pae(),E6=mae}),k6,hb,T6,M6,P6,C6,ok,pI=R(()=>{Xe(),k6=ee(Oe()),hb=ee(Oe()),tk(),nr(),eI(),M6=le.input.attrs({type:"text"})(T6||(T6=Y([`
  background: transparent;
  border: 1px solid transparent;
  color: rgba(255, 255, 255, 0.9);
  padding: 1px 6px;
  font: inherit;
  outline: none;
  cursor: text;
  text-align: left;
  width: 100%;
  height: calc(100% - 4px);
  border-radius: 2px;
  border: 1px solid transparent;
  box-sizing: border-box;

  &:hover {
    background-color: #10101042;
    border-color: #00000059;
  }

  &:hover,
  &:focus {
    cursor: text;
    background-color: #10101042;
    border-color: #00000059;
  }

  &.invalid {
    border-color: red;
  }
`]))),P6=e=>!0,C6=e=>{var n,r;let[a]=Qn({mode:"noFocus"}),c=(n=e.isValid)!=null?n:P6,u=(0,hb.useRef)(e);u.current=e;let f=(0,hb.useRef)(null);QA(f.current,()=>{f.current.blur()},a.current.mode==="editingViaKeyboard");let p=(0,hb.useMemo)(()=>{let k=N=>{let U=N.target,{value:G}=U,Q=a.current;a.current=W(O({},Q),{currentEditedValueInString:G}),c(G)&&u.current.temporarilySetValue(G)},P=()=>{var N,U;a.current.mode==="editingViaKeyboard"&&(T(),a.current={mode:"noFocus"}),(U=(N=u.current).onBlur)==null||U.call(N)},T=()=>{let N=a.current,U=N.currentEditedValueInString;c(U)?N.valueBeforeEditing===U?u.current.discardTemporaryValue():u.current.permanentlySetValue(U):u.current.discardTemporaryValue()},E=N=>{N.key==="Escape"?(u.current.discardTemporaryValue(),a.current={mode:"noFocus"},f.current.blur()):(N.key==="Enter"||N.key==="Tab")&&(T(),f.current.blur())},A=N=>{a.current.mode==="noFocus"&&(f.current.focus(),N.preventDefault()),N.stopPropagation()},C=()=>{a.current.mode==="noFocus"?L():a.current.mode},L=()=>{let N=u.current.value;a.current={mode:"editingViaKeyboard",currentEditedValueInString:String(N),valueBeforeEditing:N},setTimeout(()=>{f.current.focus()})};return{inputChange:k,onBlur:P,onInputKeyDown:E,onClick:A,onFocus:C}},[]);(0,k6.useEffect)(()=>()=>{p.onBlur()},[]);let v=a.current.mode!=="editingViaKeyboard"?e.value:a.current.currentEditedValueInString,y=[f];return e.inputRef&&y.push(e.inputRef),hb.default.createElement(M6,{key:"input",type:"text",className:"".concat((r=e.className)!=null?r:""," ").concat(c(v)?"":"invalid"),onChange:p.inputChange,value:v,onBlur:p.onBlur,onKeyDown:p.onInputKeyDown,onClick:p.onClick,onFocus:p.onFocus,ref:ek(y),onMouseDown:k=>{k.stopPropagation()},onDoubleClick:k=>{k.preventDefault(),k.stopPropagation()},autoFocus:e.autoFocus})},ok=C6});function vae({editingTools:e,value:n,autoFocus:r}){return A6.default.createElement(ok,{value:n,temporarilySetValue:e.temporarilySetValue,discardTemporaryValue:e.discardTemporaryValue,permanentlySetValue:e.permanentlySetValue,autoFocus:r})}var A6,I6,yae=R(()=>{A6=ee(Oe()),pI(),I6=vae});function bae(e){e=e.trim().toLowerCase();let n=e.match(vI);if(!n)return{r:0,g:0,b:0,a:1};let r=_ae(n[1]);return{r:parseInt(r.substr(0,2),16)/255,g:parseInt(r.substr(2,2),16)/255,b:parseInt(r.substr(4,2),16)/255,a:parseInt(r.substr(6,2),16)/255}}function mI(e,{removeAlphaIfOpaque:n=!1}={}){let r=(e.a*255|256).toString(16).slice(1),a=(e.r*255|256).toString(16).slice(1)+(e.g*255|256).toString(16).slice(1)+(e.b*255|256).toString(16).slice(1)+(n&&r==="ff"?"":r);return"#".concat(a)}function gI(e){return W(O({},e),{toString(){return mI(this,{removeAlphaIfOpaque:!0})}})}function _ae(e){switch(e.length){case 3:return"".concat(e.repeat(2),"ff");case 4:let n=e.substr(0,3),r=e[3];return"".concat(n.repeat(2)).concat(r.repeat(2));case 6:return"".concat(e,"ff")}return e}var vI,D6=R(()=>{vI=/^#*([0-9a-f]{3,4}|[0-9a-f]{6}|[0-9a-f]{8})$/i});function ak(e){let n=(0,yI.useRef)(e),r=(0,yI.useRef)(a=>{n.current&&n.current(a)});return n.current=e,r.current}var yI,O6=R(()=>{yI=ee(Oe())}),Bf,sk=R(()=>{Bf=(e,n=0,r=1)=>e>r?r:e<n?n:e}),pb,bI,R6,_I,xI=R(()=>{pb=ee(Oe()),bI=(0,pb.createContext)(void 0),R6=({children:e})=>{let[n,r]=(0,pb.useState)(!1);return pb.default.createElement(bI.Provider,{value:{editing:n,setEditing:r}},e)},_I=()=>(0,pb.useContext)(bI)}),Xu,eg,L6,lk,wI,SI,z6,N6,F6,j6,mb,ck=R(()=>{Xu=ee(Oe()),O6(),sk(),Xe(),xI(),eg=e=>"touches"in e,L6=(e,n)=>{for(let r=0;r<e.length;r++)if(e[r].identifier===n)return e[r];return e[0]},lk=e=>e&&e.ownerDocument.defaultView||self,wI=(e,n,r)=>{let a=e.getBoundingClientRect(),c=eg(n)?L6(n.touches,r):n;return{left:Bf((c.pageX-(a.left+lk(e).pageXOffset))/a.width),top:Bf((c.pageY-(a.top+lk(e).pageYOffset))/a.height)}},SI=e=>{!eg(e)&&e.preventDefault()},z6=(e,n)=>n&&!eg(e),F6=le.div(N6||(N6=Y([`
  position: absolute;
  left: 0;
  top: 0;
  right: 0;
  bottom: 0;
  border-radius: inherit;
  outline: none;
  /* Don't trigger the default scrolling behavior when the event is originating from this element */
  touch-action: none;
`]))),j6=e=>{var n=e,{onMove:r,onKey:a}=n,c=we(n,["onMove","onKey"]);let u=(0,Xu.useRef)(null),f=ak(r),p=ak(a),v=(0,Xu.useRef)(null),y=(0,Xu.useRef)(!1),{setEditing:k}=_I(),[P,T,E]=(0,Xu.useMemo)(()=>{let A=({nativeEvent:G})=>{let Q=u.current;if(Q&&(SI(G),!(z6(G,y.current)||!Q))){if(eg(G)){y.current=!0;let J=G.changedTouches||[];J.length&&(v.current=J[0].identifier)}Q.focus(),k(!0),f(wI(Q,G,v.current)),U(!0)}},C=G=>{SI(G),(eg(G)?G.touches.length>0:G.buttons>0)&&u.current?f(wI(u.current,G,v.current)):(k(!1),U(!1))},L=G=>{k(!1),U(!1)},N=G=>{let Q=G.which||G.keyCode;Q<37||Q>40||(G.preventDefault(),p({left:Q===39?.05:Q===37?-.05:0,top:Q===40?.05:Q===38?-.05:0}))};function U(G){let Q=y.current,J=u.current,ie=lk(J),xe=G?ie.addEventListener:ie.removeEventListener;xe(Q?"touchmove":"mousemove",C),xe(Q?"touchend":"mouseup",L)}return[A,N,U]},[p,f]);return(0,Xu.useEffect)(()=>E,[E]),Xu.default.createElement(F6,W(O({},c),{onTouchStart:P,onMouseDown:P,ref:u,onKeyDown:T,tabIndex:0,role:"slider"}))},mb=Xu.default.memo(j6)}),EI,B6,U6,V6,H6,G6,W6,uk,kI=R(()=>{EI=ee(Oe()),Xe(),ck(),U6=le(mb)(B6||(B6=Y([""]))),H6=le.div(V6||(V6=Y([`
  position: absolute;
  z-index: 1;
  box-sizing: border-box;
  width: 16px;
  height: 16px;
  transform: translate(-50%, -50%);
  background-color: #fff;
  border: 1px solid #ffffff00;
  border-radius: 2px;
  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);

  `,`:focus & {
    transform: translate(-50%, -50%) scale(1.1);
  }
`])),U6),W6=le.div(G6||(G6=Y([`
  content: '';
  position: absolute;
  left: 0;
  top: 0;
  right: 0;
  bottom: 0;
  pointer-events: none;
  border-radius: inherit;
`]))),uk=({className:e,color:n,left:r,top:a=.5})=>{let c={top:"".concat(a*100,"%"),left:"".concat(r*100,"%")};return EI.default.createElement(H6,{style:c,className:e},EI.default.createElement(W6,{style:{backgroundColor:n}}))}}),oo,dk=R(()=>{oo=(e,n=0,r=Math.pow(10,n))=>Math.round(r*e)/r}),TI,fk,hk,q6,K6,pk=R(()=>{dk(),TI=({h:e,s:n,v:r,a})=>{let c=(200-n)*r/100;return{h:oo(e),s:oo(c>0&&c<200?n*r/100/(c<=100?c:200-c)*100:0),l:oo(c/2),a:oo(a,2)}},fk=e=>{let{h:n,s:r,l:a}=TI(e);return"hsl(".concat(n,", ").concat(r,"%, ").concat(a,"%)")},hk=e=>{let{h:n,s:r,l:a,a:c}=TI(e);return"hsla(".concat(n,", ").concat(r,"%, ").concat(a,"%, ").concat(c,")")},q6=({h:e,s:n,v:r,a})=>{e=e/360*6,n=n/100,r=r/100;let c=Math.floor(e),u=r*(1-n),f=r*(1-(e-c)*n),p=r*(1-(1-e+c)*n),v=c%6;return{r:oo([r,f,u,u,p,r][v]*255),g:oo([p,r,r,f,u,u][v]*255),b:oo([u,u,p,r,r,f][v]*255),a:oo(a,2)}},K6=({r:e,g:n,b:r,a})=>{let c=Math.max(e,n,r),u=c-Math.min(e,n,r),f=u?c===e?(n-r)/u:c===n?2+(r-e)/u:4+(e-n)/u:0;return{h:oo(60*(f<0?f+6:f)),s:oo(c?u/c*100:0),v:oo(c/255*100),a}}}),gb,X6,$6,Z6,Y6,J6,Q6,xae=R(()=>{gb=ee(Oe()),ck(),kI(),pk(),sk(),dk(),Xe(),$6=le.div(X6||(X6=Y([`
  position: relative;
  height: 16px;
  border-radius: 2px;

  background: linear-gradient(
    to right,
    #f00 0%,
    #ff0 17%,
    #0f0 33%,
    #0ff 50%,
    #00f 67%,
    #f0f 83%,
    #f00 100%
  );
`]))),Y6=le(uk)(Z6||(Z6=Y([`
  z-index: 2;
`]))),J6=({className:e,hue:n,onChange:r})=>gb.default.createElement($6,{className:e},gb.default.createElement(mb,{onMove:a=>{r({h:360*a.left})},onKey:a=>{r({h:Bf(n+a.left*360,0,360)})},"aria-label":"Hue","aria-valuetext":oo(n)},gb.default.createElement(Y6,{left:n/360,color:fk({h:n,s:100,v:100,a:1})}))),Q6=gb.default.memo(J6)}),vb,ej,tj,nj,rj,ij,oj,wae=R(()=>{vb=ee(Oe()),ck(),kI(),pk(),sk(),dk(),Xe(),tj=le.div(ej||(ej=Y([`
  position: relative;
  flex-grow: 1;
  border-color: transparent; /* Fixes https://github.com/omgovich/react-colorful/issues/139 */
  border-bottom: 12px solid #000;
  border-radius: 2px;
  background-image: linear-gradient(to top, #000, rgba(0, 0, 0, 0)),
    linear-gradient(to right, #fff, rgba(255, 255, 255, 0));

  // Improve elements rendering on light backgrounds
  box-shadow: inset 0 0 0 1px rgba(0, 0, 0, 0.05);
`]))),rj=le(uk)(nj||(nj=Y([`
  z-index: 3;
`]))),ij=({hsva:e,onChange:n})=>{let r=u=>{n({s:u.left*100,v:100-u.top*100})},a=u=>{n({s:Bf(e.s+u.left*100,0,100),v:Bf(e.v-u.top*100,0,100)})},c={backgroundColor:fk({h:e.h,s:100,v:100,a:1})};return vb.default.createElement(tj,{style:c},vb.default.createElement(mb,{onMove:r,onKey:a,"aria-label":"Color","aria-valuetext":"Saturation ".concat(oo(e.s),"%, Brightness ").concat(oo(e.v),"%")},vb.default.createElement(rj,{top:1-e.v/100,left:e.s/100,color:fk(e)})))},oj=vb.default.memo(ij)}),yb,aj,sj,lj,cj,uj,dj,fj,Sae=R(()=>{yb=ee(Oe()),ck(),kI(),pk(),sk(),dk(),Xe(),sj=le.div(aj||(aj=Y([`
  position: relative;
  height: 16px;
  border-radius: 2px;
  // Checkerboard
  background-color: #fff;
  background-image: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill-opacity=".05"><rect x="8" width="8" height="8"/><rect y="8" width="8" height="8"/></svg>');
`]))),cj=le.div.attrs(({colorFrom:e,colorTo:n})=>({style:{backgroundImage:"linear-gradient(90deg, ".concat(e,", ").concat(n,")")}}))(lj||(lj=Y([`
  content: '';
  position: absolute;
  left: 0;
  top: 0;
  right: 0;
  bottom: 0;
  pointer-events: none;
  border-radius: inherit;

  // Improve rendering on light backgrounds
  box-shadow: inset 0 0 0 1px rgba(0, 0, 0, 0.05);
`]))),dj=le(uk)(uj||(uj=Y([`
  // Checkerboard
  background-color: #fff;
  background-image: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill-opacity=".05"><rect x="8" width="8" height="8"/><rect y="8" width="8" height="8"/></svg>');
`]))),fj=({className:e,hsva:n,onChange:r})=>{let a=p=>{r({a:p.left})},c=p=>{r({a:Bf(n.a+p.left)})},u=hk(Object.assign({},n,{a:0})),f=hk(Object.assign({},n,{a:1}));return yb.default.createElement(sj,{className:e},yb.default.createElement(cj,{colorFrom:u,colorTo:f}),yb.default.createElement(mb,{onMove:a,onKey:c,"aria-label":"Alpha","aria-valuetext":"".concat(oo(n.a*100),"%")},yb.default.createElement(dj,{left:n.a,color:hk(n)})))}}),mk,hj=R(()=>{mk=(e,n)=>{if(e===n)return!0;for(let r in e)if(e[r]!==n[r])return!1;return!0}});function Eae(e,n,r,a){let{editing:c}=_I(),[u,f]=(0,xc.useState)(n),p=ak(r),v=ak(a),y=c?u:n,[k,P]=(0,xc.useState)(()=>e.toHsva(y)),T=(0,xc.useRef)({color:y,hsva:k}),E=(0,xc.useRef)({color:y,hsva:k});(0,xc.useEffect)(()=>{c&&f(T.current.color)},[c]),(0,xc.useEffect)(()=>{let C=e.fromHsva(k);c?!mk(k,T.current.hsva)&&!e.equal(C,T.current.color)&&(T.current={hsva:k,color:C},f(C),p(C)):!mk(k,E.current.hsva)&&!e.equal(C,E.current.color)&&(E.current={hsva:k,color:C},T.current={hsva:k,color:C},v(C))},[c,k,e,p,v]),(0,xc.useEffect)(()=>{if(!c&&!e.equal(y,E.current.color)){let C=e.toHsva(y);E.current={hsva:C,color:y},P(C)}},[c,y,e]);let A=(0,xc.useCallback)(C=>{P(L=>Object.assign({},L,C))},[]);return[k,A]}var xc,kae=R(()=>{xc=ee(Oe()),hj(),O6(),xI()}),tg,pj,mj,gj,Tae=R(()=>{tg=ee(Oe()),xae(),wae(),Sae(),kae(),Xe(),mj=le.div(pj||(pj=Y([`
  position: relative;
  display: flex;
  gap: 4px;
  flex-direction: column;
  width: 200px;
  height: 200px;
  user-select: none;
  cursor: default;
`]))),gj=e=>{var n=e,{className:r,colorModel:a,color:c=a.defaultColor,temporarilySetValue:u,permanentlySetValue:f,discardTemporaryValue:p}=n,v=we(n,["className","colorModel","color","temporarilySetValue","permanentlySetValue","discardTemporaryValue"]);let[y,k]=Eae(a,c,u,f);return(0,tg.useEffect)(()=>()=>{p()},[]),tg.default.createElement(mj,O({},v),tg.default.createElement(oj,{hsva:y,onChange:k}),tg.default.createElement(Q6,{hue:y.h,onChange:k}),tg.default.createElement(fj,{hsva:y,onChange:k}))}}),MI,vj,yj,bj,_j,Mae=R(()=>{MI=ee(Oe()),Tae(),hj(),pk(),xI(),vj=e=>({r:e.r/255,g:e.g/255,b:e.b/255,a:e.a}),yj=e=>({r:e.r*255,g:e.g*255,b:e.b*255,a:e.a}),bj={defaultColor:{r:0,g:0,b:0,a:1},toHsva:e=>K6(yj(e)),fromHsva:e=>vj(q6(e)),equal:mk},_j=e=>MI.default.createElement(R6,null,MI.default.createElement(gj,W(O({},e),{permanentlySetValue:n=>{e.permanentlySetValue(n)},colorModel:bj})))}),Pae=R(()=>{Mae()}),xj,wj,Sj,Cae=R(()=>{xj=ee(Oe()),wj=function(e){(0,xj.useEffect)(e,[])},Sj=wj}),Ej,kj,Tj,Aae=R(()=>{Ej=ee(Oe()),Cae(),kj=function(e){var n=(0,Ej.useRef)(e);n.current=e,Sj(function(){return function(){return n.current()}})},Tj=kj}),gk,Mj,Pj,Iae=R(()=>{gk=ee(Oe()),Aae(),Mj=function(e){var n=(0,gk.useRef)(0),r=(0,gk.useState)(e),a=r[0],c=r[1],u=(0,gk.useCallback)(function(f){cancelAnimationFrame(n.current),n.current=requestAnimationFrame(function(){c(f)})},[]);return Tj(function(){cancelAnimationFrame(n.current)}),[a,u]},Pj=Mj});function Dae(e){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];e&&e.addEventListener&&e.addEventListener.apply(e,n)}function Oae(e){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];e&&e.removeEventListener&&e.removeEventListener.apply(e,n)}var vk,Rae=R(()=>{vk=typeof window!="undefined"}),Cj,Aj,yk,PI=R(()=>{Cj=ee(Oe()),Iae(),Rae(),Aj=function(e,n){e===void 0&&(e=1/0),n===void 0&&(n=1/0);var r=Pj({width:vk?window.innerWidth:e,height:vk?window.innerHeight:n}),a=r[0],c=r[1];return(0,Cj.useEffect)(function(){if(vk){var u=function(){c({width:window.innerWidth,height:window.innerHeight})};return Dae(window,"resize",u),function(){Oae(window,"resize",u)}}},[]),a},yk=Aj});function CI(e){let[n,r]=(0,AI.useState)(null);return(0,AI.useLayoutEffect)(()=>(e&&r(e.getBoundingClientRect()),()=>{r(null)}),[e]),n}var AI,Ij=R(()=>{AI=ee(Oe())}),Dj,Oj,II,Rj=R(()=>{Dj=ee(Oe()),Oj=(0,Dj.createContext)({}),II=Oj});function Lae(e,n,r){let a=e.getBoundingClientRect(),c=u=>{(u.clientX<a.left-n||u.clientX>a.left+a.width+n||u.clientY<a.top-n||u.clientY>a.top+a.height+n)&&r(u)};return window.addEventListener("mousemove",c),()=>{window.removeEventListener("mousemove",c)}}var zae=R(()=>{}),Lj,bk,DI,zj,OI,Nj=R(()=>{Lj=ee(Oe()),bk=ee(Oe()),PI(),Ij(),Rj(),nr(),eI(),zae(),qm(),Jr(),DI=8,zj=e=>{var n,r;let a=e.children(),[c,u]=Qn(null),f=a.props.style?O({},a.props.style):{};f.position="absolute";let p=CI(u),v=CI(e.target),y=yk(),[k,P]=(0,bk.useState)({});return(0,bk.useLayoutEffect)(()=>{var T,E,A;if(!p||!u||!v)return;let C=(T=e.verticalGap)!=null?T:8,L={},N=(E=e.verticalPlacement)!=null?E:"bottom",U=0,G=0;N==="bottom"?v.bottom+p.height+C<y.height?(N="bottom",U=v.bottom+C,L.top="0px"):v.top>p.height+C?(N="top",U=v.top-(p.height+C),L.bottom="0px",L.transform="rotateZ(180deg)"):N="overlay":N==="top"&&(v.top>p.height+C?(N="top",U=v.top-(p.height+C),L.bottom="0px",L.transform="rotateZ(180deg)"):v.bottom+p.height+C<y.height?(N="bottom",U=v.bottom+C,L.top="0px"):N="overlay");let Q=0;if(N!=="overlay"){let Ae=v.left+v.width/2;Ae<p.width/2?(G=C,Q=Math.max(Ae-C,DI)):Ae+p.width/2>y.width?(G=y.width-(C+p.width),Q=Math.min(Ae-G,p.width-DI)):(G=Ae-p.width/2,Q=p.width/2),L.left=Q+"px"}let{minX:J=-1/0,maxX:ie=1/0,minY:xe=-1/0,maxY:Me=1/0}=(A=e.constraints)!=null?A:{},ue={left:Pr(G,J,ie-p.width),top:Pr(U,xe,Me+p.height)};if(u.style.left=ue.left+"px",u.style.top=ue.top+"px",P(L),e.onPointerOutside)return Lae(u,e.onPointerOutside.threshold,e.onPointerOutside.callback)},[p,u,e.target,v,y,e.onPointerOutside]),QA([u,(n=e.target)!=null?n:null],(r=e.onClickOutside)!=null?r:bs),Lj.default.createElement(II.Provider,{value:k},(0,bk.cloneElement)(a,{ref:c,style:f}))},OI=zj});function ml(e,n){let r=(...E)=>{},{isPointerBeingCaptured:a}=qF("usePopover"),[c,u]=Qn({isOpen:!1}),f=(0,ao.useRef)(e),p=(0,ao.useCallback)(E=>{c.current={isOpen:!1}},[]),v=(0,ao.useCallback)((E,A)=>{var C;let L=typeof f.current=="function"?f.current():f.current;function N(){k.childHasFocusRef.current||L.closeOnClickOutside!==!1&&p("clicked outside popover")}c.current={isOpen:!0,clickPoint:{clientX:E.clientX,clientY:E.clientY},target:A,opts:L,onClickOutside:N,onPointerOutside:L.closeWhenPointerIsDistant===!1?void 0:{threshold:(C=L.pointerDistanceThreshold)!=null?C:100,callback:()=>{k.childHasFocusRef.current||a()||p("pointer outside")}}}},[]),y=(0,ao.useCallback)((...E)=>{c.current.isOpen?p("toggled"):v(...E)},[]),k=Nae({_debug:r,state:u}),[,P]=(0,ao.useContext)(qb);(0,ao.useEffect)(()=>{let E;return u.isOpen&&(E=P()),()=>E==null?void 0:E()},[u.isOpen]);let T=(0,ao.useContext)(Hm);return{node:u.isOpen?(0,Fj.createPortal)(ao.default.createElement(RI.Provider,{value:k.childPopoverLock},ao.default.createElement(OI,{children:n,target:u.target,onClickOutside:u.onClickOutside,onPointerOutside:u.onPointerOutside,constraints:u.opts.constraints,verticalGap:u.opts.verticalGap})),T):ao.default.createElement(ao.default.Fragment,null),open:v,close:p,toggle:y,isOpen:u.isOpen}}function Nae(e){let n=(0,ao.useContext)(RI);(0,ao.useEffect)(()=>{if(e.state.isOpen){let a=n.takeFocus();return e._debug("take focus"),()=>{e._debug("release focus"),a.releaseFocus()}}},[e.state.isOpen]);let r=(0,ao.useRef)(!1);return{childHasFocusRef:r,childPopoverLock:{takeFocus(){return r.current=!0,{releaseFocus(){r.current=!1}}}}}}var ao,Fj,RI,gl=R(()=>{iI(),nr(),ao=ee(Oe()),Fj=ee(Ia()),Ff(),Nj(),SD(),RI=ao.default.createContext({takeFocus(){return{releaseFocus(){}}}})}),wc,jj,Bj,Uj,Vj,Hj,Gj,Wj,qj,Kj,Xj,$j,Zj,Fae=R(()=>{wc=ee(Oe()),Xe(),Rj(),Bj=le.div(jj||(jj=Y([`
  position: absolute;
  width: 0;
  height: 0;
  color: var(--popover-arrow-color);
  pointer-events: none;
`]))),Vj=le.div(Uj||(Uj=Y([`
  width: 12px;
  height: 8px;
  position: absolute;
  left: -7px;
  top: -8px;
  text-align: center;
  line-height: 0;
`]))),Gj=le.path(Hj||(Hj=Y([`
  fill: var(--popover-bg);
`]))),qj=le.path(Wj||(Wj=Y([`
  fill: var(--popover-inner-stroke);
`]))),Xj=le.path(Kj||(Kj=Y([`
  fill: var(--popover-outer-stroke);
`]))),$j=(0,wc.forwardRef)(({className:e},n)=>{let r=(0,wc.useContext)(II);return wc.default.createElement(Bj,{className:e,ref:n,style:O({},r)},wc.default.createElement(Vj,null,wc.default.createElement("svg",{width:"12",height:"8",viewBox:"0 0 12 8",fill:"none",xmlns:"http://www.w3.org/2000/svg"},wc.default.createElement(Xj,{d:"M6 0L0 6H12L6 0Z"}),wc.default.createElement(qj,{d:"M6 1.5L0 7.5H12L6 1.5Z"}),wc.default.createElement(Gj,{d:"M6 3L0 9H12L6 3Z"}))))}),Zj=$j}),_k,LI,Yj,Jj,Qj,vl,yl=R(()=>{rr(),ca(),_k=ee(Oe()),Xe(),Fae(),LI=ys(.05,"#2a2a31"),Jj=le.div(Yj||(Yj=Y([`
  position: absolute;
  --popover-bg: `,`;
  --popover-inner-stroke: #505159;
  --popover-outer-stroke: #111;

  background: var(--popover-bg);

  color: white;
  padding: 0;
  margin: 0;
  cursor: default;
  `,`;
  border-radius: 3px;
  z-index: 10000;
  border: 1px solid var(--popover-inner-stroke);
  box-shadow: 0 0 0 1px var(--popover-outer-stroke), 0 6px 8px -4px black;
  backdrop-filter: blur(8px);

  & a {
    color: inherit;
  }
`])),LI,tr),Qj=_k.default.forwardRef(({children:e,className:n,showPopoverEdgeTriangle:r=!0},a)=>_k.default.createElement(Jj,{className:n,ref:a},r?_k.default.createElement(Zj,null):void 0,e)),vl=Qj});function jae({editingTools:e,value:n,autoFocus:r}){let a=(0,bl.useRef)(null),c=(0,bl.useCallback)(f=>{let p=gI(bae(f));e.permanentlySetValue(p)},[e]),u=ml({debugName:"RgbaPropEditor"},()=>bl.default.createElement(sB,null,bl.default.createElement(_j,{color:{r:n.r,g:n.g,b:n.b,a:n.a},temporarilySetValue:f=>{let p=gI(f);e.temporarilySetValue(p)},permanentlySetValue:f=>{let p=gI(f);e.permanentlySetValue(p)},discardTemporaryValue:e.discardTemporaryValue})));return bl.default.createElement(bl.default.Fragment,null,bl.default.createElement(tB,null,bl.default.createElement(rB,{rgbaColor:n,ref:a,onClick:f=>{u.toggle(f,a.current)}}),bl.default.createElement(oB,{value:mI(n,{removeAlphaIfOpaque:!0}),temporarilySetValue:zI,discardTemporaryValue:zI,permanentlySetValue:c,isValid:f=>!!f.match(vI),autoFocus:r})),u.node)}var bl,eB,tB,nB,rB,iB,oB,zI,aB,sB,lB,Bae=R(()=>{D6(),D6(),bl=ee(Oe()),Pae(),Xe(),gl(),pI(),yl(),tB=le.div(eB||(eB=Y([`
  display: flex;
  align-items: center;
  height: 100%;
  gap: 4px;
`]))),rB=le.div.attrs(e=>({style:{background:mI(e.rgbaColor)}}))(nB||(nB=Y([`
  height: 18px;
  aspect-ratio: 1;
  border-radius: 99999px;
`]))),oB=le(ok)(iB||(iB=Y([`
  flex: 1;
`]))),zI=()=>{},sB=le.div(aB||(aB=Y([`
  position: absolute;
  background-color: `,`;
  color: white;
  margin: 0;
  cursor: default;
  border-radius: 3px;
  z-index: 10000;
  backdrop-filter: blur(8px);

  padding: 4px;
  pointer-events: all;

  border: none;
  box-shadow: none;
`])),LI),lB=jae});function Uae({propConfig:e,editingTools:n,value:r,autoFocus:a}){let[c,u]=xs.default.useState();(0,xs.useEffect)(()=>{u(r?n.getAssetUrl(r):void 0)},[r]);let f=(0,xs.useCallback)(v=>qe(this,null,function*(){let y=v.target.files[0];n.permanentlySetValue({type:"image",id:void 0});let k=yield n.createAsset(y);k?n.permanentlySetValue({type:"image",id:k}):n.permanentlySetValue(r),v.target.value=null}),[n,r]),p=!(r!=null&&r.id);return xs.default.createElement(NI,{empty:p},xs.default.createElement(mB,{empty:p,title:p?"Upload image":'"'.concat(r.id,'" (Click to upload new image)')},xs.default.createElement(vB,{type:"file",onChange:f,accept:"image/*,.hdr",autoFocus:a}),c?xs.default.createElement(bB,{src:c}):xs.default.createElement(dB,null)),!p&&xs.default.createElement(xB,{title:"Delete image",onClick:()=>{n.permanentlySetValue({type:"image",id:void 0})}},xs.default.createElement(GA,null)))}var xs,cB,NI,uB,dB,fB,hB,pB,mB,gB,vB,yB,bB,_B,xB,wB,Vae=R(()=>{ab(),xs=ee(Oe()),Xe(),NI=le.div(cB||(cB=Y([`
  display: flex;
  align-items: center;
  height: 100%;
  gap: 4px;
`]))),dB=le.div(uB||(uB=Y([`
  position: absolute;
  inset: -5px;
  // rotate 45deg
  transform: rotate(45deg);
  --checker-color: #ededed36;
  &:hover {
    --checker-color: #ededed77;
  }
  // checkerboard background with 4px squares
  background-image: linear-gradient(
      45deg,
      var(--checker-color) 25%,
      transparent 25%
    ),
    linear-gradient(-45deg, var(--checker-color) 25%, transparent 25%),
    linear-gradient(45deg, transparent 75%, var(--checker-color) 75%),
    linear-gradient(-45deg, transparent 75%, var(--checker-color) 75%);
  background-size: 5px 5px;
`]))),mB=le.label(pB||(pB=Y([`
  position: relative;
  cursor: default;
  box-sizing: border-box;

  height: 18px;
  aspect-ratio: 1;
  display: flex;
  justify-content: center;
  align-items: center;
  font-size: 16px;

  overflow: hidden;
  color: #ccc;
  &:hover {
    color: white;
  }

  border-radius: 99999px;
  border: 1px solid hwb(220deg 40% 52%);
  &:hover {
    border-color: hwb(220deg 45% 52%);
  }

  `,`
`])),e=>e.empty?Bi(fB||(fB=Y([""]))):Bi(hB||(hB=Y([""])))),vB=le.input.attrs({type:"file"})(gB||(gB=Y([`
  display: none;
`]))),bB=le.img(yB||(yB=Y([`
  position: absolute;
  inset: 0;
  height: 100%;
  aspect-ratio: 1;

  object-fit: cover;
`]))),xB=le.button(_B||(_B=Y([`
  display: flex;
  align-items: center;
  justify-content: center;
  outline: none;
  background: transparent;
  color: #a8a8a9;

  border: none;
  height: 100%;
  aspect-ratio: 1/1;

  opacity: 0;

  `,`:hover & {
    opacity: 0.8;
  }

  &:hover {
    opacity: 1;
    color: white;
  }
`])),NI),wB=Uae});function Hae({propConfig:e,editingTools:n,value:r,autoFocus:a}){let[c,u]=ws.default.useState();(0,ws.useEffect)(()=>{u(r?n.getAssetUrl(r):void 0)},[r]);let f=(0,ws.useCallback)(v=>qe(this,null,function*(){let y=v.target.files[0];n.permanentlySetValue({type:"file",id:void 0});let k=yield n.createAsset(y);k?n.permanentlySetValue({type:"file",id:k}):n.permanentlySetValue(r),v.target.value=null}),[n,r]),p=!(r!=null&&r.id);return ws.default.createElement(FI,{empty:p},ws.default.createElement(CB,{empty:p,title:p?"Upload file":'"'.concat(r.id,'" (Click to upload new file)')},ws.default.createElement(IB,{type:"file",onChange:f,autoFocus:a}),c?ws.default.createElement(UA,null):ws.default.createElement(kB,null)),!p&&ws.default.createElement(OB,{title:"Delete file",onClick:()=>{n.permanentlySetValue({type:"file",id:void 0})}},ws.default.createElement(GA,null)))}var ws,SB,FI,EB,kB,TB,MB,PB,CB,AB,IB,DB,OB,RB,Gae=R(()=>{ab(),ws=ee(Oe()),Xe(),FI=le.div(SB||(SB=Y([`
  display: flex;
  align-items: center;
  height: 100%;
  gap: 4px;
`]))),kB=le.div(EB||(EB=Y([`
  position: absolute;
  inset: -5px;
  // rotate 45deg
  transform: rotate(45deg);
  --checker-color: #ededed36;
  &:hover {
    --checker-color: #ededed77;
  }
  // checkerboard background with 4px squares
  background-image: linear-gradient(
      45deg,
      var(--checker-color) 25%,
      transparent 25%
    ),
    linear-gradient(-45deg, var(--checker-color) 25%, transparent 25%),
    linear-gradient(45deg, transparent 75%, var(--checker-color) 75%),
    linear-gradient(-45deg, transparent 75%, var(--checker-color) 75%);
  background-size: 5px 5px;
`]))),CB=le.label(PB||(PB=Y([`
  position: relative;
  cursor: default;
  box-sizing: border-box;

  height: 18px;
  aspect-ratio: 1;
  display: flex;
  justify-content: center;
  align-items: center;
  font-size: 16px;

  overflow: hidden;
  color: #ccc;
  &:hover {
    color: white;
  }

  border-radius: 99999px;
  border: 1px solid hwb(220deg 40% 52%);
  &:hover {
    border-color: hwb(220deg 45% 52%);
  }

  `,`
`])),e=>e.empty?Bi(TB||(TB=Y([""]))):Bi(MB||(MB=Y([""])))),IB=le.input.attrs({type:"file"})(AB||(AB=Y([`
  display: none;
`]))),OB=le.button(DB||(DB=Y([`
  display: flex;
  align-items: center;
  justify-content: center;
  outline: none;
  background: transparent;
  color: #a8a8a9;

  border: none;
  height: 100%;
  aspect-ratio: 1/1;

  opacity: 0;

  `,`:hover & {
    opacity: 0.8;
  }

  &:hover {
    opacity: 1;
    color: white;
  }
`])),FI),RB=Hae}),jI,LB=R(()=>{Coe(),a6(),gae(),yae(),Bae(),Vae(),Gae(),jI={number:cI,string:I6,boolean:zF,stringLiteral:E6,rgba:lB,image:wB,file:RB}});function bb(e){let n=new WeakMap;return r=>(n.has(r)||n.set(r,e(r)),n.get(r))}var xk=R(()=>{});function _l(e){return e.type==="compound"||e.type==="enum"}function wk(e,n){if(!e)return;let[r,...a]=n;if(r===void 0)return e;if(!_l(e))return;let c=e.type==="enum"?e.cases[r]:e.props[r];return wk(c,a)}function Sk(e,n){let r=n.deserializeAndSanitize(e);return r===void 0?n.default:r}function Wae(e){return!_l(e)}function*_b(e,n){if(e.type==="compound")for(let r in e.props)yield*xt(_b(e.props[r],[...n,r]));else{if(e.type==="enum")throw new Error("Not implemented yet");return yield{path:n,conf:e}}}var BI,$u=R(()=>{xk(),BI=bb(e=>{if(e.type==="enum")throw new Error("Not implemented yet for enums");for(let n in e.props){let r=e.props[n];if(_l(r)){if(BI(r))return!0}else return!0}return!1})}),UI,zB=R(()=>{UI="calc(var(--left-pad) + var(--depth) * var(--step))"}),NB,Zu,Uf=R(()=>{Xe(),Zu=Bi(NB||(NB=Y([`
  font-weight: 300;
  font-size: 11px;
  color: `,`;
  text-shadow: 0.5px 0.5px 2px rgba(0, 0, 0, 0.3);
`])),e=>e.isHighlighted==="self"?"#CCC":"#919191")}),xb,Ek,FB,jB,BB,UB,VB,HB,GB=R(()=>{qm(),xb=ee(Oe()),Xe(),Ek=26,jB=le.li(FB||(FB=Y([`
  height: `,`px;
  padding: 0 12px;
  margin: 0;
  display: flex;
  align-items: center;
  font-size: 11px;
  font-weight: 400;
  position: relative;
  color: `,`;
  cursor: `,`;

  &:after {
    position: absolute;
    inset: 2px 1px;
    display: block;
    content: ' ';
    pointer-events: none;
    z-index: -1;
    border-radius: 3px;
  }

  &:hover:after {
    background-color: `,`;
  }
`])),Ek,e=>e.enabled?"white":"#8f8f8f",e=>e.enabled?"normal":"not-allowed",e=>e.enabled?"rgba(63, 174, 191, 0.75)":"initial"),UB=le.span(BB||(BB=Y([""]))),VB=e=>xb.default.createElement(jB,{onClick:e.enabled?e.onClick:bs,enabled:e.enabled,title:e.enabled?void 0:"Disabled"},xb.default.createElement(UB,null,xb.default.createElement(xb.default.Fragment,null,e.label))),HB=VB});function qae(e){let n=(0,VI.useRef)(e);n.current=e,(0,VI.useEffect)(()=>{let r=a=>n.current(a);return window.addEventListener("keydown",r),()=>{window.removeEventListener("keydown",r)}},[])}var VI,Kae=R(()=>{VI=ee(Oe())}),wb,WB,qB,KB,XB,$B,ZB,YB,HI,JB=R(()=>{wb=ee(Oe()),GB(),Xe(),ca(),rr(),WB=190,qB=!0,XB=le.ul(KB||(KB=Y([`
  position: absolute;
  min-width: `,`px;
  z-index: 10000;
  background: `,`;
  backdrop-filter: blur(2px);
  color: white;
  list-style-type: none;
  padding: 2px 0;
  margin: 0;
  border-radius: 1px;
  cursor: default;
  `,`;
  border-radius: 3px;
`])),WB,ys(.2,"#111"),tr),ZB=le.div($B||($B=Y([`
  padding: 4px 10px;
  border-bottom: 1px solid #6262626d;
  color: #adadadb3;
  font-size: 11px;
  font-weight: 500;
`]))),YB=wb.default.forwardRef((e,n)=>wb.default.createElement(XB,{ref:n},qB&&e.displayName?wb.default.createElement(ZB,null,e.displayName):null,e.items.map((r,a)=>wb.default.createElement(HB,{key:"item-".concat(a),label:r.label,enabled:r.enabled!==!1,onClick:c=>{r.callback&&r.callback(c),e.onRequestClose()}})))),HI=YB}),QB,e8,kk,t8,Sb,n8,r8,Xae=R(()=>{Ij(),QB=ee(Oe()),e8=ee(Oe()),kk=ee(Oe()),t8=ee(Ia()),PI(),GB(),Ff(),Kae(),JB(),Sb=20,n8=e=>{let[n,r]=(0,kk.useState)(null),a=CI(n),c=yk();(0,kk.useLayoutEffect)(()=>{if(!a||!n)return;let p={left:a.width/2,top:Ek/2+(e.displayName?Ek:0)},v={left:e.clickPoint.clientX-p.left,top:e.clickPoint.clientY-p.top};v.left<0?v.left=0:v.left+a.width>c.width&&(v.left=c.width-a.width),v.top<0?v.top=0:v.top+a.height>c.height&&(v.top=c.height-a.height),n.style.left=v.left+"px",n.style.top=v.top+"px";let y=k=>{(k.clientX<v.left-Sb||k.clientX>v.left+a.width+Sb||k.clientY<v.top-Sb||k.clientY>v.top+a.height+Sb)&&e.onRequestClose()};return window.addEventListener("mousemove",y),()=>{window.removeEventListener("mousemove",y)}},[a,n,e.clickPoint,c,e.onRequestClose]);let u=(0,e8.useContext)(Hm);qae(p=>{p.key==="Escape"&&e.onRequestClose()});let f=(0,QB.useMemo)(()=>{let p=Array.isArray(e.items)?e.items:e.items();return p.length>0?p:[{label:e.displayName?"No actions for ".concat(e.displayName):"No actions found",enabled:!1}]},[e.items]);return(0,t8.createPortal)(kk.default.createElement(HI,{items:f,onRequestClose:e.onRequestClose,displayName:e.displayName,ref:r}),u)},r8=n8}),Tk,i8,o8,$ae=R(()=>{Tk=ee(Oe()),i8=(e,n)=>{let[r,a]=(0,Tk.useState)({isOpen:!1}),c=(0,Tk.useCallback)(()=>a({isOpen:!1}),[]);return(0,Tk.useEffect)(()=>{if(!e||n.disabled===!0){a({isOpen:!1});return}let u=f=>{a({isOpen:!0,event:f}),f.preventDefault(),f.stopPropagation()};return e.addEventListener("contextmenu",u),()=>{e.removeEventListener("contextmenu",u)}},[e,n.disabled]),[r,c]},o8=i8});function To(e,n){let[r,a]=o8(e,n),[,c]=(0,ng.useContext)(qb);return(0,ng.useEffect)(()=>{var u;let f;return r.isOpen&&((u=n.onOpen)==null||u.call(n),f=c()),()=>f==null?void 0:f()},[r.isOpen,n.onOpen]),[r.isOpen?ng.default.createElement(r8,{items:n.menuItems,displayName:n.displayName,clickPoint:r.event,onRequestClose:a}):a8,a,r.isOpen]}var ng,a8,Mo=R(()=>{ng=ee(Oe()),Xae(),$ae(),SD(),a8=ng.default.createElement(ng.default.Fragment,null)});function Yu(e,n){return n.length===0?e:nc(e,n)}var Mk=R(()=>{rc()});function s8(e,n){return e==null?null:e instanceof Element&&e.matches(n)?e:s8(e.parentElement,n)}var Zae=R(()=>{});function Eb(e,n){let r=e;for(let a of n)r=r[a];return r}var Pk=R(()=>{});function Yae(e){let n=new Ck.Atom(void 0),r=new Ck.Atom({}),a=new Ck.Atom({}),c=0;return{addRelatedFlags(u,f){let p=String(++c),v=f.map(y=>{let k={flag:y.flag},P=[y.affects,u,p];return a.setByPointer(T=>Eb(T,P),k),P});return()=>{for(let y of v)a.setByPointer(k=>Eb(k,y),void 0)}},usePresenceFlag(u){if(!e.enabled)return;let f=(0,kb.useMemo)(()=>{if(!u)return WI;let p=n.prism,v=(0,Tb.pointerToPrism)(r.pointer[u]),y=(0,Tb.pointerToPrism)(a.pointer[u]);return(0,Tb.prism)(()=>{if(v.getValue())return 2;{let k=y.getValue(),P=p.getValue(),T=k&&P&&k[P];if(T){let E;for(let A of Object.values(T))A&&(E&&E>=A.flag||(E=A.flag));return E}return}})},[u]);return Cf(f)},setUserHover(u){let f=n.get();f!==u&&(f&&r.setByPointer(p=>p[f],!1),n.set(u),u&&r.setByPointer(p=>p[u],!0))}}}function Vf(e){let n=kb.default.useContext(qI),r=n.usePresenceFlag(e);return{attrs:{[Ak]:e},flag:r,useRelations(a,c){(0,GI.useEffect)(()=>e&&n.addRelatedFlags(e,a()),[e,...c])}}}function l8(e){let n=kb.default.useContext(qI),r=qu("PresenceListeners");(0,GI.useEffect)(()=>{let a;if(!e)return;let c=u=>{if(u.target instanceof Node){let f=s8(u.target,"[".concat(Ak,"]"));if(f){let p=f.getAttribute(Ak);a!==p&&(a=p,n.setUserHover(p||void 0),r._debug("Updated current hover",{itemKey:p}));return}a!=null&&(a=null,n.setUserHover(void 0),r._debug("Cleared current hover"))}};return e.addEventListener("mouseover",c),()=>{e.removeEventListener("mouseover",c),a!=null&&(a=null,r._debug("Cleared current hover as part of cleanup"))}},[e,n])}var kb,GI,Tb,Ck,WI,qI,Ak,Hf=R(()=>{kb=ee(Oe()),GI=ee(Oe()),Ku(),Tb=Mt,Ck=Mt,sn(),Zae(),Pk(),WI=(0,Tb.prism)(()=>{}),WI.keepHot(),qI=kb.default.createContext(Yae({enabled:!1})),Ak="data-pi-key"}),Ui,c8,Mb,u8,KI,Ju,d8,XI,f8,h8,p8,Ik,m8,g8,v8,y8,b8,_8,Pb,x8,$I,Dk=R(()=>{rr(),ca(),Ui=ee(Oe()),Xe(),Hf(),Mb=le.div(c8||(c8=Y([`
  display: flex;
  justify-content: center;
  align-items: center;
  width: 16px;
  margin: 0 0px 0 2px;
  position: relative;
  z-index: 0;
  opacity: 0.7;

  &:after {
    position: absolute;
    left: -14px;
    right: -14px;
    top: -2px;
    bottom: -2px;
    content: ' ';
    display: none;
    z-index: -1;
    background: `,`;
  }

  &:hover {
    opacity: 1;
    &:after {
      display: block;
    }
  }
`])),ys(.2,"black")),KI=le.div(u8||(u8=Y([`
  background: none;
  position: relative;
  border: 0;
  transition: transform 0.1s ease-out;
  z-index: 0;
  outline: none;
  cursor: pointer;

  &:after {
    display: none;
    `,`:hover & {
      display: block;
    }
    position: absolute;
    left: -4px;
    right: -4px;
    top: -4px;
    bottom: -4px;
    content: ' ';
    z-index: -1;
  }
`])),Mb),Ju={offColor:"#555",onColor:"#e0c917"},XI=le(KI)(d8||(d8=Y([`
  &:hover {
    color: #e0c917;
  }

  color: `,`;
`])),e=>e.presence===2?"white":e.isOn?Ju.onColor:Ju.offColor),h8=Bi(f8||(f8=Y([`
  pointer-events: none !important;
`]))),Ik=le(KI)(p8||(p8=Y([`
  color: `,`;

  `,`;
`])),e=>e.flag===2?"white":e.available?Ju.onColor:Ju.offColor,e=>e.available?tr:h8),g8=le(Ik)(m8||(m8=Y([`
  transform: translateX(2px);
  `,`:hover & {
    transform: translateX(-7px);
  }
`])),Mb),y8=le(Ik)(v8||(v8=Y([`
  transform: translateX(-2px);
  `,`:hover & {
    transform: translateX(7px);
  }
`])),Mb),(e=>{let n=le.g(b8||(b8=Y([`
    stroke-width: 1;
    `,`:hover & path {
      stroke-width: 3;
    }
  `])),Ik);e.Prev=()=>Ui.default.createElement("svg",{width:"12",height:"12",viewBox:"0 0 12 12",fill:"none",xmlns:"http://www.w3.org/2000/svg"},Ui.default.createElement(n,{transform:"translate(6 3)"},Ui.default.createElement("path",{d:"M4 1L1 4L4 7",stroke:"currentColor"}))),e.Next=()=>Ui.default.createElement("svg",{width:"12",height:"12",viewBox:"0 0 12 12",fill:"none",xmlns:"http://www.w3.org/2000/svg"},Ui.default.createElement(n,{transform:"translate(1 3)"},Ui.default.createElement("path",{d:"M1 1L4 4L1 7",stroke:"currentColor"})));let r=le.g(_8||(_8=Y([`
    stroke-width: 0;
    `,`:hover & path {
      stroke: currentColor;
      stroke-width: 2;
    }
  `])),XI);e.Cur=()=>Ui.default.createElement("svg",{width:"8",height:"12",viewBox:"0 0 8 12",fill:"none",xmlns:"http://www.w3.org/2000/svg"},Ui.default.createElement(r,{transform:"translate(1 4)"},Ui.default.createElement("path",{d:"M3 0L6 3L3 6L0 3L3 0Z",fill:"currentColor"})))})(Pb||(Pb={})),x8=e=>{var n,r,a,c,u;let f=Vf((n=e.prev)==null?void 0:n.itemKey),p=Vf(((r=e.cur)==null?void 0:r.type)==="on"?e.cur.itemKey:void 0),v=Vf((a=e.next)==null?void 0:a.itemKey);return Ui.default.createElement(Mb,null,Ui.default.createElement(g8,O({available:!!e.prev,onClick:(c=e.prev)==null?void 0:c.jump,flag:f.flag},f.attrs),Ui.default.createElement(Pb.Prev,null)),Ui.default.createElement(XI,O({isOn:e.cur.type==="on",onClick:e.cur.toggle,presence:p.flag},p.attrs),Ui.default.createElement(Pb.Cur,null)),Ui.default.createElement(y8,O({available:!!e.next,onClick:(u=e.next)==null?void 0:u.jump,flag:v.flag},v.attrs),Ui.default.createElement(Pb.Next,null)))},$I=x8}),Ok,Cb,w8,S8,E8,k8,T8,M8,P8,Ab,C8=R(()=>{ca(),Ok=ee(Oe()),Xe(),Ge(),Dk(),$u(),Cb={defaultState:{color:ys(.95,"#C4C4C4"),hoverColor:ys(.15,Ju.onColor)},withStaticOverride:{color:ys(.85,"#C4C4C4"),hoverColor:ys(.15,Ju.onColor)}},S8=le.div(w8||(w8=Y([`
  width: 16px;
  margin: 0 0px 0 2px;
  display: flex;
  justify-content: center;
  align-items: center;
  cursor: pointer;

  color: `,`;

  &:hover {
    color: `,`;
  }
`])),e=>e.hasStaticOverride?Cb.withStaticOverride.color:Cb.defaultState.color,e=>e.hasStaticOverride?Cb.withStaticOverride.hoverColor:Cb.defaultState.hoverColor),k8=le.div(E8||(E8=Y([`
  width: 5px;
  height: 5px;
  border-radius: 1px;
  transform: rotate(45deg);
  /* border: 1px solid currentColor; */
  background-color: currentColor;
`]))),M8=le.div(T8||(T8=Y([`
  width: 5px;
  height: 5px;
  background-color: currentColor;
  border-radius: 1px;
  transform: rotate(45deg);
`]))),P8=e=>{let{hasStaticOverride:n,obj:r,propConfig:a,pathToProp:c}=e;return Ok.default.createElement(S8,{hasStaticOverride:n,onClick:()=>{_e().transaction(({stateEditors:u})=>{for(let{path:f,conf:p}of _b(a,c)){if(_l(p))continue;let v=W(O({},r.address),{pathToProp:f});u.coreByProject.historic.sheetsById.sequence.setPrimitivePropAsSequenced(v,a)}})},title:"Sequence this prop"},n?Ok.default.createElement(M8,{title:"The default value is overridden"}):Ok.default.createElement(k8,{title:"This is the default value for this prop"}))},Ab=P8});function Ib(e){return JSON.stringify(ZI(e))}function ZI(e){return al(e)?Object.keys(e).sort().reduce((n,r)=>(n[r]=ZI(e[r]),n),{}):Array.isArray(e)?e.map(ZI):e}var Jae=R(()=>{Jr()}),A8,Db,I8=R(()=>{A8="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict",Db=(e=21)=>{let n="",r=e;for(;r--;)n+=A8[Math.random()*64|0];return n}});function D8(){return Db(10)}function Qae(){return Db(10)}function ese(){return Db(10)}var Si,Sc=R(()=>{Jae(),I8(),Si={forSheet(){return"sheet"},forSheetObject(e){return Ib({o:e.address.objectKey})},forSheetObjectProp(e,n){return Ib({o:e.address.objectKey,p:n})},forTrackKeyframe(e,n,r){return Ib({o:e.address.objectKey,t:n,k:r})},forSheetObjectAggregateKeyframe(e,n){return Si.forCompoundPropAggregateKeyframe(e,[],n)},forSheetAggregateKeyframe(e,n){return Ib({o:e.address.sheetId,pos:n})},forCompoundPropAggregateKeyframe(e,n,r){return Ib({o:e.address.objectKey,p:n,pos:r})}}});function O8(e,n,r){if(!n||n.data.keyframes.length===0)return R8;let a=YI.get(n.data);if(a&&a[0]===r)return a[1];function c(f){if(!n)return;let p=n.data.keyframes[f];return p&&{kf:p,track:n,itemKey:Si.forTrackKeyframe(e,n.id,p.id)}}let u=(()=>{let f=n.data.keyframes.findIndex(v=>v.position>=r);if(f===-1)return{prev:c(n.data.keyframes.length-1)};let p=c(f);return p.kf.position===r?{prev:c(f-1),cur:p,next:c(f+1)}:{next:p,prev:c(f-1)}})();return YI.set(n.data,[r,u]),u}var YI,R8,L8=R(()=>{Sc(),YI=new WeakMap,R8={}}),JI,z8=R(()=>{JI={}});function tse(e,n,r){let a=(0,Na.getPointerParts)(e).path;return Mn(()=>{if(!BI(r))return{type:"AllStatic",beingScrubbed:!1,contextMenuItems:[],controlIndicators:Gf.default.createElement(Ab,{hasStaticOverride:!1,obj:n,pathToProp:a,propConfig:r})};let c=!!(0,Na.val)(nc(_e().atomP.ephemeral.projects.stateByProjectId[n.address.projectId].stateBySheetId[n.address.sheetId].stateByObjectKey[n.address.objectKey].valuesBeingScrubbed,(0,Na.getPointerParts)(e).path)),u=[],f={beingScrubbed:c,contextMenuItems:u,controlIndicators:Gf.default.createElement(Gf.default.Fragment,null)},p=(0,Na.val)(n.template.getMapOfValidSequenceTracks_forStudio()),v=Yu(p,a),y=v!==void 0&&Object.keys(v).length!==0,k=[],P=(0,Na.val)(n.template.getStaticButNotSequencedOverrides()),T=Yu(P!=null?P:JI,a)!==void 0;if(y)for(let E of _b(r,[])){if(_l(E.conf))continue;let A=Yu(v,E.path);typeof A!="string"?T=!0:k.push(A)}if((T||y)&&u.push({label:"Reset all to default",callback:()=>{_e().transaction(({unset:E})=>{E(e)})}}),y&&u.push({label:"Make all static",callback:()=>{_e().transaction(({stateEditors:E})=>{for(let{path:A,conf:C}of _b(r,[])){if(_l(C))continue;let L=W(O({},n.address),{pathToProp:[...a,...A]}),N=Eb(e,A);E.coreByProject.historic.sheetsById.sequence.setPrimitivePropAsStatic(W(O({},L),{value:n.getValueByPointer(N)}))}})}}),(!y||y&&T)&&u.push({label:"Sequence all",callback:()=>{_e().transaction(({stateEditors:E})=>{for(let{path:A,conf:C}of _b(r,a)){if(_l(C))continue;let L=W(O({},n.address),{pathToProp:A});E.coreByProject.historic.sheetsById.sequence.setPrimitivePropAsSequenced(L,r)}})}}),y){let E=Na.prism.memo("controlIndicators",()=>Gf.default.createElement(nse,{pointerToProp:e,obj:n,possibleSequenceTrackIds:v,listOfDescendantTrackIds:k}),[v,k]);return W(O({},f),{type:"HasSequences",controlIndicators:E})}else return W(O({},f),{type:"AllStatic",controlIndicators:Gf.default.createElement(Ab,{hasStaticOverride:T,obj:n,pathToProp:a,propConfig:r})})},[])}function nse({pointerToProp:e,obj:n,possibleSequenceTrackIds:r,listOfDescendantTrackIds:a}){return Mn(()=>{let c=(0,Na.getPointerParts)(e).path,u=(0,Na.val)(n.sheet.getSequence().positionPrism),f=a.map(E=>({trackId:E,track:(0,Na.val)(n.template.project.pointers.historic.sheetsById[n.address.sheetId].sequence.tracksByObject[n.address.objectKey].trackData[E])})).filter(({track:E})=>!!E).map(E=>W(O({},E),{nearbies:O8(n,{id:E.trackId,data:E.track,sheetObject:n},u)})),p=f.find(({nearbies:E})=>!!E.cur),v=f.every(({nearbies:E})=>!!E.cur),y=f.reduce((E,A)=>A.nearbies.prev&&(E===void 0||A.nearbies.prev.kf.position>E.kf.position)?A.nearbies.prev:E,void 0),k=f.reduce((E,A)=>A.nearbies.next&&(E===void 0||A.nearbies.next.kf.position<E.kf.position)?A.nearbies.next:E,void 0),P=()=>{v?_e().transaction(E=>{E.unset(e)}):p?_e().transaction(E=>{E.set(e,(0,Na.val)(e))}):_e().transaction(E=>{E.set(e,(0,Na.val)(e))})},T={cur:p?{type:"on",itemKey:Si.forCompoundPropAggregateKeyframe(n,c,u),toggle:P}:{toggle:P,type:"off"},prev:y!==void 0?{position:y.kf.position,itemKey:Si.forCompoundPropAggregateKeyframe(n,c,y.kf.position),jump:()=>{n.sheet.getSequence().position=y.kf.position}}:void 0,next:k!==void 0?{position:k.kf.position,itemKey:Si.forCompoundPropAggregateKeyframe(n,c,k.kf.position),jump:()=>{n.sheet.getSequence().position=k.kf.position}}:void 0};return Gf.default.createElement($I,O({},T))},[e,n,r,a])}var Na,Gf,rse=R(()=>{Ge(),Mk(),sn(),Na=Mt,rc(),Gf=ee(Oe()),C8(),$u(),Sc(),Pk(),Dk(),L8(),z8()});function ise(){let e=0,n=new j8.Atom({hasLock:!1});return{replaceLock(r,a){let c=e++,u=n.get();return u.hasLock&&u.cleanup(),n.set({hasLock:!0,lockId:c,cleanup:a,deepPath:ose(N8(r))}),function(){let f=n.get();f.hasLock&&f.lockId===c&&(f.cleanup(),n.set({hasLock:!1}))}},getIsPropHighlightedD(r){let a=Eb(n.pointer.deepPath,N8(r));return(0,B8.prism)(()=>{let c=(0,F8.val)(a);return c===!0?"self":c?"descendent":null})}}}function N8(e){return[e.projectId,e.sheetId,e.objectKey,...e.pathToProp]}function ose(e){let n={};return ll(n,e,!0),n}var F8,j8,B8,Rk,QI=R(()=>{F8=Mt,j8=Mt,B8=Mt,Pk(),Cy(),Rk=ise()});function ase(e,n){return JSON.stringify(e,n,2).replace(/^([\{\[])\n (\s+)/,"$1$2").replace(/(\n[ ]+[\{\[])\n\s+/g,"$1 ").replace(/\n\s*([\]\}])/g," $1")}var sse=R(()=>{});function U8(e,n=!0){try{return typeof e=="string"?e:typeof e=="function"||e instanceof Error?e.toString():n?ase(e):JSON.stringify(e)}catch{return(e==null?void 0:e.name)||String(e)}}var lse=R(()=>{sse()});function cse(e,n,r){e||(arguments.length>2?V8(n,r):V8(n))}function V8(e,n){let r=arguments.length>1,a=U8(typeof e=="function"?e():e),c=r?`
Instead found: `.concat(U8(n)):"";throw new K8("Invariant: ".concat(a).concat(c),n)}var H8,G8,W8,q8,K8,use=R(()=>{lse(),H8=/^\s*at.+node:internal.+/gm,G8=/^\s*(at|[^@]+@) (?:Object\.)?invariant.+/gm,W8=/^\s*(at|[^@]+@).+test\-helpers.+/gm,q8=/^\s*(at|[^@]+@).+(debounce|invariant|iif)\.[tj]s.*/gm,K8=class extends Error{constructor(e,n){var r;super(e),Te(this,"found"),n!==void 0&&(this.found=n),this.stack=(r=this.stack)==null?void 0:r.replace(G8,"").replace(q8,"").replace(W8,"").replace(H8,"")}}});function dse(e){return(0,Lk.prism)(()=>{if(Array.isArray(e)){let n=new Array(e.length);for(let r=0;r<e.length;r++)n[r]=e[r].getValue();return n}else{let n={};for(let r in e)n[r]=(0,Lk.val)(e[r]);return n}})}function eD(e){let n=rg.default.memo(rg.default.forwardRef(function(r,a){let c=[],u={},f={ref:a};for(let k in r){let P=r[k];(0,Lk.isPrism)(P)?(c.push(P),u[k]=P):f[k]=P}let p=(0,rg.useRef)(c.length);cse(p.current===c.length,"expect same number of observable props on every invocation of deriver wrapped component.",{initial:p.current,count:c.length});let v=(0,rg.useMemo)(()=>dse(u),c),y=Cf(v);return y&&rg.default.createElement(e,O(O({},f),y))}));return n.displayName="deriver(".concat(e.displayName,")"),n}var Lk,rg,X8=R(()=>{Lk=Mt,sn(),rg=ee(Oe()),use()});function fse(e,n,r){return(0,Ss.prism)(()=>{var a;let c=(0,Ss.getPointerParts)(e).path,u=n.getValueByPointer(e),f=Ss.prism.memo("editPropValue",()=>{let A=null;return{temporarilySetValue(C){A||(A=_e().scrub()),A.capture(L=>{L.set(e,C)})},discardTemporaryValue(){A&&(A.discard(),A=null)},permanentlySetValue(C){A?(A.capture(L=>{L.set(e,C)}),A.commit(),A=null):_e().transaction(L=>{L.set(e,C)})}}},[]),p={createAsset:A=>n.sheet.project.assetStorage.createAsset(A),getAssetUrl:A=>A.id?n.sheet.project.assetStorage.getAssetUrl(A.id):void 0},v=(0,Ss.val)(nc(_e().atomP.ephemeral.projects.stateByProjectId[n.address.projectId].stateBySheetId[n.address.sheetId].stateByObjectKey[n.address.objectKey].valuesBeingScrubbed,(0,Ss.getPointerParts)(e).path))===!0,y=[],k=W(O(O({},f),p),{value:u,beingScrubbed:v,contextMenuItems:y,controlIndicators:ig.default.createElement(ig.default.Fragment,null)}),P=Wae(r);if(P){let A=(0,Ss.val)(n.template.getMapOfValidSequenceTracks_forStudio()),C=Yu(A,c);if(typeof C=="string"){y.push({label:"Make static",callback:()=>{_e().transaction(({stateEditors:ie})=>{let xe=W(O({},n.address),{pathToProp:c});ie.coreByProject.historic.sheetsById.sequence.setPrimitivePropAsStatic(W(O({},xe),{value:n.getValueByPointer(e)}))})}});let L=C,N=Ss.prism.sub("lcr",()=>{let ie=(0,Ss.val)(n.template.project.pointers.historic.sheetsById[n.address.sheetId].sequence.tracksByObject[n.address.objectKey].trackData[L]),xe=(0,Ss.val)(n.sheet.getSequence().positionPrism);return O8(n,ie&&{data:ie,id:L,sheetObject:n},xe)},[L]),U;k.beingScrubbed?U="Sequenced_OnKeyframe_BeingScrubbed":N.cur?U="Sequenced_OnKeyframe":((a=N.prev)==null?void 0:a.kf.connectedRight)===!0?U="Sequenced_BeingInterpolated":U="Sequened_NotBeingInterpolated";let G=()=>{N.cur?_e().transaction(ie=>{ie.unset(e)}):_e().transaction(ie=>{ie.set(e,k.value)})},Q={cur:N.cur?{type:"on",itemKey:N.cur.itemKey,toggle:G}:{type:"off",toggle:G},prev:N.prev!==void 0?{itemKey:N.prev.itemKey,position:N.prev.kf.position,jump:()=>{n.sheet.getSequence().position=N.prev.kf.position}}:void 0,next:N.next!==void 0?{itemKey:N.next.itemKey,position:N.next.kf.position,jump:()=>{n.sheet.getSequence().position=N.next.kf.position}}:void 0},J=ig.default.createElement($I,O({},Q));return W(O({},k),{type:"Sequenced",shade:U,nearbyKeyframes:N,controlIndicators:J})}}let T=(0,Ss.val)(n.template.getStaticValues()),E=Yu(T,c);return typeof E!="undefined"&&y.push({label:"Reset to default",callback:()=>{_e().transaction(({unset:A})=>{A(e)})}}),P&&y.push({label:"Sequence",callback:()=>{_e().transaction(({stateEditors:A})=>{let C=W(O({},n.address),{pathToProp:c});A.coreByProject.historic.sheetsById.sequence.setPrimitivePropAsSequenced(C,r)})}}),typeof E!="undefined"?W(O({},k),{type:"Static",shade:k.beingScrubbed?"Static_BeingScrubbed":"Static",controlIndicators:ig.default.createElement(Ab,{hasStaticOverride:!0,obj:n,pathToProp:c,propConfig:r})}):W(O({},k),{type:"Default",shade:"Default",controlIndicators:ig.default.createElement(Ab,{hasStaticOverride:!0,obj:n,pathToProp:c,propConfig:r})})})}function hse(e,n,r){if(zk.has(e))return zk.get(e);{let a=fse(e,n,r);return zk.set(e,a),a}}function tD(e,n,r){let a=hse(e,n,r);return Cf(a)}var ig,Ss,zk,nD=R(()=>{rc(),ig=ee(Oe()),Ss=Mt,Ge(),Mk(),sn(),$u(),C8(),L8(),Dk(),zk=new WeakMap});function pse({propConfig:e,pointerToProp:n,obj:r,SimpleEditorComponent:a}){let c=tD(n,r,e);return Vi.default.createElement(cI,{editingTools:c,propConfig:e,value:c.value})}function mse({pointerToProp:e,obj:n,propConfig:r,visualIndentation:a}){var c;let u=(c=r.label)!=null?c:oc((0,Ob.getPointerParts)(e).path),f=Object.entries(r.props),p=f.filter(([G,Q])=>_l(Q)),v=f.filter(([G,Q])=>!_l(Q)),[y,k]=Qn(null),P=tse(e,n,r),[T]=To(k,{menuItems:P.contextMenuItems}),E=p.length>0,A=(0,Vi.useMemo)(()=>Rk.getIsPropHighlightedD(W(O({},n.address),{pathToProp:(0,Ob.getPointerParts)(e).path})),[e]),C="".concat(n.address.projectId,",").concat(n.address.sheetId,",").concat(n.address.sheetInstanceId,",").concat(n.address.objectKey,",").concat((0,Ob.getPointerParts)(e).path.join()),L=uU(r);(0,Vi.useLayoutEffect)(()=>{Nk.has(C)||Nk.set(C,new Ob.Atom(L))},[C,r]);let N=Nk.get(C),U=Mn(()=>N?(0,$8.val)(N.pointer):L,[N]);return Vi.default.createElement(Y8,null,T,Vi.default.createElement(rD,{style:{"--depth":a-1}},Vi.default.createElement(eU,{isVectorProp:L},Vi.default.createElement(nU,null,P.controlIndicators),Vi.default.createElement(iU,{isHighlighted:A,ref:y},Vi.default.createElement("span",null,u||"Props")),Vi.default.createElement(aU,{isCollapsed:U,isVector:L,onClick:()=>{N==null||N.set(!N.get())}},Vi.default.createElement(g6,null))),L&&U&&Vi.default.createElement(fU,null,[...f].map(([G,Q])=>Vi.default.createElement(pse,{key:"prop-"+G,propConfig:Q,pointerToProp:e[G],obj:n})))),!U&&Vi.default.createElement(cU,{style:{"--depth":a},depth:a,lastSubIsComposite:E},[...v,...p].map(([G,Q])=>Vi.default.createElement(oD,{key:"prop-"+G,propConfig:Q,pointerToProp:e[G],obj:n,visualIndentation:a+1}))))}var Ob,Vi,$8,Z8,Y8,J8,rD,Q8,eU,tU,nU,rU,iU,oU,aU,sU,lU,cU,uU,dU,fU,hU,Nk,gse=R(()=>{$u(),Ob=Mt,Sf(),ca(),Vi=ee(Oe()),Xe(),zB(),Uf(),rr(),nr(),MU(),Mo(),rse(),QI(),X8(),a6(),nD(),sn(),$8=Mt,Qm(),xk(),Y8=le.div(Z8||(Z8=Y([`
  --step: 15px;
  --left-pad: 15px;
  `,`;
  --right-width: 60%;
`])),tr),rD=le.div(J8||(J8=Y([`
  height: 30px;
  display: flex;
  align-items: stretch;
  position: relative;
`]))),eU=le.div(Q8||(Q8=Y([`
  padding-left: `,`;
  display: flex;
  align-items: center;
  overflow: hidden;
  `,`;
`])),UI,({isVectorProp:e})=>e?"width: calc(100% - var(--right-width))":""),nU=le.div(tU||(tU=Y([`
  flexshrink: 0;
`]))),iU=eD(le.div(rU||(rU=Y([`
  margin-left: 4px;
  cursor: default;
  height: 100%;
  display: flex;
  align-items: center;
  gap: 4px;
  user-select: none;
  &:hover {
    color: white;
  }
  overflow: hidden;

  `,`;
`])),()=>Zu)),aU=le.span(oU||(oU=Y([`
  width: 28px;
  height: 28px;
  font-size: 9px;
  display: flex;
  align-items: center;
  justify-content: center;

  transition: transform 0.05s ease-out, color 0.1s ease-out;
  transform: rotateZ(`,`deg);
  color: #66686a;

  visibility: `,`;

  `,`:hover & {
    visibility: visible;
  }

  &:hover {
    transform: rotateZ(`,`deg);
    color: #c0c4c9;
  }
`])),e=>e.isCollapsed?0:90,e=>!e.isVector&&e.isCollapsed||e.isVector&&!e.isCollapsed?"visible":"hidden",rD,e=>e.isCollapsed?15:75),sU=ys(.05,"#282b2f"),cU=le.div(lU||(lU=Y([`
  /* background: `,`; */
  /* padding: `,` 0; */
`])),({depth:e})=>Jy(e*.03,sU),e=>e.lastSubIsComposite?0:"4px"),uU=bb(e=>{let n=Object.entries(e.props);return n.length<=3&&n.every(([r,a])=>a.type==="number"&&["x","y","z"].includes(r))}),fU=le.div(dU||(dU=Y([`
  display: flex;
  align-items: center;
  justify-content: stretch;
  padding: 0 8px 0 2px;
  box-sizing: border-box;
  height: 100%;
  width: var(--right-width);
  flex-shrink: 0;
  flex-grow: 0;
`]))),hU=Vi.default.memo(mse),Nk=new Map});function vse({isHighlighted:e}){return e==="self"?"#1857a4":e==="descendent"?"#0a2f5c":"initial"}var yse=R(()=>{});function bse({propConfig:e,pointerToProp:n,editingTools:r,children:a,isPropHighlightedD:c}){var u;let f=(u=e.label)!=null?u:oc((0,iD.getPointerParts)(n).path),[p,v]=Qn(null),[y]=To(v,{menuItems:r.contextMenuItems});return og.default.createElement(mU,{isHighlighted:c},y,og.default.createElement(vU,null,og.default.createElement(xU,null,r.controlIndicators),og.default.createElement(bU,{isHighlighted:c,ref:p,title:["obj","props",...(0,iD.getPointerParts)(n).path].join(".")},f)),og.default.createElement(SU,null,a))}var iD,og,pU,mU,gU,vU,yU,bU,_U,xU,wU,SU,_se=R(()=>{iD=Mt,Mo(),nr(),Jr(),og=ee(Oe()),Xe(),rr(),Uf(),X8(),zB(),yse(),mU=eD(le.div(pU||(pU=Y([`
  display: flex;
  height: 30px;
  justify-content: flex-start;
  align-items: stretch;
  // We cannot calculate both the container (details panel) width and the descendant
  // (this) width dynamically. This leads to the container width being calculated
  // without this percentage being taken into consideration leads to horizontal
  // clipping/scrolling--the same way as if we explicitly fixed either the container
  // width, or the descendant width.
  // The correct solution for tabulated UIs with dynamic container widths is to use
  // CSS grid. For now I fixed this issue by just giving a great enough width
  // to the details panel so most things don't break.
  --right-width: 60%;
  position: relative;
  `,`;

  /* background-color: `,`; */
`])),tr,vse)),vU=le.div(gU||(gU=Y([`
  box-sizing: border-box;
  padding-left: `,`;
  padding-right: 4px;
  display: flex;
  flex-direction: row;
  justify-content: flex-start;
  align-items: stretch;
  gap: 4px;
  flex-grow: 0;
  flex-shrink: 0;
  width: calc(100% - var(--right-width));
`])),UI),bU=eD(le.div(yU||(yU=Y([`
  text-align: left;
  flex: 1 0;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  display: flex;
  align-items: center;
  user-select: none;
  cursor: default;

  `,`;
  &:hover {
    color: white;
  }
`])),Zu)),xU=le.div(_U||(_U=Y([`
  flex-basis: 8px;
  flex: 0 0;
  display: flex;
  align-items: center;
`]))),SU=le.div(wU||(wU=Y([`
  display: flex;
  align-items: center;
  justify-content: stretch;
  padding: 0 8px 0 2px;
  box-sizing: border-box;
  height: 100%;
  width: var(--right-width);
  flex-shrink: 0;
  flex-grow: 0;
`])))});function xse({propConfig:e,pointerToProp:n,obj:r,SimpleEditorComponent:a}){let c=tD(n,r,e),u=(0,Rb.useMemo)(()=>Rk.getIsPropHighlightedD(W(O({},r.address),{pathToProp:(0,EU.getPointerParts)(n).path})),[n]);return Rb.default.createElement(bse,{editingTools:c,propConfig:e,pointerToProp:n,isPropHighlightedD:u},Rb.default.createElement(a,{editingTools:c,propConfig:e,value:c.value}))}var Rb,EU,kU,wse=R(()=>{Rb=ee(Oe()),nD(),_se(),EU=Mt,QI(),kU=Rb.default.memo(xse)}),Lb,TU,oD,MU=R(()=>{Lb=ee(Oe()),LB(),gse(),wse(),TU=({propConfig:e,visualIndentation:n,pointerToProp:r,obj:a})=>{if(e.type==="compound")return Lb.default.createElement(hU,{obj:a,visualIndentation:n,pointerToProp:r,propConfig:e});if(e.type==="enum")return Lb.default.createElement(Lb.default.Fragment,null);{let c=jI[e.type];return Lb.default.createElement(kU,{SimpleEditorComponent:c,obj:a,visualIndentation:n,pointerToProp:r,propConfig:e})}},oD=TU});function PU(e){return Fk.has(e)||Fk.set(e,(CU++).toString()),Fk.get(e)}var Fk,CU,AU=R(()=>{Fk=new WeakMap,CU=0}),ag,IU,DU,OU,RU,LU,zU,Sse=R(()=>{ag=ee(Oe()),MU(),sn(),AU(),Xe(),DU=le.div(IU||(IU=Y([`
  display: flex;
  flex-direction: column;
  gap: 4px;
  padding: 8px;
`]))),RU=le.button(OU||(OU=Y([`
  display: flex;
  align-items: center;
  justify-content: center;
  outline: none;
  border-radius: 2px;

  color: #a8a8a9;
  background: rgba(255, 255, 255, 0.1);

  border: none;
  height: 28px;

  &:hover {
    background: rgba(255, 255, 255, 0.15);
  }

  &:active {
    background: rgba(255, 255, 255, 0.2);
  }
`]))),LU=({objects:e})=>{let n=e[0],r=In(n.template.configPointer),a=In(n.template._temp_actionsPointer);return ag.default.createElement(ag.default.Fragment,null,ag.default.createElement(oD,{key:PU(n),obj:n,pointerToProp:n.propsP,propConfig:r,visualIndentation:1}),ag.default.createElement(DU,null,a&&Object.entries(a).map(([c,u])=>ag.default.createElement(RU,{key:c,onClick:()=>{u(n.publicApi)}},c))))},zU=LU}),NU,FU,jk,jU=R(()=>{Xe(),FU=le.button(NU||(NU=Y([`
  text-align: center;
  padding: 8px;
  border-radius: 2px;
  border: 1px solid #627b7b87;
  background-color: #4b787d3d;
  color: #eaeaea;
  font-weight: 400;
  display: block;
  appearance: none;
  flex-grow: 1;
  cursor: `,`;
  opacity: `,`;

  &:hover {
    background-color: #7dc1c878;
    border-color: #9ebcbf;
  }
`])),e=>e.disabled?"none":"pointer",e=>e.disabled?.4:1),jk=FU}),Ese=R(()=>{}),BU,kse=R(()=>{Ese(),BU=(e=21)=>{let n="",r=crypto.getRandomValues(new Uint8Array(e));for(;e--;){let a=r[e]&63;a<36?n+=a.toString(36):a<62?n+=(a-26).toString(36).toUpperCase():a<63?n+="_":n+="-"}return n}});function UU(){return BU(16)}var VU=R(()=>{kse()}),HU,Ec,aD,GU,WU,qU,KU,XU=R(()=>{HU=Mt,nr(),Ec=ee(Oe()),aD=(0,Ec.createContext)(null),GU=0,WU=()=>{let e=(0,Ec.useMemo)(()=>GU++,[]),{cur:n,set:r}=(0,Ec.useContext)(aD),[a,c]=Qn(!1),u=(0,Ec.useCallback)((f,p)=>{r(f?e:-1,p)},[]);return(0,Ec.useEffect)(()=>n.onStale(()=>{let f=n.getValue()===e;a.current!==f&&(a.current=f)}),[n,e]),[c,u]},qU=({children:e})=>{let n=(0,Ec.useMemo)(()=>new HU.Atom(-1),[]),r=n.prism,a=(0,Ec.useMemo)(()=>{let c;return(u,f)=>{let p=c!==void 0;c!==void 0&&(clearTimeout(c),c=void 0),f===0||p?n.set(u):c=setTimeout(()=>{n.set(u),c=void 0},f)}},[]);return Ec.default.createElement(aD.Provider,{value:{cur:r,set:a}},e)},KU=qU});function sg(e,n){let r=e.enabled!==!1,[a,c]=WU(),[u,f]=Qn(null);(0,ZU.useEffect)(()=>{if(!r)return;let v=u.current;if(!v)return;let y=()=>{var P;return c(!0,(P=e.enterDelay)!=null?P:400)},k=()=>{var P;return c(!1,(P=e.exitDelay)!=null?P:200)};return v.addEventListener("mouseenter",y),v.addEventListener("mouseleave",k),()=>{v.removeEventListener("mouseenter",y),v.removeEventListener("mouseleave",k)}},[u,r,e.enterDelay,e.exitDelay]);let p=(0,$U.useContext)(Hm);return[r&&a&&f?(0,YU.createPortal)(Bk.default.createElement(OI,{children:n,target:f,onClickOutside:bs,verticalPlacement:e.verticalPlacement,verticalGap:e.verticalGap}),p):Bk.default.createElement(Bk.default.Fragment,null),u,a]}var $U,ZU,Bk,YU,zb=R(()=>{nr(),$U=ee(Oe()),ZU=ee(Oe()),Bk=ee(Oe()),Nj(),YU=ee(Ia()),XU(),Ff(),qm()}),JU,QU,lg,Uk=R(()=>{Xe(),yl(),QU=le(vl)(JU||(JU=Y([`
  padding: 1em;
  max-width: 240px;
  pointer-events: none !important;
  --popover-outer-stroke: transparent;
  --popover-inner-stroke: #45464d;
`]))),lg=QU}),xl,eV,tV,nV,rV,iV,oV,aV,sV,lV,Tse=R(()=>{sn(),Ge(),xl=ee(Oe()),Xe(),VU(),zb(),Uk(),jU(),tV=le.div(eV||(eV=Y([`
  padding: 8px 10px;
  position: relative;
  background-color: #6d232352;
  &:before {
    position: absolute;
    content: ' ';
    display: block;
    left: 0;
    top: 0;
    bottom: 0;
    width: 2px;
    background-color: #ff000070;
  }
`]))),rV=le.div(nV||(nV=Y([`
  margin-bottom: 1em;
  & a {
    color: inherit;
  }
`]))),oV=le.div(iV||(iV=Y([`
  display: flex;
  gap: 8px;
`]))),aV=({projectId:e})=>{let n=In(_e().atomP.ephemeral.coreByProject[e].loadingState);return n&&n.type==="browserStateIsNotBasedOnDiskState"?xl.default.createElement(sV,{loadingState:n,projectId:e}):null},sV=({projectId:e,loadingState:n})=>{let r=()=>{_e().transaction(({drafts:v,stateEditors:y})=>{y.coreByProject.historic.revisionHistory.add({projectId:e,revision:n.onDiskState.revisionHistory[0]}),y.coreByProject.historic.revisionHistory.add({projectId:e,revision:UU()}),v.ephemeral.coreByProject[e].loadingState={type:"loaded"}})},a=()=>{_e().transaction(({drafts:v})=>{v.historic.coreByProject[e]=n.onDiskState,v.ephemeral.coreByProject[e].loadingState={type:"loaded"}})},[c,u]=sg({},()=>xl.default.createElement(lg,null,"The browser's state will override the disk state.")),[f,p]=sg({},()=>xl.default.createElement(lg,null,"The disk's state will override the browser's state."));return xl.default.createElement(tV,null,xl.default.createElement(rV,null,"Browser state is not based on disk state."," ",xl.default.createElement("a",{href:"https://www.theatrejs.com/docs/latest/manual/projects#state",target:"_blank"},"Learn more.")),xl.default.createElement(oV,null,c,xl.default.createElement(jk,{onClick:r,ref:u},"Use browser's state"),f,xl.default.createElement(jk,{onClick:a,ref:p},"Use disk state")))},lV=aV}),Mse=se((e,n)=>{(function(r){typeof e=="object"&&typeof n!="undefined"?n.exports=r():(typeof window!="undefined"?window:typeof $r!="undefined"?$r:typeof self!="undefined"?self:this).JSZip=r()})(function(){return function r(a,c,u){function f(y,k){if(!c[y]){if(!a[y]){var P=typeof rP=="function"&&rP;if(!k&&P)return P(y,!0);if(p)return p(y,!0);var T=new Error("Cannot find module '"+y+"'");throw T.code="MODULE_NOT_FOUND",T}var E=c[y]={exports:{}};a[y][0].call(E.exports,function(A){var C=a[y][1][A];return f(C||A)},E,E.exports,r,a,c,u)}return c[y].exports}for(var p=typeof rP=="function"&&rP,v=0;v<u.length;v++)f(u[v]);return f}({1:[function(r,a,c){var u=r("./utils"),f=r("./support"),p="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";c.encode=function(v){for(var y,k,P,T,E,A,C,L=[],N=0,U=v.length,G=U,Q=u.getTypeOf(v)!=="string";N<v.length;)G=U-N,P=Q?(y=v[N++],k=N<U?v[N++]:0,N<U?v[N++]:0):(y=v.charCodeAt(N++),k=N<U?v.charCodeAt(N++):0,N<U?v.charCodeAt(N++):0),T=y>>2,E=(3&y)<<4|k>>4,A=1<G?(15&k)<<2|P>>6:64,C=2<G?63&P:64,L.push(p.charAt(T)+p.charAt(E)+p.charAt(A)+p.charAt(C));return L.join("")},c.decode=function(v){var y,k,P,T,E,A,C=0,L=0,N="data:";if(v.substr(0,N.length)===N)throw new Error("Invalid base64 input, it looks like a data url.");var U,G=3*(v=v.replace(/[^A-Za-z0-9+/=]/g,"")).length/4;if(v.charAt(v.length-1)===p.charAt(64)&&G--,v.charAt(v.length-2)===p.charAt(64)&&G--,G%1!=0)throw new Error("Invalid base64 input, bad content length.");for(U=f.uint8array?new Uint8Array(0|G):new Array(0|G);C<v.length;)y=p.indexOf(v.charAt(C++))<<2|(T=p.indexOf(v.charAt(C++)))>>4,k=(15&T)<<4|(E=p.indexOf(v.charAt(C++)))>>2,P=(3&E)<<6|(A=p.indexOf(v.charAt(C++))),U[L++]=y,E!==64&&(U[L++]=k),A!==64&&(U[L++]=P);return U}},{"./support":30,"./utils":32}],2:[function(r,a,c){var u=r("./external"),f=r("./stream/DataWorker"),p=r("./stream/Crc32Probe"),v=r("./stream/DataLengthProbe");function y(k,P,T,E,A){this.compressedSize=k,this.uncompressedSize=P,this.crc32=T,this.compression=E,this.compressedContent=A}y.prototype={getContentWorker:function(){var k=new f(u.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new v("data_length")),P=this;return k.on("end",function(){if(this.streamInfo.data_length!==P.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")}),k},getCompressedWorker:function(){return new f(u.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},y.createWorkerFrom=function(k,P,T){return k.pipe(new p).pipe(new v("uncompressedSize")).pipe(P.compressWorker(T)).pipe(new v("compressedSize")).withStreamInfo("compression",P)},a.exports=y},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(r,a,c){var u=r("./stream/GenericWorker");c.STORE={magic:"\0\0",compressWorker:function(){return new u("STORE compression")},uncompressWorker:function(){return new u("STORE decompression")}},c.DEFLATE=r("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(r,a,c){var u=r("./utils"),f=function(){for(var p,v=[],y=0;y<256;y++){p=y;for(var k=0;k<8;k++)p=1&p?3988292384^p>>>1:p>>>1;v[y]=p}return v}();a.exports=function(p,v){return p!==void 0&&p.length?u.getTypeOf(p)!=="string"?function(y,k,P,T){var E=f,A=T+P;y^=-1;for(var C=T;C<A;C++)y=y>>>8^E[255&(y^k[C])];return-1^y}(0|v,p,p.length,0):function(y,k,P,T){var E=f,A=T+P;y^=-1;for(var C=T;C<A;C++)y=y>>>8^E[255&(y^k.charCodeAt(C))];return-1^y}(0|v,p,p.length,0):0}},{"./utils":32}],5:[function(r,a,c){c.base64=!1,c.binary=!1,c.dir=!1,c.createFolders=!0,c.date=null,c.compression=null,c.compressionOptions=null,c.comment=null,c.unixPermissions=null,c.dosPermissions=null},{}],6:[function(r,a,c){var u=null;u=typeof Promise!="undefined"?Promise:r("lie"),a.exports={Promise:u}},{lie:37}],7:[function(r,a,c){var u=typeof Uint8Array!="undefined"&&typeof Uint16Array!="undefined"&&typeof Uint32Array!="undefined",f=r("pako"),p=r("./utils"),v=r("./stream/GenericWorker"),y=u?"uint8array":"array";function k(P,T){v.call(this,"FlateWorker/"+P),this._pako=null,this._pakoAction=P,this._pakoOptions=T,this.meta={}}c.magic="\b\0",p.inherits(k,v),k.prototype.processChunk=function(P){this.meta=P.meta,this._pako===null&&this._createPako(),this._pako.push(p.transformTo(y,P.data),!1)},k.prototype.flush=function(){v.prototype.flush.call(this),this._pako===null&&this._createPako(),this._pako.push([],!0)},k.prototype.cleanUp=function(){v.prototype.cleanUp.call(this),this._pako=null},k.prototype._createPako=function(){this._pako=new f[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var P=this;this._pako.onData=function(T){P.push({data:T,meta:P.meta})}},c.compressWorker=function(P){return new k("Deflate",P)},c.uncompressWorker=function(){return new k("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(r,a,c){function u(E,A){var C,L="";for(C=0;C<A;C++)L+=String.fromCharCode(255&E),E>>>=8;return L}function f(E,A,C,L,N,U){var G,Q,J=E.file,ie=E.compression,xe=U!==y.utf8encode,Me=p.transformTo("string",U(J.name)),ue=p.transformTo("string",y.utf8encode(J.name)),Ae=J.comment,We=p.transformTo("string",U(Ae)),oe=p.transformTo("string",y.utf8encode(Ae)),De=ue.length!==J.name.length,q=oe.length!==Ae.length,Fe="",Pt="",Pe="",ke=J.dir,Be=J.date,mt={crc32:0,compressedSize:0,uncompressedSize:0};A&&!C||(mt.crc32=E.crc32,mt.compressedSize=E.compressedSize,mt.uncompressedSize=E.uncompressedSize);var ae=0;A&&(ae|=8),xe||!De&&!q||(ae|=2048);var de=0,Ze=0;ke&&(de|=16),N==="UNIX"?(Ze=798,de|=function(rt,Ue){var $t=rt;return rt||($t=Ue?16893:33204),(65535&$t)<<16}(J.unixPermissions,ke)):(Ze=20,de|=function(rt){return 63&(rt||0)}(J.dosPermissions)),G=Be.getUTCHours(),G<<=6,G|=Be.getUTCMinutes(),G<<=5,G|=Be.getUTCSeconds()/2,Q=Be.getUTCFullYear()-1980,Q<<=4,Q|=Be.getUTCMonth()+1,Q<<=5,Q|=Be.getUTCDate(),De&&(Pt=u(1,1)+u(k(Me),4)+ue,Fe+="up"+u(Pt.length,2)+Pt),q&&(Pe=u(1,1)+u(k(We),4)+oe,Fe+="uc"+u(Pe.length,2)+Pe);var et="";return et+=`
\0`,et+=u(ae,2),et+=ie.magic,et+=u(G,2),et+=u(Q,2),et+=u(mt.crc32,4),et+=u(mt.compressedSize,4),et+=u(mt.uncompressedSize,4),et+=u(Me.length,2),et+=u(Fe.length,2),{fileRecord:P.LOCAL_FILE_HEADER+et+Me+Fe,dirRecord:P.CENTRAL_FILE_HEADER+u(Ze,2)+et+u(We.length,2)+"\0\0\0\0"+u(de,4)+u(L,4)+Me+Fe+We}}var p=r("../utils"),v=r("../stream/GenericWorker"),y=r("../utf8"),k=r("../crc32"),P=r("../signature");function T(E,A,C,L){v.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=A,this.zipPlatform=C,this.encodeFileName=L,this.streamFiles=E,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}p.inherits(T,v),T.prototype.push=function(E){var A=E.meta.percent||0,C=this.entriesCount,L=this._sources.length;this.accumulate?this.contentBuffer.push(E):(this.bytesWritten+=E.data.length,v.prototype.push.call(this,{data:E.data,meta:{currentFile:this.currentFile,percent:C?(A+100*(C-L-1))/C:100}}))},T.prototype.openedSource=function(E){this.currentSourceOffset=this.bytesWritten,this.currentFile=E.file.name;var A=this.streamFiles&&!E.file.dir;if(A){var C=f(E,A,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:C.fileRecord,meta:{percent:0}})}else this.accumulate=!0},T.prototype.closedSource=function(E){this.accumulate=!1;var A=this.streamFiles&&!E.file.dir,C=f(E,A,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(C.dirRecord),A)this.push({data:function(L){return P.DATA_DESCRIPTOR+u(L.crc32,4)+u(L.compressedSize,4)+u(L.uncompressedSize,4)}(E),meta:{percent:100}});else for(this.push({data:C.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},T.prototype.flush=function(){for(var E=this.bytesWritten,A=0;A<this.dirRecords.length;A++)this.push({data:this.dirRecords[A],meta:{percent:100}});var C=this.bytesWritten-E,L=function(N,U,G,Q,J){var ie=p.transformTo("string",J(Q));return P.CENTRAL_DIRECTORY_END+"\0\0\0\0"+u(N,2)+u(N,2)+u(U,4)+u(G,4)+u(ie.length,2)+ie}(this.dirRecords.length,C,E,this.zipComment,this.encodeFileName);this.push({data:L,meta:{percent:100}})},T.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},T.prototype.registerPrevious=function(E){this._sources.push(E);var A=this;return E.on("data",function(C){A.processChunk(C)}),E.on("end",function(){A.closedSource(A.previous.streamInfo),A._sources.length?A.prepareNextSource():A.end()}),E.on("error",function(C){A.error(C)}),this},T.prototype.resume=function(){return!!v.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},T.prototype.error=function(E){var A=this._sources;if(!v.prototype.error.call(this,E))return!1;for(var C=0;C<A.length;C++)try{A[C].error(E)}catch{}return!0},T.prototype.lock=function(){v.prototype.lock.call(this);for(var E=this._sources,A=0;A<E.length;A++)E[A].lock()},a.exports=T},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(r,a,c){var u=r("../compressions"),f=r("./ZipFileWorker");c.generateWorker=function(p,v,y){var k=new f(v.streamFiles,y,v.platform,v.encodeFileName),P=0;try{p.forEach(function(T,E){P++;var A=function(U,G){var Q=U||G,J=u[Q];if(!J)throw new Error(Q+" is not a valid compression method !");return J}(E.options.compression,v.compression),C=E.options.compressionOptions||v.compressionOptions||{},L=E.dir,N=E.date;E._compressWorker(A,C).withStreamInfo("file",{name:T,dir:L,date:N,comment:E.comment||"",unixPermissions:E.unixPermissions,dosPermissions:E.dosPermissions}).pipe(k)}),k.entriesCount=P}catch(T){k.error(T)}return k}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(r,a,c){function u(){if(!(this instanceof u))return new u;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var f=new u;for(var p in this)typeof this[p]!="function"&&(f[p]=this[p]);return f}}(u.prototype=r("./object")).loadAsync=r("./load"),u.support=r("./support"),u.defaults=r("./defaults"),u.version="3.10.1",u.loadAsync=function(f,p){return new u().loadAsync(f,p)},u.external=r("./external"),a.exports=u},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(r,a,c){var u=r("./utils"),f=r("./external"),p=r("./utf8"),v=r("./zipEntries"),y=r("./stream/Crc32Probe"),k=r("./nodejsUtils");function P(T){return new f.Promise(function(E,A){var C=T.decompressed.getContentWorker().pipe(new y);C.on("error",function(L){A(L)}).on("end",function(){C.streamInfo.crc32!==T.decompressed.crc32?A(new Error("Corrupted zip : CRC32 mismatch")):E()}).resume()})}a.exports=function(T,E){var A=this;return E=u.extend(E||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:p.utf8decode}),k.isNode&&k.isStream(T)?f.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):u.prepareContent("the loaded zip file",T,!0,E.optimizedBinaryString,E.base64).then(function(C){var L=new v(E);return L.load(C),L}).then(function(C){var L=[f.Promise.resolve(C)],N=C.files;if(E.checkCRC32)for(var U=0;U<N.length;U++)L.push(P(N[U]));return f.Promise.all(L)}).then(function(C){for(var L=C.shift(),N=L.files,U=0;U<N.length;U++){var G=N[U],Q=G.fileNameStr,J=u.resolve(G.fileNameStr);A.file(J,G.decompressed,{binary:!0,optimizedBinaryString:!0,date:G.date,dir:G.dir,comment:G.fileCommentStr.length?G.fileCommentStr:null,unixPermissions:G.unixPermissions,dosPermissions:G.dosPermissions,createFolders:E.createFolders}),G.dir||(A.file(J).unsafeOriginalName=Q)}return L.zipComment.length&&(A.comment=L.zipComment),A})}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(r,a,c){var u=r("../utils"),f=r("../stream/GenericWorker");function p(v,y){f.call(this,"Nodejs stream input adapter for "+v),this._upstreamEnded=!1,this._bindStream(y)}u.inherits(p,f),p.prototype._bindStream=function(v){var y=this;(this._stream=v).pause(),v.on("data",function(k){y.push({data:k,meta:{percent:0}})}).on("error",function(k){y.isPaused?this.generatedError=k:y.error(k)}).on("end",function(){y.isPaused?y._upstreamEnded=!0:y.end()})},p.prototype.pause=function(){return!!f.prototype.pause.call(this)&&(this._stream.pause(),!0)},p.prototype.resume=function(){return!!f.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},a.exports=p},{"../stream/GenericWorker":28,"../utils":32}],13:[function(r,a,c){var u=r("readable-stream").Readable;function f(p,v,y){u.call(this,v),this._helper=p;var k=this;p.on("data",function(P,T){k.push(P)||k._helper.pause(),y&&y(T)}).on("error",function(P){k.emit("error",P)}).on("end",function(){k.push(null)})}r("../utils").inherits(f,u),f.prototype._read=function(){this._helper.resume()},a.exports=f},{"../utils":32,"readable-stream":16}],14:[function(r,a,c){a.exports={isNode:typeof Buffer!="undefined",newBufferFrom:function(u,f){if(Buffer.from&&Buffer.from!==Uint8Array.from)return Buffer.from(u,f);if(typeof u=="number")throw new Error('The "data" argument must not be a number');return new Buffer(u,f)},allocBuffer:function(u){if(Buffer.alloc)return Buffer.alloc(u);var f=new Buffer(u);return f.fill(0),f},isBuffer:function(u){return Buffer.isBuffer(u)},isStream:function(u){return u&&typeof u.on=="function"&&typeof u.pause=="function"&&typeof u.resume=="function"}}},{}],15:[function(r,a,c){function u(J,ie,xe){var Me,ue=p.getTypeOf(ie),Ae=p.extend(xe||{},k);Ae.date=Ae.date||new Date,Ae.compression!==null&&(Ae.compression=Ae.compression.toUpperCase()),typeof Ae.unixPermissions=="string"&&(Ae.unixPermissions=parseInt(Ae.unixPermissions,8)),Ae.unixPermissions&&16384&Ae.unixPermissions&&(Ae.dir=!0),Ae.dosPermissions&&16&Ae.dosPermissions&&(Ae.dir=!0),Ae.dir&&(J=N(J)),Ae.createFolders&&(Me=L(J))&&U.call(this,Me,!0);var We=ue==="string"&&Ae.binary===!1&&Ae.base64===!1;xe&&xe.binary!==void 0||(Ae.binary=!We),(ie instanceof P&&ie.uncompressedSize===0||Ae.dir||!ie||ie.length===0)&&(Ae.base64=!1,Ae.binary=!0,ie="",Ae.compression="STORE",ue="string");var oe=null;oe=ie instanceof P||ie instanceof v?ie:A.isNode&&A.isStream(ie)?new C(J,ie):p.prepareContent(J,ie,Ae.binary,Ae.optimizedBinaryString,Ae.base64);var De=new T(J,oe,Ae);this.files[J]=De}var f=r("./utf8"),p=r("./utils"),v=r("./stream/GenericWorker"),y=r("./stream/StreamHelper"),k=r("./defaults"),P=r("./compressedObject"),T=r("./zipObject"),E=r("./generate"),A=r("./nodejsUtils"),C=r("./nodejs/NodejsStreamInputAdapter"),L=function(J){J.slice(-1)==="/"&&(J=J.substring(0,J.length-1));var ie=J.lastIndexOf("/");return 0<ie?J.substring(0,ie):""},N=function(J){return J.slice(-1)!=="/"&&(J+="/"),J},U=function(J,ie){return ie=ie!==void 0?ie:k.createFolders,J=N(J),this.files[J]||u.call(this,J,null,{dir:!0,createFolders:ie}),this.files[J]};function G(J){return Object.prototype.toString.call(J)==="[object RegExp]"}var Q={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(J){var ie,xe,Me;for(ie in this.files)Me=this.files[ie],(xe=ie.slice(this.root.length,ie.length))&&ie.slice(0,this.root.length)===this.root&&J(xe,Me)},filter:function(J){var ie=[];return this.forEach(function(xe,Me){J(xe,Me)&&ie.push(Me)}),ie},file:function(J,ie,xe){if(arguments.length!==1)return J=this.root+J,u.call(this,J,ie,xe),this;if(G(J)){var Me=J;return this.filter(function(Ae,We){return!We.dir&&Me.test(Ae)})}var ue=this.files[this.root+J];return ue&&!ue.dir?ue:null},folder:function(J){if(!J)return this;if(G(J))return this.filter(function(ue,Ae){return Ae.dir&&J.test(ue)});var ie=this.root+J,xe=U.call(this,ie),Me=this.clone();return Me.root=xe.name,Me},remove:function(J){J=this.root+J;var ie=this.files[J];if(ie||(J.slice(-1)!=="/"&&(J+="/"),ie=this.files[J]),ie&&!ie.dir)delete this.files[J];else for(var xe=this.filter(function(ue,Ae){return Ae.name.slice(0,J.length)===J}),Me=0;Me<xe.length;Me++)delete this.files[xe[Me].name];return this},generate:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(J){var ie,xe={};try{if((xe=p.extend(J||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:f.utf8encode})).type=xe.type.toLowerCase(),xe.compression=xe.compression.toUpperCase(),xe.type==="binarystring"&&(xe.type="string"),!xe.type)throw new Error("No output type specified.");p.checkSupport(xe.type),xe.platform!=="darwin"&&xe.platform!=="freebsd"&&xe.platform!=="linux"&&xe.platform!=="sunos"||(xe.platform="UNIX"),xe.platform==="win32"&&(xe.platform="DOS");var Me=xe.comment||this.comment||"";ie=E.generateWorker(this,xe,Me)}catch(ue){(ie=new v("error")).error(ue)}return new y(ie,xe.type||"string",xe.mimeType)},generateAsync:function(J,ie){return this.generateInternalStream(J).accumulate(ie)},generateNodeStream:function(J,ie){return(J=J||{}).type||(J.type="nodebuffer"),this.generateInternalStream(J).toNodejsStream(ie)}};a.exports=Q},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(r,a,c){a.exports=r("stream")},{stream:void 0}],17:[function(r,a,c){var u=r("./DataReader");function f(p){u.call(this,p);for(var v=0;v<this.data.length;v++)p[v]=255&p[v]}r("../utils").inherits(f,u),f.prototype.byteAt=function(p){return this.data[this.zero+p]},f.prototype.lastIndexOfSignature=function(p){for(var v=p.charCodeAt(0),y=p.charCodeAt(1),k=p.charCodeAt(2),P=p.charCodeAt(3),T=this.length-4;0<=T;--T)if(this.data[T]===v&&this.data[T+1]===y&&this.data[T+2]===k&&this.data[T+3]===P)return T-this.zero;return-1},f.prototype.readAndCheckSignature=function(p){var v=p.charCodeAt(0),y=p.charCodeAt(1),k=p.charCodeAt(2),P=p.charCodeAt(3),T=this.readData(4);return v===T[0]&&y===T[1]&&k===T[2]&&P===T[3]},f.prototype.readData=function(p){if(this.checkOffset(p),p===0)return[];var v=this.data.slice(this.zero+this.index,this.zero+this.index+p);return this.index+=p,v},a.exports=f},{"../utils":32,"./DataReader":18}],18:[function(r,a,c){var u=r("../utils");function f(p){this.data=p,this.length=p.length,this.index=0,this.zero=0}f.prototype={checkOffset:function(p){this.checkIndex(this.index+p)},checkIndex:function(p){if(this.length<this.zero+p||p<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+p+"). Corrupted zip ?")},setIndex:function(p){this.checkIndex(p),this.index=p},skip:function(p){this.setIndex(this.index+p)},byteAt:function(){},readInt:function(p){var v,y=0;for(this.checkOffset(p),v=this.index+p-1;v>=this.index;v--)y=(y<<8)+this.byteAt(v);return this.index+=p,y},readString:function(p){return u.transformTo("string",this.readData(p))},readData:function(){},lastIndexOfSignature:function(){},readAndCheckSignature:function(){},readDate:function(){var p=this.readInt(4);return new Date(Date.UTC(1980+(p>>25&127),(p>>21&15)-1,p>>16&31,p>>11&31,p>>5&63,(31&p)<<1))}},a.exports=f},{"../utils":32}],19:[function(r,a,c){var u=r("./Uint8ArrayReader");function f(p){u.call(this,p)}r("../utils").inherits(f,u),f.prototype.readData=function(p){this.checkOffset(p);var v=this.data.slice(this.zero+this.index,this.zero+this.index+p);return this.index+=p,v},a.exports=f},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(r,a,c){var u=r("./DataReader");function f(p){u.call(this,p)}r("../utils").inherits(f,u),f.prototype.byteAt=function(p){return this.data.charCodeAt(this.zero+p)},f.prototype.lastIndexOfSignature=function(p){return this.data.lastIndexOf(p)-this.zero},f.prototype.readAndCheckSignature=function(p){return p===this.readData(4)},f.prototype.readData=function(p){this.checkOffset(p);var v=this.data.slice(this.zero+this.index,this.zero+this.index+p);return this.index+=p,v},a.exports=f},{"../utils":32,"./DataReader":18}],21:[function(r,a,c){var u=r("./ArrayReader");function f(p){u.call(this,p)}r("../utils").inherits(f,u),f.prototype.readData=function(p){if(this.checkOffset(p),p===0)return new Uint8Array(0);var v=this.data.subarray(this.zero+this.index,this.zero+this.index+p);return this.index+=p,v},a.exports=f},{"../utils":32,"./ArrayReader":17}],22:[function(r,a,c){var u=r("../utils"),f=r("../support"),p=r("./ArrayReader"),v=r("./StringReader"),y=r("./NodeBufferReader"),k=r("./Uint8ArrayReader");a.exports=function(P){var T=u.getTypeOf(P);return u.checkSupport(T),T!=="string"||f.uint8array?T==="nodebuffer"?new y(P):f.uint8array?new k(u.transformTo("uint8array",P)):new p(u.transformTo("array",P)):new v(P)}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(r,a,c){c.LOCAL_FILE_HEADER="PK",c.CENTRAL_FILE_HEADER="PK",c.CENTRAL_DIRECTORY_END="PK",c.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK\x07",c.ZIP64_CENTRAL_DIRECTORY_END="PK",c.DATA_DESCRIPTOR="PK\x07\b"},{}],24:[function(r,a,c){var u=r("./GenericWorker"),f=r("../utils");function p(v){u.call(this,"ConvertWorker to "+v),this.destType=v}f.inherits(p,u),p.prototype.processChunk=function(v){this.push({data:f.transformTo(this.destType,v.data),meta:v.meta})},a.exports=p},{"../utils":32,"./GenericWorker":28}],25:[function(r,a,c){var u=r("./GenericWorker"),f=r("../crc32");function p(){u.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}r("../utils").inherits(p,u),p.prototype.processChunk=function(v){this.streamInfo.crc32=f(v.data,this.streamInfo.crc32||0),this.push(v)},a.exports=p},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(r,a,c){var u=r("../utils"),f=r("./GenericWorker");function p(v){f.call(this,"DataLengthProbe for "+v),this.propName=v,this.withStreamInfo(v,0)}u.inherits(p,f),p.prototype.processChunk=function(v){if(v){var y=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=y+v.data.length}f.prototype.processChunk.call(this,v)},a.exports=p},{"../utils":32,"./GenericWorker":28}],27:[function(r,a,c){var u=r("../utils"),f=r("./GenericWorker");function p(v){f.call(this,"DataWorker");var y=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,v.then(function(k){y.dataIsReady=!0,y.data=k,y.max=k&&k.length||0,y.type=u.getTypeOf(k),y.isPaused||y._tickAndRepeat()},function(k){y.error(k)})}u.inherits(p,f),p.prototype.cleanUp=function(){f.prototype.cleanUp.call(this),this.data=null},p.prototype.resume=function(){return!!f.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,u.delay(this._tickAndRepeat,[],this)),!0)},p.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(u.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},p.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var v=null,y=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":v=this.data.substring(this.index,y);break;case"uint8array":v=this.data.subarray(this.index,y);break;case"array":case"nodebuffer":v=this.data.slice(this.index,y)}return this.index=y,this.push({data:v,meta:{percent:this.max?this.index/this.max*100:0}})},a.exports=p},{"../utils":32,"./GenericWorker":28}],28:[function(r,a,c){function u(f){this.name=f||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}u.prototype={push:function(f){this.emit("data",f)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(f){this.emit("error",f)}return!0},error:function(f){return!this.isFinished&&(this.isPaused?this.generatedError=f:(this.isFinished=!0,this.emit("error",f),this.previous&&this.previous.error(f),this.cleanUp()),!0)},on:function(f,p){return this._listeners[f].push(p),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(f,p){if(this._listeners[f])for(var v=0;v<this._listeners[f].length;v++)this._listeners[f][v].call(this,p)},pipe:function(f){return f.registerPrevious(this)},registerPrevious:function(f){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=f.streamInfo,this.mergeStreamInfo(),this.previous=f;var p=this;return f.on("data",function(v){p.processChunk(v)}),f.on("end",function(){p.end()}),f.on("error",function(v){p.error(v)}),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;var f=this.isPaused=!1;return this.generatedError&&(this.error(this.generatedError),f=!0),this.previous&&this.previous.resume(),!f},flush:function(){},processChunk:function(f){this.push(f)},withStreamInfo:function(f,p){return this.extraStreamInfo[f]=p,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var f in this.extraStreamInfo)Object.prototype.hasOwnProperty.call(this.extraStreamInfo,f)&&(this.streamInfo[f]=this.extraStreamInfo[f])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var f="Worker "+this.name;return this.previous?this.previous+" -> "+f:f}},a.exports=u},{}],29:[function(r,a,c){var u=r("../utils"),f=r("./ConvertWorker"),p=r("./GenericWorker"),v=r("../base64"),y=r("../support"),k=r("../external"),P=null;if(y.nodestream)try{P=r("../nodejs/NodejsStreamOutputAdapter")}catch{}function T(A,C){return new k.Promise(function(L,N){var U=[],G=A._internalType,Q=A._outputType,J=A._mimeType;A.on("data",function(ie,xe){U.push(ie),C&&C(xe)}).on("error",function(ie){U=[],N(ie)}).on("end",function(){try{var ie=function(xe,Me,ue){switch(xe){case"blob":return u.newBlob(u.transformTo("arraybuffer",Me),ue);case"base64":return v.encode(Me);default:return u.transformTo(xe,Me)}}(Q,function(xe,Me){var ue,Ae=0,We=null,oe=0;for(ue=0;ue<Me.length;ue++)oe+=Me[ue].length;switch(xe){case"string":return Me.join("");case"array":return Array.prototype.concat.apply([],Me);case"uint8array":for(We=new Uint8Array(oe),ue=0;ue<Me.length;ue++)We.set(Me[ue],Ae),Ae+=Me[ue].length;return We;case"nodebuffer":return Buffer.concat(Me);default:throw new Error("concat : unsupported type '"+xe+"'")}}(G,U),J);L(ie)}catch(xe){N(xe)}U=[]}).resume()})}function E(A,C,L){var N=C;switch(C){case"blob":case"arraybuffer":N="uint8array";break;case"base64":N="string"}try{this._internalType=N,this._outputType=C,this._mimeType=L,u.checkSupport(N),this._worker=A.pipe(new f(N)),A.lock()}catch(U){this._worker=new p("error"),this._worker.error(U)}}E.prototype={accumulate:function(A){return T(this,A)},on:function(A,C){var L=this;return A==="data"?this._worker.on(A,function(N){C.call(L,N.data,N.meta)}):this._worker.on(A,function(){u.delay(C,arguments,L)}),this},resume:function(){return u.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(A){if(u.checkSupport("nodestream"),this._outputType!=="nodebuffer")throw new Error(this._outputType+" is not supported by this method");return new P(this,{objectMode:this._outputType!=="nodebuffer"},A)}},a.exports=E},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(r,a,c){if(c.base64=!0,c.array=!0,c.string=!0,c.arraybuffer=typeof ArrayBuffer!="undefined"&&typeof Uint8Array!="undefined",c.nodebuffer=typeof Buffer!="undefined",c.uint8array=typeof Uint8Array!="undefined",typeof ArrayBuffer=="undefined")c.blob=!1;else{var u=new ArrayBuffer(0);try{c.blob=new Blob([u],{type:"application/zip"}).size===0}catch{try{var f=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);f.append(u),c.blob=f.getBlob("application/zip").size===0}catch{c.blob=!1}}}try{c.nodestream=!!r("readable-stream").Readable}catch{c.nodestream=!1}},{"readable-stream":16}],31:[function(r,a,c){for(var u=r("./utils"),f=r("./support"),p=r("./nodejsUtils"),v=r("./stream/GenericWorker"),y=new Array(256),k=0;k<256;k++)y[k]=252<=k?6:248<=k?5:240<=k?4:224<=k?3:192<=k?2:1;y[254]=y[254]=1;function P(){v.call(this,"utf-8 decode"),this.leftOver=null}function T(){v.call(this,"utf-8 encode")}c.utf8encode=function(E){return f.nodebuffer?p.newBufferFrom(E,"utf-8"):function(A){var C,L,N,U,G,Q=A.length,J=0;for(U=0;U<Q;U++)(64512&(L=A.charCodeAt(U)))==55296&&U+1<Q&&(64512&(N=A.charCodeAt(U+1)))==56320&&(L=65536+(L-55296<<10)+(N-56320),U++),J+=L<128?1:L<2048?2:L<65536?3:4;for(C=f.uint8array?new Uint8Array(J):new Array(J),U=G=0;G<J;U++)(64512&(L=A.charCodeAt(U)))==55296&&U+1<Q&&(64512&(N=A.charCodeAt(U+1)))==56320&&(L=65536+(L-55296<<10)+(N-56320),U++),L<128?C[G++]=L:(L<2048?C[G++]=192|L>>>6:(L<65536?C[G++]=224|L>>>12:(C[G++]=240|L>>>18,C[G++]=128|L>>>12&63),C[G++]=128|L>>>6&63),C[G++]=128|63&L);return C}(E)},c.utf8decode=function(E){return f.nodebuffer?u.transformTo("nodebuffer",E).toString("utf-8"):function(A){var C,L,N,U,G=A.length,Q=new Array(2*G);for(C=L=0;C<G;)if((N=A[C++])<128)Q[L++]=N;else if(4<(U=y[N]))Q[L++]=65533,C+=U-1;else{for(N&=U===2?31:U===3?15:7;1<U&&C<G;)N=N<<6|63&A[C++],U--;1<U?Q[L++]=65533:N<65536?Q[L++]=N:(N-=65536,Q[L++]=55296|N>>10&1023,Q[L++]=56320|1023&N)}return Q.length!==L&&(Q.subarray?Q=Q.subarray(0,L):Q.length=L),u.applyFromCharCode(Q)}(E=u.transformTo(f.uint8array?"uint8array":"array",E))},u.inherits(P,v),P.prototype.processChunk=function(E){var A=u.transformTo(f.uint8array?"uint8array":"array",E.data);if(this.leftOver&&this.leftOver.length){if(f.uint8array){var C=A;(A=new Uint8Array(C.length+this.leftOver.length)).set(this.leftOver,0),A.set(C,this.leftOver.length)}else A=this.leftOver.concat(A);this.leftOver=null}var L=function(U,G){var Q;for((G=G||U.length)>U.length&&(G=U.length),Q=G-1;0<=Q&&(192&U[Q])==128;)Q--;return Q<0||Q===0?G:Q+y[U[Q]]>G?Q:G}(A),N=A;L!==A.length&&(f.uint8array?(N=A.subarray(0,L),this.leftOver=A.subarray(L,A.length)):(N=A.slice(0,L),this.leftOver=A.slice(L,A.length))),this.push({data:c.utf8decode(N),meta:E.meta})},P.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:c.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},c.Utf8DecodeWorker=P,u.inherits(T,v),T.prototype.processChunk=function(E){this.push({data:c.utf8encode(E.data),meta:E.meta})},c.Utf8EncodeWorker=T},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(r,a,c){var u=r("./support"),f=r("./base64"),p=r("./nodejsUtils"),v=r("./external");function y(C){return C}function k(C,L){for(var N=0;N<C.length;++N)L[N]=255&C.charCodeAt(N);return L}r("setimmediate"),c.newBlob=function(C,L){c.checkSupport("blob");try{return new Blob([C],{type:L})}catch{try{var N=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return N.append(C),N.getBlob(L)}catch{throw new Error("Bug : can't construct the Blob.")}}};var P={stringifyByChunk:function(C,L,N){var U=[],G=0,Q=C.length;if(Q<=N)return String.fromCharCode.apply(null,C);for(;G<Q;)L==="array"||L==="nodebuffer"?U.push(String.fromCharCode.apply(null,C.slice(G,Math.min(G+N,Q)))):U.push(String.fromCharCode.apply(null,C.subarray(G,Math.min(G+N,Q)))),G+=N;return U.join("")},stringifyByChar:function(C){for(var L="",N=0;N<C.length;N++)L+=String.fromCharCode(C[N]);return L},applyCanBeUsed:{uint8array:function(){try{return u.uint8array&&String.fromCharCode.apply(null,new Uint8Array(1)).length===1}catch{return!1}}(),nodebuffer:function(){try{return u.nodebuffer&&String.fromCharCode.apply(null,p.allocBuffer(1)).length===1}catch{return!1}}()}};function T(C){var L=65536,N=c.getTypeOf(C),U=!0;if(N==="uint8array"?U=P.applyCanBeUsed.uint8array:N==="nodebuffer"&&(U=P.applyCanBeUsed.nodebuffer),U)for(;1<L;)try{return P.stringifyByChunk(C,N,L)}catch{L=Math.floor(L/2)}return P.stringifyByChar(C)}function E(C,L){for(var N=0;N<C.length;N++)L[N]=C[N];return L}c.applyFromCharCode=T;var A={};A.string={string:y,array:function(C){return k(C,new Array(C.length))},arraybuffer:function(C){return A.string.uint8array(C).buffer},uint8array:function(C){return k(C,new Uint8Array(C.length))},nodebuffer:function(C){return k(C,p.allocBuffer(C.length))}},A.array={string:T,array:y,arraybuffer:function(C){return new Uint8Array(C).buffer},uint8array:function(C){return new Uint8Array(C)},nodebuffer:function(C){return p.newBufferFrom(C)}},A.arraybuffer={string:function(C){return T(new Uint8Array(C))},array:function(C){return E(new Uint8Array(C),new Array(C.byteLength))},arraybuffer:y,uint8array:function(C){return new Uint8Array(C)},nodebuffer:function(C){return p.newBufferFrom(new Uint8Array(C))}},A.uint8array={string:T,array:function(C){return E(C,new Array(C.length))},arraybuffer:function(C){return C.buffer},uint8array:y,nodebuffer:function(C){return p.newBufferFrom(C)}},A.nodebuffer={string:T,array:function(C){return E(C,new Array(C.length))},arraybuffer:function(C){return A.nodebuffer.uint8array(C).buffer},uint8array:function(C){return E(C,new Uint8Array(C.length))},nodebuffer:y},c.transformTo=function(C,L){if(L=L||"",!C)return L;c.checkSupport(C);var N=c.getTypeOf(L);return A[N][C](L)},c.resolve=function(C){for(var L=C.split("/"),N=[],U=0;U<L.length;U++){var G=L[U];G==="."||G===""&&U!==0&&U!==L.length-1||(G===".."?N.pop():N.push(G))}return N.join("/")},c.getTypeOf=function(C){return typeof C=="string"?"string":Object.prototype.toString.call(C)==="[object Array]"?"array":u.nodebuffer&&p.isBuffer(C)?"nodebuffer":u.uint8array&&C instanceof Uint8Array?"uint8array":u.arraybuffer&&C instanceof ArrayBuffer?"arraybuffer":void 0},c.checkSupport=function(C){if(!u[C.toLowerCase()])throw new Error(C+" is not supported by this platform")},c.MAX_VALUE_16BITS=65535,c.MAX_VALUE_32BITS=-1,c.pretty=function(C){var L,N,U="";for(N=0;N<(C||"").length;N++)U+="\\x"+((L=C.charCodeAt(N))<16?"0":"")+L.toString(16).toUpperCase();return U},c.delay=function(C,L,N){setImmediate(function(){C.apply(N||null,L||[])})},c.inherits=function(C,L){function N(){}N.prototype=L.prototype,C.prototype=new N},c.extend=function(){var C,L,N={};for(C=0;C<arguments.length;C++)for(L in arguments[C])Object.prototype.hasOwnProperty.call(arguments[C],L)&&N[L]===void 0&&(N[L]=arguments[C][L]);return N},c.prepareContent=function(C,L,N,U,G){return v.Promise.resolve(L).then(function(Q){return u.blob&&(Q instanceof Blob||["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(Q))!==-1)&&typeof FileReader!="undefined"?new v.Promise(function(J,ie){var xe=new FileReader;xe.onload=function(Me){J(Me.target.result)},xe.onerror=function(Me){ie(Me.target.error)},xe.readAsArrayBuffer(Q)}):Q}).then(function(Q){var J=c.getTypeOf(Q);return J?(J==="arraybuffer"?Q=c.transformTo("uint8array",Q):J==="string"&&(G?Q=f.decode(Q):N&&U!==!0&&(Q=function(ie){return k(ie,u.uint8array?new Uint8Array(ie.length):new Array(ie.length))}(Q))),Q):v.Promise.reject(new Error("Can't read the data of '"+C+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))})}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,setimmediate:54}],33:[function(r,a,c){var u=r("./reader/readerFor"),f=r("./utils"),p=r("./signature"),v=r("./zipEntry"),y=r("./support");function k(P){this.files=[],this.loadOptions=P}k.prototype={checkSignature:function(P){if(!this.reader.readAndCheckSignature(P)){this.reader.index-=4;var T=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+f.pretty(T)+", expected "+f.pretty(P)+")")}},isSignature:function(P,T){var E=this.reader.index;this.reader.setIndex(P);var A=this.reader.readString(4)===T;return this.reader.setIndex(E),A},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var P=this.reader.readData(this.zipCommentLength),T=y.uint8array?"uint8array":"array",E=f.transformTo(T,P);this.zipComment=this.loadOptions.decodeFileName(E)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var P,T,E,A=this.zip64EndOfCentralSize-44;0<A;)P=this.reader.readInt(2),T=this.reader.readInt(4),E=this.reader.readData(T),this.zip64ExtensibleData[P]={id:P,length:T,value:E}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var P,T;for(P=0;P<this.files.length;P++)T=this.files[P],this.reader.setIndex(T.localHeaderOffset),this.checkSignature(p.LOCAL_FILE_HEADER),T.readLocalPart(this.reader),T.handleUTF8(),T.processAttributes()},readCentralDir:function(){var P;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(p.CENTRAL_FILE_HEADER);)(P=new v({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(P);if(this.centralDirRecords!==this.files.length&&this.centralDirRecords!==0&&this.files.length===0)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var P=this.reader.lastIndexOfSignature(p.CENTRAL_DIRECTORY_END);if(P<0)throw this.isSignature(0,p.LOCAL_FILE_HEADER)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(P);var T=P;if(this.checkSignature(p.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===f.MAX_VALUE_16BITS||this.diskWithCentralDirStart===f.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===f.MAX_VALUE_16BITS||this.centralDirRecords===f.MAX_VALUE_16BITS||this.centralDirSize===f.MAX_VALUE_32BITS||this.centralDirOffset===f.MAX_VALUE_32BITS){if(this.zip64=!0,(P=this.reader.lastIndexOfSignature(p.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(P),this.checkSignature(p.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,p.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(p.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(p.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var E=this.centralDirOffset+this.centralDirSize;this.zip64&&(E+=20,E+=12+this.zip64EndOfCentralSize);var A=T-E;if(0<A)this.isSignature(T,p.CENTRAL_FILE_HEADER)||(this.reader.zero=A);else if(A<0)throw new Error("Corrupted zip: missing "+Math.abs(A)+" bytes.")},prepareReader:function(P){this.reader=u(P)},load:function(P){this.prepareReader(P),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},a.exports=k},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utils":32,"./zipEntry":34}],34:[function(r,a,c){var u=r("./reader/readerFor"),f=r("./utils"),p=r("./compressedObject"),v=r("./crc32"),y=r("./utf8"),k=r("./compressions"),P=r("./support");function T(E,A){this.options=E,this.loadOptions=A}T.prototype={isEncrypted:function(){return(1&this.bitFlag)==1},useUTF8:function(){return(2048&this.bitFlag)==2048},readLocalPart:function(E){var A,C;if(E.skip(22),this.fileNameLength=E.readInt(2),C=E.readInt(2),this.fileName=E.readData(this.fileNameLength),E.skip(C),this.compressedSize===-1||this.uncompressedSize===-1)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if((A=function(L){for(var N in k)if(Object.prototype.hasOwnProperty.call(k,N)&&k[N].magic===L)return k[N];return null}(this.compressionMethod))===null)throw new Error("Corrupted zip : compression "+f.pretty(this.compressionMethod)+" unknown (inner file : "+f.transformTo("string",this.fileName)+")");this.decompressed=new p(this.compressedSize,this.uncompressedSize,this.crc32,A,E.readData(this.compressedSize))},readCentralPart:function(E){this.versionMadeBy=E.readInt(2),E.skip(2),this.bitFlag=E.readInt(2),this.compressionMethod=E.readString(2),this.date=E.readDate(),this.crc32=E.readInt(4),this.compressedSize=E.readInt(4),this.uncompressedSize=E.readInt(4);var A=E.readInt(2);if(this.extraFieldsLength=E.readInt(2),this.fileCommentLength=E.readInt(2),this.diskNumberStart=E.readInt(2),this.internalFileAttributes=E.readInt(2),this.externalFileAttributes=E.readInt(4),this.localHeaderOffset=E.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");E.skip(A),this.readExtraFields(E),this.parseZIP64ExtraField(E),this.fileComment=E.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var E=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),E==0&&(this.dosPermissions=63&this.externalFileAttributes),E==3&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||this.fileNameStr.slice(-1)!=="/"||(this.dir=!0)},parseZIP64ExtraField:function(){if(this.extraFields[1]){var E=u(this.extraFields[1].value);this.uncompressedSize===f.MAX_VALUE_32BITS&&(this.uncompressedSize=E.readInt(8)),this.compressedSize===f.MAX_VALUE_32BITS&&(this.compressedSize=E.readInt(8)),this.localHeaderOffset===f.MAX_VALUE_32BITS&&(this.localHeaderOffset=E.readInt(8)),this.diskNumberStart===f.MAX_VALUE_32BITS&&(this.diskNumberStart=E.readInt(4))}},readExtraFields:function(E){var A,C,L,N=E.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});E.index+4<N;)A=E.readInt(2),C=E.readInt(2),L=E.readData(C),this.extraFields[A]={id:A,length:C,value:L};E.setIndex(N)},handleUTF8:function(){var E=P.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=y.utf8decode(this.fileName),this.fileCommentStr=y.utf8decode(this.fileComment);else{var A=this.findExtraFieldUnicodePath();if(A!==null)this.fileNameStr=A;else{var C=f.transformTo(E,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(C)}var L=this.findExtraFieldUnicodeComment();if(L!==null)this.fileCommentStr=L;else{var N=f.transformTo(E,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(N)}}},findExtraFieldUnicodePath:function(){var E=this.extraFields[28789];if(E){var A=u(E.value);return A.readInt(1)!==1||v(this.fileName)!==A.readInt(4)?null:y.utf8decode(A.readData(E.length-5))}return null},findExtraFieldUnicodeComment:function(){var E=this.extraFields[25461];if(E){var A=u(E.value);return A.readInt(1)!==1||v(this.fileComment)!==A.readInt(4)?null:y.utf8decode(A.readData(E.length-5))}return null}},a.exports=T},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(r,a,c){function u(A,C,L){this.name=A,this.dir=L.dir,this.date=L.date,this.comment=L.comment,this.unixPermissions=L.unixPermissions,this.dosPermissions=L.dosPermissions,this._data=C,this._dataBinary=L.binary,this.options={compression:L.compression,compressionOptions:L.compressionOptions}}var f=r("./stream/StreamHelper"),p=r("./stream/DataWorker"),v=r("./utf8"),y=r("./compressedObject"),k=r("./stream/GenericWorker");u.prototype={internalStream:function(A){var C=null,L="string";try{if(!A)throw new Error("No output type specified.");var N=(L=A.toLowerCase())==="string"||L==="text";L!=="binarystring"&&L!=="text"||(L="string"),C=this._decompressWorker();var U=!this._dataBinary;U&&!N&&(C=C.pipe(new v.Utf8EncodeWorker)),!U&&N&&(C=C.pipe(new v.Utf8DecodeWorker))}catch(G){(C=new k("error")).error(G)}return new f(C,L,"")},async:function(A,C){return this.internalStream(A).accumulate(C)},nodeStream:function(A,C){return this.internalStream(A||"nodebuffer").toNodejsStream(C)},_compressWorker:function(A,C){if(this._data instanceof y&&this._data.compression.magic===A.magic)return this._data.getCompressedWorker();var L=this._decompressWorker();return this._dataBinary||(L=L.pipe(new v.Utf8EncodeWorker)),y.createWorkerFrom(L,A,C)},_decompressWorker:function(){return this._data instanceof y?this._data.getContentWorker():this._data instanceof k?this._data:new p(this._data)}};for(var P=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],T=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},E=0;E<P.length;E++)u.prototype[P[E]]=T;a.exports=u},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(r,a,c){(function(u){var f,p,v=u.MutationObserver||u.WebKitMutationObserver;if(v){var y=0,k=new v(A),P=u.document.createTextNode("");k.observe(P,{characterData:!0}),f=function(){P.data=y=++y%2}}else if(u.setImmediate||u.MessageChannel===void 0)f="document"in u&&"onreadystatechange"in u.document.createElement("script")?function(){var C=u.document.createElement("script");C.onreadystatechange=function(){A(),C.onreadystatechange=null,C.parentNode.removeChild(C),C=null},u.document.documentElement.appendChild(C)}:function(){setTimeout(A,0)};else{var T=new u.MessageChannel;T.port1.onmessage=A,f=function(){T.port2.postMessage(0)}}var E=[];function A(){var C,L;p=!0;for(var N=E.length;N;){for(L=E,E=[],C=-1;++C<N;)L[C]();N=E.length}p=!1}a.exports=function(C){E.push(C)!==1||p||f()}}).call(this,typeof $r!="undefined"?$r:typeof self!="undefined"?self:typeof window!="undefined"?window:{})},{}],37:[function(r,a,c){var u=r("immediate");function f(){}var p={},v=["REJECTED"],y=["FULFILLED"],k=["PENDING"];function P(N){if(typeof N!="function")throw new TypeError("resolver must be a function");this.state=k,this.queue=[],this.outcome=void 0,N!==f&&C(this,N)}function T(N,U,G){this.promise=N,typeof U=="function"&&(this.onFulfilled=U,this.callFulfilled=this.otherCallFulfilled),typeof G=="function"&&(this.onRejected=G,this.callRejected=this.otherCallRejected)}function E(N,U,G){u(function(){var Q;try{Q=U(G)}catch(J){return p.reject(N,J)}Q===N?p.reject(N,new TypeError("Cannot resolve promise with itself")):p.resolve(N,Q)})}function A(N){var U=N&&N.then;if(N&&(typeof N=="object"||typeof N=="function")&&typeof U=="function")return function(){U.apply(N,arguments)}}function C(N,U){var G=!1;function Q(xe){G||(G=!0,p.reject(N,xe))}function J(xe){G||(G=!0,p.resolve(N,xe))}var ie=L(function(){U(J,Q)});ie.status==="error"&&Q(ie.value)}function L(N,U){var G={};try{G.value=N(U),G.status="success"}catch(Q){G.status="error",G.value=Q}return G}(a.exports=P).prototype.finally=function(N){if(typeof N!="function")return this;var U=this.constructor;return this.then(function(G){return U.resolve(N()).then(function(){return G})},function(G){return U.resolve(N()).then(function(){throw G})})},P.prototype.catch=function(N){return this.then(null,N)},P.prototype.then=function(N,U){if(typeof N!="function"&&this.state===y||typeof U!="function"&&this.state===v)return this;var G=new this.constructor(f);return this.state!==k?E(G,this.state===y?N:U,this.outcome):this.queue.push(new T(G,N,U)),G},T.prototype.callFulfilled=function(N){p.resolve(this.promise,N)},T.prototype.otherCallFulfilled=function(N){E(this.promise,this.onFulfilled,N)},T.prototype.callRejected=function(N){p.reject(this.promise,N)},T.prototype.otherCallRejected=function(N){E(this.promise,this.onRejected,N)},p.resolve=function(N,U){var G=L(A,U);if(G.status==="error")return p.reject(N,G.value);var Q=G.value;if(Q)C(N,Q);else{N.state=y,N.outcome=U;for(var J=-1,ie=N.queue.length;++J<ie;)N.queue[J].callFulfilled(U)}return N},p.reject=function(N,U){N.state=v,N.outcome=U;for(var G=-1,Q=N.queue.length;++G<Q;)N.queue[G].callRejected(U);return N},P.resolve=function(N){return N instanceof this?N:p.resolve(new this(f),N)},P.reject=function(N){var U=new this(f);return p.reject(U,N)},P.all=function(N){var U=this;if(Object.prototype.toString.call(N)!=="[object Array]")return this.reject(new TypeError("must be an array"));var G=N.length,Q=!1;if(!G)return this.resolve([]);for(var J=new Array(G),ie=0,xe=-1,Me=new this(f);++xe<G;)ue(N[xe],xe);return Me;function ue(Ae,We){U.resolve(Ae).then(function(oe){J[We]=oe,++ie!==G||Q||(Q=!0,p.resolve(Me,J))},function(oe){Q||(Q=!0,p.reject(Me,oe))})}},P.race=function(N){var U=this;if(Object.prototype.toString.call(N)!=="[object Array]")return this.reject(new TypeError("must be an array"));var G=N.length,Q=!1;if(!G)return this.resolve([]);for(var J=-1,ie=new this(f);++J<G;)xe=N[J],U.resolve(xe).then(function(Me){Q||(Q=!0,p.resolve(ie,Me))},function(Me){Q||(Q=!0,p.reject(ie,Me))});var xe;return ie}},{immediate:36}],38:[function(r,a,c){var u={};(0,r("./lib/utils/common").assign)(u,r("./lib/deflate"),r("./lib/inflate"),r("./lib/zlib/constants")),a.exports=u},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(r,a,c){var u=r("./zlib/deflate"),f=r("./utils/common"),p=r("./utils/strings"),v=r("./zlib/messages"),y=r("./zlib/zstream"),k=Object.prototype.toString,P=0,T=-1,E=0,A=8;function C(N){if(!(this instanceof C))return new C(N);this.options=f.assign({level:T,method:A,chunkSize:16384,windowBits:15,memLevel:8,strategy:E,to:""},N||{});var U=this.options;U.raw&&0<U.windowBits?U.windowBits=-U.windowBits:U.gzip&&0<U.windowBits&&U.windowBits<16&&(U.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new y,this.strm.avail_out=0;var G=u.deflateInit2(this.strm,U.level,U.method,U.windowBits,U.memLevel,U.strategy);if(G!==P)throw new Error(v[G]);if(U.header&&u.deflateSetHeader(this.strm,U.header),U.dictionary){var Q;if(Q=typeof U.dictionary=="string"?p.string2buf(U.dictionary):k.call(U.dictionary)==="[object ArrayBuffer]"?new Uint8Array(U.dictionary):U.dictionary,(G=u.deflateSetDictionary(this.strm,Q))!==P)throw new Error(v[G]);this._dict_set=!0}}function L(N,U){var G=new C(U);if(G.push(N,!0),G.err)throw G.msg||v[G.err];return G.result}C.prototype.push=function(N,U){var G,Q,J=this.strm,ie=this.options.chunkSize;if(this.ended)return!1;Q=U===~~U?U:U===!0?4:0,typeof N=="string"?J.input=p.string2buf(N):k.call(N)==="[object ArrayBuffer]"?J.input=new Uint8Array(N):J.input=N,J.next_in=0,J.avail_in=J.input.length;do{if(J.avail_out===0&&(J.output=new f.Buf8(ie),J.next_out=0,J.avail_out=ie),(G=u.deflate(J,Q))!==1&&G!==P)return this.onEnd(G),!(this.ended=!0);J.avail_out!==0&&(J.avail_in!==0||Q!==4&&Q!==2)||(this.options.to==="string"?this.onData(p.buf2binstring(f.shrinkBuf(J.output,J.next_out))):this.onData(f.shrinkBuf(J.output,J.next_out)))}while((0<J.avail_in||J.avail_out===0)&&G!==1);return Q===4?(G=u.deflateEnd(this.strm),this.onEnd(G),this.ended=!0,G===P):Q!==2||(this.onEnd(P),!(J.avail_out=0))},C.prototype.onData=function(N){this.chunks.push(N)},C.prototype.onEnd=function(N){N===P&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=f.flattenChunks(this.chunks)),this.chunks=[],this.err=N,this.msg=this.strm.msg},c.Deflate=C,c.deflate=L,c.deflateRaw=function(N,U){return(U=U||{}).raw=!0,L(N,U)},c.gzip=function(N,U){return(U=U||{}).gzip=!0,L(N,U)}},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(r,a,c){var u=r("./zlib/inflate"),f=r("./utils/common"),p=r("./utils/strings"),v=r("./zlib/constants"),y=r("./zlib/messages"),k=r("./zlib/zstream"),P=r("./zlib/gzheader"),T=Object.prototype.toString;function E(C){if(!(this instanceof E))return new E(C);this.options=f.assign({chunkSize:16384,windowBits:0,to:""},C||{});var L=this.options;L.raw&&0<=L.windowBits&&L.windowBits<16&&(L.windowBits=-L.windowBits,L.windowBits===0&&(L.windowBits=-15)),!(0<=L.windowBits&&L.windowBits<16)||C&&C.windowBits||(L.windowBits+=32),15<L.windowBits&&L.windowBits<48&&!(15&L.windowBits)&&(L.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new k,this.strm.avail_out=0;var N=u.inflateInit2(this.strm,L.windowBits);if(N!==v.Z_OK)throw new Error(y[N]);this.header=new P,u.inflateGetHeader(this.strm,this.header)}function A(C,L){var N=new E(L);if(N.push(C,!0),N.err)throw N.msg||y[N.err];return N.result}E.prototype.push=function(C,L){var N,U,G,Q,J,ie,xe=this.strm,Me=this.options.chunkSize,ue=this.options.dictionary,Ae=!1;if(this.ended)return!1;U=L===~~L?L:L===!0?v.Z_FINISH:v.Z_NO_FLUSH,typeof C=="string"?xe.input=p.binstring2buf(C):T.call(C)==="[object ArrayBuffer]"?xe.input=new Uint8Array(C):xe.input=C,xe.next_in=0,xe.avail_in=xe.input.length;do{if(xe.avail_out===0&&(xe.output=new f.Buf8(Me),xe.next_out=0,xe.avail_out=Me),(N=u.inflate(xe,v.Z_NO_FLUSH))===v.Z_NEED_DICT&&ue&&(ie=typeof ue=="string"?p.string2buf(ue):T.call(ue)==="[object ArrayBuffer]"?new Uint8Array(ue):ue,N=u.inflateSetDictionary(this.strm,ie)),N===v.Z_BUF_ERROR&&Ae===!0&&(N=v.Z_OK,Ae=!1),N!==v.Z_STREAM_END&&N!==v.Z_OK)return this.onEnd(N),!(this.ended=!0);xe.next_out&&(xe.avail_out!==0&&N!==v.Z_STREAM_END&&(xe.avail_in!==0||U!==v.Z_FINISH&&U!==v.Z_SYNC_FLUSH)||(this.options.to==="string"?(G=p.utf8border(xe.output,xe.next_out),Q=xe.next_out-G,J=p.buf2string(xe.output,G),xe.next_out=Q,xe.avail_out=Me-Q,Q&&f.arraySet(xe.output,xe.output,G,Q,0),this.onData(J)):this.onData(f.shrinkBuf(xe.output,xe.next_out)))),xe.avail_in===0&&xe.avail_out===0&&(Ae=!0)}while((0<xe.avail_in||xe.avail_out===0)&&N!==v.Z_STREAM_END);return N===v.Z_STREAM_END&&(U=v.Z_FINISH),U===v.Z_FINISH?(N=u.inflateEnd(this.strm),this.onEnd(N),this.ended=!0,N===v.Z_OK):U!==v.Z_SYNC_FLUSH||(this.onEnd(v.Z_OK),!(xe.avail_out=0))},E.prototype.onData=function(C){this.chunks.push(C)},E.prototype.onEnd=function(C){C===v.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=f.flattenChunks(this.chunks)),this.chunks=[],this.err=C,this.msg=this.strm.msg},c.Inflate=E,c.inflate=A,c.inflateRaw=function(C,L){return(L=L||{}).raw=!0,A(C,L)},c.ungzip=A},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(r,a,c){var u=typeof Uint8Array!="undefined"&&typeof Uint16Array!="undefined"&&typeof Int32Array!="undefined";c.assign=function(v){for(var y=Array.prototype.slice.call(arguments,1);y.length;){var k=y.shift();if(k){if(typeof k!="object")throw new TypeError(k+"must be non-object");for(var P in k)k.hasOwnProperty(P)&&(v[P]=k[P])}}return v},c.shrinkBuf=function(v,y){return v.length===y?v:v.subarray?v.subarray(0,y):(v.length=y,v)};var f={arraySet:function(v,y,k,P,T){if(y.subarray&&v.subarray)v.set(y.subarray(k,k+P),T);else for(var E=0;E<P;E++)v[T+E]=y[k+E]},flattenChunks:function(v){var y,k,P,T,E,A;for(y=P=0,k=v.length;y<k;y++)P+=v[y].length;for(A=new Uint8Array(P),y=T=0,k=v.length;y<k;y++)E=v[y],A.set(E,T),T+=E.length;return A}},p={arraySet:function(v,y,k,P,T){for(var E=0;E<P;E++)v[T+E]=y[k+E]},flattenChunks:function(v){return[].concat.apply([],v)}};c.setTyped=function(v){v?(c.Buf8=Uint8Array,c.Buf16=Uint16Array,c.Buf32=Int32Array,c.assign(c,f)):(c.Buf8=Array,c.Buf16=Array,c.Buf32=Array,c.assign(c,p))},c.setTyped(u)},{}],42:[function(r,a,c){var u=r("./common"),f=!0,p=!0;try{String.fromCharCode.apply(null,[0])}catch{f=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{p=!1}for(var v=new u.Buf8(256),y=0;y<256;y++)v[y]=252<=y?6:248<=y?5:240<=y?4:224<=y?3:192<=y?2:1;function k(P,T){if(T<65537&&(P.subarray&&p||!P.subarray&&f))return String.fromCharCode.apply(null,u.shrinkBuf(P,T));for(var E="",A=0;A<T;A++)E+=String.fromCharCode(P[A]);return E}v[254]=v[254]=1,c.string2buf=function(P){var T,E,A,C,L,N=P.length,U=0;for(C=0;C<N;C++)(64512&(E=P.charCodeAt(C)))==55296&&C+1<N&&(64512&(A=P.charCodeAt(C+1)))==56320&&(E=65536+(E-55296<<10)+(A-56320),C++),U+=E<128?1:E<2048?2:E<65536?3:4;for(T=new u.Buf8(U),C=L=0;L<U;C++)(64512&(E=P.charCodeAt(C)))==55296&&C+1<N&&(64512&(A=P.charCodeAt(C+1)))==56320&&(E=65536+(E-55296<<10)+(A-56320),C++),E<128?T[L++]=E:(E<2048?T[L++]=192|E>>>6:(E<65536?T[L++]=224|E>>>12:(T[L++]=240|E>>>18,T[L++]=128|E>>>12&63),T[L++]=128|E>>>6&63),T[L++]=128|63&E);return T},c.buf2binstring=function(P){return k(P,P.length)},c.binstring2buf=function(P){for(var T=new u.Buf8(P.length),E=0,A=T.length;E<A;E++)T[E]=P.charCodeAt(E);return T},c.buf2string=function(P,T){var E,A,C,L,N=T||P.length,U=new Array(2*N);for(E=A=0;E<N;)if((C=P[E++])<128)U[A++]=C;else if(4<(L=v[C]))U[A++]=65533,E+=L-1;else{for(C&=L===2?31:L===3?15:7;1<L&&E<N;)C=C<<6|63&P[E++],L--;1<L?U[A++]=65533:C<65536?U[A++]=C:(C-=65536,U[A++]=55296|C>>10&1023,U[A++]=56320|1023&C)}return k(U,A)},c.utf8border=function(P,T){var E;for((T=T||P.length)>P.length&&(T=P.length),E=T-1;0<=E&&(192&P[E])==128;)E--;return E<0||E===0?T:E+v[P[E]]>T?E:T}},{"./common":41}],43:[function(r,a,c){a.exports=function(u,f,p,v){for(var y=65535&u|0,k=u>>>16&65535|0,P=0;p!==0;){for(p-=P=2e3<p?2e3:p;k=k+(y=y+f[v++]|0)|0,--P;);y%=65521,k%=65521}return y|k<<16|0}},{}],44:[function(r,a,c){a.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(r,a,c){var u=function(){for(var f,p=[],v=0;v<256;v++){f=v;for(var y=0;y<8;y++)f=1&f?3988292384^f>>>1:f>>>1;p[v]=f}return p}();a.exports=function(f,p,v,y){var k=u,P=y+v;f^=-1;for(var T=y;T<P;T++)f=f>>>8^k[255&(f^p[T])];return-1^f}},{}],46:[function(r,a,c){var u,f=r("../utils/common"),p=r("./trees"),v=r("./adler32"),y=r("./crc32"),k=r("./messages"),P=0,T=4,E=0,A=-2,C=-1,L=4,N=2,U=8,G=9,Q=286,J=30,ie=19,xe=2*Q+1,Me=15,ue=3,Ae=258,We=Ae+ue+1,oe=42,De=113,q=1,Fe=2,Pt=3,Pe=4;function ke($,ot){return $.msg=k[ot],ot}function Be($){return($<<1)-(4<$?9:0)}function mt($){for(var ot=$.length;0<=--ot;)$[ot]=0}function ae($){var ot=$.state,it=ot.pending;it>$.avail_out&&(it=$.avail_out),it!==0&&(f.arraySet($.output,ot.pending_buf,ot.pending_out,it,$.next_out),$.next_out+=it,ot.pending_out+=it,$.total_out+=it,$.avail_out-=it,ot.pending-=it,ot.pending===0&&(ot.pending_out=0))}function de($,ot){p._tr_flush_block($,0<=$.block_start?$.block_start:-1,$.strstart-$.block_start,ot),$.block_start=$.strstart,ae($.strm)}function Ze($,ot){$.pending_buf[$.pending++]=ot}function et($,ot){$.pending_buf[$.pending++]=ot>>>8&255,$.pending_buf[$.pending++]=255&ot}function rt($,ot){var it,be,ge=$.max_chain_length,Ve=$.strstart,vt=$.prev_length,wt=$.nice_match,Ye=$.strstart>$.w_size-We?$.strstart-($.w_size-We):0,Ct=$.window,_t=$.w_mask,St=$.prev,un=$.strstart+Ae,ir=Ct[Ve+vt-1],Pn=Ct[Ve+vt];$.prev_length>=$.good_match&&(ge>>=2),wt>$.lookahead&&(wt=$.lookahead);do if(Ct[(it=ot)+vt]===Pn&&Ct[it+vt-1]===ir&&Ct[it]===Ct[Ve]&&Ct[++it]===Ct[Ve+1]){Ve+=2,it++;do;while(Ct[++Ve]===Ct[++it]&&Ct[++Ve]===Ct[++it]&&Ct[++Ve]===Ct[++it]&&Ct[++Ve]===Ct[++it]&&Ct[++Ve]===Ct[++it]&&Ct[++Ve]===Ct[++it]&&Ct[++Ve]===Ct[++it]&&Ct[++Ve]===Ct[++it]&&Ve<un);if(be=Ae-(un-Ve),Ve=un-Ae,vt<be){if($.match_start=ot,wt<=(vt=be))break;ir=Ct[Ve+vt-1],Pn=Ct[Ve+vt]}}while((ot=St[ot&_t])>Ye&&--ge!=0);return vt<=$.lookahead?vt:$.lookahead}function Ue($){var ot,it,be,ge,Ve,vt,wt,Ye,Ct,_t,St=$.w_size;do{if(ge=$.window_size-$.lookahead-$.strstart,$.strstart>=St+(St-We)){for(f.arraySet($.window,$.window,St,St,0),$.match_start-=St,$.strstart-=St,$.block_start-=St,ot=it=$.hash_size;be=$.head[--ot],$.head[ot]=St<=be?be-St:0,--it;);for(ot=it=St;be=$.prev[--ot],$.prev[ot]=St<=be?be-St:0,--it;);ge+=St}if($.strm.avail_in===0)break;if(vt=$.strm,wt=$.window,Ye=$.strstart+$.lookahead,Ct=ge,_t=void 0,_t=vt.avail_in,Ct<_t&&(_t=Ct),it=_t===0?0:(vt.avail_in-=_t,f.arraySet(wt,vt.input,vt.next_in,_t,Ye),vt.state.wrap===1?vt.adler=v(vt.adler,wt,_t,Ye):vt.state.wrap===2&&(vt.adler=y(vt.adler,wt,_t,Ye)),vt.next_in+=_t,vt.total_in+=_t,_t),$.lookahead+=it,$.lookahead+$.insert>=ue)for(Ve=$.strstart-$.insert,$.ins_h=$.window[Ve],$.ins_h=($.ins_h<<$.hash_shift^$.window[Ve+1])&$.hash_mask;$.insert&&($.ins_h=($.ins_h<<$.hash_shift^$.window[Ve+ue-1])&$.hash_mask,$.prev[Ve&$.w_mask]=$.head[$.ins_h],$.head[$.ins_h]=Ve,Ve++,$.insert--,!($.lookahead+$.insert<ue)););}while($.lookahead<We&&$.strm.avail_in!==0)}function $t($,ot){for(var it,be;;){if($.lookahead<We){if(Ue($),$.lookahead<We&&ot===P)return q;if($.lookahead===0)break}if(it=0,$.lookahead>=ue&&($.ins_h=($.ins_h<<$.hash_shift^$.window[$.strstart+ue-1])&$.hash_mask,it=$.prev[$.strstart&$.w_mask]=$.head[$.ins_h],$.head[$.ins_h]=$.strstart),it!==0&&$.strstart-it<=$.w_size-We&&($.match_length=rt($,it)),$.match_length>=ue)if(be=p._tr_tally($,$.strstart-$.match_start,$.match_length-ue),$.lookahead-=$.match_length,$.match_length<=$.max_lazy_match&&$.lookahead>=ue){for($.match_length--;$.strstart++,$.ins_h=($.ins_h<<$.hash_shift^$.window[$.strstart+ue-1])&$.hash_mask,it=$.prev[$.strstart&$.w_mask]=$.head[$.ins_h],$.head[$.ins_h]=$.strstart,--$.match_length!=0;);$.strstart++}else $.strstart+=$.match_length,$.match_length=0,$.ins_h=$.window[$.strstart],$.ins_h=($.ins_h<<$.hash_shift^$.window[$.strstart+1])&$.hash_mask;else be=p._tr_tally($,0,$.window[$.strstart]),$.lookahead--,$.strstart++;if(be&&(de($,!1),$.strm.avail_out===0))return q}return $.insert=$.strstart<ue-1?$.strstart:ue-1,ot===T?(de($,!0),$.strm.avail_out===0?Pt:Pe):$.last_lit&&(de($,!1),$.strm.avail_out===0)?q:Fe}function ht($,ot){for(var it,be,ge;;){if($.lookahead<We){if(Ue($),$.lookahead<We&&ot===P)return q;if($.lookahead===0)break}if(it=0,$.lookahead>=ue&&($.ins_h=($.ins_h<<$.hash_shift^$.window[$.strstart+ue-1])&$.hash_mask,it=$.prev[$.strstart&$.w_mask]=$.head[$.ins_h],$.head[$.ins_h]=$.strstart),$.prev_length=$.match_length,$.prev_match=$.match_start,$.match_length=ue-1,it!==0&&$.prev_length<$.max_lazy_match&&$.strstart-it<=$.w_size-We&&($.match_length=rt($,it),$.match_length<=5&&($.strategy===1||$.match_length===ue&&4096<$.strstart-$.match_start)&&($.match_length=ue-1)),$.prev_length>=ue&&$.match_length<=$.prev_length){for(ge=$.strstart+$.lookahead-ue,be=p._tr_tally($,$.strstart-1-$.prev_match,$.prev_length-ue),$.lookahead-=$.prev_length-1,$.prev_length-=2;++$.strstart<=ge&&($.ins_h=($.ins_h<<$.hash_shift^$.window[$.strstart+ue-1])&$.hash_mask,it=$.prev[$.strstart&$.w_mask]=$.head[$.ins_h],$.head[$.ins_h]=$.strstart),--$.prev_length!=0;);if($.match_available=0,$.match_length=ue-1,$.strstart++,be&&(de($,!1),$.strm.avail_out===0))return q}else if($.match_available){if((be=p._tr_tally($,0,$.window[$.strstart-1]))&&de($,!1),$.strstart++,$.lookahead--,$.strm.avail_out===0)return q}else $.match_available=1,$.strstart++,$.lookahead--}return $.match_available&&(be=p._tr_tally($,0,$.window[$.strstart-1]),$.match_available=0),$.insert=$.strstart<ue-1?$.strstart:ue-1,ot===T?(de($,!0),$.strm.avail_out===0?Pt:Pe):$.last_lit&&(de($,!1),$.strm.avail_out===0)?q:Fe}function Wt($,ot,it,be,ge){this.good_length=$,this.max_lazy=ot,this.nice_length=it,this.max_chain=be,this.func=ge}function on(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=U,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new f.Buf16(2*xe),this.dyn_dtree=new f.Buf16(2*(2*J+1)),this.bl_tree=new f.Buf16(2*(2*ie+1)),mt(this.dyn_ltree),mt(this.dyn_dtree),mt(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new f.Buf16(Me+1),this.heap=new f.Buf16(2*Q+1),mt(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new f.Buf16(2*Q+1),mt(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function gn($){var ot;return $&&$.state?($.total_in=$.total_out=0,$.data_type=N,(ot=$.state).pending=0,ot.pending_out=0,ot.wrap<0&&(ot.wrap=-ot.wrap),ot.status=ot.wrap?oe:De,$.adler=ot.wrap===2?0:1,ot.last_flush=P,p._tr_init(ot),E):ke($,A)}function dn($){var ot=gn($);return ot===E&&function(it){it.window_size=2*it.w_size,mt(it.head),it.max_lazy_match=u[it.level].max_lazy,it.good_match=u[it.level].good_length,it.nice_match=u[it.level].nice_length,it.max_chain_length=u[it.level].max_chain,it.strstart=0,it.block_start=0,it.lookahead=0,it.insert=0,it.match_length=it.prev_length=ue-1,it.match_available=0,it.ins_h=0}($.state),ot}function sr($,ot,it,be,ge,Ve){if(!$)return A;var vt=1;if(ot===C&&(ot=6),be<0?(vt=0,be=-be):15<be&&(vt=2,be-=16),ge<1||G<ge||it!==U||be<8||15<be||ot<0||9<ot||Ve<0||L<Ve)return ke($,A);be===8&&(be=9);var wt=new on;return($.state=wt).strm=$,wt.wrap=vt,wt.gzhead=null,wt.w_bits=be,wt.w_size=1<<wt.w_bits,wt.w_mask=wt.w_size-1,wt.hash_bits=ge+7,wt.hash_size=1<<wt.hash_bits,wt.hash_mask=wt.hash_size-1,wt.hash_shift=~~((wt.hash_bits+ue-1)/ue),wt.window=new f.Buf8(2*wt.w_size),wt.head=new f.Buf16(wt.hash_size),wt.prev=new f.Buf16(wt.w_size),wt.lit_bufsize=1<<ge+6,wt.pending_buf_size=4*wt.lit_bufsize,wt.pending_buf=new f.Buf8(wt.pending_buf_size),wt.d_buf=1*wt.lit_bufsize,wt.l_buf=3*wt.lit_bufsize,wt.level=ot,wt.strategy=Ve,wt.method=it,dn($)}u=[new Wt(0,0,0,0,function($,ot){var it=65535;for(it>$.pending_buf_size-5&&(it=$.pending_buf_size-5);;){if($.lookahead<=1){if(Ue($),$.lookahead===0&&ot===P)return q;if($.lookahead===0)break}$.strstart+=$.lookahead,$.lookahead=0;var be=$.block_start+it;if(($.strstart===0||$.strstart>=be)&&($.lookahead=$.strstart-be,$.strstart=be,de($,!1),$.strm.avail_out===0)||$.strstart-$.block_start>=$.w_size-We&&(de($,!1),$.strm.avail_out===0))return q}return $.insert=0,ot===T?(de($,!0),$.strm.avail_out===0?Pt:Pe):($.strstart>$.block_start&&(de($,!1),$.strm.avail_out),q)}),new Wt(4,4,8,4,$t),new Wt(4,5,16,8,$t),new Wt(4,6,32,32,$t),new Wt(4,4,16,16,ht),new Wt(8,16,32,32,ht),new Wt(8,16,128,128,ht),new Wt(8,32,128,256,ht),new Wt(32,128,258,1024,ht),new Wt(32,258,258,4096,ht)],c.deflateInit=function($,ot){return sr($,ot,U,15,8,0)},c.deflateInit2=sr,c.deflateReset=dn,c.deflateResetKeep=gn,c.deflateSetHeader=function($,ot){return $&&$.state?$.state.wrap!==2?A:($.state.gzhead=ot,E):A},c.deflate=function($,ot){var it,be,ge,Ve;if(!$||!$.state||5<ot||ot<0)return $?ke($,A):A;if(be=$.state,!$.output||!$.input&&$.avail_in!==0||be.status===666&&ot!==T)return ke($,$.avail_out===0?-5:A);if(be.strm=$,it=be.last_flush,be.last_flush=ot,be.status===oe)if(be.wrap===2)$.adler=0,Ze(be,31),Ze(be,139),Ze(be,8),be.gzhead?(Ze(be,(be.gzhead.text?1:0)+(be.gzhead.hcrc?2:0)+(be.gzhead.extra?4:0)+(be.gzhead.name?8:0)+(be.gzhead.comment?16:0)),Ze(be,255&be.gzhead.time),Ze(be,be.gzhead.time>>8&255),Ze(be,be.gzhead.time>>16&255),Ze(be,be.gzhead.time>>24&255),Ze(be,be.level===9?2:2<=be.strategy||be.level<2?4:0),Ze(be,255&be.gzhead.os),be.gzhead.extra&&be.gzhead.extra.length&&(Ze(be,255&be.gzhead.extra.length),Ze(be,be.gzhead.extra.length>>8&255)),be.gzhead.hcrc&&($.adler=y($.adler,be.pending_buf,be.pending,0)),be.gzindex=0,be.status=69):(Ze(be,0),Ze(be,0),Ze(be,0),Ze(be,0),Ze(be,0),Ze(be,be.level===9?2:2<=be.strategy||be.level<2?4:0),Ze(be,3),be.status=De);else{var vt=U+(be.w_bits-8<<4)<<8;vt|=(2<=be.strategy||be.level<2?0:be.level<6?1:be.level===6?2:3)<<6,be.strstart!==0&&(vt|=32),vt+=31-vt%31,be.status=De,et(be,vt),be.strstart!==0&&(et(be,$.adler>>>16),et(be,65535&$.adler)),$.adler=1}if(be.status===69)if(be.gzhead.extra){for(ge=be.pending;be.gzindex<(65535&be.gzhead.extra.length)&&(be.pending!==be.pending_buf_size||(be.gzhead.hcrc&&be.pending>ge&&($.adler=y($.adler,be.pending_buf,be.pending-ge,ge)),ae($),ge=be.pending,be.pending!==be.pending_buf_size));)Ze(be,255&be.gzhead.extra[be.gzindex]),be.gzindex++;be.gzhead.hcrc&&be.pending>ge&&($.adler=y($.adler,be.pending_buf,be.pending-ge,ge)),be.gzindex===be.gzhead.extra.length&&(be.gzindex=0,be.status=73)}else be.status=73;if(be.status===73)if(be.gzhead.name){ge=be.pending;do{if(be.pending===be.pending_buf_size&&(be.gzhead.hcrc&&be.pending>ge&&($.adler=y($.adler,be.pending_buf,be.pending-ge,ge)),ae($),ge=be.pending,be.pending===be.pending_buf_size)){Ve=1;break}Ve=be.gzindex<be.gzhead.name.length?255&be.gzhead.name.charCodeAt(be.gzindex++):0,Ze(be,Ve)}while(Ve!==0);be.gzhead.hcrc&&be.pending>ge&&($.adler=y($.adler,be.pending_buf,be.pending-ge,ge)),Ve===0&&(be.gzindex=0,be.status=91)}else be.status=91;if(be.status===91)if(be.gzhead.comment){ge=be.pending;do{if(be.pending===be.pending_buf_size&&(be.gzhead.hcrc&&be.pending>ge&&($.adler=y($.adler,be.pending_buf,be.pending-ge,ge)),ae($),ge=be.pending,be.pending===be.pending_buf_size)){Ve=1;break}Ve=be.gzindex<be.gzhead.comment.length?255&be.gzhead.comment.charCodeAt(be.gzindex++):0,Ze(be,Ve)}while(Ve!==0);be.gzhead.hcrc&&be.pending>ge&&($.adler=y($.adler,be.pending_buf,be.pending-ge,ge)),Ve===0&&(be.status=103)}else be.status=103;if(be.status===103&&(be.gzhead.hcrc?(be.pending+2>be.pending_buf_size&&ae($),be.pending+2<=be.pending_buf_size&&(Ze(be,255&$.adler),Ze(be,$.adler>>8&255),$.adler=0,be.status=De)):be.status=De),be.pending!==0){if(ae($),$.avail_out===0)return be.last_flush=-1,E}else if($.avail_in===0&&Be(ot)<=Be(it)&&ot!==T)return ke($,-5);if(be.status===666&&$.avail_in!==0)return ke($,-5);if($.avail_in!==0||be.lookahead!==0||ot!==P&&be.status!==666){var wt=be.strategy===2?function(Ye,Ct){for(var _t;;){if(Ye.lookahead===0&&(Ue(Ye),Ye.lookahead===0)){if(Ct===P)return q;break}if(Ye.match_length=0,_t=p._tr_tally(Ye,0,Ye.window[Ye.strstart]),Ye.lookahead--,Ye.strstart++,_t&&(de(Ye,!1),Ye.strm.avail_out===0))return q}return Ye.insert=0,Ct===T?(de(Ye,!0),Ye.strm.avail_out===0?Pt:Pe):Ye.last_lit&&(de(Ye,!1),Ye.strm.avail_out===0)?q:Fe}(be,ot):be.strategy===3?function(Ye,Ct){for(var _t,St,un,ir,Pn=Ye.window;;){if(Ye.lookahead<=Ae){if(Ue(Ye),Ye.lookahead<=Ae&&Ct===P)return q;if(Ye.lookahead===0)break}if(Ye.match_length=0,Ye.lookahead>=ue&&0<Ye.strstart&&(St=Pn[un=Ye.strstart-1])===Pn[++un]&&St===Pn[++un]&&St===Pn[++un]){ir=Ye.strstart+Ae;do;while(St===Pn[++un]&&St===Pn[++un]&&St===Pn[++un]&&St===Pn[++un]&&St===Pn[++un]&&St===Pn[++un]&&St===Pn[++un]&&St===Pn[++un]&&un<ir);Ye.match_length=Ae-(ir-un),Ye.match_length>Ye.lookahead&&(Ye.match_length=Ye.lookahead)}if(Ye.match_length>=ue?(_t=p._tr_tally(Ye,1,Ye.match_length-ue),Ye.lookahead-=Ye.match_length,Ye.strstart+=Ye.match_length,Ye.match_length=0):(_t=p._tr_tally(Ye,0,Ye.window[Ye.strstart]),Ye.lookahead--,Ye.strstart++),_t&&(de(Ye,!1),Ye.strm.avail_out===0))return q}return Ye.insert=0,Ct===T?(de(Ye,!0),Ye.strm.avail_out===0?Pt:Pe):Ye.last_lit&&(de(Ye,!1),Ye.strm.avail_out===0)?q:Fe}(be,ot):u[be.level].func(be,ot);if(wt!==Pt&&wt!==Pe||(be.status=666),wt===q||wt===Pt)return $.avail_out===0&&(be.last_flush=-1),E;if(wt===Fe&&(ot===1?p._tr_align(be):ot!==5&&(p._tr_stored_block(be,0,0,!1),ot===3&&(mt(be.head),be.lookahead===0&&(be.strstart=0,be.block_start=0,be.insert=0))),ae($),$.avail_out===0))return be.last_flush=-1,E}return ot!==T?E:be.wrap<=0?1:(be.wrap===2?(Ze(be,255&$.adler),Ze(be,$.adler>>8&255),Ze(be,$.adler>>16&255),Ze(be,$.adler>>24&255),Ze(be,255&$.total_in),Ze(be,$.total_in>>8&255),Ze(be,$.total_in>>16&255),Ze(be,$.total_in>>24&255)):(et(be,$.adler>>>16),et(be,65535&$.adler)),ae($),0<be.wrap&&(be.wrap=-be.wrap),be.pending!==0?E:1)},c.deflateEnd=function($){var ot;return $&&$.state?(ot=$.state.status)!==oe&&ot!==69&&ot!==73&&ot!==91&&ot!==103&&ot!==De&&ot!==666?ke($,A):($.state=null,ot===De?ke($,-3):E):A},c.deflateSetDictionary=function($,ot){var it,be,ge,Ve,vt,wt,Ye,Ct,_t=ot.length;if(!$||!$.state||(Ve=(it=$.state).wrap)===2||Ve===1&&it.status!==oe||it.lookahead)return A;for(Ve===1&&($.adler=v($.adler,ot,_t,0)),it.wrap=0,_t>=it.w_size&&(Ve===0&&(mt(it.head),it.strstart=0,it.block_start=0,it.insert=0),Ct=new f.Buf8(it.w_size),f.arraySet(Ct,ot,_t-it.w_size,it.w_size,0),ot=Ct,_t=it.w_size),vt=$.avail_in,wt=$.next_in,Ye=$.input,$.avail_in=_t,$.next_in=0,$.input=ot,Ue(it);it.lookahead>=ue;){for(be=it.strstart,ge=it.lookahead-(ue-1);it.ins_h=(it.ins_h<<it.hash_shift^it.window[be+ue-1])&it.hash_mask,it.prev[be&it.w_mask]=it.head[it.ins_h],it.head[it.ins_h]=be,be++,--ge;);it.strstart=be,it.lookahead=ue-1,Ue(it)}return it.strstart+=it.lookahead,it.block_start=it.strstart,it.insert=it.lookahead,it.lookahead=0,it.match_length=it.prev_length=ue-1,it.match_available=0,$.next_in=wt,$.input=Ye,$.avail_in=vt,it.wrap=Ve,E},c.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(r,a,c){a.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],48:[function(r,a,c){a.exports=function(u,f){var p,v,y,k,P,T,E,A,C,L,N,U,G,Q,J,ie,xe,Me,ue,Ae,We,oe,De,q,Fe;p=u.state,v=u.next_in,q=u.input,y=v+(u.avail_in-5),k=u.next_out,Fe=u.output,P=k-(f-u.avail_out),T=k+(u.avail_out-257),E=p.dmax,A=p.wsize,C=p.whave,L=p.wnext,N=p.window,U=p.hold,G=p.bits,Q=p.lencode,J=p.distcode,ie=(1<<p.lenbits)-1,xe=(1<<p.distbits)-1;e:do{G<15&&(U+=q[v++]<<G,G+=8,U+=q[v++]<<G,G+=8),Me=Q[U&ie];t:for(;;){if(U>>>=ue=Me>>>24,G-=ue,(ue=Me>>>16&255)===0)Fe[k++]=65535&Me;else{if(!(16&ue)){if(!(64&ue)){Me=Q[(65535&Me)+(U&(1<<ue)-1)];continue t}if(32&ue){p.mode=12;break e}u.msg="invalid literal/length code",p.mode=30;break e}Ae=65535&Me,(ue&=15)&&(G<ue&&(U+=q[v++]<<G,G+=8),Ae+=U&(1<<ue)-1,U>>>=ue,G-=ue),G<15&&(U+=q[v++]<<G,G+=8,U+=q[v++]<<G,G+=8),Me=J[U&xe];n:for(;;){if(U>>>=ue=Me>>>24,G-=ue,!(16&(ue=Me>>>16&255))){if(!(64&ue)){Me=J[(65535&Me)+(U&(1<<ue)-1)];continue n}u.msg="invalid distance code",p.mode=30;break e}if(We=65535&Me,G<(ue&=15)&&(U+=q[v++]<<G,(G+=8)<ue&&(U+=q[v++]<<G,G+=8)),E<(We+=U&(1<<ue)-1)){u.msg="invalid distance too far back",p.mode=30;break e}if(U>>>=ue,G-=ue,(ue=k-P)<We){if(C<(ue=We-ue)&&p.sane){u.msg="invalid distance too far back",p.mode=30;break e}if(De=N,(oe=0)===L){if(oe+=A-ue,ue<Ae){for(Ae-=ue;Fe[k++]=N[oe++],--ue;);oe=k-We,De=Fe}}else if(L<ue){if(oe+=A+L-ue,(ue-=L)<Ae){for(Ae-=ue;Fe[k++]=N[oe++],--ue;);if(oe=0,L<Ae){for(Ae-=ue=L;Fe[k++]=N[oe++],--ue;);oe=k-We,De=Fe}}}else if(oe+=L-ue,ue<Ae){for(Ae-=ue;Fe[k++]=N[oe++],--ue;);oe=k-We,De=Fe}for(;2<Ae;)Fe[k++]=De[oe++],Fe[k++]=De[oe++],Fe[k++]=De[oe++],Ae-=3;Ae&&(Fe[k++]=De[oe++],1<Ae&&(Fe[k++]=De[oe++]))}else{for(oe=k-We;Fe[k++]=Fe[oe++],Fe[k++]=Fe[oe++],Fe[k++]=Fe[oe++],2<(Ae-=3););Ae&&(Fe[k++]=Fe[oe++],1<Ae&&(Fe[k++]=Fe[oe++]))}break}}break}}while(v<y&&k<T);v-=Ae=G>>3,U&=(1<<(G-=Ae<<3))-1,u.next_in=v,u.next_out=k,u.avail_in=v<y?y-v+5:5-(v-y),u.avail_out=k<T?T-k+257:257-(k-T),p.hold=U,p.bits=G}},{}],49:[function(r,a,c){var u=r("../utils/common"),f=r("./adler32"),p=r("./crc32"),v=r("./inffast"),y=r("./inftrees"),k=1,P=2,T=0,E=-2,A=1,C=852,L=592;function N(oe){return(oe>>>24&255)+(oe>>>8&65280)+((65280&oe)<<8)+((255&oe)<<24)}function U(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new u.Buf16(320),this.work=new u.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function G(oe){var De;return oe&&oe.state?(De=oe.state,oe.total_in=oe.total_out=De.total=0,oe.msg="",De.wrap&&(oe.adler=1&De.wrap),De.mode=A,De.last=0,De.havedict=0,De.dmax=32768,De.head=null,De.hold=0,De.bits=0,De.lencode=De.lendyn=new u.Buf32(C),De.distcode=De.distdyn=new u.Buf32(L),De.sane=1,De.back=-1,T):E}function Q(oe){var De;return oe&&oe.state?((De=oe.state).wsize=0,De.whave=0,De.wnext=0,G(oe)):E}function J(oe,De){var q,Fe;return oe&&oe.state?(Fe=oe.state,De<0?(q=0,De=-De):(q=1+(De>>4),De<48&&(De&=15)),De&&(De<8||15<De)?E:(Fe.window!==null&&Fe.wbits!==De&&(Fe.window=null),Fe.wrap=q,Fe.wbits=De,Q(oe))):E}function ie(oe,De){var q,Fe;return oe?(Fe=new U,(oe.state=Fe).window=null,(q=J(oe,De))!==T&&(oe.state=null),q):E}var xe,Me,ue=!0;function Ae(oe){if(ue){var De;for(xe=new u.Buf32(512),Me=new u.Buf32(32),De=0;De<144;)oe.lens[De++]=8;for(;De<256;)oe.lens[De++]=9;for(;De<280;)oe.lens[De++]=7;for(;De<288;)oe.lens[De++]=8;for(y(k,oe.lens,0,288,xe,0,oe.work,{bits:9}),De=0;De<32;)oe.lens[De++]=5;y(P,oe.lens,0,32,Me,0,oe.work,{bits:5}),ue=!1}oe.lencode=xe,oe.lenbits=9,oe.distcode=Me,oe.distbits=5}function We(oe,De,q,Fe){var Pt,Pe=oe.state;return Pe.window===null&&(Pe.wsize=1<<Pe.wbits,Pe.wnext=0,Pe.whave=0,Pe.window=new u.Buf8(Pe.wsize)),Fe>=Pe.wsize?(u.arraySet(Pe.window,De,q-Pe.wsize,Pe.wsize,0),Pe.wnext=0,Pe.whave=Pe.wsize):(Fe<(Pt=Pe.wsize-Pe.wnext)&&(Pt=Fe),u.arraySet(Pe.window,De,q-Fe,Pt,Pe.wnext),(Fe-=Pt)?(u.arraySet(Pe.window,De,q-Fe,Fe,0),Pe.wnext=Fe,Pe.whave=Pe.wsize):(Pe.wnext+=Pt,Pe.wnext===Pe.wsize&&(Pe.wnext=0),Pe.whave<Pe.wsize&&(Pe.whave+=Pt))),0}c.inflateReset=Q,c.inflateReset2=J,c.inflateResetKeep=G,c.inflateInit=function(oe){return ie(oe,15)},c.inflateInit2=ie,c.inflate=function(oe,De){var q,Fe,Pt,Pe,ke,Be,mt,ae,de,Ze,et,rt,Ue,$t,ht,Wt,on,gn,dn,sr,$,ot,it,be,ge=0,Ve=new u.Buf8(4),vt=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!oe||!oe.state||!oe.output||!oe.input&&oe.avail_in!==0)return E;(q=oe.state).mode===12&&(q.mode=13),ke=oe.next_out,Pt=oe.output,mt=oe.avail_out,Pe=oe.next_in,Fe=oe.input,Be=oe.avail_in,ae=q.hold,de=q.bits,Ze=Be,et=mt,ot=T;e:for(;;)switch(q.mode){case A:if(q.wrap===0){q.mode=13;break}for(;de<16;){if(Be===0)break e;Be--,ae+=Fe[Pe++]<<de,de+=8}if(2&q.wrap&&ae===35615){Ve[q.check=0]=255&ae,Ve[1]=ae>>>8&255,q.check=p(q.check,Ve,2,0),de=ae=0,q.mode=2;break}if(q.flags=0,q.head&&(q.head.done=!1),!(1&q.wrap)||(((255&ae)<<8)+(ae>>8))%31){oe.msg="incorrect header check",q.mode=30;break}if((15&ae)!=8){oe.msg="unknown compression method",q.mode=30;break}if(de-=4,$=8+(15&(ae>>>=4)),q.wbits===0)q.wbits=$;else if($>q.wbits){oe.msg="invalid window size",q.mode=30;break}q.dmax=1<<$,oe.adler=q.check=1,q.mode=512&ae?10:12,de=ae=0;break;case 2:for(;de<16;){if(Be===0)break e;Be--,ae+=Fe[Pe++]<<de,de+=8}if(q.flags=ae,(255&q.flags)!=8){oe.msg="unknown compression method",q.mode=30;break}if(57344&q.flags){oe.msg="unknown header flags set",q.mode=30;break}q.head&&(q.head.text=ae>>8&1),512&q.flags&&(Ve[0]=255&ae,Ve[1]=ae>>>8&255,q.check=p(q.check,Ve,2,0)),de=ae=0,q.mode=3;case 3:for(;de<32;){if(Be===0)break e;Be--,ae+=Fe[Pe++]<<de,de+=8}q.head&&(q.head.time=ae),512&q.flags&&(Ve[0]=255&ae,Ve[1]=ae>>>8&255,Ve[2]=ae>>>16&255,Ve[3]=ae>>>24&255,q.check=p(q.check,Ve,4,0)),de=ae=0,q.mode=4;case 4:for(;de<16;){if(Be===0)break e;Be--,ae+=Fe[Pe++]<<de,de+=8}q.head&&(q.head.xflags=255&ae,q.head.os=ae>>8),512&q.flags&&(Ve[0]=255&ae,Ve[1]=ae>>>8&255,q.check=p(q.check,Ve,2,0)),de=ae=0,q.mode=5;case 5:if(1024&q.flags){for(;de<16;){if(Be===0)break e;Be--,ae+=Fe[Pe++]<<de,de+=8}q.length=ae,q.head&&(q.head.extra_len=ae),512&q.flags&&(Ve[0]=255&ae,Ve[1]=ae>>>8&255,q.check=p(q.check,Ve,2,0)),de=ae=0}else q.head&&(q.head.extra=null);q.mode=6;case 6:if(1024&q.flags&&(Be<(rt=q.length)&&(rt=Be),rt&&(q.head&&($=q.head.extra_len-q.length,q.head.extra||(q.head.extra=new Array(q.head.extra_len)),u.arraySet(q.head.extra,Fe,Pe,rt,$)),512&q.flags&&(q.check=p(q.check,Fe,rt,Pe)),Be-=rt,Pe+=rt,q.length-=rt),q.length))break e;q.length=0,q.mode=7;case 7:if(2048&q.flags){if(Be===0)break e;for(rt=0;$=Fe[Pe+rt++],q.head&&$&&q.length<65536&&(q.head.name+=String.fromCharCode($)),$&&rt<Be;);if(512&q.flags&&(q.check=p(q.check,Fe,rt,Pe)),Be-=rt,Pe+=rt,$)break e}else q.head&&(q.head.name=null);q.length=0,q.mode=8;case 8:if(4096&q.flags){if(Be===0)break e;for(rt=0;$=Fe[Pe+rt++],q.head&&$&&q.length<65536&&(q.head.comment+=String.fromCharCode($)),$&&rt<Be;);if(512&q.flags&&(q.check=p(q.check,Fe,rt,Pe)),Be-=rt,Pe+=rt,$)break e}else q.head&&(q.head.comment=null);q.mode=9;case 9:if(512&q.flags){for(;de<16;){if(Be===0)break e;Be--,ae+=Fe[Pe++]<<de,de+=8}if(ae!==(65535&q.check)){oe.msg="header crc mismatch",q.mode=30;break}de=ae=0}q.head&&(q.head.hcrc=q.flags>>9&1,q.head.done=!0),oe.adler=q.check=0,q.mode=12;break;case 10:for(;de<32;){if(Be===0)break e;Be--,ae+=Fe[Pe++]<<de,de+=8}oe.adler=q.check=N(ae),de=ae=0,q.mode=11;case 11:if(q.havedict===0)return oe.next_out=ke,oe.avail_out=mt,oe.next_in=Pe,oe.avail_in=Be,q.hold=ae,q.bits=de,2;oe.adler=q.check=1,q.mode=12;case 12:if(De===5||De===6)break e;case 13:if(q.last){ae>>>=7&de,de-=7&de,q.mode=27;break}for(;de<3;){if(Be===0)break e;Be--,ae+=Fe[Pe++]<<de,de+=8}switch(q.last=1&ae,de-=1,3&(ae>>>=1)){case 0:q.mode=14;break;case 1:if(Ae(q),q.mode=20,De!==6)break;ae>>>=2,de-=2;break e;case 2:q.mode=17;break;case 3:oe.msg="invalid block type",q.mode=30}ae>>>=2,de-=2;break;case 14:for(ae>>>=7&de,de-=7&de;de<32;){if(Be===0)break e;Be--,ae+=Fe[Pe++]<<de,de+=8}if((65535&ae)!=(ae>>>16^65535)){oe.msg="invalid stored block lengths",q.mode=30;break}if(q.length=65535&ae,de=ae=0,q.mode=15,De===6)break e;case 15:q.mode=16;case 16:if(rt=q.length){if(Be<rt&&(rt=Be),mt<rt&&(rt=mt),rt===0)break e;u.arraySet(Pt,Fe,Pe,rt,ke),Be-=rt,Pe+=rt,mt-=rt,ke+=rt,q.length-=rt;break}q.mode=12;break;case 17:for(;de<14;){if(Be===0)break e;Be--,ae+=Fe[Pe++]<<de,de+=8}if(q.nlen=257+(31&ae),ae>>>=5,de-=5,q.ndist=1+(31&ae),ae>>>=5,de-=5,q.ncode=4+(15&ae),ae>>>=4,de-=4,286<q.nlen||30<q.ndist){oe.msg="too many length or distance symbols",q.mode=30;break}q.have=0,q.mode=18;case 18:for(;q.have<q.ncode;){for(;de<3;){if(Be===0)break e;Be--,ae+=Fe[Pe++]<<de,de+=8}q.lens[vt[q.have++]]=7&ae,ae>>>=3,de-=3}for(;q.have<19;)q.lens[vt[q.have++]]=0;if(q.lencode=q.lendyn,q.lenbits=7,it={bits:q.lenbits},ot=y(0,q.lens,0,19,q.lencode,0,q.work,it),q.lenbits=it.bits,ot){oe.msg="invalid code lengths set",q.mode=30;break}q.have=0,q.mode=19;case 19:for(;q.have<q.nlen+q.ndist;){for(;Wt=(ge=q.lencode[ae&(1<<q.lenbits)-1])>>>16&255,on=65535&ge,!((ht=ge>>>24)<=de);){if(Be===0)break e;Be--,ae+=Fe[Pe++]<<de,de+=8}if(on<16)ae>>>=ht,de-=ht,q.lens[q.have++]=on;else{if(on===16){for(be=ht+2;de<be;){if(Be===0)break e;Be--,ae+=Fe[Pe++]<<de,de+=8}if(ae>>>=ht,de-=ht,q.have===0){oe.msg="invalid bit length repeat",q.mode=30;break}$=q.lens[q.have-1],rt=3+(3&ae),ae>>>=2,de-=2}else if(on===17){for(be=ht+3;de<be;){if(Be===0)break e;Be--,ae+=Fe[Pe++]<<de,de+=8}de-=ht,$=0,rt=3+(7&(ae>>>=ht)),ae>>>=3,de-=3}else{for(be=ht+7;de<be;){if(Be===0)break e;Be--,ae+=Fe[Pe++]<<de,de+=8}de-=ht,$=0,rt=11+(127&(ae>>>=ht)),ae>>>=7,de-=7}if(q.have+rt>q.nlen+q.ndist){oe.msg="invalid bit length repeat",q.mode=30;break}for(;rt--;)q.lens[q.have++]=$}}if(q.mode===30)break;if(q.lens[256]===0){oe.msg="invalid code -- missing end-of-block",q.mode=30;break}if(q.lenbits=9,it={bits:q.lenbits},ot=y(k,q.lens,0,q.nlen,q.lencode,0,q.work,it),q.lenbits=it.bits,ot){oe.msg="invalid literal/lengths set",q.mode=30;break}if(q.distbits=6,q.distcode=q.distdyn,it={bits:q.distbits},ot=y(P,q.lens,q.nlen,q.ndist,q.distcode,0,q.work,it),q.distbits=it.bits,ot){oe.msg="invalid distances set",q.mode=30;break}if(q.mode=20,De===6)break e;case 20:q.mode=21;case 21:if(6<=Be&&258<=mt){oe.next_out=ke,oe.avail_out=mt,oe.next_in=Pe,oe.avail_in=Be,q.hold=ae,q.bits=de,v(oe,et),ke=oe.next_out,Pt=oe.output,mt=oe.avail_out,Pe=oe.next_in,Fe=oe.input,Be=oe.avail_in,ae=q.hold,de=q.bits,q.mode===12&&(q.back=-1);break}for(q.back=0;Wt=(ge=q.lencode[ae&(1<<q.lenbits)-1])>>>16&255,on=65535&ge,!((ht=ge>>>24)<=de);){if(Be===0)break e;Be--,ae+=Fe[Pe++]<<de,de+=8}if(Wt&&!(240&Wt)){for(gn=ht,dn=Wt,sr=on;Wt=(ge=q.lencode[sr+((ae&(1<<gn+dn)-1)>>gn)])>>>16&255,on=65535&ge,!(gn+(ht=ge>>>24)<=de);){if(Be===0)break e;Be--,ae+=Fe[Pe++]<<de,de+=8}ae>>>=gn,de-=gn,q.back+=gn}if(ae>>>=ht,de-=ht,q.back+=ht,q.length=on,Wt===0){q.mode=26;break}if(32&Wt){q.back=-1,q.mode=12;break}if(64&Wt){oe.msg="invalid literal/length code",q.mode=30;break}q.extra=15&Wt,q.mode=22;case 22:if(q.extra){for(be=q.extra;de<be;){if(Be===0)break e;Be--,ae+=Fe[Pe++]<<de,de+=8}q.length+=ae&(1<<q.extra)-1,ae>>>=q.extra,de-=q.extra,q.back+=q.extra}q.was=q.length,q.mode=23;case 23:for(;Wt=(ge=q.distcode[ae&(1<<q.distbits)-1])>>>16&255,on=65535&ge,!((ht=ge>>>24)<=de);){if(Be===0)break e;Be--,ae+=Fe[Pe++]<<de,de+=8}if(!(240&Wt)){for(gn=ht,dn=Wt,sr=on;Wt=(ge=q.distcode[sr+((ae&(1<<gn+dn)-1)>>gn)])>>>16&255,on=65535&ge,!(gn+(ht=ge>>>24)<=de);){if(Be===0)break e;Be--,ae+=Fe[Pe++]<<de,de+=8}ae>>>=gn,de-=gn,q.back+=gn}if(ae>>>=ht,de-=ht,q.back+=ht,64&Wt){oe.msg="invalid distance code",q.mode=30;break}q.offset=on,q.extra=15&Wt,q.mode=24;case 24:if(q.extra){for(be=q.extra;de<be;){if(Be===0)break e;Be--,ae+=Fe[Pe++]<<de,de+=8}q.offset+=ae&(1<<q.extra)-1,ae>>>=q.extra,de-=q.extra,q.back+=q.extra}if(q.offset>q.dmax){oe.msg="invalid distance too far back",q.mode=30;break}q.mode=25;case 25:if(mt===0)break e;if(rt=et-mt,q.offset>rt){if((rt=q.offset-rt)>q.whave&&q.sane){oe.msg="invalid distance too far back",q.mode=30;break}Ue=rt>q.wnext?(rt-=q.wnext,q.wsize-rt):q.wnext-rt,rt>q.length&&(rt=q.length),$t=q.window}else $t=Pt,Ue=ke-q.offset,rt=q.length;for(mt<rt&&(rt=mt),mt-=rt,q.length-=rt;Pt[ke++]=$t[Ue++],--rt;);q.length===0&&(q.mode=21);break;case 26:if(mt===0)break e;Pt[ke++]=q.length,mt--,q.mode=21;break;case 27:if(q.wrap){for(;de<32;){if(Be===0)break e;Be--,ae|=Fe[Pe++]<<de,de+=8}if(et-=mt,oe.total_out+=et,q.total+=et,et&&(oe.adler=q.check=q.flags?p(q.check,Pt,et,ke-et):f(q.check,Pt,et,ke-et)),et=mt,(q.flags?ae:N(ae))!==q.check){oe.msg="incorrect data check",q.mode=30;break}de=ae=0}q.mode=28;case 28:if(q.wrap&&q.flags){for(;de<32;){if(Be===0)break e;Be--,ae+=Fe[Pe++]<<de,de+=8}if(ae!==(4294967295&q.total)){oe.msg="incorrect length check",q.mode=30;break}de=ae=0}q.mode=29;case 29:ot=1;break e;case 30:ot=-3;break e;case 31:return-4;case 32:default:return E}return oe.next_out=ke,oe.avail_out=mt,oe.next_in=Pe,oe.avail_in=Be,q.hold=ae,q.bits=de,(q.wsize||et!==oe.avail_out&&q.mode<30&&(q.mode<27||De!==4))&&We(oe,oe.output,oe.next_out,et-oe.avail_out)?(q.mode=31,-4):(Ze-=oe.avail_in,et-=oe.avail_out,oe.total_in+=Ze,oe.total_out+=et,q.total+=et,q.wrap&&et&&(oe.adler=q.check=q.flags?p(q.check,Pt,et,oe.next_out-et):f(q.check,Pt,et,oe.next_out-et)),oe.data_type=q.bits+(q.last?64:0)+(q.mode===12?128:0)+(q.mode===20||q.mode===15?256:0),(Ze==0&&et===0||De===4)&&ot===T&&(ot=-5),ot)},c.inflateEnd=function(oe){if(!oe||!oe.state)return E;var De=oe.state;return De.window&&(De.window=null),oe.state=null,T},c.inflateGetHeader=function(oe,De){var q;return oe&&oe.state&&2&(q=oe.state).wrap?((q.head=De).done=!1,T):E},c.inflateSetDictionary=function(oe,De){var q,Fe=De.length;return oe&&oe.state?(q=oe.state).wrap!==0&&q.mode!==11?E:q.mode===11&&f(1,De,Fe,0)!==q.check?-3:We(oe,De,Fe,Fe)?(q.mode=31,-4):(q.havedict=1,T):E},c.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(r,a,c){var u=r("../utils/common"),f=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],p=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],v=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],y=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];a.exports=function(k,P,T,E,A,C,L,N){var U,G,Q,J,ie,xe,Me,ue,Ae,We=N.bits,oe=0,De=0,q=0,Fe=0,Pt=0,Pe=0,ke=0,Be=0,mt=0,ae=0,de=null,Ze=0,et=new u.Buf16(16),rt=new u.Buf16(16),Ue=null,$t=0;for(oe=0;oe<=15;oe++)et[oe]=0;for(De=0;De<E;De++)et[P[T+De]]++;for(Pt=We,Fe=15;1<=Fe&&et[Fe]===0;Fe--);if(Fe<Pt&&(Pt=Fe),Fe===0)return A[C++]=20971520,A[C++]=20971520,N.bits=1,0;for(q=1;q<Fe&&et[q]===0;q++);for(Pt<q&&(Pt=q),oe=Be=1;oe<=15;oe++)if(Be<<=1,(Be-=et[oe])<0)return-1;if(0<Be&&(k===0||Fe!==1))return-1;for(rt[1]=0,oe=1;oe<15;oe++)rt[oe+1]=rt[oe]+et[oe];for(De=0;De<E;De++)P[T+De]!==0&&(L[rt[P[T+De]]++]=De);if(xe=k===0?(de=Ue=L,19):k===1?(de=f,Ze-=257,Ue=p,$t-=257,256):(de=v,Ue=y,-1),oe=q,ie=C,ke=De=ae=0,Q=-1,J=(mt=1<<(Pe=Pt))-1,k===1&&852<mt||k===2&&592<mt)return 1;for(;;){for(Me=oe-ke,Ae=L[De]<xe?(ue=0,L[De]):L[De]>xe?(ue=Ue[$t+L[De]],de[Ze+L[De]]):(ue=96,0),U=1<<oe-ke,q=G=1<<Pe;A[ie+(ae>>ke)+(G-=U)]=Me<<24|ue<<16|Ae|0,G!==0;);for(U=1<<oe-1;ae&U;)U>>=1;if(U!==0?(ae&=U-1,ae+=U):ae=0,De++,--et[oe]==0){if(oe===Fe)break;oe=P[T+L[De]]}if(Pt<oe&&(ae&J)!==Q){for(ke===0&&(ke=Pt),ie+=q,Be=1<<(Pe=oe-ke);Pe+ke<Fe&&!((Be-=et[Pe+ke])<=0);)Pe++,Be<<=1;if(mt+=1<<Pe,k===1&&852<mt||k===2&&592<mt)return 1;A[Q=ae&J]=Pt<<24|Pe<<16|ie-C|0}}return ae!==0&&(A[ie+ae]=oe-ke<<24|64<<16|0),N.bits=Pt,0}},{"../utils/common":41}],51:[function(r,a,c){a.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(r,a,c){var u=r("../utils/common"),f=0,p=1;function v(ge){for(var Ve=ge.length;0<=--Ve;)ge[Ve]=0}var y=0,k=29,P=256,T=P+1+k,E=30,A=19,C=2*T+1,L=15,N=16,U=7,G=256,Q=16,J=17,ie=18,xe=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],Me=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],ue=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],Ae=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],We=new Array(2*(T+2));v(We);var oe=new Array(2*E);v(oe);var De=new Array(512);v(De);var q=new Array(256);v(q);var Fe=new Array(k);v(Fe);var Pt,Pe,ke,Be=new Array(E);function mt(ge,Ve,vt,wt,Ye){this.static_tree=ge,this.extra_bits=Ve,this.extra_base=vt,this.elems=wt,this.max_length=Ye,this.has_stree=ge&&ge.length}function ae(ge,Ve){this.dyn_tree=ge,this.max_code=0,this.stat_desc=Ve}function de(ge){return ge<256?De[ge]:De[256+(ge>>>7)]}function Ze(ge,Ve){ge.pending_buf[ge.pending++]=255&Ve,ge.pending_buf[ge.pending++]=Ve>>>8&255}function et(ge,Ve,vt){ge.bi_valid>N-vt?(ge.bi_buf|=Ve<<ge.bi_valid&65535,Ze(ge,ge.bi_buf),ge.bi_buf=Ve>>N-ge.bi_valid,ge.bi_valid+=vt-N):(ge.bi_buf|=Ve<<ge.bi_valid&65535,ge.bi_valid+=vt)}function rt(ge,Ve,vt){et(ge,vt[2*Ve],vt[2*Ve+1])}function Ue(ge,Ve){for(var vt=0;vt|=1&ge,ge>>>=1,vt<<=1,0<--Ve;);return vt>>>1}function $t(ge,Ve,vt){var wt,Ye,Ct=new Array(L+1),_t=0;for(wt=1;wt<=L;wt++)Ct[wt]=_t=_t+vt[wt-1]<<1;for(Ye=0;Ye<=Ve;Ye++){var St=ge[2*Ye+1];St!==0&&(ge[2*Ye]=Ue(Ct[St]++,St))}}function ht(ge){var Ve;for(Ve=0;Ve<T;Ve++)ge.dyn_ltree[2*Ve]=0;for(Ve=0;Ve<E;Ve++)ge.dyn_dtree[2*Ve]=0;for(Ve=0;Ve<A;Ve++)ge.bl_tree[2*Ve]=0;ge.dyn_ltree[2*G]=1,ge.opt_len=ge.static_len=0,ge.last_lit=ge.matches=0}function Wt(ge){8<ge.bi_valid?Ze(ge,ge.bi_buf):0<ge.bi_valid&&(ge.pending_buf[ge.pending++]=ge.bi_buf),ge.bi_buf=0,ge.bi_valid=0}function on(ge,Ve,vt,wt){var Ye=2*Ve,Ct=2*vt;return ge[Ye]<ge[Ct]||ge[Ye]===ge[Ct]&&wt[Ve]<=wt[vt]}function gn(ge,Ve,vt){for(var wt=ge.heap[vt],Ye=vt<<1;Ye<=ge.heap_len&&(Ye<ge.heap_len&&on(Ve,ge.heap[Ye+1],ge.heap[Ye],ge.depth)&&Ye++,!on(Ve,wt,ge.heap[Ye],ge.depth));)ge.heap[vt]=ge.heap[Ye],vt=Ye,Ye<<=1;ge.heap[vt]=wt}function dn(ge,Ve,vt){var wt,Ye,Ct,_t,St=0;if(ge.last_lit!==0)for(;wt=ge.pending_buf[ge.d_buf+2*St]<<8|ge.pending_buf[ge.d_buf+2*St+1],Ye=ge.pending_buf[ge.l_buf+St],St++,wt===0?rt(ge,Ye,Ve):(rt(ge,(Ct=q[Ye])+P+1,Ve),(_t=xe[Ct])!==0&&et(ge,Ye-=Fe[Ct],_t),rt(ge,Ct=de(--wt),vt),(_t=Me[Ct])!==0&&et(ge,wt-=Be[Ct],_t)),St<ge.last_lit;);rt(ge,G,Ve)}function sr(ge,Ve){var vt,wt,Ye,Ct=Ve.dyn_tree,_t=Ve.stat_desc.static_tree,St=Ve.stat_desc.has_stree,un=Ve.stat_desc.elems,ir=-1;for(ge.heap_len=0,ge.heap_max=C,vt=0;vt<un;vt++)Ct[2*vt]!==0?(ge.heap[++ge.heap_len]=ir=vt,ge.depth[vt]=0):Ct[2*vt+1]=0;for(;ge.heap_len<2;)Ct[2*(Ye=ge.heap[++ge.heap_len]=ir<2?++ir:0)]=1,ge.depth[Ye]=0,ge.opt_len--,St&&(ge.static_len-=_t[2*Ye+1]);for(Ve.max_code=ir,vt=ge.heap_len>>1;1<=vt;vt--)gn(ge,Ct,vt);for(Ye=un;vt=ge.heap[1],ge.heap[1]=ge.heap[ge.heap_len--],gn(ge,Ct,1),wt=ge.heap[1],ge.heap[--ge.heap_max]=vt,ge.heap[--ge.heap_max]=wt,Ct[2*Ye]=Ct[2*vt]+Ct[2*wt],ge.depth[Ye]=(ge.depth[vt]>=ge.depth[wt]?ge.depth[vt]:ge.depth[wt])+1,Ct[2*vt+1]=Ct[2*wt+1]=Ye,ge.heap[1]=Ye++,gn(ge,Ct,1),2<=ge.heap_len;);ge.heap[--ge.heap_max]=ge.heap[1],function(Pn,Zi){var gd,lo,Ds,qr,wh,Dg,Os=Zi.dyn_tree,Og=Zi.max_code,E_=Zi.stat_desc.static_tree,k_=Zi.stat_desc.has_stree,T_=Zi.stat_desc.extra_bits,Rg=Zi.stat_desc.extra_base,Ga=Zi.stat_desc.max_length,Rs=0;for(qr=0;qr<=L;qr++)Pn.bl_count[qr]=0;for(Os[2*Pn.heap[Pn.heap_max]+1]=0,gd=Pn.heap_max+1;gd<C;gd++)Ga<(qr=Os[2*Os[2*(lo=Pn.heap[gd])+1]+1]+1)&&(qr=Ga,Rs++),Os[2*lo+1]=qr,Og<lo||(Pn.bl_count[qr]++,wh=0,Rg<=lo&&(wh=T_[lo-Rg]),Dg=Os[2*lo],Pn.opt_len+=Dg*(qr+wh),k_&&(Pn.static_len+=Dg*(E_[2*lo+1]+wh)));if(Rs!==0){do{for(qr=Ga-1;Pn.bl_count[qr]===0;)qr--;Pn.bl_count[qr]--,Pn.bl_count[qr+1]+=2,Pn.bl_count[Ga]--,Rs-=2}while(0<Rs);for(qr=Ga;qr!==0;qr--)for(lo=Pn.bl_count[qr];lo!==0;)Og<(Ds=Pn.heap[--gd])||(Os[2*Ds+1]!==qr&&(Pn.opt_len+=(qr-Os[2*Ds+1])*Os[2*Ds],Os[2*Ds+1]=qr),lo--)}}(ge,Ve),$t(Ct,ir,ge.bl_count)}function $(ge,Ve,vt){var wt,Ye,Ct=-1,_t=Ve[1],St=0,un=7,ir=4;for(_t===0&&(un=138,ir=3),Ve[2*(vt+1)+1]=65535,wt=0;wt<=vt;wt++)Ye=_t,_t=Ve[2*(wt+1)+1],++St<un&&Ye===_t||(St<ir?ge.bl_tree[2*Ye]+=St:Ye!==0?(Ye!==Ct&&ge.bl_tree[2*Ye]++,ge.bl_tree[2*Q]++):St<=10?ge.bl_tree[2*J]++:ge.bl_tree[2*ie]++,Ct=Ye,ir=(St=0)===_t?(un=138,3):Ye===_t?(un=6,3):(un=7,4))}function ot(ge,Ve,vt){var wt,Ye,Ct=-1,_t=Ve[1],St=0,un=7,ir=4;for(_t===0&&(un=138,ir=3),wt=0;wt<=vt;wt++)if(Ye=_t,_t=Ve[2*(wt+1)+1],!(++St<un&&Ye===_t)){if(St<ir)for(;rt(ge,Ye,ge.bl_tree),--St!=0;);else Ye!==0?(Ye!==Ct&&(rt(ge,Ye,ge.bl_tree),St--),rt(ge,Q,ge.bl_tree),et(ge,St-3,2)):St<=10?(rt(ge,J,ge.bl_tree),et(ge,St-3,3)):(rt(ge,ie,ge.bl_tree),et(ge,St-11,7));Ct=Ye,ir=(St=0)===_t?(un=138,3):Ye===_t?(un=6,3):(un=7,4)}}v(Be);var it=!1;function be(ge,Ve,vt,wt){et(ge,(y<<1)+(wt?1:0),3),function(Ye,Ct,_t,St){Wt(Ye),St&&(Ze(Ye,_t),Ze(Ye,~_t)),u.arraySet(Ye.pending_buf,Ye.window,Ct,_t,Ye.pending),Ye.pending+=_t}(ge,Ve,vt,!0)}c._tr_init=function(ge){it||(function(){var Ve,vt,wt,Ye,Ct,_t=new Array(L+1);for(Ye=wt=0;Ye<k-1;Ye++)for(Fe[Ye]=wt,Ve=0;Ve<1<<xe[Ye];Ve++)q[wt++]=Ye;for(q[wt-1]=Ye,Ye=Ct=0;Ye<16;Ye++)for(Be[Ye]=Ct,Ve=0;Ve<1<<Me[Ye];Ve++)De[Ct++]=Ye;for(Ct>>=7;Ye<E;Ye++)for(Be[Ye]=Ct<<7,Ve=0;Ve<1<<Me[Ye]-7;Ve++)De[256+Ct++]=Ye;for(vt=0;vt<=L;vt++)_t[vt]=0;for(Ve=0;Ve<=143;)We[2*Ve+1]=8,Ve++,_t[8]++;for(;Ve<=255;)We[2*Ve+1]=9,Ve++,_t[9]++;for(;Ve<=279;)We[2*Ve+1]=7,Ve++,_t[7]++;for(;Ve<=287;)We[2*Ve+1]=8,Ve++,_t[8]++;for($t(We,T+1,_t),Ve=0;Ve<E;Ve++)oe[2*Ve+1]=5,oe[2*Ve]=Ue(Ve,5);Pt=new mt(We,xe,P+1,T,L),Pe=new mt(oe,Me,0,E,L),ke=new mt(new Array(0),ue,0,A,U)}(),it=!0),ge.l_desc=new ae(ge.dyn_ltree,Pt),ge.d_desc=new ae(ge.dyn_dtree,Pe),ge.bl_desc=new ae(ge.bl_tree,ke),ge.bi_buf=0,ge.bi_valid=0,ht(ge)},c._tr_stored_block=be,c._tr_flush_block=function(ge,Ve,vt,wt){var Ye,Ct,_t=0;0<ge.level?(ge.strm.data_type===2&&(ge.strm.data_type=function(St){var un,ir=4093624447;for(un=0;un<=31;un++,ir>>>=1)if(1&ir&&St.dyn_ltree[2*un]!==0)return f;if(St.dyn_ltree[18]!==0||St.dyn_ltree[20]!==0||St.dyn_ltree[26]!==0)return p;for(un=32;un<P;un++)if(St.dyn_ltree[2*un]!==0)return p;return f}(ge)),sr(ge,ge.l_desc),sr(ge,ge.d_desc),_t=function(St){var un;for($(St,St.dyn_ltree,St.l_desc.max_code),$(St,St.dyn_dtree,St.d_desc.max_code),sr(St,St.bl_desc),un=A-1;3<=un&&St.bl_tree[2*Ae[un]+1]===0;un--);return St.opt_len+=3*(un+1)+5+5+4,un}(ge),Ye=ge.opt_len+3+7>>>3,(Ct=ge.static_len+3+7>>>3)<=Ye&&(Ye=Ct)):Ye=Ct=vt+5,vt+4<=Ye&&Ve!==-1?be(ge,Ve,vt,wt):ge.strategy===4||Ct===Ye?(et(ge,2+(wt?1:0),3),dn(ge,We,oe)):(et(ge,4+(wt?1:0),3),function(St,un,ir,Pn){var Zi;for(et(St,un-257,5),et(St,ir-1,5),et(St,Pn-4,4),Zi=0;Zi<Pn;Zi++)et(St,St.bl_tree[2*Ae[Zi]+1],3);ot(St,St.dyn_ltree,un-1),ot(St,St.dyn_dtree,ir-1)}(ge,ge.l_desc.max_code+1,ge.d_desc.max_code+1,_t+1),dn(ge,ge.dyn_ltree,ge.dyn_dtree)),ht(ge),wt&&Wt(ge)},c._tr_tally=function(ge,Ve,vt){return ge.pending_buf[ge.d_buf+2*ge.last_lit]=Ve>>>8&255,ge.pending_buf[ge.d_buf+2*ge.last_lit+1]=255&Ve,ge.pending_buf[ge.l_buf+ge.last_lit]=255&vt,ge.last_lit++,Ve===0?ge.dyn_ltree[2*vt]++:(ge.matches++,Ve--,ge.dyn_ltree[2*(q[vt]+P+1)]++,ge.dyn_dtree[2*de(Ve)]++),ge.last_lit===ge.lit_bufsize-1},c._tr_align=function(ge){et(ge,2,3),rt(ge,G,We),function(Ve){Ve.bi_valid===16?(Ze(Ve,Ve.bi_buf),Ve.bi_buf=0,Ve.bi_valid=0):8<=Ve.bi_valid&&(Ve.pending_buf[Ve.pending++]=255&Ve.bi_buf,Ve.bi_buf>>=8,Ve.bi_valid-=8)}(ge)}},{"../utils/common":41}],53:[function(r,a,c){a.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],54:[function(r,a,c){(function(u){(function(f,p){if(!f.setImmediate){var v,y,k,P,T=1,E={},A=!1,C=f.document,L=Object.getPrototypeOf&&Object.getPrototypeOf(f);L=L&&L.setTimeout?L:f,v={}.toString.call(f.process)==="[object process]"?function(Q){process.nextTick(function(){U(Q)})}:function(){if(f.postMessage&&!f.importScripts){var Q=!0,J=f.onmessage;return f.onmessage=function(){Q=!1},f.postMessage("","*"),f.onmessage=J,Q}}()?(P="setImmediate$"+Math.random()+"$",f.addEventListener?f.addEventListener("message",G,!1):f.attachEvent("onmessage",G),function(Q){f.postMessage(P+Q,"*")}):f.MessageChannel?((k=new MessageChannel).port1.onmessage=function(Q){U(Q.data)},function(Q){k.port2.postMessage(Q)}):C&&"onreadystatechange"in C.createElement("script")?(y=C.documentElement,function(Q){var J=C.createElement("script");J.onreadystatechange=function(){U(Q),J.onreadystatechange=null,y.removeChild(J),J=null},y.appendChild(J)}):function(Q){setTimeout(U,0,Q)},L.setImmediate=function(Q){typeof Q!="function"&&(Q=new Function(""+Q));for(var J=new Array(arguments.length-1),ie=0;ie<J.length;ie++)J[ie]=arguments[ie+1];var xe={callback:Q,args:J};return E[T]=xe,v(T),T++},L.clearImmediate=N}function N(Q){delete E[Q]}function U(Q){if(A)setTimeout(U,0,Q);else{var J=E[Q];if(J){A=!0;try{(function(ie){var xe=ie.callback,Me=ie.args;switch(Me.length){case 0:xe();break;case 1:xe(Me[0]);break;case 2:xe(Me[0],Me[1]);break;case 3:xe(Me[0],Me[1],Me[2]);break;default:xe.apply(p,Me)}})(J)}finally{N(Q),A=!1}}}}function G(Q){Q.source===f&&typeof Q.data=="string"&&Q.data.indexOf(P)===0&&U(+Q.data.slice(P.length))}})(typeof self=="undefined"?u===void 0?this:u:self)}).call(this,typeof $r!="undefined"?$r:typeof self!="undefined"?self:typeof window!="undefined"?window:{})},{}]},{},[10])(10)})}),sD,Vk,cV,lD,uV,dV,Nb,fV,cD,hV,Hk,Fb,jb,Qu,pV,mV,gV,cg,Wo,vV,yV,uD,Gk,Pse=R(()=>{sD=ee(Oe(),1),Vk=ee(Oe(),1),cV=e=>typeof e=="function",lD=(e,n)=>cV(e)?e(n):e,uV=(()=>{let e=0;return()=>(++e).toString()})(),dV=20,Nb=new Map,fV=1e3,cD=e=>{if(Nb.has(e))return;let n=setTimeout(()=>{Nb.delete(e),Qu({type:4,toastId:e})},fV);Nb.set(e,n)},hV=e=>{let n=Nb.get(e);n&&clearTimeout(n)},Hk=(e,n)=>{switch(n.type){case 0:return W(O({},e),{toasts:[n.toast,...e.toasts].slice(0,dV)});case 1:return n.toast.id&&hV(n.toast.id),W(O({},e),{toasts:e.toasts.map(u=>u.id===n.toast.id?O(O({},u),n.toast):u)});case 2:let{toast:r}=n;return e.toasts.find(u=>u.id===r.id)?Hk(e,{type:1,toast:r}):Hk(e,{type:0,toast:r});case 3:let{toastId:a}=n;return a?cD(a):e.toasts.forEach(u=>{cD(u.id)}),W(O({},e),{toasts:e.toasts.map(u=>u.id===a||a===void 0?W(O({},u),{visible:!1}):u)});case 4:return n.toastId===void 0?W(O({},e),{toasts:[]}):W(O({},e),{toasts:e.toasts.filter(u=>u.id!==n.toastId)});case 5:return W(O({},e),{pausedAt:n.time});case 6:let c=n.time-(e.pausedAt||0);return W(O({},e),{pausedAt:void 0,toasts:e.toasts.map(u=>W(O({},u),{pauseDuration:u.pauseDuration+c}))})}},Fb=[],jb={toasts:[],pausedAt:void 0},Qu=e=>{jb=Hk(jb,e),Fb.forEach(n=>{n(jb)})},pV={blank:4e3,error:4e3,success:2e3,loading:1/0,custom:4e3},mV=(e={})=>{let[n,r]=(0,sD.useState)(jb);(0,sD.useEffect)(()=>(Fb.push(r),()=>{let c=Fb.indexOf(r);c>-1&&Fb.splice(c,1)}),[n]);let a=n.toasts.map(c=>{var u,f;return W(O(O(O({},e),e[c.type]),c),{duration:c.duration||((u=e[c.type])==null?void 0:u.duration)||(e==null?void 0:e.duration)||pV[c.type],style:O(O(O({},e.style),(f=e[c.type])==null?void 0:f.style),c.style)})});return W(O({},n),{toasts:a})},gV=(e,n="blank",r)=>W(O({createdAt:Date.now(),visible:!0,type:n,ariaProps:{role:"status","aria-live":"polite"},message:e,pauseDuration:0},r),{id:(r==null?void 0:r.id)||uV()}),cg=e=>(n,r)=>{let a=gV(n,e,r);return Qu({type:2,toast:a}),a.id},Wo=(e,n)=>cg("blank")(e,n),Wo.error=cg("error"),Wo.success=cg("success"),Wo.loading=cg("loading"),Wo.custom=cg("custom"),Wo.dismiss=e=>{Qu({type:3,toastId:e})},Wo.remove=e=>Qu({type:4,toastId:e}),Wo.promise=(e,n,r)=>{let a=Wo.loading(n.loading,O(O({},r),r==null?void 0:r.loading));return e.then(c=>(Wo.success(lD(n.success,c),O(O({id:a},r),r==null?void 0:r.success)),c)).catch(c=>{Wo.error(lD(n.error,c),O(O({id:a},r),r==null?void 0:r.error))}),e},vV=(e,n)=>{Qu({type:1,toast:{id:e,height:n}})},yV=()=>{Qu({type:5,time:Date.now()})},uD=e=>{let{toasts:n,pausedAt:r}=mV(e);(0,Vk.useEffect)(()=>{if(r)return;let u=Date.now(),f=n.map(p=>{if(p.duration===1/0)return;let v=(p.duration||0)+p.pauseDuration-(u-p.createdAt);if(v<0){p.visible&&Wo.dismiss(p.id);return}return setTimeout(()=>Wo.dismiss(p.id),v)});return()=>{f.forEach(p=>p&&clearTimeout(p))}},[n,r]);let a=(0,Vk.useCallback)(()=>{r&&Qu({type:6,time:Date.now()})},[r]),c=(0,Vk.useCallback)((u,f)=>{let{reverseOrder:p=!1,gutter:v=8,defaultPosition:y}=f||{},k=n.filter(E=>(E.position||y)===(u.position||y)&&E.height),P=k.findIndex(E=>E.id===u.id),T=k.filter((E,A)=>A<P&&E.visible).length;return k.filter(E=>E.visible).slice(...p?[T+1]:[0,T]).reduce((E,A)=>E+(A.height||0)+v,0)},[n]);return{toasts:n,handlers:{updateHeight:vV,startPause:yV,endPause:a,calculateOffset:c}}},Gk=Wo});function bV(){return{async:!1,baseUrl:null,breaks:!1,extensions:null,gfm:!0,headerIds:!0,headerPrefix:"",highlight:null,langPrefix:"language-",mangle:!0,pedantic:!1,renderer:null,sanitize:!1,sanitizer:null,silent:!1,smartypants:!1,tokenizer:null,walkTokens:null,xhtml:!1}}function Cse(e){Wf=e}function Di(e,n){if(n){if(MV.test(e))return e.replace(PV,dD)}else if(CV.test(e))return e.replace(AV,dD);return e}function _V(e){return e.replace(DV,(n,r)=>(r=r.toLowerCase(),r==="colon"?":":r.charAt(0)==="#"?r.charAt(1)==="x"?String.fromCharCode(parseInt(r.substring(2),16)):String.fromCharCode(+r.substring(1)):""))}function Tr(e,n){e=typeof e=="string"?e:e.source,n=n||"";let r={replace:(a,c)=>(c=c.source||c,c=c.replace(OV,"$1"),e=e.replace(a,c),r),getRegex:()=>new RegExp(e,n)};return r}function xV(e,n,r){if(e){let a;try{a=decodeURIComponent(_V(r)).replace(RV,"").toLowerCase()}catch{return null}if(a.indexOf("javascript:")===0||a.indexOf("vbscript:")===0||a.indexOf("data:")===0)return null}n&&!LV.test(r)&&(r=Ase(n,r));try{r=encodeURI(r).replace(/%25/g,"%")}catch{return null}return r}function Ase(e,n){Bb[" "+e]||(zV.test(e)?Bb[" "+e]=e+"/":Bb[" "+e]=Wk(e,"/",!0)),e=Bb[" "+e];let r=e.indexOf(":")===-1;return n.substring(0,2)==="//"?r?n:e.replace(NV,"$1")+n:n.charAt(0)==="/"?r?n:e.replace(FV,"$1")+n:e+n}function Es(e){let n=1,r,a;for(;n<arguments.length;n++){r=arguments[n];for(a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e}function wV(e,n){let r=e.replace(/\|/g,(u,f,p)=>{let v=!1,y=f;for(;--y>=0&&p[y]==="\\";)v=!v;return v?"|":" |"}),a=r.split(/ \|/),c=0;if(a[0].trim()||a.shift(),a.length>0&&!a[a.length-1].trim()&&a.pop(),a.length>n)a.splice(n);else for(;a.length<n;)a.push("");for(;c<a.length;c++)a[c]=a[c].trim().replace(/\\\|/g,"|");return a}function Wk(e,n,r){let a=e.length;if(a===0)return"";let c=0;for(;c<a;){let u=e.charAt(a-c-1);if(u===n&&!r)c++;else if(u!==n&&r)c++;else break}return e.slice(0,a-c)}function Ise(e,n){if(e.indexOf(n[1])===-1)return-1;let r=e.length,a=0,c=0;for(;c<r;c++)if(e[c]==="\\")c++;else if(e[c]===n[0])a++;else if(e[c]===n[1]&&(a--,a<0))return c;return-1}function SV(e){e&&e.sanitize&&!e.silent&&console.warn("marked(): sanitize and sanitizer parameters are deprecated since version 0.7.0, should not be used and will be removed in the future. Read more here: https://marked.js.org/#/USING_ADVANCED.md#options")}function EV(e,n){if(n<1)return"";let r="";for(;n>1;)n&1&&(r+=e),n>>=1,e+=e;return r+e}function kV(e,n,r,a){let c=n.href,u=n.title?Di(n.title):null,f=e[1].replace(/\\([\[\]])/g,"$1");if(e[0].charAt(0)!=="!"){a.state.inLink=!0;let p={type:"link",raw:r,href:c,title:u,text:f,tokens:a.inlineTokens(f)};return a.state.inLink=!1,p}return{type:"image",raw:r,href:c,title:u,text:Di(f)}}function Dse(e,n){let r=e.match(/^(\s+)(?:```)/);if(r===null)return n;let a=r[1];return n.split(`
`).map(c=>{let u=c.match(/^\s+/);if(u===null)return c;let[f]=u;return f.length>=a.length?c.slice(a.length):c}).join(`
`)}function Ose(e){return e.replace(/---/g,"\u2014").replace(/--/g,"\u2013").replace(/(^|[-\u2014/(\[{"\s])'/g,"$1\u2018").replace(/'/g,"\u2019").replace(/(^|[-\u2014/(\[{\u2018\s])"/g,"$1\u201C").replace(/"/g,"\u201D").replace(/\.{3}/g,"\u2026")}function TV(e){let n="",r,a,c=e.length;for(r=0;r<c;r++)a=e.charCodeAt(r),Math.random()>.5&&(a="x"+a.toString(16)),n+="&#"+a+";";return n}function kn(e,n,r){if(typeof e=="undefined"||e===null)throw new Error("marked(): input parameter is undefined or null");if(typeof e!="string")throw new Error("marked(): input parameter is of type "+Object.prototype.toString.call(e)+", string expected");if(typeof n=="function"&&(r=n,n=null),n=Es({},kn.defaults,n||{}),SV(n),r){let c=n.highlight,u;try{u=qf.lex(e,n)}catch(v){return r(v)}let f=function(v){let y;if(!v)try{n.walkTokens&&kn.walkTokens(u,n.walkTokens),y=ed.parse(u,n)}catch(k){v=k}return n.highlight=c,v?r(v):r(null,y)};if(!c||c.length<3||(delete n.highlight,!u.length))return f();let p=0;kn.walkTokens(u,function(v){v.type==="code"&&(p++,setTimeout(()=>{c(v.text,v.lang,function(y,k){if(y)return f(y);k!=null&&k!==v.text&&(v.text=k,v.escaped=!0),p--,p===0&&f()})},0))}),p===0&&f();return}function a(c){if(c.message+=`
Please report this to https://github.com/markedjs/marked.`,n.silent)return"<p>An error occurred:</p><pre>"+Di(c.message+"",!0)+"</pre>";throw c}try{let c=qf.lex(e,n);if(n.walkTokens){if(n.async)return Promise.all(kn.walkTokens(c,n.walkTokens)).then(()=>ed.parse(c,n)).catch(a);kn.walkTokens(c,n.walkTokens)}return ed.parse(c,n)}catch(c){a(c)}}var Wf,MV,PV,CV,AV,IV,dD,DV,OV,RV,LV,Bb,zV,NV,FV,Ub,qk,mn,nn,qf,Kk,fD,hD,ed,Rse=R(()=>{Wf=bV(),MV=/[&<>"']/,PV=/[&<>"']/g,CV=/[<>"']|&(?!#?\w+;)/,AV=/[<>"']|&(?!#?\w+;)/g,IV={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},dD=e=>IV[e],DV=/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/ig,OV=/(^|[^\[])\^/g,RV=/[^\w:]/g,LV=/^$|^[a-z][a-z0-9+.-]*:|^[?#]/i,Bb={},zV=/^[^:]+:\/*[^/]*$/,NV=/^([^:]+:)[\s\S]*$/,FV=/^([^:]+:\/*[^/]*)[\s\S]*$/,Ub={exec:function(){}},qk=class{constructor(e){this.options=e||Wf}space(e){let n=this.rules.block.newline.exec(e);if(n&&n[0].length>0)return{type:"space",raw:n[0]}}code(e){let n=this.rules.block.code.exec(e);if(n){let r=n[0].replace(/^ {1,4}/gm,"");return{type:"code",raw:n[0],codeBlockStyle:"indented",text:this.options.pedantic?r:Wk(r,`
`)}}}fences(e){let n=this.rules.block.fences.exec(e);if(n){let r=n[0],a=Dse(r,n[3]||"");return{type:"code",raw:r,lang:n[2]?n[2].trim():n[2],text:a}}}heading(e){let n=this.rules.block.heading.exec(e);if(n){let r=n[2].trim();if(/#$/.test(r)){let a=Wk(r,"#");(this.options.pedantic||!a||/ $/.test(a))&&(r=a.trim())}return{type:"heading",raw:n[0],depth:n[1].length,text:r,tokens:this.lexer.inline(r)}}}hr(e){let n=this.rules.block.hr.exec(e);if(n)return{type:"hr",raw:n[0]}}blockquote(e){let n=this.rules.block.blockquote.exec(e);if(n){let r=n[0].replace(/^ *>[ \t]?/gm,"");return{type:"blockquote",raw:n[0],tokens:this.lexer.blockTokens(r,[]),text:r}}}list(e){let n=this.rules.block.list.exec(e);if(n){let r,a,c,u,f,p,v,y,k,P,T,E,A=n[1].trim(),C=A.length>1,L={type:"list",raw:"",ordered:C,start:C?+A.slice(0,-1):"",loose:!1,items:[]};A=C?"\\d{1,9}\\".concat(A.slice(-1)):"\\".concat(A),this.options.pedantic&&(A=C?A:"[*+-]");let N=new RegExp("^( {0,3}".concat(A,")((?:[	 ][^\\n]*)?(?:\\n|$))"));for(;e&&(E=!1,!(!(n=N.exec(e))||this.rules.block.hr.test(e)));){if(r=n[0],e=e.substring(r.length),y=n[2].split(`
`,1)[0],k=e.split(`
`,1)[0],this.options.pedantic?(u=2,T=y.trimLeft()):(u=n[2].search(/[^ ]/),u=u>4?1:u,T=y.slice(u),u+=n[1].length),p=!1,!y&&/^ *$/.test(k)&&(r+=k+`
`,e=e.substring(k.length+1),E=!0),!E){let G=new RegExp("^ {0,".concat(Math.min(3,u-1),"}(?:[*+-]|\\d{1,9}[.)])((?: [^\\n]*)?(?:\\n|$))")),Q=new RegExp("^ {0,".concat(Math.min(3,u-1),"}((?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$)")),J=new RegExp("^ {0,".concat(Math.min(3,u-1),"}(?:```|~~~)")),ie=new RegExp("^ {0,".concat(Math.min(3,u-1),"}#"));for(;e&&(P=e.split(`
`,1)[0],y=P,this.options.pedantic&&(y=y.replace(/^ {1,4}(?=( {4})*[^ ])/g,"  ")),!(J.test(y)||ie.test(y)||G.test(y)||Q.test(e)));){if(y.search(/[^ ]/)>=u||!y.trim())T+=`
`+y.slice(u);else if(!p)T+=`
`+y;else break;!p&&!y.trim()&&(p=!0),r+=P+`
`,e=e.substring(P.length+1)}}L.loose||(v?L.loose=!0:/\n *\n *$/.test(r)&&(v=!0)),this.options.gfm&&(a=/^\[[ xX]\] /.exec(T),a&&(c=a[0]!=="[ ] ",T=T.replace(/^\[[ xX]\] +/,""))),L.items.push({type:"list_item",raw:r,task:!!a,checked:c,loose:!1,text:T}),L.raw+=r}L.items[L.items.length-1].raw=r.trimRight(),L.items[L.items.length-1].text=T.trimRight(),L.raw=L.raw.trimRight();let U=L.items.length;for(f=0;f<U;f++){this.lexer.state.top=!1,L.items[f].tokens=this.lexer.blockTokens(L.items[f].text,[]);let G=L.items[f].tokens.filter(J=>J.type==="space"),Q=G.every(J=>{let ie=J.raw.split(""),xe=0;for(let Me of ie)if(Me===`
`&&(xe+=1),xe>1)return!0;return!1});!L.loose&&G.length&&Q&&(L.loose=!0,L.items[f].loose=!0)}return L}}html(e){let n=this.rules.block.html.exec(e);if(n){let r={type:"html",raw:n[0],pre:!this.options.sanitizer&&(n[1]==="pre"||n[1]==="script"||n[1]==="style"),text:n[0]};if(this.options.sanitize){let a=this.options.sanitizer?this.options.sanitizer(n[0]):Di(n[0]);r.type="paragraph",r.text=a,r.tokens=this.lexer.inline(a)}return r}}def(e){let n=this.rules.block.def.exec(e);if(n)return n[3]&&(n[3]=n[3].substring(1,n[3].length-1)),{type:"def",tag:n[1].toLowerCase().replace(/\s+/g," "),raw:n[0],href:n[2],title:n[3]}}table(e){let n=this.rules.block.table.exec(e);if(n){let r={type:"table",header:wV(n[1]).map(a=>({text:a})),align:n[2].replace(/^ *|\| *$/g,"").split(/ *\| */),rows:n[3]&&n[3].trim()?n[3].replace(/\n[ \t]*$/,"").split(`
`):[]};if(r.header.length===r.align.length){r.raw=n[0];let a=r.align.length,c,u,f,p;for(c=0;c<a;c++)/^ *-+: *$/.test(r.align[c])?r.align[c]="right":/^ *:-+: *$/.test(r.align[c])?r.align[c]="center":/^ *:-+ *$/.test(r.align[c])?r.align[c]="left":r.align[c]=null;for(a=r.rows.length,c=0;c<a;c++)r.rows[c]=wV(r.rows[c],r.header.length).map(v=>({text:v}));for(a=r.header.length,u=0;u<a;u++)r.header[u].tokens=this.lexer.inline(r.header[u].text);for(a=r.rows.length,u=0;u<a;u++)for(p=r.rows[u],f=0;f<p.length;f++)p[f].tokens=this.lexer.inline(p[f].text);return r}}}lheading(e){let n=this.rules.block.lheading.exec(e);if(n)return{type:"heading",raw:n[0],depth:n[2].charAt(0)==="="?1:2,text:n[1],tokens:this.lexer.inline(n[1])}}paragraph(e){let n=this.rules.block.paragraph.exec(e);if(n){let r=n[1].charAt(n[1].length-1)===`
`?n[1].slice(0,-1):n[1];return{type:"paragraph",raw:n[0],text:r,tokens:this.lexer.inline(r)}}}text(e){let n=this.rules.block.text.exec(e);if(n)return{type:"text",raw:n[0],text:n[0],tokens:this.lexer.inline(n[0])}}escape(e){let n=this.rules.inline.escape.exec(e);if(n)return{type:"escape",raw:n[0],text:Di(n[1])}}tag(e){let n=this.rules.inline.tag.exec(e);if(n)return!this.lexer.state.inLink&&/^<a /i.test(n[0])?this.lexer.state.inLink=!0:this.lexer.state.inLink&&/^<\/a>/i.test(n[0])&&(this.lexer.state.inLink=!1),!this.lexer.state.inRawBlock&&/^<(pre|code|kbd|script)(\s|>)/i.test(n[0])?this.lexer.state.inRawBlock=!0:this.lexer.state.inRawBlock&&/^<\/(pre|code|kbd|script)(\s|>)/i.test(n[0])&&(this.lexer.state.inRawBlock=!1),{type:this.options.sanitize?"text":"html",raw:n[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,text:this.options.sanitize?this.options.sanitizer?this.options.sanitizer(n[0]):Di(n[0]):n[0]}}link(e){let n=this.rules.inline.link.exec(e);if(n){let r=n[2].trim();if(!this.options.pedantic&&/^</.test(r)){if(!/>$/.test(r))return;let u=Wk(r.slice(0,-1),"\\");if((r.length-u.length)%2===0)return}else{let u=Ise(n[2],"()");if(u>-1){let f=(n[0].indexOf("!")===0?5:4)+n[1].length+u;n[2]=n[2].substring(0,u),n[0]=n[0].substring(0,f).trim(),n[3]=""}}let a=n[2],c="";if(this.options.pedantic){let u=/^([^'"]*[^\s])\s+(['"])(.*)\2/.exec(a);u&&(a=u[1],c=u[3])}else c=n[3]?n[3].slice(1,-1):"";return a=a.trim(),/^</.test(a)&&(this.options.pedantic&&!/>$/.test(r)?a=a.slice(1):a=a.slice(1,-1)),kV(n,{href:a&&a.replace(this.rules.inline._escapes,"$1"),title:c&&c.replace(this.rules.inline._escapes,"$1")},n[0],this.lexer)}}reflink(e,n){let r;if((r=this.rules.inline.reflink.exec(e))||(r=this.rules.inline.nolink.exec(e))){let a=(r[2]||r[1]).replace(/\s+/g," ");if(a=n[a.toLowerCase()],!a||!a.href){let c=r[0].charAt(0);return{type:"text",raw:c,text:c}}return kV(r,a,r[0],this.lexer)}}emStrong(e,n,r=""){let a=this.rules.inline.emStrong.lDelim.exec(e);if(!a||a[3]&&r.match(/[\p{L}\p{N}]/u))return;let c=a[1]||a[2]||"";if(!c||c&&(r===""||this.rules.inline.punctuation.exec(r))){let u=a[0].length-1,f,p,v=u,y=0,k=a[0][0]==="*"?this.rules.inline.emStrong.rDelimAst:this.rules.inline.emStrong.rDelimUnd;for(k.lastIndex=0,n=n.slice(-1*e.length+u);(a=k.exec(n))!=null;){if(f=a[1]||a[2]||a[3]||a[4]||a[5]||a[6],!f)continue;if(p=f.length,a[3]||a[4]){v+=p;continue}else if((a[5]||a[6])&&u%3&&!((u+p)%3)){y+=p;continue}if(v-=p,v>0)continue;if(p=Math.min(p,p+v+y),Math.min(u,p)%2){let T=e.slice(1,u+a.index+p);return{type:"em",raw:e.slice(0,u+a.index+p+1),text:T,tokens:this.lexer.inlineTokens(T)}}let P=e.slice(2,u+a.index+p-1);return{type:"strong",raw:e.slice(0,u+a.index+p+1),text:P,tokens:this.lexer.inlineTokens(P)}}}}codespan(e){let n=this.rules.inline.code.exec(e);if(n){let r=n[2].replace(/\n/g," "),a=/[^ ]/.test(r),c=/^ /.test(r)&&/ $/.test(r);return a&&c&&(r=r.substring(1,r.length-1)),r=Di(r,!0),{type:"codespan",raw:n[0],text:r}}}br(e){let n=this.rules.inline.br.exec(e);if(n)return{type:"br",raw:n[0]}}del(e){let n=this.rules.inline.del.exec(e);if(n)return{type:"del",raw:n[0],text:n[2],tokens:this.lexer.inlineTokens(n[2])}}autolink(e,n){let r=this.rules.inline.autolink.exec(e);if(r){let a,c;return r[2]==="@"?(a=Di(this.options.mangle?n(r[1]):r[1]),c="mailto:"+a):(a=Di(r[1]),c=a),{type:"link",raw:r[0],text:a,href:c,tokens:[{type:"text",raw:a,text:a}]}}}url(e,n){let r;if(r=this.rules.inline.url.exec(e)){let a,c;if(r[2]==="@")a=Di(this.options.mangle?n(r[0]):r[0]),c="mailto:"+a;else{let u;do u=r[0],r[0]=this.rules.inline._backpedal.exec(r[0])[0];while(u!==r[0]);a=Di(r[0]),r[1]==="www."?c="http://"+a:c=a}return{type:"link",raw:r[0],text:a,href:c,tokens:[{type:"text",raw:a,text:a}]}}}inlineText(e,n){let r=this.rules.inline.text.exec(e);if(r){let a;return this.lexer.state.inRawBlock?a=this.options.sanitize?this.options.sanitizer?this.options.sanitizer(r[0]):Di(r[0]):r[0]:a=Di(this.options.smartypants?n(r[0]):r[0]),{type:"text",raw:r[0],text:a}}}},mn={newline:/^(?: *(?:\n|$))+/,code:/^( {4}[^\n]+(?:\n(?: *(?:\n|$))*)?)+/,fences:/^ {0,3}(`{3,}(?=[^`\n]*\n)|~{3,})([^\n]*)\n(?:|([\s\S]*?)\n)(?: {0,3}\1[~`]* *(?=\n|$)|$)/,hr:/^ {0,3}((?:-[\t ]*){3,}|(?:_[ \t]*){3,}|(?:\*[ \t]*){3,})(?:\n+|$)/,heading:/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,blockquote:/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/,list:/^( {0,3}bull)([ \t][^\n]+?)?(?:\n|$)/,html:"^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n *)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$))",def:/^ {0,3}\[(label)\]: *(?:\n *)?<?([^\s>]+)>?(?:(?: +(?:\n *)?| *\n *)(title))? *(?:\n+|$)/,table:Ub,lheading:/^([^\n]+)\n {0,3}(=+|-+) *(?:\n+|$)/,_paragraph:/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\n)[^\n]+)*)/,text:/^[^\n]+/},mn._label=/(?!\s*\])(?:\\.|[^\[\]\\])+/,mn._title=/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/,mn.def=Tr(mn.def).replace("label",mn._label).replace("title",mn._title).getRegex(),mn.bullet=/(?:[*+-]|\d{1,9}[.)])/,mn.listItemStart=Tr(/^( *)(bull) */).replace("bull",mn.bullet).getRegex(),mn.list=Tr(mn.list).replace(/bull/g,mn.bullet).replace("hr","\\n+(?=\\1?(?:(?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$))").replace("def","\\n+(?="+mn.def.source+")").getRegex(),mn._tag="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|section|source|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",mn._comment=/<!--(?!-?>)[\s\S]*?(?:-->|$)/,mn.html=Tr(mn.html,"i").replace("comment",mn._comment).replace("tag",mn._tag).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),mn.paragraph=Tr(mn._paragraph).replace("hr",mn.hr).replace("heading"," {0,3}#{1,6} ").replace("|lheading","").replace("|table","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",mn._tag).getRegex(),mn.blockquote=Tr(mn.blockquote).replace("paragraph",mn.paragraph).getRegex(),mn.normal=Es({},mn),mn.gfm=Es({},mn.normal,{table:"^ *([^\\n ].*\\|.*)\\n {0,3}(?:\\| *)?(:?-+:? *(?:\\| *:?-+:? *)*)(?:\\| *)?(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)"}),mn.gfm.table=Tr(mn.gfm.table).replace("hr",mn.hr).replace("heading"," {0,3}#{1,6} ").replace("blockquote"," {0,3}>").replace("code"," {4}[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",mn._tag).getRegex(),mn.gfm.paragraph=Tr(mn._paragraph).replace("hr",mn.hr).replace("heading"," {0,3}#{1,6} ").replace("|lheading","").replace("table",mn.gfm.table).replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",mn._tag).getRegex(),mn.pedantic=Es({},mn.normal,{html:Tr(`^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:"[^"]*"|'[^']*'|\\s[^'"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))`).replace("comment",mn._comment).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:Ub,paragraph:Tr(mn.normal._paragraph).replace("hr",mn.hr).replace("heading",` *#{1,6} *[^
]`).replace("lheading",mn.lheading).replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").getRegex()}),nn={escape:/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,autolink:/^<(scheme:[^\s\x00-\x1f<>]*|email)>/,url:Ub,tag:"^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>",link:/^!?\[(label)\]\(\s*(href)(?:\s+(title))?\s*\)/,reflink:/^!?\[(label)\]\[(ref)\]/,nolink:/^!?\[(ref)\](?:\[\])?/,reflinkSearch:"reflink|nolink(?!\\()",emStrong:{lDelim:/^(?:\*+(?:([punct_])|[^\s*]))|^_+(?:([punct*])|([^\s_]))/,rDelimAst:/^[^_*]*?\_\_[^_*]*?\*[^_*]*?(?=\_\_)|[^*]+(?=[^*])|[punct_](\*+)(?=[\s]|$)|[^punct*_\s](\*+)(?=[punct_\s]|$)|[punct_\s](\*+)(?=[^punct*_\s])|[\s](\*+)(?=[punct_])|[punct_](\*+)(?=[punct_])|[^punct*_\s](\*+)(?=[^punct*_\s])/,rDelimUnd:/^[^_*]*?\*\*[^_*]*?\_[^_*]*?(?=\*\*)|[^_]+(?=[^_])|[punct*](\_+)(?=[\s]|$)|[^punct*_\s](\_+)(?=[punct*\s]|$)|[punct*\s](\_+)(?=[^punct*_\s])|[\s](\_+)(?=[punct*])|[punct*](\_+)(?=[punct*])/},code:/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,br:/^( {2,}|\\)\n(?!\s*$)/,del:Ub,text:/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,punctuation:/^([\spunctuation])/},nn._punctuation="!\"#$%&'()+\\-.,/:;<=>?@\\[\\]`^{|}~",nn.punctuation=Tr(nn.punctuation).replace(/punctuation/g,nn._punctuation).getRegex(),nn.blockSkip=/\[[^\]]*?\]\([^\)]*?\)|`[^`]*?`|<[^>]*?>/g,nn.escapedEmSt=/\\\*|\\_/g,nn._comment=Tr(mn._comment).replace("(?:-->|$)","-->").getRegex(),nn.emStrong.lDelim=Tr(nn.emStrong.lDelim).replace(/punct/g,nn._punctuation).getRegex(),nn.emStrong.rDelimAst=Tr(nn.emStrong.rDelimAst,"g").replace(/punct/g,nn._punctuation).getRegex(),nn.emStrong.rDelimUnd=Tr(nn.emStrong.rDelimUnd,"g").replace(/punct/g,nn._punctuation).getRegex(),nn._escapes=/\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/g,nn._scheme=/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/,nn._email=/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/,nn.autolink=Tr(nn.autolink).replace("scheme",nn._scheme).replace("email",nn._email).getRegex(),nn._attribute=/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/,nn.tag=Tr(nn.tag).replace("comment",nn._comment).replace("attribute",nn._attribute).getRegex(),nn._label=/(?:\[(?:\\.|[^\[\]\\])*\]|\\.|`[^`]*`|[^\[\]\\`])*?/,nn._href=/<(?:\\.|[^\n<>\\])+>|[^\s\x00-\x1f]*/,nn._title=/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/,nn.link=Tr(nn.link).replace("label",nn._label).replace("href",nn._href).replace("title",nn._title).getRegex(),nn.reflink=Tr(nn.reflink).replace("label",nn._label).replace("ref",mn._label).getRegex(),nn.nolink=Tr(nn.nolink).replace("ref",mn._label).getRegex(),nn.reflinkSearch=Tr(nn.reflinkSearch,"g").replace("reflink",nn.reflink).replace("nolink",nn.nolink).getRegex(),nn.normal=Es({},nn),nn.pedantic=Es({},nn.normal,{strong:{start:/^__|\*\*/,middle:/^__(?=\S)([\s\S]*?\S)__(?!_)|^\*\*(?=\S)([\s\S]*?\S)\*\*(?!\*)/,endAst:/\*\*(?!\*)/g,endUnd:/__(?!_)/g},em:{start:/^_|\*/,middle:/^()\*(?=\S)([\s\S]*?\S)\*(?!\*)|^_(?=\S)([\s\S]*?\S)_(?!_)/,endAst:/\*(?!\*)/g,endUnd:/_(?!_)/g},link:Tr(/^!?\[(label)\]\((.*?)\)/).replace("label",nn._label).getRegex(),reflink:Tr(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",nn._label).getRegex()}),nn.gfm=Es({},nn.normal,{escape:Tr(nn.escape).replace("])","~|])").getRegex(),_extended_email:/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/,url:/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,_backpedal:/(?:[^?!.,:;*_~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])([\s\S]*?[^\s~])\1(?=[^~]|$)/,text:/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/}),nn.gfm.url=Tr(nn.gfm.url,"i").replace("email",nn.gfm._extended_email).getRegex(),nn.breaks=Es({},nn.gfm,{br:Tr(nn.br).replace("{2,}","*").getRegex(),text:Tr(nn.gfm.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()}),qf=class BL{constructor(n){this.tokens=[],this.tokens.links=Object.create(null),this.options=n||Wf,this.options.tokenizer=this.options.tokenizer||new qk,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};let r={block:mn.normal,inline:nn.normal};this.options.pedantic?(r.block=mn.pedantic,r.inline=nn.pedantic):this.options.gfm&&(r.block=mn.gfm,this.options.breaks?r.inline=nn.breaks:r.inline=nn.gfm),this.tokenizer.rules=r}static get rules(){return{block:mn,inline:nn}}static lex(n,r){return new BL(r).lex(n)}static lexInline(n,r){return new BL(r).inlineTokens(n)}lex(n){n=n.replace(/\r\n|\r/g,`
`),this.blockTokens(n,this.tokens);let r;for(;r=this.inlineQueue.shift();)this.inlineTokens(r.src,r.tokens);return this.tokens}blockTokens(n,r=[]){this.options.pedantic?n=n.replace(/\t/g,"    ").replace(/^ +$/gm,""):n=n.replace(/^( *)(\t+)/gm,(p,v,y)=>v+"    ".repeat(y.length));let a,c,u,f;for(;n;)if(!(this.options.extensions&&this.options.extensions.block&&this.options.extensions.block.some(p=>(a=p.call({lexer:this},n,r))?(n=n.substring(a.raw.length),r.push(a),!0):!1))){if(a=this.tokenizer.space(n)){n=n.substring(a.raw.length),a.raw.length===1&&r.length>0?r[r.length-1].raw+=`
`:r.push(a);continue}if(a=this.tokenizer.code(n)){n=n.substring(a.raw.length),c=r[r.length-1],c&&(c.type==="paragraph"||c.type==="text")?(c.raw+=`
`+a.raw,c.text+=`
`+a.text,this.inlineQueue[this.inlineQueue.length-1].src=c.text):r.push(a);continue}if(a=this.tokenizer.fences(n)){n=n.substring(a.raw.length),r.push(a);continue}if(a=this.tokenizer.heading(n)){n=n.substring(a.raw.length),r.push(a);continue}if(a=this.tokenizer.hr(n)){n=n.substring(a.raw.length),r.push(a);continue}if(a=this.tokenizer.blockquote(n)){n=n.substring(a.raw.length),r.push(a);continue}if(a=this.tokenizer.list(n)){n=n.substring(a.raw.length),r.push(a);continue}if(a=this.tokenizer.html(n)){n=n.substring(a.raw.length),r.push(a);continue}if(a=this.tokenizer.def(n)){n=n.substring(a.raw.length),c=r[r.length-1],c&&(c.type==="paragraph"||c.type==="text")?(c.raw+=`
`+a.raw,c.text+=`
`+a.raw,this.inlineQueue[this.inlineQueue.length-1].src=c.text):this.tokens.links[a.tag]||(this.tokens.links[a.tag]={href:a.href,title:a.title});continue}if(a=this.tokenizer.table(n)){n=n.substring(a.raw.length),r.push(a);continue}if(a=this.tokenizer.lheading(n)){n=n.substring(a.raw.length),r.push(a);continue}if(u=n,this.options.extensions&&this.options.extensions.startBlock){let p=1/0,v=n.slice(1),y;this.options.extensions.startBlock.forEach(function(k){y=k.call({lexer:this},v),typeof y=="number"&&y>=0&&(p=Math.min(p,y))}),p<1/0&&p>=0&&(u=n.substring(0,p+1))}if(this.state.top&&(a=this.tokenizer.paragraph(u))){c=r[r.length-1],f&&c.type==="paragraph"?(c.raw+=`
`+a.raw,c.text+=`
`+a.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=c.text):r.push(a),f=u.length!==n.length,n=n.substring(a.raw.length);continue}if(a=this.tokenizer.text(n)){n=n.substring(a.raw.length),c=r[r.length-1],c&&c.type==="text"?(c.raw+=`
`+a.raw,c.text+=`
`+a.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=c.text):r.push(a);continue}if(n){let p="Infinite loop on byte: "+n.charCodeAt(0);if(this.options.silent){console.error(p);break}else throw new Error(p)}}return this.state.top=!0,r}inline(n,r=[]){return this.inlineQueue.push({src:n,tokens:r}),r}inlineTokens(n,r=[]){let a,c,u,f=n,p,v,y;if(this.tokens.links){let k=Object.keys(this.tokens.links);if(k.length>0)for(;(p=this.tokenizer.rules.inline.reflinkSearch.exec(f))!=null;)k.includes(p[0].slice(p[0].lastIndexOf("[")+1,-1))&&(f=f.slice(0,p.index)+"["+EV("a",p[0].length-2)+"]"+f.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;(p=this.tokenizer.rules.inline.blockSkip.exec(f))!=null;)f=f.slice(0,p.index)+"["+EV("a",p[0].length-2)+"]"+f.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);for(;(p=this.tokenizer.rules.inline.escapedEmSt.exec(f))!=null;)f=f.slice(0,p.index)+"++"+f.slice(this.tokenizer.rules.inline.escapedEmSt.lastIndex);for(;n;)if(v||(y=""),v=!1,!(this.options.extensions&&this.options.extensions.inline&&this.options.extensions.inline.some(k=>(a=k.call({lexer:this},n,r))?(n=n.substring(a.raw.length),r.push(a),!0):!1))){if(a=this.tokenizer.escape(n)){n=n.substring(a.raw.length),r.push(a);continue}if(a=this.tokenizer.tag(n)){n=n.substring(a.raw.length),c=r[r.length-1],c&&a.type==="text"&&c.type==="text"?(c.raw+=a.raw,c.text+=a.text):r.push(a);continue}if(a=this.tokenizer.link(n)){n=n.substring(a.raw.length),r.push(a);continue}if(a=this.tokenizer.reflink(n,this.tokens.links)){n=n.substring(a.raw.length),c=r[r.length-1],c&&a.type==="text"&&c.type==="text"?(c.raw+=a.raw,c.text+=a.text):r.push(a);continue}if(a=this.tokenizer.emStrong(n,f,y)){n=n.substring(a.raw.length),r.push(a);continue}if(a=this.tokenizer.codespan(n)){n=n.substring(a.raw.length),r.push(a);continue}if(a=this.tokenizer.br(n)){n=n.substring(a.raw.length),r.push(a);continue}if(a=this.tokenizer.del(n)){n=n.substring(a.raw.length),r.push(a);continue}if(a=this.tokenizer.autolink(n,TV)){n=n.substring(a.raw.length),r.push(a);continue}if(!this.state.inLink&&(a=this.tokenizer.url(n,TV))){n=n.substring(a.raw.length),r.push(a);continue}if(u=n,this.options.extensions&&this.options.extensions.startInline){let k=1/0,P=n.slice(1),T;this.options.extensions.startInline.forEach(function(E){T=E.call({lexer:this},P),typeof T=="number"&&T>=0&&(k=Math.min(k,T))}),k<1/0&&k>=0&&(u=n.substring(0,k+1))}if(a=this.tokenizer.inlineText(u,Ose)){n=n.substring(a.raw.length),a.raw.slice(-1)!=="_"&&(y=a.raw.slice(-1)),v=!0,c=r[r.length-1],c&&c.type==="text"?(c.raw+=a.raw,c.text+=a.text):r.push(a);continue}if(n){let k="Infinite loop on byte: "+n.charCodeAt(0);if(this.options.silent){console.error(k);break}else throw new Error(k)}}return r}},Kk=class{constructor(e){this.options=e||Wf}code(e,n,r){let a=(n||"").match(/\S*/)[0];if(this.options.highlight){let c=this.options.highlight(e,a);c!=null&&c!==e&&(r=!0,e=c)}return e=e.replace(/\n$/,"")+`
`,a?'<pre><code class="'+this.options.langPrefix+Di(a,!0)+'">'+(r?e:Di(e,!0))+`</code></pre>
`:"<pre><code>"+(r?e:Di(e,!0))+`</code></pre>
`}blockquote(e){return`<blockquote>
`.concat(e,`</blockquote>
`)}html(e){return e}heading(e,n,r,a){if(this.options.headerIds){let c=this.options.headerPrefix+a.slug(r);return"<h".concat(n,' id="').concat(c,'">').concat(e,"</h").concat(n,`>
`)}return"<h".concat(n,">").concat(e,"</h").concat(n,`>
`)}hr(){return this.options.xhtml?`<hr/>
`:`<hr>
`}list(e,n,r){let a=n?"ol":"ul",c=n&&r!==1?' start="'+r+'"':"";return"<"+a+c+`>
`+e+"</"+a+`>
`}listitem(e){return"<li>".concat(e,`</li>
`)}checkbox(e){return"<input "+(e?'checked="" ':"")+'disabled="" type="checkbox"'+(this.options.xhtml?" /":"")+"> "}paragraph(e){return"<p>".concat(e,`</p>
`)}table(e,n){return n&&(n="<tbody>".concat(n,"</tbody>")),`<table>
<thead>
`+e+`</thead>
`+n+`</table>
`}tablerow(e){return`<tr>
`.concat(e,`</tr>
`)}tablecell(e,n){let r=n.header?"th":"td";return(n.align?"<".concat(r,' align="').concat(n.align,'">'):"<".concat(r,">"))+e+"</".concat(r,`>
`)}strong(e){return"<strong>".concat(e,"</strong>")}em(e){return"<em>".concat(e,"</em>")}codespan(e){return"<code>".concat(e,"</code>")}br(){return this.options.xhtml?"<br/>":"<br>"}del(e){return"<del>".concat(e,"</del>")}link(e,n,r){if(e=xV(this.options.sanitize,this.options.baseUrl,e),e===null)return r;let a='<a href="'+Di(e)+'"';return n&&(a+=' title="'+n+'"'),a+=">"+r+"</a>",a}image(e,n,r){if(e=xV(this.options.sanitize,this.options.baseUrl,e),e===null)return r;let a='<img src="'.concat(e,'" alt="').concat(r,'"');return n&&(a+=' title="'.concat(n,'"')),a+=this.options.xhtml?"/>":">",a}text(e){return e}},fD=class{strong(e){return e}em(e){return e}codespan(e){return e}del(e){return e}html(e){return e}text(e){return e}link(e,n,r){return""+r}image(e,n,r){return""+r}br(){return""}},hD=class{constructor(){this.seen={}}serialize(e){return e.toLowerCase().trim().replace(/<[!\/a-z].*?>/ig,"").replace(/[\u2000-\u206F\u2E00-\u2E7F\\'!"#$%&()*+,./:;<=>?@[\]^`{|}~]/g,"").replace(/\s/g,"-")}getNextSafeSlug(e,n){let r=e,a=0;if(this.seen.hasOwnProperty(r)){a=this.seen[e];do a++,r=e+"-"+a;while(this.seen.hasOwnProperty(r))}return n||(this.seen[e]=a,this.seen[r]=0),r}slug(e,n={}){let r=this.serialize(e);return this.getNextSafeSlug(r,n.dryrun)}},ed=class UL{constructor(n){this.options=n||Wf,this.options.renderer=this.options.renderer||new Kk,this.renderer=this.options.renderer,this.renderer.options=this.options,this.textRenderer=new fD,this.slugger=new hD}static parse(n,r){return new UL(r).parse(n)}static parseInline(n,r){return new UL(r).parseInline(n)}parse(n,r=!0){let a="",c,u,f,p,v,y,k,P,T,E,A,C,L,N,U,G,Q,J,ie,xe=n.length;for(c=0;c<xe;c++){if(E=n[c],this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[E.type]&&(ie=this.options.extensions.renderers[E.type].call({parser:this},E),ie!==!1||!["space","hr","heading","code","table","blockquote","list","html","paragraph","text"].includes(E.type))){a+=ie||"";continue}switch(E.type){case"space":continue;case"hr":{a+=this.renderer.hr();continue}case"heading":{a+=this.renderer.heading(this.parseInline(E.tokens),E.depth,_V(this.parseInline(E.tokens,this.textRenderer)),this.slugger);continue}case"code":{a+=this.renderer.code(E.text,E.lang,E.escaped);continue}case"table":{for(P="",k="",p=E.header.length,u=0;u<p;u++)k+=this.renderer.tablecell(this.parseInline(E.header[u].tokens),{header:!0,align:E.align[u]});for(P+=this.renderer.tablerow(k),T="",p=E.rows.length,u=0;u<p;u++){for(y=E.rows[u],k="",v=y.length,f=0;f<v;f++)k+=this.renderer.tablecell(this.parseInline(y[f].tokens),{header:!1,align:E.align[f]});T+=this.renderer.tablerow(k)}a+=this.renderer.table(P,T);continue}case"blockquote":{T=this.parse(E.tokens),a+=this.renderer.blockquote(T);continue}case"list":{for(A=E.ordered,C=E.start,L=E.loose,p=E.items.length,T="",u=0;u<p;u++)U=E.items[u],G=U.checked,Q=U.task,N="",U.task&&(J=this.renderer.checkbox(G),L?U.tokens.length>0&&U.tokens[0].type==="paragraph"?(U.tokens[0].text=J+" "+U.tokens[0].text,U.tokens[0].tokens&&U.tokens[0].tokens.length>0&&U.tokens[0].tokens[0].type==="text"&&(U.tokens[0].tokens[0].text=J+" "+U.tokens[0].tokens[0].text)):U.tokens.unshift({type:"text",text:J}):N+=J),N+=this.parse(U.tokens,L),T+=this.renderer.listitem(N,Q,G);a+=this.renderer.list(T,A,C);continue}case"html":{a+=this.renderer.html(E.text);continue}case"paragraph":{a+=this.renderer.paragraph(this.parseInline(E.tokens));continue}case"text":{for(T=E.tokens?this.parseInline(E.tokens):E.text;c+1<xe&&n[c+1].type==="text";)E=n[++c],T+=`
`+(E.tokens?this.parseInline(E.tokens):E.text);a+=r?this.renderer.paragraph(T):T;continue}default:{let Me='Token with "'+E.type+'" type was not found.';if(this.options.silent){console.error(Me);return}else throw new Error(Me)}}}return a}parseInline(n,r){r=r||this.renderer;let a="",c,u,f,p=n.length;for(c=0;c<p;c++){if(u=n[c],this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[u.type]&&(f=this.options.extensions.renderers[u.type].call({parser:this},u),f!==!1||!["escape","html","link","image","strong","em","codespan","br","del","text"].includes(u.type))){a+=f||"";continue}switch(u.type){case"escape":{a+=r.text(u.text);break}case"html":{a+=r.html(u.text);break}case"link":{a+=r.link(u.href,u.title,this.parseInline(u.tokens,r));break}case"image":{a+=r.image(u.href,u.title,u.text);break}case"strong":{a+=r.strong(this.parseInline(u.tokens,r));break}case"em":{a+=r.em(this.parseInline(u.tokens,r));break}case"codespan":{a+=r.codespan(u.text);break}case"br":{a+=r.br();break}case"del":{a+=r.del(this.parseInline(u.tokens,r));break}case"text":{a+=r.text(u.text);break}default:{let v='Token with "'+u.type+'" type was not found.';if(this.options.silent){console.error(v);return}else throw new Error(v)}}}return a}},kn.options=kn.setOptions=function(e){return Es(kn.defaults,e),Cse(kn.defaults),kn},kn.getDefaults=bV,kn.defaults=Wf,kn.use=function(...e){let n=Es({},...e),r=kn.defaults.extensions||{renderers:{},childTokens:{}},a;e.forEach(c=>{if(c.extensions&&(a=!0,c.extensions.forEach(u=>{if(!u.name)throw new Error("extension name required");if(u.renderer){let f=r.renderers?r.renderers[u.name]:null;f?r.renderers[u.name]=function(...p){let v=u.renderer.apply(this,p);return v===!1&&(v=f.apply(this,p)),v}:r.renderers[u.name]=u.renderer}if(u.tokenizer){if(!u.level||u.level!=="block"&&u.level!=="inline")throw new Error("extension level must be 'block' or 'inline'");r[u.level]?r[u.level].unshift(u.tokenizer):r[u.level]=[u.tokenizer],u.start&&(u.level==="block"?r.startBlock?r.startBlock.push(u.start):r.startBlock=[u.start]:u.level==="inline"&&(r.startInline?r.startInline.push(u.start):r.startInline=[u.start]))}u.childTokens&&(r.childTokens[u.name]=u.childTokens)})),c.renderer){let u=kn.defaults.renderer||new Kk;for(let f in c.renderer){let p=u[f];u[f]=(...v)=>{let y=c.renderer[f].apply(u,v);return y===!1&&(y=p.apply(u,v)),y}}n.renderer=u}if(c.tokenizer){let u=kn.defaults.tokenizer||new qk;for(let f in c.tokenizer){let p=u[f];u[f]=(...v)=>{let y=c.tokenizer[f].apply(u,v);return y===!1&&(y=p.apply(u,v)),y}}n.tokenizer=u}if(c.walkTokens){let u=kn.defaults.walkTokens;n.walkTokens=function(f){let p=[];return p.push(c.walkTokens.call(this,f)),u&&(p=p.concat(u.call(this,f))),p}}a&&(n.extensions=r),kn.setOptions(n)})},kn.walkTokens=function(e,n){let r=[];for(let a of e)switch(r=r.concat(n.call(kn,a)),a.type){case"table":{for(let c of a.header)r=r.concat(kn.walkTokens(c.tokens,n));for(let c of a.rows)for(let u of c)r=r.concat(kn.walkTokens(u.tokens,n));break}case"list":{r=r.concat(kn.walkTokens(a.items,n));break}default:kn.defaults.extensions&&kn.defaults.extensions.childTokens&&kn.defaults.extensions.childTokens[a.type]?kn.defaults.extensions.childTokens[a.type].forEach(function(c){r=r.concat(kn.walkTokens(a[c],n))}):a.tokens&&(r=r.concat(kn.walkTokens(a.tokens,n)))}return r},kn.parseInline=function(e,n){if(typeof e=="undefined"||e===null)throw new Error("marked.parseInline(): input parameter is undefined or null");if(typeof e!="string")throw new Error("marked.parseInline(): input parameter is of type "+Object.prototype.toString.call(e)+", string expected");n=Es({},kn.defaults,n||{}),SV(n);try{let r=qf.lexInline(e,n);return n.walkTokens&&kn.walkTokens(r,n.walkTokens),ed.parseInline(r,n)}catch(r){if(r.message+=`
Please report this to https://github.com/markedjs/marked.`,n.silent)return"<p>An error occurred:</p><pre>"+Di(r.message+"",!0)+"</pre>";throw r}},kn.Parser=ed,kn.parser=ed.parse,kn.Renderer=Kk,kn.TextRenderer=fD,kn.Lexer=qf,kn.lexer=qf.lex,kn.Tokenizer=qk,kn.Slugger=hD,kn.parse=kn,kn.options,kn.setOptions,kn.use,kn.walkTokens,kn.parseInline,ed.parse,qf.lex}),jV,BV,pD,UV=R(()=>{Xe(),Uk(),BV=le(lg)(jV||(jV=Y([`
  padding: 6px;
`]))),pD=BV}),ai,Xk,Vb,$k,VV,HV,GV,mD,WV,qV,KV,gD,XV,$V,ZV,YV,JV,Hb,Gb,QV,e9,t9,n9,r9,i9,o9,a9,s9,l9,c9,u9,vD,Wb=R(()=>{ai=ee(Oe()),Pse(),Xe(),rr(),sn(),Ge(),Rse(),zb(),UV(),Xk=({title:e,message:n})=>"".concat(e," ").concat(n),Vb=(()=>{let e=new Map;return{add:n=>{let r=Xk(n);e.has(r)?e.set(r,e.get(r)+1):e.set(r,1)},delete:n=>{let r=Xk(n);e.has(r)&&e.get(r)>1?e.set(r,e.get(r)-1):e.delete(r)},clear:()=>{e.clear()},check:n=>e.has(Xk(n))}})(),$k=(()=>{let e=new Map;return{add:n=>{e.has(n)?e.set(n,e.get(n)+1):e.set(n,1)},delete:n=>{e.has(n)&&e.get(n)>1?e.set(n,e.get(n)-1):e.delete(n)},clear:()=>{e.clear()},check:n=>e.has(n),get types(){return Array.of(...e.keys())}}})(),HV=le.div(VV||(VV=Y([`
  width: 100%;
  border-radius: 4px;
  display: flex;
  gap: 12px;
  `,`;
  background-color: rgba(40, 43, 47, 0.8);
  box-shadow: 0 1px 1px rgba(0, 0, 0, 0.25), 0 2px 6px rgba(0, 0, 0, 0.15);
  backdrop-filter: blur(14px);

  @supports not (backdrop-filter: blur()) {
    background: rgba(40, 43, 47, 0.95);
  }
`])),tr),mD=le.div(GV||(GV=Y([`
  font-size: 14px;
  font-weight: bold;
  color: #fff;
`]))),qV=le.div(WV||(WV=Y([`
  flex: 1;
  flex-direction: column;
  width: 0;
  display: flex;
  padding: 16px 0;
  gap: 12px;
`]))),gD=le.div(KV||(KV=Y([`
  color: #b4b4b4;
  font-size: 12px;
  line-height: 1.4;

  a {
    color: rgba(255, 255, 255, 0.9);
  }

  em {
    font-style: italic;
  }

  strong {
    font-weight: bold;
    color: #d5d5d5;
  }

  p {
    margin-bottom: 8px;
  }

  code {
    font-family: monospace;
    background: rgba(0, 0, 0, 0.3);
    padding: 1px 1px 2px;
    border-radius: 4px;
    border: 1px solid rgba(255, 255, 255, 0.08);
    white-space: pre-wrap;
  }

  pre > code {
    white-space: pre;
    display: block;
    overflow: auto;
    padding: 4px;
  }

  pre {
    white-space: pre-wrap;
    margin-bottom: 8px;
  }
`]))),$V=le.button(XV||(XV=Y([`
  color: rgba(255, 255, 255, 0.9);
  font-weight: 500;
  display: flex;
  align-items: center;
  justify-content: center;
  background: none;
  border: none;
  padding-left: 12px;
  padding-right: 12px;
  border-left: 1px solid rgba(255, 255, 255, 0.05);

  &:hover {
    background: rgba(255, 255, 255, 0.05);
  }
`]))),ZV={info:"#3b82f6",success:"#10b981",warning:"#f59e0b",error:"#ef4444"},JV=le.div(YV||(YV=Y([`
  display: flex;
  justify-content: center;
  margin-left: 12px;
  padding-top: 21px;

  ::before {
    content: '';
    width: 8px;
    height: 8px;
    border-radius: 999999px;
    background-color: `,`;
  }
`])),({type:e})=>ZV[e]),Hb=e=>(n,r,a=[],c=!1)=>{(c||!Vb.check({title:n,message:r}))&&(Vb.add({title:n,message:r}),$k.add(e),Gk.custom(u=>ai.default.createElement(HV,null,ai.default.createElement(JV,{type:e}),ai.default.createElement(qV,null,ai.default.createElement(mD,null,n),ai.default.createElement(gD,{dangerouslySetInnerHTML:{__html:kn.parse(r)}}),a.length>0&&ai.default.createElement(gD,null,ai.default.createElement("span",null,"Docs:"," ",a.map((f,p)=>ai.default.createElement(ai.Fragment,{key:p},p>0&&", ",ai.default.createElement("a",{target:"_blank",href:f.url},f.title)))))),ai.default.createElement($V,{onClick:()=>{Gk.remove(u.id),Vb.delete({title:n,message:r}),$k.delete(e)}},"Close")),{duration:1/0}))},Gb={warning:Hb("warning"),success:Hb("success"),info:Hb("info"),error:Hb("error")},e9=le.div(QV||(QV=Y([`
  display: flex;
  justify-content: `,`;
  gap: 12px;
`])),({align:e})=>e==="center"?"center":"flex-end"),n9=le.button(t9||(t9=Y([`
  position: relative;
  border-radius: 4px;
  display: flex;
  align-items: center;
  gap: 12px;
  `,`;
  background-color: rgba(40, 43, 47, 0.8);
  box-shadow: 0 1px 1px rgba(0, 0, 0, 0.25), 0 2px 6px rgba(0, 0, 0, 0.15);
  backdrop-filter: blur(14px);
  border: none;
  padding: 12px;
  color: #fff;
  overflow: hidden;

  ::before {
    content: '';
    position: absolute;
    inset: 0;
  }

  :hover::before {
    background: `,`;
  }

  @supports not (backdrop-filter: blur()) {
    background: rgba(40, 43, 47, 0.95);
  }
`])),tr,({danger:e})=>e?"rgba(255, 0, 0, 0.1)":"rgba(255, 255, 255, 0.1)"),i9=le.div(r9||(r9=Y([`
  z-index: 10;
  display: flex;
  flex-direction: column;
  gap: 8px;
  position: fixed;
  right: 92px;
  top: 50px;
  width: 500px;
  height: 85vh;
  min-height: 400px;
`]))),a9=le.div(o9||(o9=Y([`
  overflow: hidden;
  pointer-events: auto;
  border-radius: 4px;

  & > div {
    display: flex;
    flex-direction: column-reverse;
    gap: 8px;
    overflow: scroll;
    height: 100%;
  }
`]))),l9=le.div(s9||(s9=Y([`
  width: fit-content;
  padding: 8px;
  border-radius: 4px;
  display: flex;
  flex-direction: column;
  gap: 12px;
  color: #b4b4b4;
  font-size: 12px;
  line-height: 1.4;
`]))),c9=()=>{let{hasNotifications:e}=vD();return sg({enabled:!e},()=>ai.default.createElement(pD,null,ai.default.createElement(l9,null,ai.default.createElement(mD,null,"No notifications"),"Notifications will appear here when you get them.")))},u9=()=>{var e;let{toasts:n,handlers:r}=uD(),{startPause:a,endPause:c}=r,u=(e=In(_e().atomP.ahistoric.pinNotifications))!=null?e:!1;return ai.default.createElement(i9,null,u?n.length>0&&ai.default.createElement(a9,{onMouseEnter:a,onMouseLeave:c},ai.default.createElement("div",null,n.map(f=>ai.default.createElement("div",{key:f.id},f.message(f))))):null,ai.default.createElement(e9,{align:"side"},u&&n.length>0&&ai.default.createElement(n9,{onClick:()=>{$k.clear(),Vb.clear(),Gk.remove()},danger:!0},"Clear")))},vD=()=>{let{toasts:e}=uD();return{hasNotifications:e.length>0}}});function yD(e,n){var r;let a=Object.values((r=(0,d9.val)(e.pointers.historic.sheetsById))!=null?r:{}),c=a.flatMap(f=>{var p;return Object.values((p=f==null?void 0:f.staticOverrides.byObject)!=null?p:{})}).flatMap(f=>Object.values(f!=null?f:{})),u=[...a.flatMap(f=>{var p,v;return Object.values((v=(p=f==null?void 0:f.sequence)==null?void 0:p.tracksByObject)!=null?v:{})}).flatMap(f=>{var p;return Object.values((p=f==null?void 0:f.trackData)!=null?p:{})}).flatMap(f=>f==null?void 0:f.keyframes).map(f=>f==null?void 0:f.value)];return c.forEach(f=>{yt(f,p=>{u.push(p)},[])}),u.filter(f=>(f==null?void 0:f.type)&&(n?(f==null?void 0:f.type)==n:typeof(f==null?void 0:f.type)=="string")).map(f=>f.id).filter((f,p,v)=>f!==null&&f!==""&&v.indexOf(f)===p)}var d9,f9=R(()=>{d9=Mt,zt()});function h9(e,n){let r=new File([e],n),a=URL.createObjectURL(r),c=Object.assign(document.createElement("a"),{href:a,target:"_blank",rel:"noopener"});c.setAttribute("download",n),c.click(),setTimeout(()=>{URL.revokeObjectURL(a)},4e4)}var da,p9,m9,g9,v9,y9,b9,_9,x9,w9,Lse=R(()=>{Ge(),yl(),gl(),da=ee(Oe()),Xe(),jU(),Tse(),p9=ee(Mse()),Wb(),f9(),g9=le.div(m9||(m9=Y([""]))),y9=le.div(v9||(v9=Y([`
  padding: 8px 10px;
  display: flex;
  flex-direction: column;
  align-items: stretch;
`]))),_9=le(vl)(b9||(b9=Y([`
  display flex;
  flex-direction: column;
  gap: 1em;
  width: 280px;
  padding: 1em;
`]))),x9=({projects:e})=>{let n=e[0],r=n.address.projectId,a=r.replace(/[^\w\d'_\-]+/g," ").trim(),c="".concat(a,".theatre-project-state.json"),[u,f]=(0,da.useState)(!1),p=(0,da.useCallback)(()=>qe(void 0,null,function*(){var y,k;let P=yD(n),T=new Map;try{yield Promise.all(P.map(A=>qe(void 0,null,function*(){let C=n.assetStorage.getAssetUrl(A),L=yield fetch(C);L.ok&&T.set(A,yield L.blob())})))}catch{Gb.error("Failed to access assets","Export aborted. Failed to access assets at ".concat((k=(y=n.config.assets)==null?void 0:y.baseUrl)!=null?k:"/",". This is likely due to a CORS issue."));return}if(T.size>0){let A=new p9.default;for(let[L,N]of T)A.file(L,N);let C=yield A.generateAsync({type:"blob"});h9(C,"".concat(a,".assets.zip"))}let E=JSON.stringify(_e().createContentOfSaveFile(n.address.projectId),null,2);h9(E,c),f(!0),setTimeout(()=>{f(!1)},2e3)}),[n,c]),v=ml({debugName:"ProjectDetails",pointerDistanceThreshold:50},()=>da.default.createElement(_9,null,da.default.createElement("p",null,"This will create a JSON file with the state of your project. You can commit this file to your git repo and include it in your production bundle."),da.default.createElement("p",null,"If your project uses assets, this will also create a zip file with all the assets that you can unpack in your public folder."),da.default.createElement("a",{href:"https://www.theatrejs.com/docs/latest/manual/projects#state",target:"_blank"},"Here is a quick guide on how to export to production.")));return da.default.createElement(da.default.Fragment,null,v.node,da.default.createElement(g9,null,da.default.createElement(lV,{projectId:r}),da.default.createElement(y9,null,da.default.createElement(jk,{onMouseEnter:y=>v.open(y,y.target),onClick:u?void 0:p,disabled:u},u?"(Exported)":"Export ".concat(r," to JSON")))))},w9=x9}),td,S9,E9,k9,T9,M9,P9,C9,A9,I9,D9,zse=R(()=>{td=ee(Oe()),Xe(),ab(),E9=le.div(S9||(S9=Y([`
  padding: 16px;
  display: flex;
  flex-direction: column;
  gap: 24px;
`]))),T9=le.div(k9||(k9=Y([`
  display: flex;
  flex-direction: column;
  gap: 11px;
  color: rgba(255, 255, 255, 0.9);
`]))),P9=le.div(M9||(M9=Y([`
  color: rgba(145, 145, 145, 0.8);
`]))),A9=le.a(C9||(C9=Y([`
  color: #919191;
  font-size: 10px;
  text-decoration-color: #40434a;
  text-underline-offset: 3px;
`]))),I9=()=>td.default.createElement(E9,null,td.default.createElement(T9,null,td.default.createElement(P9,null,td.default.createElement(zA,null)),td.default.createElement("div",null,"Please select an object from the ",td.default.createElement("u",null,"Outline Menu")," to see its properties.")),td.default.createElement(A9,{href:"https://www.theatrejs.com/docs/latest/manual/objects",target:"_blank"},"Learn more about Objects")),D9=I9});function O9(){let[e,n]=(0,bD.useState)(!1),r=(0,bD.useMemo)(()=>{let a=new Set;return()=>{let c=()=>{a.delete(c),n(a.size>0)};return a.add(c),n(!0),c}},[]);return[e,r]}var bD,R9=R(()=>{bD=ee(Oe())}),Cr,ug,L9,z9,Zk,N9,_D,F9,xD,j9,wD,qb,B9,U9,Yk,Kf,SD=R(()=>{Wu(),sn(),Cr=ee(Oe()),Xe(),Tn(),gc(),rr(),Sse(),Lse(),Ge(),kF(),ug=Mt,zse(),R9(),Hf(),L9="32px",Zk=le.div(z9||(z9=Y([`
  `,`;
  background-color: rgba(40, 43, 47, 0.8);
  position: fixed;
  right: 8px;
  top: 50px;
  // Temporary, see comment about CSS grid in SingleRowPropEditor.
  width: 280px;
  height: fit-content;
  z-index: `,`;

  box-shadow: 0 1px 1px rgba(0, 0, 0, 0.25), 0 2px 6px rgba(0, 0, 0, 0.15);
  backdrop-filter: blur(14px);
  border-radius: 2px;

  display: `,`;

  &:hover {
    display: block;
  }

  @supports not (backdrop-filter: blur()) {
    background: rgba(40, 43, 47, 0.95);
  }
`])),tr,Wm.propsPanel,({pin:e})=>e?"block":"none"),_D=le.div(N9||(N9=Y([`
  margin: 0 10px;
  color: #919191;
  font-weight: 500;
  font-size: 10px;
  user-select: none;
  `,`;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
`])),tr),xD=le.div(F9||(F9=Y([`
  height: `,`;
  display: flex;
  align-items: center;
`])),L9),wD=le.div(j9||(j9=Y([`
  `,`;
  max-height: calc(100vh - 100px);
  overflow-y: scroll;
  &::-webkit-scrollbar {
    display: none;
  }

  scrollbar-width: none;
  padding: 0;
  user-select: none;

  /* Set the font-size for input values in the detail panel */
  font-size: 12px;
`])),tr),qb=(0,Cr.createContext)([!1,()=>()=>{}]),B9=e=>{let n=In(_e().atomP.ahistoric.pinDetails)!==!1,r=EF("right");(0,Cr.useLayoutEffect)(()=>{Yk.set(r)},[r]),(0,Cr.useEffect)(()=>()=>{Kf.set(!1),Yk.set(!1)},[]);let[a]=(0,Cr.useContext)(qb),c=n||r||a,[u,f]=(0,Cr.useState)(null);return l8(u),Mn(()=>{let p=Gu(),v=p.find(pt);if(v)return Cr.default.createElement(Zk,{"data-testid":"DetailPanel-Object",pin:c,ref:f,onMouseEnter:()=>{Kf.set(!0)},onMouseLeave:()=>{Kf.set(!1)}},Cr.default.createElement(xD,null,Cr.default.createElement(_D,{title:"".concat(v.sheet.address.sheetId,": ").concat(v.sheet.address.sheetInstanceId," > ").concat(v.address.objectKey)},Cr.default.createElement(Hu,null,v.sheet.address.sheetId," "),Cr.default.createElement(ob,null,":","\xA0"),Cr.default.createElement(Hu,null,v.sheet.address.sheetInstanceId," "),Cr.default.createElement(ob,null,"\xA0\u2192\xA0"),Cr.default.createElement(Hu,null,v.address.objectKey))),Cr.default.createElement(wD,null,Cr.default.createElement(zU,{objects:[v]})));let y=p.find(Rt);return y?Cr.default.createElement(Zk,{pin:c},Cr.default.createElement(xD,null,Cr.default.createElement(_D,{title:"".concat(y.address.projectId)},Cr.default.createElement(Hu,null,y.address.projectId," "))),Cr.default.createElement(wD,null,Cr.default.createElement(w9,{projects:[y]}))):Cr.default.createElement(Zk,{pin:c,onMouseEnter:()=>{Kf.set(!0)},onMouseLeave:()=>{Kf.set(!1)}},Cr.default.createElement(D9,null))},[c])},U9=()=>{let e=O9();return Cr.default.createElement(qb.Provider,{value:e},Cr.default.createElement(B9,null))},Yk=new ug.Atom(!1),Kf=new ug.Atom(!1),(0,ug.prism)(()=>{let e=(0,ug.val)(Kf.prism),n=(0,ug.val)(Yk.prism);return e||n})}),ED,Jk,Qk,kD,dg,V9,TD,fg=R(()=>{ED=Mt,sn(),Ge(),R9(),Jk=ee(Oe()),PI(),Qk=(e,n)=>{let r=e.left/n.width,a=(e.left+e.width)/n.width,c=e.top/n.height,u=(e.height+e.top)/n.height;return{edges:{left:r<=.5?{from:"screenLeft",distance:r}:{from:"screenRight",distance:1-r},right:a<=.5?{from:"screenLeft",distance:a}:{from:"screenRight",distance:1-a},top:c<=.5?{from:"screenTop",distance:c}:{from:"screenBottom",distance:1-c},bottom:u<=.5?{from:"screenTop",distance:u}:{from:"screenBottom",distance:1-u}}}},kD=Jk.default.createContext(null),dg=()=>(0,Jk.useContext)(kD),V9=({panelId:e,children:n,defaultPosition:r,minDims:a})=>{let c=yk(800,200),[u,f]=O9(),{stuff:p}=Mn(()=>{var v;let{edges:y}=(v=(0,ED.val)(_e().atomP.historic.panelPositions[e]))!=null?v:r,k=Math.floor(c.width*(y.left.from==="screenLeft"?y.left.distance:1-y.left.distance)),P=Math.floor(c.width*(y.right.from==="screenLeft"?y.right.distance:1-y.right.distance)),T=Math.floor(c.height*(y.top.from==="screenTop"?y.top.distance:1-y.top.distance)),E=Math.floor(c.height*(y.bottom.from==="screenTop"?y.bottom.distance:1-y.bottom.distance)),A=Math.max(P-k,a.width),C=Math.max(E-T,a.height);return{stuff:{dims:ED.prism.memo("dims",()=>({width:A,left:k,top:T,height:C}),[A,k,T,C]),panelId:e,minDims:a,boundsHighlighted:u,addBoundsHighlightLock:f}}},[e,c,u,f]);return Jk.default.createElement(kD.Provider,{value:p},n)},TD=V9}),Kb,H9,G9,W9,MD,q9=R(()=>{nr(),Ge(),hi(),Kb=ee(Oe()),Xe(),fg(),ua(),Jr(),gc(),G9=le.div(H9||(H9=Y([`
  cursor: move;
`]))),W9=e=>{let n=dg(),r=(0,Kb.useRef)(n);r.current=n;let[a,c]=Qn(null),u=(0,Kb.useMemo)(()=>({debugName:"PanelDragZone",lockCursorTo:"move",onDragStart(){let y=r.current,k,P=n.addBoundsHighlightLock();return{onDrag(T,E){let A=W(O({},y.dims),{top:Pr(y.dims.top+E,0,window.innerHeight-dl),left:Pr(y.dims.left+T,-y.dims.width+dl,window.innerWidth-dl)}),C=Qk(A,{width:window.innerWidth,height:window.innerHeight});k==null||k.discard(),k=_e().tempTransaction(({stateEditors:L})=>{L.studio.historic.panelPositions.setPanelPosition({position:C,panelId:y.panelId})})},onDragEnd(T){P(),T?k==null||k.commit():k==null||k.discard()}}}}),[]),[f]=Gr(c,u);za(f,"dragging","move");let[p,v]=(0,Kb.useMemo)(()=>{let y;return[function(){if(y){let k=y;y=void 0,k()}y=n.addBoundsHighlightLock()},function(){if(y){let k=y;y=void 0,k()}}]},[]);return Kb.default.createElement(G9,W(O({},e),{ref:a,onMouseEnter:p,onMouseLeave:v}))},MD=W9}),e2,K9,PD,X9,CD,$9,AD,Z9,Y9,J9,Q9,eH,ID,tH,nH,rH,iH,oH,Xb,aH,sH,lH,cH,uH,dH,fH,hH,pH,DD,mH,kc,Nse=R(()=>{nr(),Ge(),hi(),ca(),e2=ee(Oe()),Xe(),fg(),rr(),Jr(),gc(),PD=le.div(K9||(K9=Y([`
  position: absolute;
  `,`;
  &:after {
    position: absolute;
    inset: -5px;
    display: block;
    content: ' ';
  }

  opacity: 0;
  background-color: #478698;

  &.isHighlighted {
    opacity: 0.7;
  }

  &.isDragging {
    opacity: 1;
    /* background-color: `,`; */
  }

  &:hover {
    opacity: 1;
  }
`])),tr,Nm(.2,"#478698")),CD=le(PD)(X9||(X9=Y([`
  /**
  The horizintal/vertical resize handles have z-index:-1 and are offset 1px outside of the panel
  to make sure they don't occlude any element that pops out of the panel (like the Playhead in SequenceEditorPanel).

  This means that panels will always need an extra 1px margin for their resize handles to be visible, but that's not a problem
  that we have to deal with right now (if it is at all a problem).
  
   */
  z-index: -1;
`]))),AD=le(CD)($9||($9=Y([`
  left: 0px;
  right: 0px;
  height: 1px;
`]))),Y9=le(AD)(Z9||(Z9=Y([`
  top: -1px;
`]))),Q9=le(AD)(J9||(J9=Y([`
  bottom: -1px;
`]))),ID=le(CD)(eH||(eH=Y([`
  z-index: -1;
  top: -1px;
  bottom: -1px;
  width: 1px;
`]))),nH=le(ID)(tH||(tH=Y([`
  left: -1px;
`]))),iH=le(ID)(rH||(rH=Y([`
  right: -1px;
`]))),Xb=le(PD)(oH||(oH=Y([`
  // The angles have z-index: 10 to make sure they _do_ occlude other elements in the panel.
  z-index: 10;
  width: 8px;
  height: 8px;
`]))),sH=le(Xb)(aH||(aH=Y([`
  top: 0;
  left: 0;
`]))),cH=le(Xb)(lH||(lH=Y([`
  top: 0;
  right: 0;
`]))),dH=le(Xb)(uH||(uH=Y([`
  bottom: 0;
  left: 0;
`]))),hH=le(Xb)(fH||(fH=Y([`
  bottom: 0;
  right: 0;
`]))),pH={Top:Y9,TopLeft:sH,TopRight:cH,Bottom:Q9,BottomLeft:dH,BottomRight:hH,Left:nH,Right:iH},DD={Top:"ns-resize",Bottom:"ns-resize",Left:"ew-resize",Right:"ew-resize",TopLeft:"nw-resize",TopRight:"ne-resize",BottomLeft:"sw-resize",BottomRight:"se-resize"},mH=({which:e})=>{let n=dg(),r=(0,e2.useRef)(n);r.current=n;let[a,c]=Qn(null),u=(0,e2.useMemo)(()=>({debugName:"PanelResizeHandle",lockCursorTo:DD[e],onDragStart(){let y,k=r.current,P=n.addBoundsHighlightLock();return{onDrag(T,E){let A=O({},k.dims);if(e.startsWith("Bottom"))A.height=Math.max(A.height+E,k.minDims.height);else if(e.startsWith("Top")){let L=A.top+A.height,N=Pr(A.top+E,0,Math.min(L-k.minDims.height,window.innerHeight-dl)),U=L-N;A.height=U,A.top=N}if(e.endsWith("Left")){let L=A.left+A.width,N=Math.min(A.left+T,Math.min(L-k.minDims.width,window.innerWidth-dl)),U=L-N;A.width=U,A.left=N}else e.endsWith("Right")&&(A.width=Math.max(A.width+T,Math.max(k.minDims.width,dl-k.dims.left)));let C=Qk(A,{width:window.innerWidth,height:window.innerHeight});y==null||y.discard(),y=_e().tempTransaction(({stateEditors:L})=>{L.studio.historic.panelPositions.setPanelPosition({position:C,panelId:k.panelId})})},onDragEnd(T){P(),T?y==null||y.commit():y==null||y.discard()}}}}),[e]),[f]=Gr(c,u),p=pH[e],v=e.length<=6;return e2.default.createElement(p,{ref:a,className:[f?"isDragging":"",n.boundsHighlighted&&v?"isHighlighted":""].join(" "),style:{cursor:DD[e]}})},kc=mH}),ks,gH,vH,Fse=R(()=>{ks=ee(Oe()),Nse(),gH=e=>ks.default.createElement(ks.default.Fragment,null,ks.default.createElement(kc,{which:"Bottom"}),ks.default.createElement(kc,{which:"Top"}),ks.default.createElement(kc,{which:"Left"}),ks.default.createElement(kc,{which:"Right"}),ks.default.createElement(kc,{which:"TopLeft"}),ks.default.createElement(kc,{which:"TopRight"}),ks.default.createElement(kc,{which:"BottomLeft"}),ks.default.createElement(kc,{which:"BottomRight"})),vH=gH}),t2,yH,bH,_H,OD,xH=R(()=>{rr(),t2=ee(Oe()),Xe(),fg(),Fse(),bH=le.div(yH||(yH=Y([`
  position: absolute;
  user-select: none;
  box-sizing: border-box;
  `,`;
  /* box-shadow: 1px 2px 10px -5px black; */

  z-index: 1000;
`])),tr),_H=t2.default.forwardRef((e,n)=>{let r=dg(),a=e,{style:c,children:u}=a,f=we(a,["style","children"]);return t2.default.createElement(bH,W(O({ref:n},f),{style:O({width:r.dims.width+"px",height:r.dims.height+"px",top:r.dims.top+"px",left:r.dims.left+"px"},c!=null?c:{})}),t2.default.createElement(vH,null),u)}),OD=_H}),jse=se((e,n)=>{(function(r,a){typeof e=="object"&&typeof n!="undefined"?a(e,Oe()):(r=typeof globalThis!="undefined"?globalThis:r||self,a(r.ReactErrorBoundary={},r.React))})(e,function(r,a){function c(E){if(E&&E.__esModule)return E;var A=Object.create(null);return E&&Object.keys(E).forEach(function(C){if(C!=="default"){var L=Object.getOwnPropertyDescriptor(E,C);Object.defineProperty(A,C,L.get?L:{enumerable:!0,get:function(){return E[C]}})}}),A.default=E,Object.freeze(A)}var u=c(a);function f(E,A){return f=Object.setPrototypeOf||function(C,L){return C.__proto__=L,C},f(E,A)}function p(E,A){E.prototype=Object.create(A.prototype),E.prototype.constructor=E,f(E,A)}var v=function(E,A){return E===void 0&&(E=[]),A===void 0&&(A=[]),E.length!==A.length||E.some(function(C,L){return!Object.is(C,A[L])})},y={error:null},k=function(E){p(A,E);function A(){for(var L,N=arguments.length,U=new Array(N),G=0;G<N;G++)U[G]=arguments[G];return L=E.call.apply(E,[this].concat(U))||this,L.state=y,L.updatedWithError=!1,L.resetErrorBoundary=function(){for(var Q,J=arguments.length,ie=new Array(J),xe=0;xe<J;xe++)ie[xe]=arguments[xe];L.props.onReset==null||(Q=L.props).onReset.apply(Q,ie),L.reset()},L}A.getDerivedStateFromError=function(L){return{error:L}};var C=A.prototype;return C.reset=function(){this.updatedWithError=!1,this.setState(y)},C.componentDidCatch=function(L,N){var U,G;(U=(G=this.props).onError)==null||U.call(G,L,N)},C.componentDidMount=function(){var L=this.state.error;L!==null&&(this.updatedWithError=!0)},C.componentDidUpdate=function(L){var N=this.state.error,U=this.props.resetKeys;if(N!==null&&!this.updatedWithError){this.updatedWithError=!0;return}if(N!==null&&v(L.resetKeys,U)){var G,Q;(G=(Q=this.props).onResetKeysChange)==null||G.call(Q,L.resetKeys,U),this.reset()}},C.render=function(){var L=this.state.error,N=this.props,U=N.fallbackRender,G=N.FallbackComponent,Q=N.fallback;if(L!==null){var J={error:L,resetErrorBoundary:this.resetErrorBoundary};if(u.isValidElement(Q))return Q;if(typeof U=="function")return U(J);if(G)return u.createElement(G,J);throw new Error("react-error-boundary requires either a fallback, fallbackRender, or FallbackComponent prop")}return this.props.children},A}(u.Component);function P(E,A){var C=function(N){return u.createElement(k,A,u.createElement(E,N))},L=E.displayName||E.name||"Unknown";return C.displayName="withErrorBoundary("+L+")",C}function T(E){var A=u.useState(null),C=A[0],L=A[1];if(E!=null)throw E;if(C!=null)throw C;return L}r.ErrorBoundary=k,r.useErrorHandler=T,r.withErrorBoundary=P,Object.defineProperty(r,"__esModule",{value:!0})})}),Hi,wH,SH,EH,kH,TH,MH,PH,CH,AH,IH,DH,OH,RH,LH,zH,NH,FH,jH,BH,Bse=R(()=>{Hi=ee(Oe()),Xe(),gc(),fg(),q9(),xH(),wH=ee(jse()),Qm(),Ge(),gc(),SH={edges:{left:{from:"screenLeft",distance:.3},right:{from:"screenRight",distance:.3},top:{from:"screenTop",distance:.3},bottom:{from:"screenBottom",distance:.3}}},EH={width:300,height:300},kH=({paneInstance:e})=>Hi.default.createElement(TD,{panelId:"pane-".concat(e.instanceId),defaultPosition:SH,minDims:EH},Hi.default.createElement(jH,{paneInstance:e})),MH=le(OD)(TH||(TH=Y([`
  display: flex;
  flex-direction: column;

  box-shadow: 0px 5px 12px -4px rgb(0 0 0 / 22%);
  z-index: `,`;
`])),Wm.pluginPanes),CH=le.div(PH||(PH=Y([`
  width: 100%;
`]))),IH=le.div(AH||(AH=Y([`
  display: flex;
  align-items: center;
  opacity: 1;
  position: absolute;
  right: 4px;
  top: 0;
  bottom: 0;
`]))),OH=le.button(DH||(DH=Y([`
  display: flex;
  align-items: center;
  justify-content: center;
  border-radius: 2px;
  font-size: 11px;
  height: 10px;
  width: 18px;
  color: #adadadb3;
  background: transparent;
  border: none;
  cursor: pointer;
  &:hover {
    color: white;
  }
`]))),LH=le(SN)(RH||(RH=Y([`
  position: relative;
  overflow: hidden;

  &:after {
    z-index: 10;
    position: absolute;
    inset: 0;
    display: block;
    content: ' ';
    pointer-events: none;

    #pointer-root:not(.normal) & {
      pointer-events: auto;
    }
  }
`]))),NH=le.div(zH||(zH=Y([`
  padding: 12px;

  & > pre {
    border: 1px solid #ff62624f;
    background-color: rgb(255 0 0 / 5%);
    margin: 8px 0;
    padding: 8px;
    font-family: monospace;
    overflow: scroll;
    color: #ff9896;
  }
`]))),FH=e=>Hi.default.createElement(NH,null,"An Error occurred rendering this pane. Open the console for more info.",Hi.default.createElement("pre",null,JSON.stringify({message:e.error.message,stack:e.error.stack},null,2))),jH=({paneInstance:e})=>{let[n,r]=(0,Hi.useState)(null),a=e.definition.mount;(0,Hi.useLayoutEffect)(()=>{if(!n)return;let u=a({paneId:e.instanceId,node:n});if(typeof u=="function")return u},[n,a,e.instanceId]);let c=(0,Hi.useCallback)(()=>{_e().paneManager.destroyPane(e.instanceId)},[e]);return Hi.default.createElement(MH,{"data-testid":"theatre-pane-wrapper-".concat(e.instanceId)},Hi.default.createElement(MD,null,Hi.default.createElement(RA,null,Hi.default.createElement(IH,null,Hi.default.createElement(OH,{onClick:c,title:"Close Pane"},Hi.default.createElement(Hoe,null))),Hi.default.createElement(CH,null,e.instanceId))),Hi.default.createElement(wH.ErrorBoundary,{FallbackComponent:FH},Hi.default.createElement(LH,{"data-testid":"theatre-pane-content-".concat(e.instanceId),ref:r})))},BH=kH}),RD,LD,UH=R(()=>{RD=Mt,LD=(e,n)=>{let r=RD.prism.memo(e,()=>new RD.Atom(n),[]);return r.set(n),r}});function VH(e,n){(0,HH.useLayoutEffect)(()=>{if(!e||n.type!=="propWithChildren"&&n.type!=="primitiveProp"&&n.type!=="sheetObject")return;let r=null,a=W(O({},n.sheetObject.address),{pathToProp:n.type==="sheetObject"?[]:n.pathToProp});function c(){r=Rk.replaceLock(a,()=>{})}function u(){r==null||r()}return e.addEventListener("mouseenter",c),e.addEventListener("mouseleave",u),()=>{r==null||r(),e.removeEventListener("mouseenter",c),e.removeEventListener("mouseleave",u)}},[e])}var HH,GH=R(()=>{HH=ee(Oe()),QI()}),nd,WH,zD,qH,ND,KH,FD,XH,$H,ZH,YH,JH,QH,e7,n2,r2=R(()=>{rr(),nd=ee(Oe()),Qm(),Xe(),Uf(),GH(),zD=le.li(WH||(WH=Y([`
  --depth: `,`;
  margin: 0;
  padding: 0;
  list-style: none;
`])),e=>e.depth),ND=le.div(qH||(qH=Y([`
  border-bottom: 1px solid #7695b705;
`]))),FD=le(ND)(KH||(KH=Y([`
  padding-left: calc(8px + var(--depth) * 20px);

  display: flex;
  align-items: stretch;
  color: `,`;

  box-sizing: border-box;

  `,`;
`])),Gm.panel.body.compoudThing.label.color,e=>e.isSelected&&"background: blue"),$H=le.span(XH||(XH=Y([`
  `,`;
  overflow-x: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
  padding-right: 4px;
  line-height: 26px;
  flex-wrap: nowrap;

  `,`:hover & {
    color: #ccc;
  }
`])),Zu,FD),YH=le.span(ZH||(ZH=Y([`
  width: 12px;
  padding: 8px;
  font-size: 9px;
  display: flex;
  align-items: center;

  transition: transform 0.05s ease-out, color 0.1s ease-out;
  transform: rotateZ(`,`deg);
  color: #66686a;

  &:hover {
    transform: rotateZ(`,`deg);
    color: #c0c4c9;
  }
`])),e=>e.isCollapsed?0:90,e=>e.isCollapsed?15:75),QH=le.ul(JH||(JH=Y([`
  margin: 0;
  padding: 0;
  list-style: none;
`]))),e7=({leaf:e,label:n,children:r,isSelectable:a,isSelected:c,toggleSelect:u,toggleCollapsed:f,isCollapsed:p})=>{let v=Array.isArray(r)&&r.length>0,y=(0,nd.useRef)(null);return VH(y.current,e),e.shouldRender?nd.default.createElement(zD,{depth:e.depth},nd.default.createElement(FD,{ref:y,style:{height:e.nodeHeight+"px"},isSelectable:a===!0,isSelected:c===!0,onClick:u,isEven:e.n%2===0},nd.default.createElement(YH,{isCollapsed:p,onClick:f},nd.default.createElement(g6,null)),nd.default.createElement($H,null,n)),v&&nd.default.createElement(QH,null,r)):null},n2=e7});function Use(e,n){return n.every((r,a)=>r===e[a])}function Vse(e,n){if(e.length!==n.length)return!1;for(let r=0;r<e.length;r++)if(e[r]!==n[r])return!1;return!0}function i2(e){var n;let r=[];for(;;){let a=r.length,c=(n=e[0])==null?void 0:n[a];if(c===void 0)return r;for(let u of e)if(c!==u[a])return r;r.push(c)}}var wl,o2,Sl=R(()=>{xk(),wl=bb(e=>JSON.stringify(e)),o2=e=>JSON.parse(e)});function Hse(e,n){let r=(0,jD.useRef)({combo:e,listener:n});r.current={combo:e,listener:n},(0,jD.useEffect)(()=>{function a(f){f.key===r.current.combo&&r.current.listener({down:!0,event:f})}function c(f){f.key===r.current.combo&&r.current.listener({down:!1,event:f})}function u(f){r.current.listener({down:!1,event:void 0})}return document.addEventListener("keydown",a),document.addEventListener("keyup",c),window.addEventListener("blur",u),()=>{document.removeEventListener("keydown",a),document.removeEventListener("keyup",c),window.removeEventListener("blur",u)}},[])}var jD,Gse=R(()=>{jD=ee(Oe())});function t7(e){let[n,r]=(0,n7.useState)(!1);return Hse(e,({down:a})=>{r(a)}),n}var n7,r7=R(()=>{n7=ee(Oe()),Gse()});function Wse(e){let n=(0,BD.useMemo)(()=>new i7.Atom(e),[]);return(0,BD.useLayoutEffect)(()=>{n.set(e)},[e]),n}var i7,BD,qse=R(()=>{i7=Mt,BD=ee(Oe())});function o7(e,n,r){let a=(0,UD.pointer)({root:{},path:[]}),c=n(a);ll(e,(0,UD.getPointerParts)(c).path,r)}var UD,Kse=R(()=>{UD=Mt,Cy()}),a2,a7,Po,Ts=R(()=>{a2="data-pos",a7={checkIfMouseEventSnapToPos(e,n){let r=e.composedPath().find(a=>a instanceof Element&&a!==(n==null?void 0:n.ignore)&&a.hasAttribute(a2));if(r){let a=parseFloat(r.getAttribute(a2));if(isFinite(a))return a}return null},includePositionSnapAttrs(e){return{[a2]:e}}},Po=a7});function s2(e){let n=e.type==="sheet"?$se(e):VD(e);return{byPosition:Xse(n),tracks:n}}function Xse(e){let n=new Map;for(let r of e)for(let a of r.data.keyframes){let c=n.get(a.position);c||(c=[],n.set(a.position,c)),c.push({kf:a,track:r,itemKey:Si.forTrackKeyframe(r.sheetObject,r.id,a.id)})}return n}function $se(e){return e.children.flatMap(VD)}function VD(e){return e.children.flatMap(n=>n.type==="propWithChildren"?VD(n):Zse(n))}function Zse(e){let n=e.sheetObject,r=n.address.projectId,a=_e().atomP.historic.coreByProject[r].sheetsById[n.address.sheetId].sequence.tracksByObject[n.address.objectKey],c=(0,l2.val)(a.trackIdByPropPath[wl(e.pathToProp)]);if(!c)return[];let u=(0,l2.val)(a.trackData[c]);return u?[{id:c,data:u,sheetObject:n}]:[]}function Yse(e,n){return xo(e.children.flatMap(r=>HD(r,n)))}function HD(e,n){return xo(e.children.flatMap(r=>r.type==="propWithChildren"?HD(r,n):Jse(r,n)))}function Jse(e,n){var r,a;let c=e.sheetObject,u=c.address.projectId,f=_e().atomP.historic.coreByProject[u].sheetsById[c.address.sheetId].sequence.tracksByObject[c.address.objectKey],p=(0,l2.val)(f.trackIdByPropPath[wl(e.pathToProp)]);return p?(a=(r=n[c.address.objectKey])==null?void 0:r[p])!=null?a:[]:[]}var l2,hg=R(()=>{Ge(),l2=Mt,Sc(),Sl(),Jr()});function Qse(e,n){let[r,a]=Qn(null),c=qu("useCaptureSelection");return Gr(n,(0,pg.useMemo)(()=>({debugName:"DopeSheetSelectionView/useCaptureSelection",dontBlockMouseDown:!0,lockCSSCursorTo:"cell",onDragStart(u){if(!u.shiftKey||u.target instanceof HTMLInputElement)return!1;let f=n.getBoundingClientRect(),p=u.clientX-f.left-(0,Fa.val)(e.scaledSpace.leftPadding),v=(0,Fa.val)(e.scaledSpace.toUnitSpace)(p);return r.current={h:[v,v],v:[u.clientY-f.top,u.clientY-f.top]},(0,Fa.val)(e.selectionAtom).set({current:void 0}),{onDrag(y,k,P){let T=n.getBoundingClientRect(),E=P.clientX-T.left-(0,Fa.val)(e.scaledSpace.leftPadding),A=(0,Fa.val)(e.scaledSpace.toUnitSpace)(E);r.current={h:[r.current.h[0],A],v:[r.current.v[0],P.clientY-T.top]};let C=GD.boundsToSelection(c,(0,Fa.val)(e),r.current);(0,Fa.val)(e.selectionAtom).set({current:C})},onDragEnd(y){r.current=null}}}}),[e,n,r])),a}var Fa,pg,rd,s7,l7,c7,GD,u7,d7,WD,f7,h7,ele=R(()=>{Ge(),hi(),r7(),qse(),Kse(),nr(),sn(),Fa=Mt,pg=ee(Oe()),Xe(),Ts(),hg(),Ku(),rd=5,l7=le.div(s7||(s7=Y([`
  cursor: `,`;
`])),e=>e.isShiftDown?"cell":"default"),c7=({layoutP:e,children:n,height:r})=>{let[a,c]=Qn(null),u=t7("Shift"),f=Qse(e,c),p=(0,pg.useRef)(f);return p.current=f,pg.default.createElement(l7,{style:{height:r+"px"},ref:a,isShiftDown:u,className:"selectionview"},f&&pg.default.createElement(f7,{state:f,layoutP:e}),n)},(e=>{let n=(f,p,v,y,k)=>{let P=s2(v);if(v.top+v.nodeHeight/2+rd>y.v[0]&&v.top+v.nodeHeight/2-rd<y.v[1])for(let[T,E]of P.byPosition){let A=p.scaledSpace.toUnitSpace(rd);if(!(T+A<=y.h[0]||T-A>=y.h[1]))for(let C of E)o7(k,L=>L[C.track.sheetObject.address.objectKey].byTrackId[C.track.id].byKeyframeId[C.kf.id],!0)}a(f,p,v,y,k)},r={sheet(f,p,v,y,k){n(f,p,v,y,k)},propWithChildren(f,p,v,y,k){n(f,p,v,y,k)},sheetObject(f,p,v,y,k){n(f,p,v,y,k)},primitiveProp(f,p,v,y,k){let{sheetObject:P,trackId:T}=v,E=(0,Fa.val)(_e().atomP.historic.coreByProject[P.address.projectId].sheetsById[P.address.sheetId].sequence.tracksByObject[P.address.objectKey].trackData[T]);if(!(y.v[0]>v.top+v.heightIncludingChildren/2+rd||v.top+v.heightIncludingChildren/2-rd>y.v[1])){for(let A of E.keyframes)if(!(A.position+p.scaledSpace.toUnitSpace(rd)<=y.h[0])){if(A.position-p.scaledSpace.toUnitSpace(rd)>=y.h[1])break;o7(k,C=>C[P.address.objectKey].byTrackId[T].byKeyframeId[A.id],!0)}}}},a=(f,p,v,y,k)=>{if("children"in v)for(let P of v.children)c(f,p,P,y,k)};function c(f,p,v,y,k){if(!v.shouldRender||y.v[0]>v.top+v.heightIncludingChildren||v.top>y.v[1])return;let P=r[v.type];P?P(f,p,v,y,k):a(f,p,v,y,k)}function u(f,p,v){let y={};v=WD(v);let k=p.tree;c(f.utilFor.internal(),p,k,v,y);let P=p.tree.sheet;return{type:"DopeSheetSelection",byObjectKey:y,getDragHandlers(T){return{debugName:"DopeSheetSelectionView/boundsToSelection",onDragStart(){let E,A=p.scaledSpace.toUnitSpace;return{onDrag(C,L,N){E&&(E.discard(),E=void 0);let U=Po.checkIfMouseEventSnapToPos(N,{ignore:T.domNode}),G=U!=null?U-T.positionAtStartOfDrag:A(C);E=_e().tempTransaction(({stateEditors:Q})=>{let J=Q.coreByProject.historic.sheetsById.sequence.transformKeyframes;for(let ie of Object.keys(y)){let{byTrackId:xe}=y[ie];for(let Me of Object.keys(xe)){let{byKeyframeId:ue}=xe[Me];J({trackId:Me,keyframeIds:Object.keys(ue),translate:G,scale:1,origin:0,snappingFunction:P.getSequence().closestGridPosition,objectKey:ie,projectId:T.projectId,sheetId:T.sheetId})}}})},onDragEnd(C){C?E==null||E.commit():E==null||E.discard()}}}}},delete(){_e().transaction(({stateEditors:T})=>{let E=T.coreByProject.historic.sheetsById.sequence.deleteKeyframes;for(let A of Object.keys(y)){let{byTrackId:C}=y[A];for(let L of Object.keys(C)){let{byKeyframeId:N}=C[L];E(W(O({},P.address),{objectKey:A,trackId:L,keyframeIds:Object.keys(N)}))}}})}}}e.boundsToSelection=u})(GD||(GD={})),d7=le.div(u7||(u7=Y([`
  position: absolute;
  background: rgba(255, 255, 255, 0.1);
  border: 1px dashed rgba(255, 255, 255, 0.4);
  box-sizing: border-box;
`]))),WD=e=>({h:[...e.h].sort((n,r)=>n-r),v:[...e.v].sort((n,r)=>n-r)}),f7=({state:e,layoutP:n})=>{let r=Wse(e);return Mn(()=>{let a=(0,Fa.val)(r.pointer),c=WD(a),u=(0,Fa.val)(n.scaledSpace.fromUnitSpace),f=(0,Fa.val)(n.scaledSpace.leftPadding),p=c.h.map(u).map(T=>T+f),v=c.v[0],y=c.v[1]-c.v[0],k=p[0],P=p[1]-p[0];return pg.default.createElement(d7,{style:{top:v+"px",height:y+"px",left:k+"px",width:P+"px"}})},[n,r])},h7=c7}),Xf,p7,m7,qD,g7,v7,y7,b7=R(()=>{qm(),Xf=ee(Oe()),Xe(),Oc(),m7=le.div(p7||(p7=Y([`
  position: absolute;
  top: 0;
  right: 0;
  left: 0;
  bottom: 0;
  overflow-x: hidden;
  overflow-y: scroll;
  z-index: `,`;

  &::-webkit-scrollbar {
    display: none;
  }

  scrollbar-width: none;
`])),()=>Ol.scrollableArea),qD=(0,Xf.createContext)(bs),g7=()=>(0,Xf.useContext)(qD),v7=e=>{let n=(0,Xf.useRef)(null),r=(0,Xf.useCallback)(a=>{n.current.scrollBy(0,a.deltaY)},[]);return Xf.default.createElement(qD.Provider,{value:r},Xf.default.createElement(m7,{ref:n},e.children))},y7=v7}),_7,tle=R(()=>{_7='data:image/svg+xml,<svg width="34" height="34" viewBox="0 0 34 34" fill="none" xmlns="http://www.w3.org/2000/svg">%0A  <path d="M1 7V1H7" stroke="%2374FFDE" stroke-width="0.25" />%0A  <path d="M7 33H1L1 27" stroke="%2374FFDE" stroke-width="0.25" />%0A  <path d="M33 27V33H27" stroke="%2374FFDE" stroke-width="0.25" />%0A  <path d="M27 1L33 1V7" stroke="%2374FFDE" stroke-width="0.25" />%0A</svg>'}),ja,c2=R(()=>{ja=(e,n=e)=>`
  left: `.concat(e*-.5,`px;
  top: `).concat(n*-.5,`px;
  width: `).concat(e,`px;
  height: `).concat(n,`px;
`)}),u2,x7,w7,nle=R(()=>{u2=Mt,x7=(0,u2.prism)(()=>{let[e,n]=u2.prism.state("pos",null);return u2.prism.effect("setupListeners",()=>{let r=a=>{n(a)};return document.addEventListener("mousemove",r),()=>{document.removeEventListener("mousemove",r)}},[]),e}),w7=x7}),Tc,Co,$b,S7,E7,k7,T7,Mc,El,d2,M7,P7,Gi=R(()=>{Tc=Mt,nle(),Jr(),Co=ee(Oe()),$b=(0,Co.createContext)(null),S7=0,E7=({children:e,layoutP:n})=>{let r=(0,Co.useMemo)(()=>new Tc.Atom([]),[]),a=(0,Co.useMemo)(()=>(0,Tc.prism)(()=>{let f=Tc.prism.memo("p",()=>M7(n),[n]).getValue(),p=(0,Tc.val)(r.pointer);return p.length>0?oc(p).position:f}),[n]),c=(0,Co.useCallback)(()=>{let f=S7++;return r.reduce(p=>[...p,{id:f,position:[-1,0]}]),{set:p=>{r.reduce(v=>{let y=v.findIndex(P=>P.id===f);if(y===-1)return console.warn("Lock is already freed. This is a bug."),v;let k=[...v];return k.splice(y,1,{id:f,position:[p,p===-1?0:1]}),k})},unlock:()=>{r.reduce(p=>p.filter(v=>v.id!==f))}}},[]),u={currentD:a,getLock:c};return Co.default.createElement($b.Provider,{value:u},e)},k7=()=>(0,Co.useContext)($b).currentD,T7=()=>{let{getLock:e}=(0,Co.useContext)($b),n=(0,Co.useRef)();return(0,Co.useLayoutEffect)(()=>()=>{var r;(r=n.current)==null||r.unlock()},[]),(0,Co.useMemo)(()=>{let r;return(a,c)=>{var u,f;(r==null?void 0:r.shouldLock)!==a&&(a?n.current=e():(u=n.current)==null||u.unlock()),(r==null?void 0:r.pos)!==c&&a&&((f=n.current)==null||f.set(c)),r={shouldLock:a,pos:c}}},[e])},Mc=(e,n)=>{let{getLock:r}=(0,Co.useContext)($b),a=(0,Co.useRef)();(0,Co.useLayoutEffect)(()=>{if(e)return a.current=r(),()=>{a.current.unlock()}},[e,r]),(0,Co.useLayoutEffect)(()=>{e&&a.current.set(n)},[n,e])},El=e=>({[d2]:e==="hide"?e:e.toFixed(3)}),d2="data-theatre-lock-framestamp-to",M7=e=>(0,Tc.prism)(()=>{let n=(0,Tc.val)(e.rightDims),r=(0,Tc.val)(e.clippedSpace.toUnitSpace),a=(0,Tc.val)(w7);if(!a)return[-1,0];for(let k of a.composedPath()){if(!(k instanceof HTMLElement||k instanceof SVGElement))break;if(k.hasAttribute(d2)){let P=k.getAttribute(d2);if(typeof P!="string")continue;if(P==="hide")return[-1,0];let T=parseFloat(P);if(isFinite(T)&&T>=0)return[T,2]}}let{clientX:c,clientY:u}=a,{screenX:f,screenY:p,width:v,height:y}=n;if(hr(c,f,f+v)&&hr(u,p+16,p+y)){let k=c-f;return[r(k),3]}else return[-1,0]}),P7=E7}),C7,Zb,KD,A7,I7,kl,D7=R(()=>{rr(),ua(),Xe(),tle(),c2(),Ts(),Gi(),C7=12,Zb=34,KD="beingDragged",kl={BEING_DRAGGED_CLASS:KD,CSS:Bi(A7||(A7=Y([`
    position: absolute;
    `,`;
    `,`;

    &.`,` {
      pointer-events: none !important;
    }
  `])),ja(C7),tr,KD),CSS_WHEN_SOMETHING_DRAGGING:Bi(I7||(I7=Y([`
    pointer-events: auto;
    cursor: var(`,`);

    // \u2E22\u2E24\u2E23\u2E25 thing
    // This box extends the hitzone so the user does not
    // accidentally leave the hitzone
    &:hover:after {
      position: absolute;
      top: calc(50% - `,`px);
      left: calc(50% - `,`px);
      width: `,`px;
      height: `,`px;
      display: block;
      content: ' ';
      background: url(`,`) no-repeat 100% 100%;
      // This icon might also fit: GiConvergenceTarget
    }
  `])),yc,Zb/2,Zb/2,Zb,Zb,_7),reactProps(e){return W(O(O({},El(e.position)),Po.includePositionSnapAttrs(e.position)),{className:e.isDragging?kl.BEING_DRAGGED_CLASS:""})}}});function XD(){Jb.set({mode:"snapToAll"})}function $f(){Jb.set({mode:"snapToNone"})}function O7(e){Jb.set({mode:"snapToSome",positions:e})}function R7(e,n){return Object.fromEntries(Object.entries(e).map(([r,a])=>[r,Object.fromEntries(Object.entries(a.trackData).map(([c,u])=>[c,u.keyframes.filter(f=>n(f,{trackId:c,trackData:u,objectKey:r})).map(f=>f.position)]))]))}var L7,z7,$D,N7,F7,j7,B7,U7,Yb,Jb,ZD,Zf=R(()=>{L7=Mt,z7=Mt,$D=ee(Oe()),Xe(),D7(),F7=le.div(N7||(N7=Y([`
  z-index: 1;
  cursor: ew-resize;

  `,`

  #pointer-root.draggingPositionInSequenceEditor & {
    `,`
  }
`])),kl.CSS,kl.CSS_WHEN_SOMETHING_DRAGGING),B7=le.div(j7||(j7=Y([`
  position: absolute;
`]))),U7=e=>$D.default.createElement(B7,{style:{top:"".concat(e.leaf.nodeHeight/2,"px"),left:"calc(".concat((0,z7.val)(e.layoutP.scaledSpace.leftPadding),"px + calc(var(--unitSpaceToScaledSpaceMultiplier) * ").concat(e.position,"px))")}},$D.default.createElement(F7,O({},kl.reactProps({isDragging:!1,position:e.position})))),Yb=U7,Jb=new L7.Atom({mode:"snapToNone"}),ZD=Jb.prism});function rle(e,n){let r=(0,Yf.useMemo)(()=>({debugName:"HorizontallyScrollableArea",onDragStart(c){if(c.target instanceof HTMLInputElement||c.shiftKey||c.altKey||c.ctrlKey||c.metaKey||c.composedPath().some(P=>P instanceof HTMLElement&&P.draggable===!0))return!1;let u=c.clientX-n.getBoundingClientRect().left,f=Pr((0,Wr.val)(e.clippedSpace.toUnitSpace)(u),0,1/0),p=(0,Wr.val)(e.seeker.setIsSeeking),v=(0,Wr.val)(e.sheet).getSequence();v.position=f;let y=f,k=(0,Wr.val)(e.scaledSpace.toUnitSpace);return p(!0),XD(),{onDrag(P,T,E){let A=k(P),C=Pr(y+A,0,v.length),L=Po.checkIfMouseEventSnapToPos(E,{});L!=null&&(C=L),v.position=C},onDragEnd(){p(!1),$f()}}}}),[e,n]),[a]=Gr(n,r);za(a,"draggingPositionInSequenceEditor","ew-resize")}function ile(e,n){let r=g7();(0,Yf.useLayoutEffect)(()=>{if(!n)return;let a=u=>{if(u.ctrlKey){u.preventDefault(),u.stopPropagation();let f=u.clientX-n.getBoundingClientRect().left,p=(0,Wr.val)(e.clippedSpace.toUnitSpace)(f),v=(0,Wr.val)(e.clippedSpace.range),y=1+YD(u.deltaY,[-50,50])*.03,k=ac(v,E=>(E-p)*y+p),P=(0,Wr.val)(e.sheet).getSequence().length,T=P+P*.25;(0,Wr.val)(e.clippedSpace.setRange)(ole(k,[0,T]));return}else if(u.shiftKey){u.preventDefault(),u.stopPropagation();let f=(0,Wr.val)(e.sheet).getSequence().length,p=(0,Wr.val)(e.clippedSpace.range),v=(p.end-p.start)/f,y=YD(u.deltaY||u.deltaX,[-50,50])*.05*v,k=ac(p,P=>P+y);(0,Wr.val)(e.clippedSpace.setRange)(k);return}else{r(u),u.preventDefault(),u.stopPropagation();let f=(0,Wr.val)(e.scaledSpace.toUnitSpace)(u.deltaX*1),p=(0,Wr.val)(e.clippedSpace.range),v=ac(p,y=>y+f);(0,Wr.val)(e.clippedSpace.setRange)(v);return}},c={capture:!0,passive:!1};return n.addEventListener("wheel",a,c),()=>{n.removeEventListener("wheel",a,c)}},[n,e]),Gr(n,(0,Yf.useMemo)(()=>({onDragStart(a){let c=(0,Wr.val)(e.clippedSpace.range),u=(0,Wr.val)(e.clippedSpace.setRange),f=(0,Wr.val)(e.scaledSpace.toUnitSpace);return a.preventDefault(),a.stopPropagation(),{onDrag(p,v,y,k,P){r({deltaY:-P});let T=-f(p),E=ac(c,A=>A+T);u(E)}}},debugName:"HorizontallyScrollableArea Middle Button Drag",buttons:[1],lockCSSCursorTo:"grabbing"}),[e]))}function YD(e,[n,r]){return Math.max(Math.min(e,r),n)}function ole(e,n){return ac(e,r=>YD(r,n))}function ale(e,n){(0,Yf.useLayoutEffect)(()=>{if(!n)return;let r=(0,Wr.prism)(()=>{let f=(0,Wr.val)(e.clippedSpace.range);return(0,Wr.val)(e.scaledSpace.fromUnitSpace)(f.start)}),a=()=>{let f=r.getValue();n.scrollLeft=f},c=r.onStale(a);a();let u=setTimeout(a,100);return()=>{clearTimeout(u),c()}},[e,n])}var Wr,Yf,V7,H7,G7,JD,W7=R(()=>{hi(),nr(),sn(),Wr=Mt,Jr(),Yf=ee(Oe()),Xe(),b7(),rr(),ua(),Ts(),Zf(),H7=le.div(V7||(V7=Y([`
  position: absolute;

  right: 0;
  overflow-x: scroll;
  overflow-y: hidden;
  `,`;

  // hide the scrollbar on Gecko
  scrollbar-width: none;

  // hide the scrollbar on Webkit/Blink
  &::-webkit-scrollbar {
    display: none;
  }
`])),tr),G7=Yf.default.memo(({layoutP:e,children:n,height:r})=>{let{width:a,unitSpaceToScaledSpaceMultiplier:c}=Mn(()=>({width:(0,Wr.val)(e.rightDims.width),unitSpaceToScaledSpaceMultiplier:(0,Wr.val)(e.scaledSpace.fromUnitSpace)(1)}),[e]),[u,f]=Qn(null);return ile(e,f),rle(e,f),ale(e,f),Yf.default.createElement(H7,{ref:u,style:{width:a+"px",height:r+"px","--unitSpaceToScaledSpaceMultiplier":c}},n)}),JD=G7}),f2,q7,K7,X7,$7,Z7,Y7,J7,mg,h2=R(()=>{f2=ee(Oe()),Xe(),K7=le.li(q7||(q7=Y([`
  margin: 0;
  padding: 0;
  list-style: none;
  box-sizing: border-box;
  position: relative;
`]))),$7=le.div(X7||(X7=Y([`
  box-sizing: border-box;
  width: 100%;
  position: relative;

  &:before {
    position: absolute;
    display: block;
    content: ' ';
    left: -40px;
    top: 0;
    bottom: 0;
    right: 0;
    box-sizing: border-box;
    border-bottom: 1px solid #252b3869;
    background: `,`;
  }
`])),e=>e.isEven?"transparent":"#6b8fb505"),Y7=le.ul(Z7||(Z7=Y([`
  margin: 0;
  padding: 0;
  list-style: none;
`]))),J7=({leaf:e,children:n,node:r,isCollapsed:a})=>{let c=Array.isArray(n)&&n.length>0;return e.shouldRender?f2.default.createElement(K7,null,f2.default.createElement($7,{style:{height:e.nodeHeight+"px"},isEven:e.n%2===0},r),c&&f2.default.createElement(Y7,null,n)):null},mg=J7}),sle=se((e,n)=>{(function(){var r=this,a={};typeof e!="undefined"?n.exports=a:r.fuzzy=a,a.simpleFilter=function(c,u){return u.filter(function(f){return a.test(c,f)})},a.test=function(c,u){return a.match(c,u)!==null},a.match=function(c,u,f){f=f||{};var p=0,v=[],y=u.length,k=0,P=0,T=f.pre||"",E=f.post||"",A=f.caseSensitive&&u||u.toLowerCase(),C;c=f.caseSensitive&&c||c.toLowerCase();for(var L=0;L<y;L++)C=u[L],A[L]===c[p]?(C=T+C+E,p+=1,P+=1+P):P=0,k+=P,v[v.length]=C;return p===c.length?(k=A===c?1/0:k,{rendered:v.join(""),score:k}):null},a.filter=function(c,u,f){return!u||u.length===0?[]:typeof c!="string"?u:(f=f||{},u.reduce(function(p,v,y,k){var P=v;f.extract&&(P=f.extract(v));var T=a.match(c,P,f);return T!=null&&(p[p.length]={string:T.rendered,score:T.score,index:y,original:v}),p},[]).sort(function(p,v){var y=v.score-p.score;return y||p.index-v.index}))}})()});function lle(e,n){let[r,a]=(0,p2.useState)(!1),c=(0,p2.useRef)(n);return r||(c.current=n),(0,p2.useMemo)(()=>e(a),c.current)}var p2,cle=R(()=>{p2=ee(Oe())}),QD,id,m2=R(()=>{QD="rgba(26, 28, 30, 0.97);",id="#272B2F"});function Q7(e,n,r,a){let c=lle(u=>({debugName:"CurveSegmentEditor/useKeyframeDrag",lockCSSCursorTo:"move",onDragStart(){return u(!0),{onDrag(f,p){e&&r.onCurveChange(a(f,p))},onDragEnd(f){u(!1),r.onCancelCurveChange()}}}}),[e,r.onCurveChange,r.onCancelCurveChange]);Gr(n,c)}var er,g2,Qb,gg,eG,e_,tG,v2,nG,rG,iG,vg,oG,Jf,aG,sG,eO,lG,y2,cG,tO,uG,dG,ule=R(()=>{er=ee(Oe()),hi(),nr(),nm(),Xe(),rr(),cle(),m2(),g2=.12,Qb=1+g2*2,gg=.01,eG=8,e_=(1-gg)/(eG-1),tG="#3EAAA4",v2="#3EAAA4",nG="#3EAAA4",rG="#3EAAA4",iG="#3EAAA4",vg="#3EAAA4",oG="#3EAAA4",Jf="#B3B3B3",aG="#3eaaa4",sG="#67dfd8",eO=["goldenrod","cornflowerblue","dodgerblue","lawngreen"],y2=le.circle(lG||(lG=Y([`
  stroke-width: 0.1px;
  vector-effect: non-scaling-stroke;
  r: 0.04px;
  pointer-events: none;
  transition: r 0.15s;
  fill: `,`;
`])),aG),tO=le.circle(cG||(cG=Y([`
  stroke-width: 0.1px;
  vector-effect: non-scaling-stroke;
  r: 0.09px;
  cursor: move;
  `,`;
  &:hover {
    opacity: 0.4;
  }
  &:hover + `,` {
    fill: `,`;
  }
`])),tr,y2,sG),uG=e=>{let{curveConnection:{left:n,right:r},backgroundConnections:a}=e,c=Math.min(0,1-r.handles[1],1-n.handles[3]),u=Math.max(1,1-r.handles[1],1-n.handles[3]),f=Math.max(1,u-c),p=N=>(N-c)/f,[v,y]=Qn(null),k=Qb/((y==null?void 0:y.clientWidth)||1),P=Qb/((y==null?void 0:y.clientHeight)||1),[T,E]=Qn(null);Q7(y,E,e,(N,U)=>{let G=Pr(n.handles[2]+N*k,0,1),Q=n.handles[3]-U*P;return[G,Q,r.handles[0],r.handles[1]]});let[A,C]=Qn(null);Q7(y,C,e,(N,U)=>{let G=Pr(r.handles[0]+N*k,0,1),Q=r.handles[1]-U*P;return[n.handles[2],n.handles[3],G,Q]});let L=N=>"M0 ".concat(p(1)," C").concat(N.left.handles[2]," ").concat(p(1-N.left.handles[3])," ").concat(N.right.handles[0]," ").concat(p(1-N.right.handles[1])," 1 ").concat(p(0));return er.default.createElement("svg",{height:"100%",width:"100%",ref:v,viewBox:"".concat(-g2," ").concat(-g2," ").concat(Qb," ").concat(Qb),xmlns:"http://www.w3.org/2000/svg",preserveAspectRatio:"none",fill:"none"},er.default.createElement("linearGradient",{id:"myGradient",gradientTransform:"rotate(90)"},er.default.createElement("stop",{offset:p(-1),stopColor:oG}),er.default.createElement("stop",{offset:p(0),stopColor:vg}),er.default.createElement("stop",{offset:p(.3),stopColor:iG}),er.default.createElement("stop",{offset:p(.5),stopColor:rG}),er.default.createElement("stop",{offset:p(.7),stopColor:nG}),er.default.createElement("stop",{offset:p(1),stopColor:v2}),er.default.createElement("stop",{offset:p(2),stopColor:tG})),er.default.createElement("pattern",{id:"dot-background-pattern-1",width:e_,height:e_/f,y:-c/f},er.default.createElement("rect",{width:gg,height:gg,fill:Jf,opacity:.3})),er.default.createElement("rect",{x:0,y:0,width:"1",height:1,fill:"url(#dot-background-pattern-1)"}),er.default.createElement("pattern",{id:"dot-background-pattern-2",width:e_,height:e_},er.default.createElement("rect",{width:gg,height:gg,fill:Jf})),er.default.createElement("rect",{x:0,y:p(0),width:"1",height:p(1)-p(0),fill:"url(#dot-background-pattern-2)"}),!n.type||n.type==="bezier"?er.default.createElement(er.default.Fragment,null,er.default.createElement("line",{x1:0,y1:p(1),x2:n.handles[2],y2:p(1-n.handles[3]),stroke:Jf,strokeWidth:"0.01"}),er.default.createElement("line",{x1:1,y1:p(0),x2:r.handles[0],y2:p(1-r.handles[1]),stroke:Jf,strokeWidth:"0.01"}),er.default.createElement("path",{d:L(e.curveConnection),stroke:"none",fill:"url('#myGradient')",opacity:"0.1"}),a.map((N,U)=>er.default.createElement("path",{key:N.objectKey+"/"+N.left.id,d:L(N),stroke:eO[U%eO.length],opacity:.6,strokeWidth:"0.01"})),er.default.createElement("path",{d:L(e.curveConnection),stroke:"url('#myGradient')",strokeWidth:"0.02"}),er.default.createElement("circle",{cx:0,cy:p(1),r:"0.025",stroke:v2,strokeWidth:"0.02",fill:id}),er.default.createElement("circle",{cx:1,cy:p(0),r:"0.025",stroke:vg,strokeWidth:"0.02",fill:id}),er.default.createElement(tO,{ref:T,cx:n.handles[2],cy:p(1-n.handles[3]),fill:v2,opacity:.2}),er.default.createElement(y2,{cx:n.handles[2],cy:p(1-n.handles[3])}),er.default.createElement(tO,{ref:A,cx:r.handles[0],cy:p(1-r.handles[1]),fill:vg,opacity:.2}),er.default.createElement(y2,{cx:r.handles[0],cy:p(1-r.handles[1])})):er.default.createElement(er.default.Fragment,null,er.default.createElement("line",{x1:0,y1:p(1),x2:1,y2:p(1),stroke:Jf,strokeWidth:"0.01"}),er.default.createElement("line",{x1:1,y1:p(1),x2:1,y2:0,stroke:Jf,strokeWidth:"0.01"}),er.default.createElement("circle",{cx:0,cy:1,r:"0.025",stroke:vg,strokeWidth:"0.02",fill:id}),er.default.createElement("circle",{cx:1,cy:0,r:"0.025",stroke:vg,strokeWidth:"0.02",fill:id})))},dG=uG});function b2(e){return e.map(n=>n.toFixed(3)).join(", ")}function _2(e){if(!e||(e==null?void 0:e.length)>fG)return null;let n=e.split(",");if(n.length!==4)return null;let r=n.map(a=>Number(a.trim()));return!r.every(a=>isFinite(a))||r[0]<0||r[0]>1||r[2]<0||r[2]>1?null:r}function dle(e,n,r={threshold:.02}){if(!e||!n)return!1;let a=0;for(let c=0;c<4;c++)a+=Math.abs(e[c]-n[c]);return a<r.threshold}var fG,x2,hG=R(()=>{fG=128,x2=[{label:"Quad Out",value:"0.250, 0.460, 0.450, 0.940"},{label:"Quad In Out",value:"0.455, 0.030, 0.515, 0.955"},{label:"Quad In",value:"0.550, 0.085, 0.680, 0.530"},{label:"Cubic Out",value:"0.215, 0.610, 0.355, 1.000"},{label:"Cubic In Out",value:"0.645, 0.045, 0.355, 1.000"},{label:"Cubic In",value:"0.550, 0.055, 0.675, 0.190"},{label:"Quart Out",value:"0.165, 0.840, 0.440, 1.000"},{label:"Quart In Out",value:"0.770, 0.000, 0.175, 1.000"},{label:"Quart In",value:"0.895, 0.030, 0.685, 0.220"},{label:"Quint Out",value:"0.230, 1.000, 0.320, 1.000"},{label:"Quint In Out",value:"0.860, 0.000, 0.070, 1.000"},{label:"Quint In",value:"0.755, 0.050, 0.855, 0.060"},{label:"Sine Out",value:"0.390, 0.575, 0.565, 1.000"},{label:"Sine In Out",value:"0.445, 0.050, 0.550, 0.950"},{label:"Sine In",value:"0.470, 0.000, 0.745, 0.715"},{label:"Expo Out",value:"0.190, 1.000, 0.220, 1.000"},{label:"Expo In Out",value:"1.000, 0.000, 0.000, 1.000"},{label:"Expo In",value:"0.780, 0.000, 0.810, 0.00"},{label:"Circ Out",value:"0.075, 0.820, 0.165, 1.000"},{label:"Circ In Out",value:"0.785, 0.135, 0.150, 0.860"},{label:"Circ In",value:"0.600, 0.040, 0.980, 0.335"},{label:"Back Out",value:"0.175, 0.885, 0.320, 1.275"},{label:"Back In Out",value:"0.680, -0.550, 0.265, 1.550"},{label:"Back In",value:"0.600, -0.280, 0.735, 0.045"},{label:"linear",value:"0.5, 0.5, 0.5, 0.5"},{label:"In Out",value:"0.42,0,0.58,1"},{label:"Hold",value:"0, 0, Infinity, Infinity"}]}),so,w2,Qf,nO,pG,mG,t_,rO,iO,gG,vG,fle=R(()=>{so=ee(Oe()),w2=.75,Qf=.1,nO=1+w2*2,pG="#F5F5F5",mG="#888888",t_="#4f4f4f",rO="rgba(255, 255, 255, 0.1)",iO=e=>1-e,gG=e=>{let{easing:n,isSelected:r}=e,a=r?pG:mG,c="".concat(-w2," ").concat(-w2," ").concat(nO," ").concat(nO);if(n){let u=[n[0],iO(n[1])],f=[n[2],iO(n[3])];return so.default.createElement("svg",{height:"100%",width:"100%",viewBox:c,fill:"none",xmlns:"http://www.w3.org/2000/svg"},so.default.createElement("line",{x1:"0",y1:"1",x2:u[0],y2:u[1],stroke:t_,strokeWidth:"0.1"}),so.default.createElement("line",{x1:"1",y1:"0",x2:f[0],y2:f[1],stroke:t_,strokeWidth:"0.1"}),so.default.createElement("circle",{cx:u[0],cy:u[1],r:.1,fill:rO}),so.default.createElement("circle",{cx:f[0],cy:f[1],r:.1,fill:rO}),so.default.createElement("circle",{cx:u[0],cy:u[1],r:Qf,fill:t_}),so.default.createElement("circle",{cx:f[0],cy:f[1],r:Qf,fill:t_}),so.default.createElement("path",{d:"M0 1 C".concat(u[0]," ").concat(u[1]," ").concat(f[0],` 
        `).concat(f[1]," 1 0"),stroke:a,strokeWidth:"0.08"}),so.default.createElement("circle",{cx:0,cy:1,r:Qf,fill:a}),so.default.createElement("circle",{cx:1,cy:0,r:Qf,fill:a}))}return so.default.createElement("svg",{height:"100%",width:"100%",viewBox:c,fill:"none",xmlns:"http://www.w3.org/2000/svg"},so.default.createElement("line",{x1:"0",y1:"1",x2:1,y2:1,stroke:a,strokeWidth:"0.08"}),so.default.createElement("line",{x1:"1",y1:"0",x2:1,y2:1,stroke:a,strokeWidth:"0.08"}),so.default.createElement("circle",{cx:0,cy:1,r:Qf,fill:a}),so.default.createElement("circle",{cx:1,cy:0,r:Qf,fill:a}))},vG=gG}),n_,yG,bG,_G,xG,wG,SG,EG,hle=R(()=>{zb(),n_=ee(Oe()),Xe(),hG(),fle(),tk(),m2(),yl(),_G=le.div(bG||(bG=Y([`
  position: relative;
  display: flex;
  align-items: center;
  justify-content: center;
  overflow: hidden;
  aspect-ratio: 1;

  transition: background-color 0.15s;
  background-color: `,`;
  border-radius: 2px;
  cursor: pointer;
  outline: none;

  `,`

  &:hover {
    background-color: #31353a;
  }

  &:focus {
    background-color: #383d42;
  }
`])),id,({isSelected:e})=>e&&Bi(yG||(yG=Y([`
      background-color: #383d42;
    `])))),wG=le(vl)(xG||(xG=Y([`
  padding: 0.5em;
  color: white;
  max-width: 240px;
  pointer-events: none !important;
  --popover-bg: black;
  --popover-outer-stroke: transparent;
  --popover-inner-stroke: transparent;
  box-shadow: none;
`]))),SG=n_.default.forwardRef((e,n)=>{let[r,a]=sg({enabled:!0,verticalPlacement:e.tooltipPlacement,verticalGap:0},()=>n_.default.createElement(wG,{showPopoverEdgeTriangle:!1},e.easing.label));return n_.default.createElement(_G,O({ref:ek([a,n])},e),r,n_.default.createElement(vG,{easing:_2(e.easing.value),isSelected:e.isSelected}))}),EG=SG});function ple(e){var n;let[r,a]=(0,kG.useState)(null),c=f=>{if(r===null){e.items.length>0&&a(0);return}let p=r+f*e.uiColumns,v=p<0,y=p>e.items.length-1;if(v||y){if(e.canVerticleExit&&e.canVerticleExit(v?"top":"bottom")){a(null);return}return}a(p)},u=f=>{r===null?a(yle(f,e.items.length)):r+f<0?a(null):a(Math.min(r+f,e.items.length-1))};return{focusFirstItem(){a(0)},onParentEltKeyDown:f=>{if(f.key==="ArrowRight")u(1);else if(f.key==="ArrowLeft")u(-1);else if(f.key==="ArrowUp")c(-1);else if(f.key==="ArrowDown")c(1);else return 0;return 1},gridItems:e.items.map((f,p)=>e.renderItem({isSelected:p===r,item:f,select(v){a(p),e.onSelectItem(f)===1&&(v==null||v.preventDefault(),v==null||v.stopPropagation())}})),currentSelection:(n=e.items[r!=null?r:-1])!=null?n:null}}var kG,mle=R(()=>{kG=ee(Oe()),E2()});function TG(e,n,r){var a;(a=e.current)==null||a.discard(),e.current=null;let c=_2(r);c===null?e.current=vle(n):e.current=gle(n,c)}function MG(e){var n;(n=e.current)==null||n.discard(),e.current=null}function gle(e,n){return _e().tempTransaction(({stateEditors:r})=>{let{setHandlesForKeyframe:a,setKeyframeType:c}=r.coreByProject.historic.sheetsById.sequence;for(let{projectId:u,sheetId:f,objectKey:p,trackId:v,left:y,right:k}of e)a({projectId:u,sheetId:f,objectKey:p,trackId:v,keyframeId:y.id,start:[n[0],n[1]]}),a({projectId:u,sheetId:f,objectKey:p,trackId:v,keyframeId:k.id,end:[n[2],n[3]]}),c({projectId:u,sheetId:f,objectKey:p,trackId:v,keyframeId:y.id,keyframeType:"bezier"})})}function vle(e){return _e().tempTransaction(({stateEditors:n})=>{let{setKeyframeType:r}=n.coreByProject.historic.sheetsById.sequence;for(let{projectId:a,sheetId:c,objectKey:u,trackId:f,left:p}of e)r({projectId:a,sheetId:c,objectKey:u,trackId:f,keyframeId:p.id,keyframeType:"hold"})})}function yle(e,n){return(e%n+n)%n}function ble(e,n){return()=>setTimeout(e,n)}function _le({left:e,right:n}){return({left:r,right:a})=>e.handles[2]!==r.handles[2]||e.handles[3]!==r.handles[3]||n.handles[0]!==a.handles[0]||n.handles[1]!==a.handles[1]}var S2,Lr,PG,oO,aO,CG,AG,IG,DG,OG,RG,LG,zG,NG,FG,jG,BG,sO,xle,lO,UG,E2=R(()=>{S2=Mt,Lr=ee(Oe()),Xe(),PG=ee(sle()),Ge(),ule(),hle(),hG(),m2(),nr(),mle(),oO=3,aO=53,CG=25,IG=le.div(AG||(AG=Y([`
  background: `,`;
  display: grid;
  grid-template-areas:
    'search  tween'
    'presets tween';
  grid-template-rows: 32px 1fr;
  grid-template-columns: `,`px 120px;
  gap: 1px;
  height: 120px;
`])),QD,oO*aO),OG=le.div(DG||(DG=Y([`
  overflow: auto;
  grid-area: presets;

  display: grid;
  grid-template-columns: repeat(`,`, 1fr);
  grid-auto-rows: min-content;
  gap: 1px;

  overflow-y: scroll;
  scrollbar-width: none; /* Firefox */
  -ms-overflow-style: none; /* Internet Explorer 10+ */
  &::-webkit-scrollbar {
    /* WebKit */
    width: 0;
    height: 0;
  }
`])),oO),LG=le.input.attrs({type:"text"})(RG||(RG=Y([`
  background-color: `,`;
  border: none;
  border-radius: 2px;
  color: rgba(255, 255, 255, 0.8);
  padding: 6px;
  font-size: 12px;
  outline: none;
  cursor: text;
  text-align: left;
  width: 100%;
  height: 100%;
  box-sizing: border-box;

  grid-area: search;

  &:hover {
    background-color: #212121;
  }

  &:focus {
    background-color: rgba(16, 16, 16, 0.26);
    outline: 1px solid rgba(0, 0, 0, 0.35);
  }
`])),id),NG=le.div(zG||(zG=Y([`
  grid-area: tween;
  background: `,`;
`])),id),jG=le.div(FG||(FG=Y([`
  grid-column: 1 / 4;
  padding: 6px;
  color: #888888;
`]))),BG=e=>{let n=(0,Lr.useMemo)(()=>[e.curveConnection,...e.additionalConnections],[e.curveConnection,...e.additionalConnections]),r=(0,Lr.useRef)(null);(0,Lr.useEffect)(()=>{let oe=UG(n);return()=>{var De;oe(),(De=r.current)==null||De.commit()}},[r]);let a=[e.curveConnection.left.handles[2],e.curveConnection.left.handles[3],e.curveConnection.right.handles[0],e.curveConnection.right.handles[1]],c=(0,Lr.useRef)(null);(0,Lr.useLayoutEffect)(()=>{var oe,De;(oe=c.current)==null||oe.select(),(De=c.current)==null||De.focus()},[c.current]);let[u,f]=(0,Lr.useState)(b2(a)),p=oe=>{oe!==void 0&&(k(1),f(oe.target.value),_2(oe.target.value)&&T(oe.target.value))},v=oe=>{var De,q;k(1),(oe.key==="ArrowDown"||oe.key==="ArrowUp")&&oe.preventDefault(),oe.key==="ArrowDown"?(We.focusFirstItem(),(q=(De=ie.current[N[0].label])==null?void 0:De.current)==null||q.focus()):oe.key==="Escape"?(MG(r),e.onRequestClose("key Escape")):oe.key==="Enter"&&e.onRequestClose("key Enter")},[y,k]=(0,Lr.useState)(0);(0,Lr.useEffect)(()=>{y===2?f(b2(a)):y===3&&u!==""&&f("")},n);let[P,T]=(0,Lr.useState)(b2(a)),[E,A]=(0,Lr.useState)(null);(0,Lr.useEffect)(()=>{var oe;y!==0&&y!==3&&TG(r,n,(oe=E!=null?E:P)!=null?oe:"")},[E,P,y]),n.some(_le(e.curveConnection))&&y===0&&k(3);let C=oe=>{var De,q;k(2);let Fe=b2(oe);f(Fe),T(Fe),(De=c.current)==null||De.select(),(q=c.current)==null||q.focus()},L=()=>{},N=(0,Lr.useMemo)(()=>/^[A-Za-z]/.test(u)?PG.default.filter(u,x2,{extract:oe=>oe.label}).map(oe=>oe.original):x2,[u]);(0,Lr.useEffect)(()=>{y===1&&N[0]&&T(N[0].value)},[N]);let U=oe=>{oe.key==="Escape"?(MG(r),e.onRequestClose("key Escape"),oe.stopPropagation()):oe.key==="Enter"&&(e.onRequestClose("key Enter"),oe.stopPropagation())},G=oe=>{y===0&&k(2),A(oe.value)},Q=()=>A(null),J=oe=>(TG(r,n,oe.value),e.onRequestClose("selected easing option"),1),ie=(0,Lr.useRef)(x2.reduce((oe,De)=>(oe[De.label]={current:null},oe),{})),[xe,Me]=Qn(null),[ue,Ae]=(0,Lr.useState)(0);(0,Lr.useEffect)(()=>{let oe=()=>{var De;Ae((De=Me==null?void 0:Me.scrollTop)!=null?De:0)};return Me==null||Me.addEventListener("scroll",oe),()=>Me==null?void 0:Me.removeEventListener("scroll",oe)},[Me]);let We=ple({items:N,uiColumns:3,onSelectItem:J,canVerticleExit(oe){var De,q;return oe==="top"?((De=c.current)==null||De.select(),(q=c.current)==null||q.focus(),1):0},renderItem:({item:oe,select:De})=>{var q,Fe;return Lr.default.createElement(EG,{key:oe.label,easing:oe,tabIndex:0,onKeyDown:U,ref:ie.current[oe.label],onMouseOver:()=>G(oe),onMouseOut:Q,onClick:De,tooltipPlacement:((Fe=(q=ie.current[oe.label].current)==null?void 0:q.offsetTop)!=null?Fe:0)-(ue!=null?ue:0)<aO+CG?"bottom":"top",isSelected:dle(a,_2(oe.value))})}});return(0,Lr.useLayoutEffect)(()=>{var oe,De;if(We.currentSelection!==null&&document.activeElement!==c.current){let q=(De=(oe=ie.current)==null?void 0:oe[We.currentSelection.label])==null?void 0:De.current;q==null||q.focus(),T(We.currentSelection.value),/^[A-Za-z]/.test(u)||f(We.currentSelection.value)}},[We.currentSelection]),Lr.default.createElement(IG,null,Lr.default.createElement(LG,{value:u,placeholder:y===3?"Multiple easings selected":"Search presets...",onPaste:ble(p),onChange:p,ref:c,onKeyDown:v}),Lr.default.createElement(OG,{ref:xe,onKeyDown:oe=>We.onParentEltKeyDown(oe)},We.gridItems,We.gridItems.length===0?Lr.default.createElement(jG,null,"No results found"):void 0),Lr.default.createElement(NG,{onClick:()=>{var oe;return(oe=c.current)==null?void 0:oe.focus()}},Lr.default.createElement(dG,{curveConnection:e.curveConnection,backgroundConnections:e.additionalConnections,onCurveChange:C,onCancelCurveChange:L})))},sO=BG,{isCurveEditorOpenD:xle,isConnectionEditingInCurvePopover:lO,getLock:UG}=(()=>{let e=new S2.Atom([]);return{getLock(n){return e.set(n),function(){e.set([])}},isCurveEditorOpenD:(0,S2.prism)(()=>e.prism.getValue().length>0),isConnectionEditingInCurvePopover(n){return S2.prism.ensurePrism(),e.prism.getValue().some(({left:r,right:a})=>n.left.id===r.id&&n.right.id===a.id)}}})()});function wle(e,n){for(let{keyframeId:r}of kle(n))if(e.left.id===r)return!0;return!1}function VG(e,n,r){return(0,T2.prism)(()=>{if(r===void 0)return[];let a=[];for(let{objectKey:c,trackId:u}of HG(r)){let f=(0,T2.val)(_e().atomP.historic.coreByProject[e].sheetsById[n].sequence.tracksByObject[c].trackData[u]);f&&(a=a.concat(Ele(f.keyframes).filter(p=>wle(p,r)).map(({left:p,right:v})=>({left:p,right:v,trackId:u,objectKey:c,sheetId:n,projectId:e}))))}return a})}function k2(e,n,r){var a;if(r===void 0)return[];let c=[];for(let{objectKey:f,trackId:p,keyframeIds:v}of HG(r))c=c.concat((a=cO({projectId:e,sheetId:n,objectKey:f,trackId:p,keyframeIds:v}))!=null?a:[]);let u=i2(c.map(f=>f.pathToProp));return c.map(({keyframe:f,pathToProp:p})=>({keyframe:f,pathToProp:p.slice(u.length)}))}function cO({projectId:e,sheetId:n,objectKey:r,trackId:a,keyframeIds:c}){let u=(0,T2.val)(_e().atomP.historic.coreByProject[e].sheetsById[n].sequence.tracksByObject[r]),f=u==null?void 0:u.trackData[a];if(!f)return null;let p=Sle((u==null?void 0:u.trackIdByPropPath)||{})[a];if(!p)return null;let v=[r,...o2(p)];return c.map(y=>({keyframe:f.keyframes.find(k=>k.id===y),pathToProp:v})).filter(({keyframe:y})=>y!==void 0)}function Sle(e){let n={};for(let[r,a]of Object.entries(e))n[a]=r;return n}function Ele(e){return e.map((n,r)=>({left:n,right:e[r+1]})).slice(0,-1)}function kle(e){var n,r,a;let c=[];for(let[u,f]of Object.entries((n=e==null?void 0:e.byObjectKey)!=null?n:{}))for(let[p,v]of Object.entries((r=f==null?void 0:f.byTrackId)!=null?r:{}))for(let y of Object.keys((a=v==null?void 0:v.byKeyframeId)!=null?a:{}))c.push({objectKey:u,trackId:p,keyframeId:y});return c}function HG(e){var n,r,a;let c=[];for(let[u,f]of Object.entries((n=e==null?void 0:e.byObjectKey)!=null?n:{}))for(let[p,v]of Object.entries((r=f==null?void 0:f.byTrackId)!=null?r:{}))c.push({objectKey:u,trackId:p,keyframeIds:Object.keys((a=v==null?void 0:v.byKeyframeId)!=null?a:{})});return c}var T2,yg=R(()=>{T2=Mt,Ge(),Sl()});function Tle(e,n){return(0,GG.useMemo)(()=>Mle(e,n),[])}function Mle(e,n){let r=null,a=f=>_e().tempTransaction(p=>e(p,f));function c(){r==null||r.discard(),r=null}let u={createAsset:n.sheet.project.assetStorage.createAsset,getAssetUrl:f=>f.id?n.sheet.project.assetStorage.getAssetUrl(f.id):void 0};return O({temporarilySetValue(f){c(),r=a(f)},discardTemporaryValue:c,permanentlySetValue(f){c(),a(f).commit()}},u)}var GG,Ple=R(()=>{Ge(),GG=ee(Oe())});function uO(e){var n;if(e.type==="sheetObject")return Wi.default.createElement(Wi.default.Fragment,null,Wi.default.createElement(M2,{style:{paddingLeft:"".concat(e.indent*P2,"px")}},e.sheetObject.address.objectKey),e.children.map((r,a)=>Wi.default.createElement(uO,W(O({key:a},r),{autoFocusInput:e.autoFocusInput&&a===0,indent:e.indent+1}))));if(e.type==="propWithChildren"){let r=(n=e.propConfig.label)!=null?n:oc(e.pathToProp);return Wi.default.createElement(Wi.default.Fragment,null,Wi.default.createElement(M2,{style:{paddingLeft:"".concat(e.indent*P2,"px")}},r),e.children.map((a,c)=>Wi.default.createElement(uO,W(O({key:c},a),{autoFocusInput:e.autoFocusInput&&c===0,indent:e.indent+1}))))}else return Wi.default.createElement(Cle,W(O({},e),{autoFocusInput:e.autoFocusInput,indent:e.indent}))}function Cle(e){var n;let r=(n=e.propConfig.label)!=null?n:oc(e.pathToProp),a=Ale(e);if(e.propConfig.type==="enum")return Wi.default.createElement(Wi.default.Fragment,null);{let c=jI[e.propConfig.type];return Wi.default.createElement(qG,null,Wi.default.createElement(M2,null,Wi.default.createElement("span",{style:{paddingLeft:"".concat(e.indent*P2,"px")}},r)),Wi.default.createElement($G,null,Wi.default.createElement(c,{editingTools:a,propConfig:e.propConfig,value:Sk(e.keyframe.value,e.propConfig),autoFocus:e.autoFocusInput})))}}function Ale(e){let n=e.sheetObject;return Tle(({stateEditors:r},a)=>{let c=W(O({},e.keyframe),{value:a});r.coreByProject.historic.sheetsById.sequence.replaceKeyframes(W(O({},n.address),{trackId:e.trackId,keyframes:[c],snappingFunction:n.sheet.getSequence().closestGridPosition}))},n)}var Wi,WG,qG,KG,M2,P2,XG,$G,Ile=R(()=>{Wi=ee(Oe()),Xe(),LB(),Sf(),Ple(),$u(),qG=le.div(WG||(WG=Y([`
  display: flex;
  align-items: stretch;
  min-width: 200px;

  select {
    min-width: 100px;
  }
`]))),M2=le.div(KG||(KG=Y([`
  font-style: normal;
  font-weight: 400;
  font-size: 11px;
  line-height: 13px;
  letter-spacing: 0.01em;
  padding: 6px 6px 6px 0;

  width: 40%;

  color: #919191;

  overflow: hidden;
`]))),P2=10,$G=le.div(XG||(XG=Y([`
  display: flex;
  align-items: center;
  width: 60%;
`])))});function C2(e){return ml({debugName:"useKeyframeInlineEditorPopover"},()=>A2.default.createElement(vl,{showPopoverEdgeTriangle:!0},A2.default.createElement("div",{style:{margin:"1px 2px 1px 10px"}},Array.isArray(e)?e.map((n,r)=>A2.default.createElement(uO,W(O({key:r},n),{autoFocusInput:r===0,indent:0}))):void 0)))}var A2,I2=R(()=>{A2=ee(Oe()),gl(),yl(),Ile()});function Dle(e,n,r){return To(e,{displayName:"Keyframe",menuItems:()=>{let a=k2(r.leaf.sheetObject.address.projectId,r.leaf.sheetObject.address.sheetId,r.selection);return[{label:a.length>0?"Copy (selection)":"Copy",callback:()=>{a.length>0?_e().transaction(c=>{c.stateEditors.studio.ahistoric.setClipboardKeyframes(a)}):_e().transaction(c=>{c.stateEditors.studio.ahistoric.setClipboardKeyframes([{keyframe:r.keyframe,pathToProp:r.leaf.pathToProp}])})}},{label:r.selection!==void 0?"Delete (selection)":"Delete",callback:()=>{r.selection?r.selection.delete():_e().transaction(({stateEditors:c})=>{c.coreByProject.historic.sheetsById.sequence.deleteKeyframes(W(O({},r.leaf.sheetObject.address),{keyframeIds:[r.keyframe.id],trackId:r.leaf.trackId}))})}}]},onOpen(){n._debug("Show keyframe",r)}})}function Ole(e,n,r){let a=(0,od.useRef)(n);a.current=n;let{onClickFromDrag:c}=r,u=(0,od.useMemo)(()=>({debugName:"KeyframeDot/useDragKeyframe",onDragStart(p){let v=a.current,y=(0,D2.val)(_e().atomP.historic.coreByProject[v.leaf.sheetObject.address.projectId].sheetsById[v.leaf.sheetObject.address.sheetId].sequence.tracksByObject),k=R7(y,function(A,{trackId:C,objectKey:L}){var N,U;return A.id!==v.keyframe.id&&!(v.selection&&(U=(N=v.selection.byObjectKey[L])==null?void 0:N.byTrackId[C])!=null&&U.byKeyframeId[A.id])});if(O7(k),v.selection){let{selection:A,leaf:C}=v,{sheetObject:L}=C,N=A.getDragHandlers(W(O({},L.address),{domNode:e,positionAtStartOfDrag:v.track.data.keyframes[v.index].position})).onDragStart(p);return N&&W(O({},N),{onClick:c,onDragEnd:(...U)=>{var G;(G=N.onDragEnd)==null||G.call(N,...U),$f()}})}let P=v,T=(0,D2.val)(P.layoutP.scaledSpace.toUnitSpace),E;return{onDrag(A,C,L){var N;let U=P.track.data.keyframes[P.index],G=Math.max((N=Po.checkIfMouseEventSnapToPos(L,{ignore:e}))!=null?N:U.position+T(A),0);E==null||E.discard(),E=void 0,E=_e().tempTransaction(({stateEditors:Q})=>{Q.coreByProject.historic.sheetsById.sequence.replaceKeyframes(W(O({},P.leaf.sheetObject.address),{trackId:P.leaf.trackId,keyframes:[W(O({},U),{position:G})],snappingFunction:(0,D2.val)(P.layoutP.sheet).getSequence().closestGridPosition}))})},onDragEnd(A){A?E==null||E.commit():E==null||E.discard(),$f()},onClick(A){c(A)}}}}),[c]),[f]=Gr(e,u);return Mc(f,n.keyframe.position),za(f,"draggingPositionInSequenceEditor","ew-resize"),[f]}var od,D2,r_,dO,i_,fO,ZG,O2,YG,JG,QG,eW,tW,nW,rW=R(()=>{od=ee(Oe()),Xe(),Ge(),Mo(),hi(),nr(),D2=Mt,Gi(),ua(),Ts(),c2(),Ku(),yg(),rr(),Zf(),I2(),Hf(),r_=6,dO=r_+2,i_={normalColor:"#40AAA4",selectedColor:"#F2C95C",inlineEditorOpenColor:"#FCF3DC",selectedAndInlineEditorOpenColor:"#CBEBEA"},fO=({isSelected:e,isInlineEditorPopoverOpen:n})=>e&&n?i_.inlineEditorOpenColor:e?i_.selectedColor:n?i_.selectedAndInlineEditorOpenColor:i_.normalColor,O2=le.div(ZG||(ZG=Y([`
  position: absolute;
  `,`

  background: `,`;
  transform: rotateZ(45deg);

  `,`;

  z-index: 1;
  pointer-events: none;
`])),ja(r_),e=>fO(e),e=>e.flag===2?"outline: 2px solid white;":""),JG=le.div(YG||(YG=Y([`
  position: absolute;
  `,`

  background: `,`;

  `,`;

  z-index: 1;
  pointer-events: none;
`])),ja(r_*1.5),e=>fO(e),e=>e.flag===2?"outline: 2px solid white;":""),eW=le.div(QG||(QG=Y([`
  z-index: 1;
  cursor: ew-resize;

  position: absolute;
  `,`;
  `,`;

  & + `,` {
    `,`
  }

  &:hover + `,` {
    `,`
  }
`])),ja(12),tr,O2,e=>e.isInlineEditorPopoverOpen?ja(dO):"",O2,ja(dO)),tW=e=>{let n=qu("SingleKeyframeDot",e.keyframe.id),r=Vf(e.itemKey),[a,c]=Qn(null),[u]=Dle(c,n,e),{node:f,toggle:p,isOpen:v}=C2([{type:"primitiveProp",keyframe:e.keyframe,pathToProp:e.leaf.pathToProp,propConfig:e.leaf.propConf,sheetObject:e.leaf.sheetObject,trackId:e.leaf.trackId}]);Ole(c,e,{onClickFromDrag(k){p(k,a.current)}});let y=!e.keyframe.type||e.keyframe.type==="bezier";return od.default.createElement(od.default.Fragment,null,od.default.createElement(eW,O({ref:a,isInlineEditorPopoverOpen:v},r.attrs)),y?od.default.createElement(O2,{isSelected:!!e.selection,isInlineEditorPopoverOpen:v,flag:r.flag}):od.default.createElement(JG,{isSelected:!!e.selection,isInlineEditorPopoverOpen:v,flag:r.flag}),f,u)},nW=tW}),hO,pO,mO,eh,iW,oW,gO,aW=R(()=>{ca(),hO=ee(Oe()),Xe(),rW(),pO=r_/2+1,mO=1e3,eh={normalColor:"#365b59",selectedColor:"#8A7842",barColor:e=>{let n=e.isSelected?eh.selectedColor:eh.normalColor;return e.isPopoverOpen?BE(.2,Nm(.2,n)):n},hoverColor:e=>{let n=e.isSelected?eh.selectedColor:eh.normalColor;return e.isPopoverOpen?BE(.2,Nm(.2,n)):BE(.1,Nm(.1,n))}},oW=le.div(iW||(iW=Y([`
  position: absolute;
  background: `,`;
  height: `,`px;
  width: `,`px;

  left: 0;
  top: -`,`px;
  transform-origin: top left;
  z-index: 0;
  cursor: ew-resize;

  &:after {
    display: block;
    position: absolute;
    content: ' ';
    top: -4px;
    bottom: -4px;
    left: 0;
    right: 0;
  }

  &:hover {
    background: `,`;
  }
`])),eh.barColor,pO,mO,pO/2,eh.hoverColor),gO=hO.default.forwardRef((e,n)=>{let r={isPopoverOpen:e.isPopoverOpen,isSelected:e.isSelected};return hO.default.createElement(oW,W(O({},r),{ref:n,style:{transform:"scaleX(calc(var(--unitSpaceToScaledSpaceMultiplier) * ".concat(e.connectorLengthInUnitSpace/mO,"))")},onClick:a=>{var c;(c=e.openPopover)==null||c.call(e,a)}}),e.children)})});function Rle(e,n){let r=(0,vO.useRef)(n);r.current=n;let a=(0,vO.useMemo)(()=>({debugName:"useDragKeyframe",lockCSSCursorTo:"ew-resize",onDragStart(c){let u=r.current,f;if(u.selection){let{selection:k,leaf:P}=u,{sheetObject:T}=P;return k.getDragHandlers(W(O({},T.address),{domNode:e,positionAtStartOfDrag:u.track.data.keyframes[u.index].position})).onDragStart(c)}let p=u,v=(0,R2.val)(p.layoutP.sheet).getSequence(),y=(0,R2.val)(p.layoutP.scaledSpace.toUnitSpace);return{onDrag(k,P,T){let E=y(k);f&&(f.discard(),f=void 0),f=_e().tempTransaction(({stateEditors:A})=>{A.coreByProject.historic.sheetsById.sequence.transformKeyframes(W(O({},p.leaf.sheetObject.address),{trackId:p.leaf.trackId,keyframeIds:[p.keyframe.id,p.track.data.keyframes[p.index+1].id],translate:E,scale:1,origin:0,snappingFunction:v.closestGridPosition}))})},onDragEnd(k){k?f&&f.commit():f&&f.discard()}}}}),[]);Gr(e,a)}function Lle(e,n,r,a){return To(n,{displayName:"Tween",menuItems:()=>{let c=k2(e.leaf.sheetObject.address.projectId,e.leaf.sheetObject.address.sheetId,e.selection);return[{label:c.length>0?"Copy (selection)":"Copy",callback:()=>{c.length>0?_e().transaction(u=>{u.stateEditors.studio.ahistoric.setClipboardKeyframes(c)}):_e().transaction(u=>{u.stateEditors.studio.ahistoric.setClipboardKeyframes([{keyframe:r,pathToProp:e.leaf.pathToProp},{keyframe:a,pathToProp:e.leaf.pathToProp}])})}},{label:e.selection?"Delete (selection)":"Delete",callback:()=>{e.selection?e.selection.delete():_e().transaction(({stateEditors:u})=>{u.coreByProject.historic.sheetsById.sequence.deleteKeyframes(W(O({},e.leaf.sheetObject.address),{keyframeIds:[r.id,a.id],trackId:e.leaf.trackId}))})}}]}})}var R2,ad,vO,yO,sW,lW,cW,uW,dW,zle=R(()=>{Ge(),Mo(),hi(),nr(),R2=Mt,ad=ee(Oe()),vO=ee(Oe()),gl(),yl(),E2(),aW(),m2(),sn(),yg(),yg(),Xe(),yO=5,lW=le(vl)(sW||(sW=Y([`
  --popover-outer-stroke: transparent;
  --popover-inner-stroke: `,`;
`])),QD),cW=e=>{let{index:n,track:r}=e,a=r.data.keyframes[n],c=r.data.keyframes[n+1],[u,f]=Qn(null),{node:p,toggle:v,close:y}=ml(()=>{let E=(0,R2.val)(e.layoutP.rightDims);return{debugName:"Connector",constraints:{minX:E.screenX+yO,maxX:E.screenX+E.width-yO}}},()=>ad.default.createElement(dW,W(O({},e),{closePopover:y}))),[k]=Lle(e,f,a,c);Rle(f,e);let P=c.position-a.position,T={isPopoverOpen:Mn(()=>lO(W(O({},e.leaf.sheetObject.address),{trackId:e.leaf.trackId,left:a,right:c})),[e.leaf.sheetObject.address,e.leaf.trackId,a,c]),isSelected:e.selection!==void 0};return ad.default.createElement(ad.default.Fragment,null,ad.default.createElement(gO,W(O({ref:u,connectorLengthInUnitSpace:P},T),{openPopover:E=>{f&&v(E,f)}}),p),k)},uW=cW,dW=ad.default.forwardRef((e,n)=>{let{index:r,track:{data:a},selection:c}=e,u=a.keyframes[r],f=a.keyframes[r+1],p=e.leaf.trackId,v=e.leaf.sheetObject.address,y=Mn(()=>VG(v.projectId,v.sheetId,c).getValue(),[v,c]),k=O({left:u,right:f,trackId:p},v);return ad.default.createElement(lW,{showPopoverEdgeTriangle:!1,ref:n},ad.default.createElement(sO,{curveConnection:k,additionalConnections:y,onRequestClose:e.closePopover}))})}),fW,th,hW,pW,mW,gW,vW,Nle=R(()=>{fW=Mt,th=ee(Oe()),Xe(),zle(),rW(),pW=le.div(hW||(hW=Y([`
  position: absolute;
`]))),mW=th.default.createElement(th.default.Fragment,null),gW=th.default.memo(e=>{let{index:n,track:{data:r}}=e,a=r.keyframes[n],c=r.keyframes[n+1],u=a.connectedRight&&!!c;return th.default.createElement(pW,{style:{top:"".concat(e.leaf.nodeHeight/2,"px"),left:"calc(".concat((0,fW.val)(e.layoutP.scaledSpace.leftPadding),"px + calc(var(--unitSpaceToScaledSpaceMultiplier) * ").concat(a.position,"px))")}},th.default.createElement(nW,W(O({},e),{itemKey:e.itemKey})),u?th.default.createElement(uW,O({},e)):mW)}),vW=gW});function Fle(e,n){return To(e,{displayName:"Keyframe Track",menuItems:()=>{var r;let a=(r=(0,bg.val)(_e().atomP.ahistoric.clipboard.keyframesWithRelativePaths))!=null?r:[];return[jle(n,a)]}})}function jle(e,n){return{label:"Paste Keyframes",enabled:n.length>0,callback:()=>{var r;let a=(0,bg.val)(e.layoutP.sheet).getSequence(),c=(r=n[0])==null?void 0:r.pathToProp,u=n.filter(({keyframe:f,pathToProp:p})=>Vse(c,p)).map(({keyframe:f,pathToProp:p})=>f);_e().transaction(({stateEditors:f})=>{var p;a.position=a.closestGridPosition(a.position);let v=(p=Ble(u))==null?void 0:p.position;for(let y of u)f.coreByProject.historic.sheetsById.sequence.setKeyframeAtPosition(W(O({},e.leaf.sheetObject.address),{trackId:e.leaf.trackId,position:a.position+y.position-v,handles:y.handles,value:y.value,snappingFunction:a.closestGridPosition,type:y.type}))})}}}function Ble(e){let n=null;for(let r of e)(n===null||r.position<n.position)&&(n=r);return n}var bg,Pc,yW,bW,bO,_W,Ule=R(()=>{sn(),bg=Mt,Pc=ee(Oe()),Xe(),Nle(),Mo(),nr(),Ge(),Sl(),Zf(),Sc(),bW=le.div(yW||(yW=Y([`
  position: relative;
  height: 100%;
  width: 100%;
`]))),bO=Pc.default.memo(e=>{var n;let{layoutP:r,trackData:a,leaf:c}=e,[u,f]=Qn(null),{selectedKeyframeIds:p,selection:v}=Mn(()=>{let G=(0,bg.val)(r.selectionAtom),Q=(0,bg.val)(G.pointer.current.byObjectKey[c.sheetObject.address.objectKey].byTrackId[c.trackId].byKeyframeId);return Q?{selectedKeyframeIds:Q,selection:(0,bg.val)(G.pointer.current)}:{selectedKeyframeIds:{},selection:void 0}},[r,c.trackId]),[y,k,P]=Fle(f,e),T=In(ZD),E=T.mode==="snapToSome"?(n=T.positions[c.sheetObject.address.objectKey])==null?void 0:n[c.trackId]:[],A=T.mode==="snapToAll",C=(0,Pc.useMemo)(()=>({data:a,id:c.trackId,sheetObject:e.leaf.sheetObject}),[a,c.trackId]),L=a.keyframes.map((G,Q)=>Pc.default.createElement(vW,{key:"keyframe-"+G.id,itemKey:Si.forTrackKeyframe(c.sheetObject,c.trackId,G.id),keyframe:G,index:Q,track:C,layoutP:r,leaf:c,selection:p[G.id]===!0?v:void 0})),N=E.map(G=>Pc.default.createElement(Yb,{key:"snap-target-"+G,layoutP:r,leaf:c,position:G})),U=A?a.keyframes.map(G=>Pc.default.createElement(Yb,{key:"additionalSnapTarget-".concat(G.id),layoutP:r,leaf:c,position:G.position})):null;return Pc.default.createElement(bW,{ref:u,style:{background:P?"#444850 ":"unset"}},L,N,Pc.default.createElement(Pc.default.Fragment,null,U),y)}),bO.displayName="BasicKeyframedTrack",_W=bO}),xW,o_,wW,SW,Vle=R(()=>{Ge(),sn(),xW=Mt,o_=ee(Oe()),h2(),Ule(),Ku(),wW=({leaf:e,layoutP:n})=>{let r=qu("PrimitivePropRow",e.pathToProp.join());return Mn(()=>{let{sheetObject:a}=e,{trackId:c}=e,u=(0,xW.val)(_e().atomP.historic.coreByProject[a.address.projectId].sheetsById[a.address.sheetId].sequence.tracksByObject[a.address.objectKey].trackData[c]);return(u==null?void 0:u.type)!=="BasicKeyframedTrack"?(r.errorDev("trackData type ".concat(u==null?void 0:u.type," is not yet supported on the sequence editor")),o_.default.createElement(mg,{leaf:e,isCollapsed:!1,node:o_.default.createElement("div",null)})):o_.default.createElement(mg,{leaf:e,isCollapsed:!1,node:o_.default.createElement(_W,{layoutP:n,trackData:u,leaf:e})})},[e,n])},SW=wW});function Hle(e){return e()}var Gle=R(()=>{});function EW(e){let{index:n,aggregateKeyframes:r,selection:a}=e;return Mn(kW(e),[n,r,a,e.viewModel])}function kW(e){let{index:n,aggregateKeyframes:r,selection:a}=e,{projectId:c,sheetId:u}=e.viewModel.type==="sheet"?e.viewModel.sheet.address:e.viewModel.sheetObject.address;return()=>{let f=r[n],p=r[n+1],v=p&&f.keyframes.length===p.keyframes.length&&f.keyframes.every(({track:T},E)=>p.keyframes[E].track===T)?{length:p.position-f.position,selected:f.selected===0&&p.selected===0}:null,y=v?f.keyframes.map(({kf:T,track:E},A)=>W(O({},E.sheetObject.address),{trackId:E.id,left:T,right:p.keyframes[A].kf})):[],k=Hle(()=>{let T=_O.prism.memo("selectedConnections",()=>VG(c,u,a),[c,u,a]).getValue();return[...y,...T]}),P=y.every(T=>lO(T));return{itemKey:_O.prism.memo("itemKey",()=>e.viewModel.type==="sheet"?Si.forSheetAggregateKeyframe(e.viewModel.sheet,f.position):e.viewModel.type==="sheetObject"?Si.forSheetObjectAggregateKeyframe(e.viewModel.sheetObject,f.position):Si.forCompoundPropAggregateKeyframe(e.viewModel.sheetObject,e.viewModel.pathToProp,f.position),[e.viewModel,f.position]),cur:f,connected:v,isAggregateEditingInCurvePopover:P,allConnections:k}}}var _O,xO=R(()=>{_O=Mt,Sc(),E2(),sn(),yg(),Gle()});function Wle(e,n){let r=(0,Ba.useRef)(n);r.current=n;let a=(0,Ba.useMemo)(()=>({debugName:"useDragKeyframe",lockCSSCursorTo:"ew-resize",onDragStart(c){let u=r.current,f,p=u.aggregateKeyframes[u.index].keyframes,{selection:v,viewModel:y}=u,k=y.type==="sheet"?y.sheet.address:y.sheetObject.address;if(v&&u.aggregateKeyframes[u.index].selected===0)return v.getDragHandlers(W(O({},k),{domNode:e,positionAtStartOfDrag:u.aggregateKeyframes[u.index].position})).onDragStart(c);let P=u,T=(0,L2.val)(P.layoutP.sheet).getSequence(),E=(0,L2.val)(P.layoutP.scaledSpace.toUnitSpace);return{onDrag(A,C,L){let N=E(A);f&&(f.discard(),f=void 0),f=_e().tempTransaction(({stateEditors:U})=>{for(let G of p)U.coreByProject.historic.sheetsById.sequence.transformKeyframes(W(O({},G.track.sheetObject.address),{trackId:G.track.id,keyframeIds:[G.kf.id,G.track.data.keyframes[G.track.data.keyframes.indexOf(G.kf)+1].id],translate:N,scale:1,origin:0,snappingFunction:T.closestGridPosition}))})},onDragEnd(A){A?f&&f.commit():f&&f.discard()}}}}),[]);return Gr(e,a)}function qle(e,n){return To(n,{displayName:"Aggregate Tween",menuItems:()=>{let r=e.utils.allConnections.reduce((p,v)=>{var y;return p.concat((y=cO(W(O({},v),{keyframeIds:[v.left.id,v.right.id]})))!=null?y:[])},[]),a=i2(r.map(p=>p.pathToProp)),c=r.map(({keyframe:p,pathToProp:v})=>({keyframe:p,pathToProp:v.slice(a.length)})),u=e.editorProps.viewModel,f=u.type==="sheet"?u.sheet.address:u.sheetObject.address;return[{label:"Copy",callback:()=>{if(e.editorProps.selection){let p=k2(f.projectId,f.sheetId,e.editorProps.selection);_e().transaction(v=>{v.stateEditors.studio.ahistoric.setClipboardKeyframes(p)})}else _e().transaction(p=>{p.stateEditors.studio.ahistoric.setClipboardKeyframes(c)})}},{label:"Delete",callback:()=>{e.editorProps.selection?e.editorProps.selection.delete():_e().transaction(({stateEditors:p})=>{for(let v of e.utils.allConnections)p.coreByProject.historic.sheetsById.sequence.deleteKeyframes(W(O({},f),{objectKey:v.objectKey,keyframeIds:[v.left.id,v.right.id],trackId:v.trackId}))})}}]}})}var L2,Ba,wO,TW,MW,PW,CW,Kle=R(()=>{L2=Mt,Ba=ee(Oe()),aW(),gl(),nr(),Ge(),hi(),E2(),xO(),Xe(),yl(),yg(),Mo(),Sl(),wO=5,MW=le(vl)(TW||(TW=Y([`
  --popover-outer-stroke: transparent;
  --popover-inner-stroke: rgba(26, 28, 30, 0.97);
`]))),PW=Ba.default.forwardRef((e,n)=>{let{allConnections:r}=EW(e);return Ba.default.createElement(MW,{showPopoverEdgeTriangle:!1,ref:n},Ba.default.createElement(sO,{curveConnection:r[0],additionalConnections:r,onRequestClose:e.closePopover}))}),CW=e=>{let[n,r]=Qn(null),{editorProps:a}=e,[c]=qle(e,r),[u]=Wle(r,e.editorProps),{node:f,toggle:p,close:v}=ml(()=>{let P=(0,L2.val)(a.layoutP.rightDims);return{debugName:"Connector",constraints:{minX:P.screenX+wO,maxX:P.screenX+P.width-wO}}},()=>Ba.default.createElement(PW,W(O({},a),{closePopover:v}))),{connected:y,isAggregateEditingInCurvePopover:k}=e.utils;return y||u?Ba.default.createElement(Ba.default.Fragment,null,Ba.default.createElement(gO,{ref:n,connectorLengthInUnitSpace:y?y.length:0,isSelected:y?y.selected:!1,isPopoverOpen:k,openPopover:P=>{r&&p(P,r)}}),f,c):Ba.default.createElement(Ba.default.Fragment,null)}});function Xle(e){let n={isSelected:e.isSelected,flag:e.flag};return Cc.default.createElement(z2,null,e.isAllHere?Cc.default.createElement(LW,O({},n)):Cc.default.createElement(zW,O({},n)))}var Cc,SO,AW,IW,z2,DW,OW,EO,kO,TO,MO,RW,LW,zW,$le=R(()=>{Cc=ee(Oe()),Xe(),c2(),rr(),SO=16,AW=SO+2,z2=le.div(IW||(IW=Y([`
  position: absolute;
  `,`
  z-index: 1;
`])),ja(SO)),OW=le.div(DW||(DW=Y([`
  z-index: 2;
  cursor: ew-resize;

  position: absolute;
  `,`;
  `,`;

  &:hover
    + `,`,
    #pointer-root.draggingPositionInSequenceEditor
    &:hover
    + `,` {
    `,`
  }
`])),ja(12),tr,z2,z2,ja(AW)),EO="#F2C95C",kO="#40AAA4",TO="#45747C",MO=e=>e.isSelected===0?EO:e.isSelected===1?kO:TO,RW=e=>e.isSelected===0?EO:e.isSelected===1?kO:TO,LW=e=>Cc.default.createElement("svg",{width:"100%",height:"100%",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},Cc.default.createElement("rect",{x:"4.46443",y:"10.0078",width:"5",height:"5",transform:"rotate(-45 4.46443 10.0078)",fill:"#212327",stroke:RW(e)}),Cc.default.createElement("rect",{x:"3.75732",y:"6.01953",width:"6",height:"6",transform:"rotate(-45 3.75732 6.01953)",fill:MO(e),stroke:e.flag===2?"white":void 0,strokeWidth:e.flag===2?"2px":void 0})),zW=e=>Cc.default.createElement("svg",{width:"100%",height:"100%",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},Cc.default.createElement("rect",{x:"4.46443",y:"8",width:"5",height:"5",transform:"rotate(-45 4.46443 8)",fill:"#23262B",stroke:e.flag===2?"white":MO(e),strokeWidth:e.flag===2?"2px":void 0}))});function Zle(e,n){let r=e.children.map(a=>a.type==="propWithChildren"?PO(a,n):NW(a,n)).filter(CO);return r.length===0?null:{type:"sheetObject",sheetObject:e.sheetObject,children:r}}function PO(e,n){let r=e.children.map(a=>a.type==="propWithChildren"?PO(a,n):NW(a,n)).filter(CO);return r.length===0?null:{type:"propWithChildren",pathToProp:e.pathToProp,propConfig:e.propConf,children:r}}function NW(e,n){let r=n.find(a=>a.track.id===e.trackId);return r?{type:"primitiveProp",keyframe:r.kf,pathToProp:e.pathToProp,propConfig:e.propConf,sheetObject:e.sheetObject,trackId:e.trackId}:null}function Yle(e){var n,r,a,c;let{cur:u}=e.utils,f=C2(e.editorProps.viewModel.type==="sheet"?null:e.editorProps.viewModel.type==="sheetObject"?(r=(n=Zle(e.editorProps.viewModel,u.keyframes))==null?void 0:n.children)!=null?r:null:(c=(a=PO(e.editorProps.viewModel,u.keyframes))==null?void 0:a.children)!=null?c:null),p=Vf(e.utils.itemKey);p.useRelations(()=>u.keyframes.map(P=>({affects:P.itemKey,flag:2})),[u.keyframes.map(P=>P.track.id).join("-")]);let[v,y]=Qn(null),[k]=Jle(e,y);return a_.default.createElement(a_.default.Fragment,null,a_.default.createElement(OW,W(O(O({ref:v},p.attrs),Po.includePositionSnapAttrs(u.position)),{onClick:P=>e.editorProps.viewModel.type!=="sheet"?f.open(P,v.current):null})),a_.default.createElement(Xle,{flag:p.flag,isAllHere:u.allHere,isSelected:u.selected}),k,f.node)}function Jle(e,n){return To(n,{displayName:"Aggregate Keyframe",menuItems:()=>{let r=e.editorProps.viewModel,a=e.editorProps.selection;return[{label:a?"Copy (selection)":"Copy",callback:()=>{if(a){let{projectId:c,sheetId:u}=r.type==="sheet"?r.sheet.address:r.sheetObject.address,f=k2(c,u,a);_e().transaction(p=>{p.stateEditors.studio.ahistoric.setClipboardKeyframes(f)})}else{let c=e.utils.cur.keyframes.flatMap(v=>{var y;return(y=cO(W(O({},v.track.sheetObject.address),{trackId:v.track.id,keyframeIds:[v.kf.id]})))!=null?y:[]}),u=r.type==="sheet"?[]:r.type==="sheetObject"?[r.sheetObject.address.objectKey]:r.type==="propWithChildren"?[r.sheetObject.address.objectKey,...r.pathToProp]:[],f=i2([u,...c.map(v=>v.pathToProp)]),p=c.map(({keyframe:v,pathToProp:y})=>({keyframe:v,pathToProp:y.slice(f.length)}));_e().transaction(v=>{v.stateEditors.studio.ahistoric.setClipboardKeyframes(p)})}}},{label:a?"Delete (selection)":"Delete",callback:()=>{a?a.delete():_e().transaction(({stateEditors:c})=>{for(let u of e.utils.cur.keyframes)c.coreByProject.historic.sheetsById.sequence.deleteKeyframes(W(O({},u.track.sheetObject.address),{keyframeIds:[u.kf.id],trackId:u.track.id}))})}}]}})}var a_,CO,Qle=R(()=>{a_=ee(Oe()),nr(),Hf(),Mo(),$le(),Ge(),yg(),Sl(),Ts(),I2(),CO=e=>e!==null}),FW,s_,jW,BW,UW,VW,ece=R(()=>{FW=Mt,s_=ee(Oe()),Xe(),Kle(),xO(),Qle(),BW=le.div(jW||(jW=Y([`
  position: absolute;
`]))),UW=s_.default.memo(e=>{let n=EW(e);return s_.default.createElement(BW,{style:{top:"".concat(e.viewModel.nodeHeight/2,"px"),left:"calc(".concat((0,FW.val)(e.layoutP.scaledSpace.leftPadding),"px + calc(var(--unitSpaceToScaledSpaceMultiplier) * ").concat(n.cur.position,"px))")}},s_.default.createElement(Yle,{editorProps:e,utils:n}),s_.default.createElement(CW,{editorProps:e,utils:n}))}),VW=UW});function tce(e){let{layoutP:n,aggregatedKeyframes:r,viewModel:a}=e,c=qu("AggregatedKeyframeTrack"),[u,f]=Qn(null),{selectedPositions:p,selection:v}=nce(n,r),[y,k,P]=oce(f,e,()=>c._debug("see aggregatedKeyframes",e.aggregatedKeyframes)),T=(0,Ua.useMemo)(()=>[...r.byPosition.entries()].sort((G,Q)=>G[0]-Q[0]).map(([G,Q])=>({position:G,keyframes:Q,selected:p.get(G),allHere:Q.length===r.tracks.length})),[r,p]),E=In(ZD),A=E.mode==="snapToAll",C=E.mode==="snapToSome"?E.positions:JI,L=(0,Ua.useMemo)(()=>a.type==="sheet"?Yse(a,C):HD(a,C),[C]).map(G=>Ua.default.createElement(Yb,{key:"snap-target-"+G,layoutP:n,leaf:a,position:G})),N=(0,Ua.useMemo)(()=>T.map(({position:G,keyframes:Q},J)=>({position:G,editorProps:{index:J,layoutP:n,viewModel:a,aggregateKeyframes:T,selection:p.has(G)?v:void 0}})),[T,a,p]);cce(f,G=>{var Q;return(Q=N.find(J=>J.position===G))==null?void 0:Q.editorProps},{onClickFromDrag(G){}});let U=N.map((G,Q)=>Ua.default.createElement(Ua.Fragment,{key:"agg-"+T[Q].keyframes[0].kf.id},A&&Ua.default.createElement(Yb,{layoutP:n,leaf:a,position:G.position}),Ua.default.createElement(VW,O({},G.editorProps))));return Ua.default.createElement(qW,{ref:u,style:{background:P?"#444850 ":"unset"}},U,L,y)}function nce(e,n){return Mn(()=>(0,Ao.val)(rce(e,n)),[e,n])}function rce(e,n){return(0,Ao.prism)(()=>{let r=(0,Ao.val)(e.selectionAtom),a=(0,Ao.val)(r.pointer.current);if(!a)return KW;let c=new Map;for(let[u,f]of n.byPosition){let p=ice(f,a);p!==void 0&&p!==F2&&c.set(u,p)}return{selectedPositions:c,selection:(0,Ao.val)(r.pointer.current)}})}function ice(e,n){var r,a,c;let u;for(let{track:f,kf:p}of e){let v=((c=(a=(r=n.byObjectKey[f.sheetObject.address.objectKey])==null?void 0:r.byTrackId[f.id])==null?void 0:a.byKeyframeId)==null?void 0:c[p.id])===!0;u===void 0?v?u=DO:u=F2:v?u===F2&&(u=OO):u===DO&&(u=OO)}return u}function oce(e,n,r){return To(e,{onOpen:r,displayName:"Aggregate Keyframe Track",menuItems:()=>{var a;let c=(a=(0,Ao.pointerToPrism)(_e().atomP.ahistoric.clipboard.keyframesWithRelativePaths).getValue())!=null?a:[];return[ace(n,c)]}})}function ace(e,n){return{label:"Paste Keyframes",enabled:n.length>0,callback:()=>{let r=(0,Ao.val)(e.layoutP.sheet).getSequence();e.viewModel.type==="sheet"?sce(e.viewModel,n,r):lce(e.viewModel,n,r)}}}function sce(e,n,r){var a;let{projectId:c,sheetId:u,sheetInstanceId:f}=e.sheet.address;if(n.every(({pathToProp:p})=>p.length===0))for(let p of e.children.map(v=>v.sheetObject)){let v=(0,Ao.pointerToPrism)(_e().atomP.historic.coreByProject[c].sheetsById[u].sequence.tracksByObject[p.address.objectKey]).getValue(),y=Object.keys((a=v==null?void 0:v.trackData)!=null?a:{});AO(p.address,y,n,r)}else{let p=(0,Ao.pointerToPrism)(_e().atomP.historic.coreByProject[c].sheetsById[u].sequence.tracksByObject).getValue(),v=n.map(({keyframe:y,pathToProp:k})=>{var P,T;let E=k[0],A=k.slice(1),C=wl([...A]),L=((T=(P=p==null?void 0:p[E])==null?void 0:P.trackIdByPropPath)!=null?T:{})[C];return L?{keyframe:y,trackId:L,address:{objectKey:E,projectId:c,sheetId:u,sheetInstanceId:f}}:null}).filter(y=>y!==null);HW(v,r)}}function lce(e,n,r){var a;let{projectId:c,sheetId:u,objectKey:f}=e.sheetObject.address,p=(0,Ao.pointerToPrism)(_e().atomP.historic.coreByProject[c].sheetsById[u].sequence.tracksByObject[f]).getValue();if(n.every(({pathToProp:v})=>v.length===0)){let v=Object.keys((a=p==null?void 0:p.trackData)!=null?a:{});if(e.type==="sheetObject")AO(e.sheetObject.address,v,n,r);else{let y=(p==null?void 0:p.trackIdByPropPath)||{},k=Object.entries(y).filter(([P,T])=>T!==void 0&&Use(o2(P),e.pathToProp)).map(([P,T])=>T);AO(e.sheetObject.address,k,n,r)}}else{let v=(p==null?void 0:p.trackIdByPropPath)||{},y=e.type==="propWithChildren"?e.pathToProp:[],k=n.map(({keyframe:P,pathToProp:T})=>{let E=wl([...y,...T]),A=v[E];return A?{keyframe:P,trackId:A,address:e.sheetObject.address}:null}).filter(P=>P!==null);HW(k,r)}}function AO(e,n,r,a){var c;a.position=a.closestGridPosition(a.position);let u=(c=GW(r.map(({keyframe:f})=>f)))==null?void 0:c.position;_e().transaction(({stateEditors:f})=>{for(let p of n)for(let{keyframe:v}of r)f.coreByProject.historic.sheetsById.sequence.setKeyframeAtPosition(W(O({},e),{trackId:p,position:a.position+v.position-u,handles:v.handles,value:v.value,snappingFunction:a.closestGridPosition,type:v.type}))})}function HW(e,n){var r;n.position=n.closestGridPosition(n.position);let a=(r=GW(e.map(({keyframe:c})=>c)))==null?void 0:r.position;_e().transaction(({stateEditors:c})=>{for(let{keyframe:u,trackId:f,address:p}of e)c.coreByProject.historic.sheetsById.sequence.setKeyframeAtPosition(W(O({},p),{trackId:f,position:n.position+u.position-a,handles:u.handles,value:u.value,snappingFunction:n.closestGridPosition,type:u.type}))})}function GW(e){let n=null;for(let r of e)(n===null||r.position<n.position)&&(n=r);return n}function cce(e,n,r){let a=qu("useDragForAggregateKeyframeDot"),c=T7(),u=(0,Ua.useMemo)(()=>({debugName:"AggregateKeyframeDot/useDragKeyframe",onDragStart(p){a._debug("onDragStart",{target:p.target});let v=Number(p.target.dataset.pos),y=n(v);if(!y)return a._debug("no props found for ",{positionToFind:v}),!1;c(!0,v);let k=(0,Ao.prism)(kW(y)).getValue().cur.keyframes,P=y.viewModel.type==="sheet"?y.viewModel.sheet.address:y.viewModel.sheetObject.address,T=(0,Ao.val)(_e().atomP.historic.coreByProject[P.projectId].sheetsById[P.sheetId].sequence.tracksByObject),E=R7(T,function(N,{trackId:U,objectKey:G}){var Q,J;return k.every(ie=>N.id!==ie.kf.id)&&!(y.selection&&(J=(Q=y.selection.byObjectKey[G])==null?void 0:Q.byTrackId[U])!=null&&J.byKeyframeId[N.id])});if(O7(E),y.selection&&y.aggregateKeyframes[y.index].selected===0){let{selection:N,viewModel:U}=y,G=N.getDragHandlers(W(O({},P),{domNode:e,positionAtStartOfDrag:k[0].kf.position})).onDragStart(p);return G&&W(O({},G),{onClick:r.onClickFromDrag,onDragEnd:(...Q)=>{var J;(J=G.onDragEnd)==null||J.call(G,...Q),$f()}})}let A=y,C=(0,Ao.val)(A.layoutP.scaledSpace.toUnitSpace),L;return{onDrag(N,U,G){var Q;let J=Math.max((Q=Po.checkIfMouseEventSnapToPos(G,{}))!=null?Q:k[0].kf.position+C(N),0);c(!0,J),L==null||L.discard(),L=void 0,L=_e().tempTransaction(({stateEditors:ie})=>{for(let xe of k){let Me=xe.kf;ie.coreByProject.historic.sheetsById.sequence.replaceKeyframes(W(O({},xe.track.sheetObject.address),{trackId:xe.track.id,keyframes:[W(O({},Me),{position:J})],snappingFunction:(0,Ao.val)(A.layoutP.sheet).getSequence().closestGridPosition}))}})},onDragEnd(N){c(!1,-1),N?L==null||L.commit():(L==null||L.discard(),r.onClickFromDrag(p)),$f()},onClick(N){r.onClickFromDrag(N)}}}}),[n,r.onClickFromDrag]),[f]=Gr(e,u);return za(f,"draggingPositionInSequenceEditor","ew-resize"),[f]}var Ao,Ua,WW,qW,KW,XW,N2,IO,DO,OO,F2,RO=R(()=>{sn(),Ao=Mt,Ua=ee(Oe()),Xe(),Mo(),nr(),ece(),hg(),Ku(),xO(),Ts(),hi(),Gi(),ua(),Ge(),Sl(),Zf(),z8(),Zf(),hg(),qW=le.div(WW||(WW=Y([`
  position: relative;
  height: 100%;
  width: 100%;
`]))),KW=Object.freeze({selectedPositions:new Map,selection:void 0}),XW=Ua.default.memo(tce),N2=XW,IO=(e=>(e[e.AllSelected=0]="AllSelected",e[e.AtLeastOneUnselected=1]="AtLeastOneUnselected",e[e.NoneSelected=2]="NoneSelected",e))(IO||{}),{AllSelected:DO,AtLeastOneUnselected:OO,NoneSelected:F2}=IO}),_g,LO,$W,uce=R(()=>{sn(),_g=ee(Oe()),Vle(),h2(),RO(),hg(),Ku(),LO=(e,n)=>e.type==="propWithChildren"?_g.default.createElement($W,{layoutP:n,viewModel:e,key:"prop"+e.pathToProp[e.pathToProp.length-1]}):_g.default.createElement(SW,{layoutP:n,leaf:e,key:"prop"+e.pathToProp[e.pathToProp.length-1]}),$W=({viewModel:e,layoutP:n})=>{let r=qu("RightPropWithChildrenRow",e.pathToProp.join());return Mn(()=>{let a=s2(e);return _g.default.createElement(WF,{logger:r},_g.default.createElement(mg,{leaf:e,node:_g.default.createElement(N2,{layoutP:n,aggregatedKeyframes:a,viewModel:e}),isCollapsed:e.isCollapsed},e.children.map(c=>LO(c,n))))},[e,n])}}),zO,ZW,YW,dce=R(()=>{sn(),zO=ee(Oe()),uce(),h2(),hg(),RO(),ZW=({leaf:e,layoutP:n})=>Mn(()=>{let r=s2(e);return zO.default.createElement(mg,{leaf:e,node:zO.default.createElement(N2,{layoutP:n,aggregatedKeyframes:r,viewModel:e}),isCollapsed:e.isCollapsed},e.children.map(a=>LO(a,n)))},[e,n]),YW=ZW}),j2,JW,QW,fce=R(()=>{sn(),j2=ee(Oe()),dce(),h2(),hg(),RO(),JW=({leaf:e,layoutP:n})=>Mn(()=>{let r=s2(e);return j2.default.createElement(mg,{leaf:e,node:j2.default.createElement(N2,{layoutP:n,aggregatedKeyframes:r,viewModel:e}),isCollapsed:e.isCollapsed},e.children.map(a=>j2.default.createElement(YW,{layoutP:n,key:"sheetObject-"+a.sheetObject.address.objectKey,leaf:a})))},[e,n]),QW=JW}),l_,nh,B2,eq,tq,nq,rq,iq=R(()=>{sn(),l_=Mt,nh=ee(Oe()),Xe(),ele(),W7(),fce(),B2=1e6,tq=le.ul(eq||(eq=Y([`
  margin: 0;
  padding: 0;
  list-style: none;
  position: absolute;
  left: 0;
  width: `,`px;
`])),B2),nq=({layoutP:e})=>Mn(()=>{let n=(0,l_.val)(e.tree),r=(0,l_.val)(e.tree.top)+Math.max((0,l_.val)(e.tree.heightIncludingChildren),(0,l_.val)(e.dopeSheetDims.height));return nh.default.createElement(nh.default.Fragment,null,nh.default.createElement(JD,{layoutP:e,height:r},nh.default.createElement(h7,{layoutP:e,height:r},nh.default.createElement(tq,{style:{top:n.top+"px"}},nh.default.createElement(QW,{leaf:n,layoutP:e})))))},[e]),rq=nq});function NO(e,n,r,a){let c="calc(var(--unitSpaceToScaledSpaceMultiplier) * ".concat(e,"px)"),u="calc((var(--graphEditorVerticalSpace) - var(--graphEditorVerticalSpace) * ".concat(n,") * 1px)");r===0&&(r=1e-4);let f="calc(var(--unitSpaceToScaledSpaceMultiplier) * ".concat(r,")");a===0&&(a=.001);let p="calc(var(--graphEditorVerticalSpace) * ".concat(a*-1,")");return"translate(".concat(c,", ").concat(u,") scale(").concat(f,", ").concat(p,")")}function hce(e,n){let{index:r,trackData:a}=n,c=a.keyframes[r],u=a.keyframes[r+1];return To(e,{menuItems:()=>[{label:"Delete",callback:()=>{_e().transaction(({stateEditors:f})=>{let{deleteKeyframes:p}=f.coreByProject.historic.sheetsById.sequence;p(W(O({},n.sheetObject.address),{trackId:n.trackId,keyframeIds:[c.id,u.id]}))})}}]})}var U2,oq,aq,sq,lq,cq,FO=R(()=>{$u(),Ge(),Mo(),nr(),U2=ee(Oe()),Xe(),aq=le.path(oq||(oq=Y([`
  stroke-width: 2;
  stroke: var(--main-color);
  fill: none;
  vector-effect: non-scaling-stroke;
`]))),sq="M 0 0 L 1 0 L 1 1",lq=e=>{let{index:n,trackData:r}=e,a=r.keyframes[n],c=r.keyframes[n+1],u=c.position-a.position,[f,p]=Qn(null),[v]=hce(p,e),y=e.isScalar?Sk(a.value,e.propConfig):0,k=e.isScalar?Sk(c.value,e.propConfig):1,P=e.extremumSpace.fromValueSpace(y),T=e.extremumSpace.fromValueSpace(k)-P,E=NO(a.position,P,u,T),A=a.handles[2],C=a.handles[3],L=c.handles[0],N=c.handles[1],U="M 0 0 C ".concat(A," ").concat(C," ").concat(L," ").concat(N," 1 1");return U2.default.createElement(U2.default.Fragment,null,U2.default.createElement(aq,{ref:f,d:!a.type||a.type==="bezier"?U:sq,style:{transform:E}}),v)},cq=lq});function pce(e,n){let r=(0,rh.useRef)(n);r.current=n;let a=(0,rh.useMemo)(()=>({debugName:"CurveHandler/useOurDrags",lockCSSCursorTo:"move",onDragStart(){let c,u=r.current,f=(0,c_.val)(u.layoutP.scaledSpace.toUnitSpace),p=(0,c_.val)(u.layoutP.graphEditorVerticalSpace.toExtremumSpace),v=u.extremumSpace.lock();return{onDrag(y,k){c&&(c.discard(),c=void 0);let{index:P,trackData:T}=u,E=T.keyframes[P],A=T.keyframes[P+1],C=f(y)/(A.position-E.position),L=-k,N=p(L),U=u.extremumSpace.deltaToValueSpace(N),G=n.isScalar?E.value:0,Q=n.isScalar?A.value:1,J=U/(Q-G);if(u.which==="left"){let ie=Pr(E.handles[2]+C,0,1),xe=E.handles[3]+J;c=_e().tempTransaction(({stateEditors:Me})=>{Me.coreByProject.historic.sheetsById.sequence.replaceKeyframes(W(O({},u.sheetObject.address),{snappingFunction:(0,c_.val)(u.layoutP.sheet).getSequence().closestGridPosition,trackId:u.trackId,keyframes:[W(O({},E),{handles:[E.handles[0],E.handles[1],ie,xe]})]}))})}else{let ie=Pr(A.handles[0]+C,0,1),xe=A.handles[1]+J;c=_e().tempTransaction(({stateEditors:Me})=>{Me.coreByProject.historic.sheetsById.sequence.replaceKeyframes(W(O({},u.sheetObject.address),{trackId:u.trackId,snappingFunction:(0,c_.val)(u.layoutP.sheet).getSequence().closestGridPosition,keyframes:[W(O({},A),{handles:[ie,xe,A.handles[2],A.handles[3]]})]}))})}},onDragEnd(y){v(),y?c&&c.commit():c&&c.discard()}}}}),[]);Gr(e,a)}function mce(e,n){return To(e,{menuItems:()=>[{label:"Delete",callback:()=>{_e().transaction(({stateEditors:r})=>{r.coreByProject.historic.sheetsById.sequence.deleteKeyframes(W(O({},n.sheetObject.address),{keyframeIds:[n.keyframe.id],trackId:n.trackId}))})}}]})}var c_,rh,uq,jO,dq,fq,hq,pq,mq,BO,gce=R(()=>{Ge(),Mo(),hi(),nr(),c_=Mt,Jr(),rh=ee(Oe()),Xe(),FO(),rr(),jO=le.circle(uq||(uq=Y([`
  stroke-width: 1px;
  vector-effect: non-scaling-stroke;
  fill: var(--main-color);
  r: 2px;
  pointer-events: none;
`]))),fq=le.circle(dq||(dq=Y([`
  stroke-width: 6px;
  vector-effect: non-scaling-stroke;
  r: 6px;
  fill: transparent;
  cursor: move;
  `,`;
  &:hover {
  }
  &:hover + `,` {
    r: 6px;
  }
`])),tr,jO),pq=le.path(hq||(hq=Y([`
  stroke-width: 1;
  stroke: var(--main-color);
  /* stroke: gray; */
  fill: none;
  vector-effect: non-scaling-stroke;
`]))),mq=e=>{let[n,r]=Qn(null),{index:a,trackData:c}=e,u=c.keyframes[a],f=c.keyframes[a+1],[p]=mce(r,e);pce(r,e);let v=e.which==="left"?u.handles[2]:f.handles[0],y=u.position+(f.position-u.position)*v,k=e.which==="left"?u.handles[3]:f.handles[1],P=e.isScalar?u.value:0,T=e.isScalar?f.value:1,E=P+(T-P)*k,A=e.extremumSpace.fromValueSpace(E),C=A-e.extremumSpace.fromValueSpace(e.which==="left"?P:T),L=NO(e.which==="left"?u.position:f.position,e.extremumSpace.fromValueSpace(e.which==="left"?P:T),y-(e.which==="left"?u.position:f.position),C);return rh.default.createElement("g",null,rh.default.createElement(fq,{ref:n,style:{cx:"calc(var(--unitSpaceToScaledSpaceMultiplier) * ".concat(y," * 1px)"),cy:"calc((var(--graphEditorVerticalSpace) - var(--graphEditorVerticalSpace) * ".concat(A,") * 1px)")}}),rh.default.createElement(jO,{style:{cx:"calc(var(--unitSpaceToScaledSpaceMultiplier) * ".concat(y," * 1px)"),cy:"calc((var(--graphEditorVerticalSpace) - var(--graphEditorVerticalSpace) * ".concat(A,") * 1px)")}}),rh.default.createElement(pq,{d:"M 0 0 L 1 1",style:{transform:L}}),p)},BO=mq});function vce(e){let[n,r]=(0,sd.useState)(!1);Mc(n,e.props.keyframe.position);let a=(0,sd.useRef)(e.props);a.current=e.props;let c=(0,sd.useMemo)(()=>({debugName:"GraphEditorDotScalar/useDragKeyframe",lockCSSCursorTo:"move",onDragStart(u){r(!0);let f=!!u.altKey,p=a.current,v=(0,V2.val)(p.layoutP.scaledSpace.toUnitSpace),y=(0,V2.val)(p.layoutP.graphEditorVerticalSpace.toExtremumSpace),k=p.extremumSpace.lock(),P;return{onDrag(T,E){let A=p.trackData.keyframes[p.index],C=v(T),L=-E,N=y(L),U=p.extremumSpace.deltaToValueSpace(N),G=[],Q=W(O({},A),{position:A.position+C,value:A.value+U,handles:[...A.handles]});if(G.push(Q),f){let J=p.trackData.keyframes[p.index-1];if(J&&Math.abs(A.value-J.value)>0){let xe=W(O({},J),{handles:[...J.handles]});G.push(xe),xe.handles[3]=bce(J.handles[3],J.value,J.value,A.value,Q.value)}let ie=p.trackData.keyframes[p.index+1];if(ie&&Math.abs(A.value-ie.value)>0){let xe=W(O({},ie),{handles:[...ie.handles]});G.push(xe),xe.handles[1]=_ce(xe.handles[1],xe.value,xe.value,A.value,Q.value)}}P==null||P.discard(),P=_e().tempTransaction(({stateEditors:J})=>{J.coreByProject.historic.sheetsById.sequence.replaceKeyframes(W(O({},p.sheetObject.address),{trackId:p.trackId,keyframes:G,snappingFunction:(0,V2.val)(p.layoutP.sheet).getSequence().closestGridPosition}))})},onDragEnd(T){r(!1),k(),T?P==null||P.commit():(P==null||P.discard(),e.onDetectedClick(u))}}}}),[]);return Gr(e.node,c),za(n,"draggingPositionInSequenceEditor","move"),n}function yce(e,n){return To(e,{menuItems:()=>[{label:"Delete",callback:()=>{_e().transaction(({stateEditors:r})=>{r.coreByProject.historic.sheetsById.sequence.deleteKeyframes(W(O({},n.sheetObject.address),{keyframeIds:[n.keyframe.id],trackId:n.trackId}))})}}]})}function bce(e,n,r,a,c){return(a-n)*e/(c-r)}function _ce(e,n,r,a,c){return((n-a)*e+a-n+r-c)/(r-c)}var V2,sd,gq,UO,vq,yq,bq,_q,xce=R(()=>{Ge(),Mo(),hi(),nr(),V2=Mt,sd=ee(Oe()),Xe(),Gi(),Gi(),rr(),ua(),Ts(),I2(),Hf(),UO=le.circle(gq||(gq=Y([`
  fill: var(--main-color);
  stroke-width: 1px;
  vector-effect: non-scaling-stroke;

  r: 2px;
`]))),yq=le.circle(vq||(vq=Y([`
  stroke-width: 6px;
  vector-effect: non-scaling-stroke;
  r: 6px;
  fill: transparent;
  `,`;

  &:hover + `,` {
    r: 6px;
  }

  #pointer-root.normal & {
    cursor: move;
  }

  #pointer-root.draggingPositionInSequenceEditor & {
    pointer-events: auto;
    cursor: var(`,`);
  }

  &.beingDragged {
    pointer-events: none !important;
  }
`])),tr,UO,yc),bq=e=>{let[n,r]=Qn(null),{index:a,trackData:c}=e,u=c.keyframes[a],[f]=yce(r,e),p=Vf(e.itemKey),v=u.value,y=e.extremumSpace.fromValueSpace(v),k=C2([{type:"primitiveProp",keyframe:e.keyframe,pathToProp:e.pathToProp,propConfig:e.propConfig,sheetObject:e.sheetObject,trackId:e.trackId}]),P=vce({node:r,props:e,onDetectedClick:T=>k.toggle(T,T.target instanceof Element?T.target:r)});return sd.default.createElement(sd.default.Fragment,null,sd.default.createElement(yq,W(O(O(O({ref:n,style:{cx:"calc(var(--unitSpaceToScaledSpaceMultiplier) * ".concat(u.position," * 1px)"),cy:"calc((var(--graphEditorVerticalSpace) - var(--graphEditorVerticalSpace) * ".concat(y,") * 1px)")}},El(u.position)),Po.includePositionSnapAttrs(u.position)),p.attrs),{className:P?"beingDragged":""})),sd.default.createElement(UO,{style:{cx:"calc(var(--unitSpaceToScaledSpaceMultiplier) * ".concat(u.position," * 1px)"),cy:"calc((var(--graphEditorVerticalSpace) - var(--graphEditorVerticalSpace) * ".concat(y,") * 1px)"),fill:p.flag===2?"white":void 0}}),k.node,f)},_q=bq});function wce(e){let[n,r]=(0,ld.useState)(!1);Mc(n,e.props.keyframe.position);let a=(0,ld.useRef)(e.props);a.current=e.props;let c=(0,ld.useMemo)(()=>({debugName:"GraphEditorDotNonScalar/useDragKeyframe",lockCSSCursorTo:"ew-resize",onDragStart(u){r(!0);let f=a.current,p=(0,VO.val)(f.layoutP.scaledSpace.toUnitSpace),v=f.extremumSpace.lock(),y;return{onDrag(k,P){let T=f.trackData.keyframes[f.index],E=p(k),A=[],C=W(O({},T),{position:T.position+E,value:T.value,handles:[...T.handles]});A.push(C),y==null||y.discard(),y=_e().tempTransaction(({stateEditors:L})=>{L.coreByProject.historic.sheetsById.sequence.replaceKeyframes(W(O({},f.sheetObject.address),{trackId:f.trackId,keyframes:A,snappingFunction:(0,VO.val)(f.layoutP.sheet).getSequence().closestGridPosition}))})},onDragEnd(k){r(!1),v(),k?y==null||y.commit():(y==null||y.discard(),e.onDetectedClick(u))}}}}),[]);return Gr(e.node,c),za(n,"draggingPositionInSequenceEditor","ew-resize"),n}function Sce(e,n){return To(e,{menuItems:()=>[{label:"Delete",callback:()=>{_e().transaction(({stateEditors:r})=>{r.coreByProject.historic.sheetsById.sequence.deleteKeyframes(W(O({},n.sheetObject.address),{keyframeIds:[n.keyframe.id],trackId:n.trackId}))})}}]})}var VO,ld,xq,HO,wq,Sq,Eq,GO,Ece=R(()=>{Ge(),Mo(),hi(),nr(),VO=Mt,ld=ee(Oe()),Xe(),Gi(),Gi(),rr(),ua(),Ts(),I2(),Hf(),HO=le.circle(xq||(xq=Y([`
  fill: var(--main-color);
  stroke-width: 1px;
  vector-effect: non-scaling-stroke;

  r: 2px;
`]))),Sq=le.circle(wq||(wq=Y([`
  stroke-width: 6px;
  vector-effect: non-scaling-stroke;
  r: 6px;
  fill: transparent;
  `,`;

  &:hover + `,` {
    r: 6px;
  }

  #pointer-root.normal & {
    cursor: ew-resize;
  }

  #pointer-root.draggingPositionInSequenceEditor & {
    pointer-events: auto;
    cursor: var(`,`);
  }

  &.beingDragged {
    pointer-events: none !important;
  }
`])),tr,HO,yc),Eq=e=>{let[n,r]=Qn(null),{index:a,trackData:c,itemKey:u}=e,f=c.keyframes[a],[p]=Sce(r,e),v=Vf(u),y=e.which==="left"?0:1,k=C2([{type:"primitiveProp",keyframe:e.keyframe,pathToProp:e.pathToProp,propConfig:e.propConfig,sheetObject:e.sheetObject,trackId:e.trackId}]),P=wce({node:r,props:e,onDetectedClick:E=>k.toggle(E,E.target instanceof Element?E.target:r)}),T=e.extremumSpace.fromValueSpace(y);return ld.default.createElement(ld.default.Fragment,null,ld.default.createElement(Sq,W(O(O(O({ref:n,style:{cx:"calc(var(--unitSpaceToScaledSpaceMultiplier) * ".concat(f.position," * 1px)"),cy:"calc((var(--graphEditorVerticalSpace) - var(--graphEditorVerticalSpace) * ".concat(T,") * 1px)")}},v.attrs),El(f.position)),Po.includePositionSnapAttrs(f.position)),{className:P?"beingDragged":""})),ld.default.createElement(HO,{style:{cx:"calc(var(--unitSpaceToScaledSpaceMultiplier) * ".concat(f.position," * 1px)"),cy:"calc((var(--graphEditorVerticalSpace) - var(--graphEditorVerticalSpace) * ".concat(T,") * 1px)"),fill:v.flag===2?"white":void 0}}),k.node,p)},GO=Eq}),H2,kq,Tq,Mq,Pq,kce=R(()=>{H2=ee(Oe()),Xe(),FO(),Tq=le.path(kq||(kq=Y([`
  stroke-width: 2;
  stroke: var(--main-color);
  stroke-dasharray: 3 2;
  fill: none;
  vector-effect: non-scaling-stroke;
  opacity: 0.3;
`]))),Mq=e=>{let{index:n,trackData:r}=e,a="M 0 0 L 1 1",c=NO(r.keyframes[n].position,e.extremumSpace.fromValueSpace(0),0,e.extremumSpace.fromValueSpace(1)-e.extremumSpace.fromValueSpace(0));return H2.default.createElement(H2.default.Fragment,null,H2.default.createElement(Tq,{d:a,style:{transform:c}}))},Pq=Mq}),qi,Cq,Aq,Iq,Dq,Oq,Tce=R(()=>{qi=ee(Oe()),Xe(),FO(),gce(),xce(),Ece(),kce(),Aq=le.g(Cq||(Cq=Y([`
  /* position: absolute; */
`]))),Iq=qi.default.createElement(qi.default.Fragment,null),Dq=e=>{let{index:n,trackData:r,isScalar:a}=e,c=r.keyframes[n],u=r.keyframes[n+1],f=c.connectedRight&&!!u&&u.value!==c.value;return qi.default.createElement(Aq,null,f?qi.default.createElement(qi.default.Fragment,null,qi.default.createElement(cq,O({},e)),!c.type||c.type==="bezier"&&qi.default.createElement(qi.default.Fragment,null,qi.default.createElement(BO,W(O({},e),{which:"left"})),qi.default.createElement(BO,W(O({},e),{which:"right"})))):Iq,a?qi.default.createElement(_q,O({},e)):qi.default.createElement(qi.default.Fragment,null,qi.default.createElement(GO,W(O({},e),{which:"left"})),qi.default.createElement(GO,W(O({},e),{which:"right"})),qi.default.createElement(Pq,O({},e))))},Oq=Dq});function Mce(e,n){let r=1/0,a=-1/0;function c(u){r=Math.min(u,r),a=Math.max(u,a)}return e.forEach((u,f)=>{let p=Sk(u.value,n);if(c(p),!u.connectedRight)return;let v=e[f+1];if(!v)return;let y=(typeof v.value=="number"?v.value:1)-p;c(p+u.handles[3]*y),c(p+v.handles[1]*y)}),[r,a]}function Pce(e){let n=0,r=1;function a(c){n=Math.min(c,n),r=Math.max(c,r)}return e.forEach((c,u)=>{if(!c.connectedRight)return;let f=e[u+1];f&&(a(c.handles[3]),a(f.handles[1]))}),[n,r]}var Tl,Rq,Lq,Cce=R(()=>{Sc(),Tl=ee(Oe()),W2(),Tce(),$u(),sn(),Rq=Tl.default.memo(({layoutP:e,trackData:n,sheetObject:r,trackId:a,color:c,pathToProp:u})=>{let f=wk(In(r.template.configPointer),u);if(_l(f))return console.error("Composite prop types cannot be keyframed"),Tl.default.createElement(Tl.default.Fragment,null);let[p,v]=(0,Tl.useState)(!1),y=(0,Tl.useMemo)(()=>{let E=new Set;return function(){let A=E.size===0;E.add(C),A&&v(!0);function C(){let L=E.size>0;E.delete(C),L&&E.size===0&&v(!1)}return C}},[]),k=(0,Tl.useMemo)(()=>{let E=f.type==="number"?Mce(n.keyframes,f):Pce(n.keyframes),A=N=>(N-E[0])/(E[1]-E[0]),C=N=>E[0]+L(N),L=N=>N*(E[1]-E[0]);return{fromValueSpace:A,toValueSpace:C,deltaToValueSpace:L,lock:y}},[n.keyframes]),P=(0,Tl.useRef)(void 0);p||(P.current=k);let T=n.keyframes.map((E,A)=>Tl.default.createElement(Oq,{pathToProp:u,propConfig:f,itemKey:Si.forTrackKeyframe(r,a,E.id),keyframe:E,index:A,trackData:n,layoutP:e,sheetObject:r,trackId:a,isScalar:f.type==="number",key:E.id,extremumSpace:P.current,color:c}));return Tl.default.createElement("g",{style:{"--main-color":u_[c].iconColor}},T)}),Lq=Rq}),zq,G2,Nq,Fq,Ace=R(()=>{Ge(),sn(),zq=Mt,G2=ee(Oe()),Cce(),Nq=e=>Mn(()=>{let{sheetObject:n,trackId:r}=e,a=(0,zq.val)(_e().atomP.historic.coreByProject[n.address.projectId].sheetsById[n.address.sheetId].sequence.tracksByObject[n.address.objectKey].trackData[r]);return(a==null?void 0:a.type)!=="BasicKeyframedTrack"?(console.error("trackData type ".concat(a==null?void 0:a.type," is not yet supported on the graph editor")),G2.default.createElement(G2.default.Fragment,null)):G2.default.createElement(Lq,W(O({},e),{trackData:a}))},[e.trackId,e.layoutP]),Fq=Nq});function jq({clippedSpaceRange:e,clippedSpaceWidth:n,fps:r,gapWidth:a=120},c){let u=1/r,f=e.end-e.start,p=n/(r*f),v=Math.floor(a/p),y=(v<r?Bq(r).find(T=>T>=v):r*Math.floor(v/r))*u,k=Math.floor(e.start/y),P=Math.ceil(e.end/y);for(let T=k;T<=P;T++){let E=T*y,A=E%1===0;c(E,A)}}var Bq,Uq=R(()=>{Jr(),Bq=$p(e=>{let n=[];for(let r=1;r<=e;r++)e%r===0&&n.push(r);return n})});function Ice(e){let{clippedSpaceWidth:n,height:r,ctx:a,unitSpaceToClippedSpace:c,snapToGrid:u}=e;a.clearRect(0,0,n,r),jq(e,(f,p)=>{let v=u(f),y=Math.floor(c(v));a.strokeStyle=p?"rgba(225, 225, 225, 0.04)":"rgba(255, 255, 255, 0.01)",a.beginPath(),a.moveTo(y,0),a.lineTo(y,r),a.stroke(),a.closePath()})}var ih,oh,Vq,Hq,Gq,Wq,qq,Kq,Xq,$q,WO,Zq=R(()=>{ih=Mt,oh=ee(Oe()),Xe(),Uq(),Ge(),Hq=le.div(Vq||(Vq=Y([`
  position: absolute;
  top: 0;
  left: 0;
  height: 100%;
  pointer-events: none;
`]))),Wq=le.canvas(Gq||(Gq=Y([`
  position: relative;
  left: 0;
`]))),qq=e=>{let n=e;return n.webkitBackingStorePixelRatio||n.mozBackingStorePixelRatio||n.msBackingStorePixelRatio||n.oBackingStorePixelRatio||n.backingStorePixelRatio||1},Kq=()=>window.devicePixelRatio||1,Xq=e=>Kq()/qq(e),$q=({layoutP:e,width:n,height:r})=>{let a=(0,oh.useRef)(null),[c,u]=(0,oh.useState)(null),{ctx:f,ratio:p}=(0,oh.useMemo)(()=>{if(!c)return{};let v=c.getContext("2d"),y=Xq(v);return{ctx:v,ratio:y}},[c]);return(0,oh.useLayoutEffect)(()=>{if(!f)return;c.width=n*p,c.height=r*p;let v=(0,ih.prism)(()=>{let y=(0,ih.val)(e.sheet).getSequence();return{ctx:f,clippedSpaceRange:(0,ih.val)(e.clippedSpace.range),clippedSpaceWidth:(0,ih.val)(e.clippedSpace.width),unitSpaceToClippedSpace:(0,ih.val)(e.clippedSpace.fromUnitSpace),height:r,leftPadding:(0,ih.val)(e.scaledSpace.leftPadding),fps:y.subUnitsPerUnit,snapToGrid:k=>y.closestGridPosition(k)}}).onChange(_e().ticker,y=>{f.save(),f.scale(p,p),Ice(y),f.restore()},!0);return()=>{v()}},[f,n,r,e]),oh.default.createElement(Hq,{ref:a,style:{width:n+"px"}},oh.default.createElement(Wq,{ref:u,style:{width:n+"px",height:r+"px"}}))},WO=$q}),Ml,ah,u_,Yq,Jq,Qq,eK,tK,nK,W2=R(()=>{Ge(),Sl(),Mk(),sn(),Ml=Mt,ah=ee(Oe()),Xe(),iq(),W7(),Ace(),Zq(),ca(),u_={1:{iconColor:"#b98b08"},2:{iconColor:"#70a904"},3:{iconColor:"#2e928a"},4:{iconColor:"#a943bb"},5:{iconColor:"#b90808"},6:{iconColor:"#b4bf0e"}},Jq=le.div(Yq||(Yq=Y([`
  position: absolute;
  right: 0;
  bottom: 0;
  background: `,`;
`])),ys(.03,"#1a1c1e")),eK=le.svg(Qq||(Qq=Y([`
  position: absolute;
  top: 0;
  left: 0;
  margin: 0;
  pointer-events: none;
`]))),tK=({layoutP:e})=>Mn(()=>{let n=(0,Ml.val)(e.sheet),r=(0,Ml.val)(_e().atomP.historic.projects.stateByProjectId[n.address.projectId].stateBySheetId[n.address.sheetId].sequenceEditor.selectedPropsByObject),a=(0,Ml.val)(e.graphEditorDims.height),c=(0,Ml.val)(e.scaledSpace.fromUnitSpace)(1),u=[];if(r)for(let[p,v]of Object.entries(r)){let y=n.getObject(p);if(!y)continue;let k=(0,Ml.val)(y.template.getMapOfValidSequenceTracks_forStudio());for(let[P,T]of Object.entries(v)){let E=o2(P),A=Yu(k,E);A&&u.push(ah.default.createElement(Fq,{key:"graph-".concat(p,"-").concat(P),sheetObject:y,pathToProp:E,layoutP:e,trackId:A,color:T}))}}let f=(0,Ml.val)(e.rightDims.width);return ah.default.createElement(Jq,{style:{width:f+"px",height:a+"px","--unitSpaceToScaledSpaceMultiplier":c,"--graphEditorVerticalSpace":"".concat((0,Ml.val)(e.graphEditorVerticalSpace.space))}},ah.default.createElement(WO,{layoutP:e,width:f,height:a}),ah.default.createElement(JD,{layoutP:e,height:a},ah.default.createElement(eK,{width:B2,height:a,viewBox:"0 0 ".concat(B2," ").concat(a)},ah.default.createElement("g",{style:{transform:"translate(".concat((0,Ml.val)(e.scaledSpace.leftPadding),"px, ").concat((0,Ml.val)(e.graphEditorDims.padding.top),"px)")}},u))))},[e]),nK=tK}),rK,Va,iK,oK,aK,sK,qO,lK,cK,uK,dK,fK,hK,pK,Dce=R(()=>{Ge(),Sl(),Pk(),sn(),rK=Mt,Va=ee(Oe()),Xe(),nD(),Dk(),W2(),r2(),Uf(),GH(),iK={label:{color:"#9a9a9a"}},aK=le(zD)(oK||(oK=Y([""]))),qO=le(ND)(sK||(sK=Y([`
  display: flex;
  color: `,`;
  padding-right: 12px;
  align-items: center;
  justify-content: flex-end;
  box-sizing: border-box;
`])),iK.label.color),cK=le.button(lK||(lK=Y([`
  background: none;
  border: none;
  outline: none;
  display: flex;
  box-sizing: border-box;
  font-size: 14px;
  align-items: center;
  height: 100%;
  margin-left: 12px;
  color: `,`;

  &:not([disabled]):hover {
    color: white;
  }
`])),e=>e.isSelected?u_[e.graphEditorColor].iconColor:Ju.offColor),uK=()=>Va.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"10",height:"12",viewBox:"0 0 640 512"},Va.default.createElement("g",{transform:"translate(0 100)"},Va.default.createElement("path",{fill:"currentColor",d:"M368 32h-96c-17.67 0-32 14.33-32 32v96c0 17.67 14.33 32 32 32h96c17.67 0 32-14.33 32-32V64c0-17.67-14.33-32-32-32zM208 88h-84.75C113.75 64.56 90.84 48 64 48 28.66 48 0 76.65 0 112s28.66 64 64 64c26.84 0 49.75-16.56 59.25-40h79.73c-55.37 32.52-95.86 87.32-109.54 152h49.4c11.3-41.61 36.77-77.21 71.04-101.56-3.7-8.08-5.88-16.99-5.88-26.44V88zm-48 232H64c-17.67 0-32 14.33-32 32v96c0 17.67 14.33 32 32 32h96c17.67 0 32-14.33 32-32v-96c0-17.67-14.33-32-32-32zM576 48c-26.84 0-49.75 16.56-59.25 40H432v72c0 9.45-2.19 18.36-5.88 26.44 34.27 24.35 59.74 59.95 71.04 101.56h49.4c-13.68-64.68-54.17-119.48-109.54-152h79.73c9.5 23.44 32.41 40 59.25 40 35.34 0 64-28.65 64-64s-28.66-64-64-64zm0 272h-96c-17.67 0-32 14.33-32 32v96c0 17.67 14.33 32 32 32h96c17.67 0 32-14.33 32-32v-96c0-17.67-14.33-32-32-32z"}))),fK=le.span(dK||(dK=Y([`
  margin-right: 4px;
  `,`;

  `,`:hover & {
    color: #ccc;
  }
`])),Zu,qO),hK=({leaf:e})=>{var n;let r=Eb(e.sheetObject.propsP,e.pathToProp),a=e.sheetObject,{controlIndicators:c}=tD(r,a,e.propConf),u=Mn(()=>{let T=e.sheetObject.address,E=wl(e.pathToProp);return(0,rK.val)(_e().atomP.historic.projects.stateByProjectId[T.projectId].stateBySheetId[T.sheetId].sequenceEditor.selectedPropsByObject[T.objectKey][E])},[e]),f=(0,Va.useRef)(!1),p=typeof u=="string";f.current=p;let v=(0,Va.useCallback)(()=>{let T=e.sheetObject.address;_e().transaction(({stateEditors:E})=>{f.current?E.studio.historic.projects.stateByProjectId.stateBySheetId.sequenceEditor.removePropFromGraphEditor(W(O({},T),{pathToProp:e.pathToProp})):(E.studio.historic.projects.stateByProjectId.stateBySheetId.sequenceEditor.addPropToGraphEditor(W(O({},T),{pathToProp:e.pathToProp})),E.studio.historic.panels.sequenceEditor.graphEditor.setIsOpen({isOpen:!0}))})},[e]),y=(n=e.propConf.label)!=null?n:e.pathToProp[e.pathToProp.length-1],k=!0,P=(0,Va.useRef)(null);return VH(P.current,e),Va.default.createElement(aK,{depth:e.depth},Va.default.createElement(qO,{ref:P,isEven:e.n%2===0,style:{height:e.nodeHeight+"px"},isSelected:p===!0},Va.default.createElement(fK,null,y),c,Va.default.createElement(cK,{onClick:v,isSelected:p===!0,graphEditorColor:u!=null?u:"1",style:{opacity:1},disabled:!k},Va.default.createElement(uK,null))))},pK=hK});function KO(e,n){_e().transaction(({stateEditors:r})=>{r.studio.ahistoric.projects.stateByProjectId.stateBySheetId.sequence.sequenceEditorCollapsableItems.set(W(O({},n.sheetAddress),{studioSheetItemKey:n.sheetItemKey,isCollapsed:e}))})}var XO=R(()=>{Ge()}),xg,$O,mK,Oce=R(()=>{xg=ee(Oe()),r2(),Dce(),XO(),$O=e=>{let n="prop"+e.pathToProp[e.pathToProp.length-1];return e.shouldRender?e.type==="propWithChildren"?xg.default.createElement(mK,{leaf:e,key:n}):xg.default.createElement(pK,{leaf:e,key:n}):xg.default.createElement(xg.default.Fragment,{key:n})},mK=({leaf:e})=>xg.default.createElement(n2,{leaf:e,label:e.pathToProp[e.pathToProp.length-1],isCollapsed:e.isCollapsed,toggleCollapsed:()=>KO(!e.isCollapsed,{sheetAddress:e.sheetObject.address,sheetItemKey:e.sheetItemKey})},e.children.map(n=>$O(n)))}),gK,vK,yK,Rce=R(()=>{gK=ee(Oe()),r2(),Oce(),XO(),Ge(),vK=({leaf:e})=>gK.default.createElement(n2,{leaf:e,label:e.sheetObject.address.objectKey,isCollapsed:e.isCollapsed,toggleSelect:()=>{_e().transaction(({stateEditors:n})=>{n.studio.historic.panels.outline.selection.set([e.sheetObject])})},toggleCollapsed:()=>KO(!e.isCollapsed,{sheetAddress:e.sheetObject.address,sheetItemKey:e.sheetItemKey})},e.children.map(n=>$O(n))),yK=vK}),ZO,bK,_K,Lce=R(()=>{sn(),ZO=ee(Oe()),Rce(),r2(),XO(),AU(),bK=({leaf:e})=>Mn(()=>ZO.default.createElement(n2,{leaf:e,label:e.sheet.address.sheetId,isCollapsed:e.isCollapsed,toggleCollapsed:()=>{KO(!e.isCollapsed,{sheetAddress:e.sheet.address,sheetItemKey:e.sheetItemKey})}},e.children.map(n=>ZO.default.createElement(yK,{key:"sheetObject-"+PU(n.sheetObject),leaf:n}))),[e]),_K=bK}),YO,q2,xK,wK,SK,EK,kK,TK,zce=R(()=>{sn(),YO=Mt,q2=ee(Oe()),Xe(),Lce(),wK=le.div(xK||(xK=Y([`
  position: absolute;
  left: 0;
  overflow-x: visible;
`]))),EK=le.ul(SK||(SK=Y([`
  margin: 0;
  padding: 0;
  list-style: none;
`]))),kK=({layoutP:e})=>Mn(()=>{let n=(0,YO.val)(e.tree),r=(0,YO.val)(e.leftDims.width);return q2.default.createElement(wK,{style:{width:r+"px",top:n.top+"px"}},q2.default.createElement(EK,null,q2.default.createElement(_K,{leaf:n})))},[e]),TK=kK}),JO,MK,PK,CK,AK,Nce=R(()=>{rr(),Oc(),sn(),ca(),JO=ee(Oe()),Xe(),Zq(),PK=le.div(MK||(MK=Y([`
  position: absolute;
  top: 0;
  right: 0;
  bottom: 0;
  z-index: `,`;
  overflow: hidden;
  background: `,`;
  pointer-events: none;
`])),()=>Ol.rightBackground,ys(.01,Jy(1*.03,Gm.panel.bg))),CK=({layoutP:e})=>{let n=In(e.rightDims.width),r=In(e.panelDims.height);return JO.default.createElement(PK,{style:{width:n+"px"}},JO.default.createElement(WO,{width:n,height:r,layoutP:e}))},AK=CK}),wg,IK,DK,OK,RK,Fce=R(()=>{sn(),wg=ee(Oe()),Xe(),zce(),Nce(),iq(),b7(),DK=le.div(IK||(IK=Y([`
  position: absolute;
  left: 0;
  right: 0;
`]))),OK=({layoutP:e})=>{let n=In(e.dopeSheetDims.height);return wg.default.createElement(DK,{style:{height:n+"px"}},wg.default.createElement(AK,{layoutP:e}),wg.default.createElement(y7,null,wg.default.createElement(TK,{layoutP:e}),wg.default.createElement(rq,{layoutP:e})))},RK=OK});function jce(e,n,r){return QO.prism.memo(e,()=>(0,QO.prism)(n),r).getValue()}var QO,Bce=R(()=>{QO=Mt});function Ar(e){return function(n,r){return e(n,r())}}function fa(e){return Object.freeze({audience:sh(e,8)?"internal":sh(e,16)?"dev":"public",category:sh(e,4)?"troubleshooting":sh(e,2)?"todo":"general",level:sh(e,512)?512:sh(e,256)?256:sh(e,128)?128:64})}function sh(e,n){return(e&n)===n}function Ir(e,n){return((n&32)===32?!0:(n&16)===16?e.dev:(n&8)===8?e.internal:!1)&&e.min<=n}function LK(e=console,n={}){let r=W(O({},Pl),{includes:O({},Pl.includes)}),a={styled:Hce.bind(r,e),noStyle:Wce.bind(r,e)},c=Vce.bind(r);function u(){return r.loggingConsoleStyle&&r.loggerConsoleStyle?a.styled:a.noStyle}return r.create=u(),{configureLogger(f){var p;f==="console"?(r.loggerConsoleStyle=Pl.loggerConsoleStyle,r.create=u()):f.type==="console"?(r.loggerConsoleStyle=(p=f.style)!=null?p:Pl.loggerConsoleStyle,r.create=u()):f.type==="keyed"?(r.creatExt=v=>f.keyed(v.names),r.create=c):f.type==="named"&&(r.creatExt=Uce.bind(null,f.named),r.create=c)},configureLogging(f){var p,v,y,k,P;r.includes.dev=(p=f.dev)!=null?p:Pl.includes.dev,r.includes.internal=(v=f.internal)!=null?v:Pl.includes.internal,r.includes.min=(y=f.min)!=null?y:Pl.includes.min,r.include=(k=f.include)!=null?k:Pl.include,r.loggingConsoleStyle=(P=f.consoleStyle)!=null?P:Pl.loggingConsoleStyle,r.create=u()},getLogger(){return r.create({names:[]})}}}function Uce(e,n){let r=[];for(let{name:a,key:c}of n.names)r.push(c==null?a:"".concat(a," (").concat(c,")"));return e(r)}function Vce(e){let n=O(O({},this.includes),this.include(e)),r=this.filtered,a=this.named.bind(this,e),c=this.creatExt(e),u=Ir(n,524),f=Ir(n,522),p=Ir(n,521),v=Ir(n,529),y=Ir(n,545),k=Ir(n,265),P=Ir(n,268),T=Ir(n,273),E=Ir(n,289),A=Ir(n,137),C=Ir(n,145),L=Ir(n,73),N=Ir(n,81),U=u?c.error.bind(c,qo._hmm):r.bind(e,524),G=f?c.error.bind(c,qo._todo):r.bind(e,522),Q=p?c.error.bind(c,qo._error):r.bind(e,521),J=v?c.error.bind(c,qo.errorDev):r.bind(e,529),ie=y?c.error.bind(c,qo.errorPublic):r.bind(e,545),xe=P?c.warn.bind(c,qo._kapow):r.bind(e,268),Me=k?c.warn.bind(c,qo._warn):r.bind(e,265),ue=T?c.warn.bind(c,qo.warnDev):r.bind(e,273),Ae=E?c.warn.bind(c,qo.warnPublic):r.bind(e,273),We=A?c.debug.bind(c,qo._debug):r.bind(e,137),oe=C?c.debug.bind(c,qo.debugDev):r.bind(e,145),De=L?c.trace.bind(c,qo._trace):r.bind(e,73),q=N?c.trace.bind(c,qo.traceDev):r.bind(e,81),Fe={_hmm:U,_todo:G,_error:Q,errorDev:J,errorPublic:ie,_kapow:xe,_warn:Me,warnDev:ue,warnPublic:Ae,_debug:We,debugDev:oe,_trace:De,traceDev:q,lazy:{_hmm:u?Ar(U):U,_todo:f?Ar(G):G,_error:p?Ar(Q):Q,errorDev:v?Ar(J):J,errorPublic:y?Ar(ie):ie,_kapow:P?Ar(xe):xe,_warn:k?Ar(Me):Me,warnDev:T?Ar(ue):ue,warnPublic:E?Ar(Ae):Ae,_debug:A?Ar(We):We,debugDev:C?Ar(oe):oe,_trace:L?Ar(De):De,traceDev:N?Ar(q):q},named:a,utilFor:{internal(){return{debug:Fe._debug,error:Fe._error,warn:Fe._warn,trace:Fe._trace,named(Pt,Pe){return Fe.named(Pt,Pe).utilFor.internal()}}},dev(){return{debug:Fe.debugDev,error:Fe.errorDev,warn:Fe.warnDev,trace:Fe.traceDev,named(Pt,Pe){return Fe.named(Pt,Pe).utilFor.dev()}}},public(){return{error:Fe.errorPublic,warn:Fe.warnPublic,debug(Pt,Pe){Fe._warn('(public "debug" filtered out) '.concat(Pt),Pe)},trace(Pt,Pe){Fe._warn('(public "trace" filtered out) '.concat(Pt),Pe)},named(Pt,Pe){return Fe.named(Pt,Pe).utilFor.public()}}}}};return Fe}function Hce(e,n){let r=O(O({},this.includes),this.include(n)),a=[],c="";for(let v=0;v<n.names.length;v++){let{name:y,key:k}=n.names[v];if(c+=" %c".concat(y),a.push(this.style.css(y)),k!=null){let P="%c#".concat(k);c+=P,a.push(this.style.css(P))}}let u=this.filtered,f=this.named.bind(this,n),p=[c,...a];return zK(u,n,r,e,p,Gce(p),f)}function Gce(e){let n=e.slice(0);for(let r=1;r<n.length;r++)n[r]+=";background-color:#e0005a;padding:2px;color:white";return n}function Wce(e,n){let r=O(O({},this.includes),this.include(n)),a="";for(let p=0;p<n.names.length;p++){let{name:v,key:y}=n.names[p];a+=" ".concat(v),y!=null&&(a+="#".concat(y))}let c=this.filtered,u=this.named.bind(this,n),f=[a];return zK(c,n,r,e,f,f,u)}function zK(e,n,r,a,c,u,f){let p=Ir(r,524),v=Ir(r,522),y=Ir(r,521),k=Ir(r,529),P=Ir(r,545),T=Ir(r,265),E=Ir(r,268),A=Ir(r,273),C=Ir(r,289),L=Ir(r,137),N=Ir(r,145),U=Ir(r,73),G=Ir(r,81),Q=p?a.error.bind(a,...c):e.bind(n,524),J=v?a.error.bind(a,...c):e.bind(n,522),ie=y?a.error.bind(a,...c):e.bind(n,521),xe=k?a.error.bind(a,...c):e.bind(n,529),Me=P?a.error.bind(a,...c):e.bind(n,545),ue=E?a.warn.bind(a,...u):e.bind(n,268),Ae=T?a.warn.bind(a,...c):e.bind(n,265),We=A?a.warn.bind(a,...c):e.bind(n,273),oe=C?a.warn.bind(a,...c):e.bind(n,273),De=L?a.info.bind(a,...c):e.bind(n,137),q=N?a.info.bind(a,...c):e.bind(n,145),Fe=U?a.debug.bind(a,...c):e.bind(n,73),Pt=G?a.debug.bind(a,...c):e.bind(n,81),Pe={_hmm:Q,_todo:J,_error:ie,errorDev:xe,errorPublic:Me,_kapow:ue,_warn:Ae,warnDev:We,warnPublic:oe,_debug:De,debugDev:q,_trace:Fe,traceDev:Pt,lazy:{_hmm:p?Ar(Q):Q,_todo:v?Ar(J):J,_error:y?Ar(ie):ie,errorDev:k?Ar(xe):xe,errorPublic:P?Ar(Me):Me,_kapow:E?Ar(ue):ue,_warn:T?Ar(Ae):Ae,warnDev:A?Ar(We):We,warnPublic:C?Ar(oe):oe,_debug:L?Ar(De):De,debugDev:N?Ar(q):q,_trace:U?Ar(Fe):Fe,traceDev:G?Ar(Pt):Pt},named:f,utilFor:{internal(){return{debug:Pe._debug,error:Pe._error,warn:Pe._warn,trace:Pe._trace,named(ke,Be){return Pe.named(ke,Be).utilFor.internal()}}},dev(){return{debug:Pe.debugDev,error:Pe.errorDev,warn:Pe.warnDev,trace:Pe.traceDev,named(ke,Be){return Pe.named(ke,Be).utilFor.dev()}}},public(){return{error:Pe.errorPublic,warn:Pe.warnPublic,debug(ke,Be){Pe._warn('(public "debug" filtered out) '.concat(ke),Be)},trace(ke,Be){Pe._warn('(public "trace" filtered out) '.concat(ke),Be)},named(ke,Be){return Pe.named(ke,Be).utilFor.public()}}}}};return Pe}var qo,Pl,NK=R(()=>{qo={_hmm:fa(524),_todo:fa(522),_error:fa(521),errorDev:fa(529),errorPublic:fa(545),_kapow:fa(268),_warn:fa(265),warnDev:fa(273),warnPublic:fa(289),_debug:fa(137),debugDev:fa(145),_trace:fa(73),traceDev:fa(81)},Pl={loggingConsoleStyle:!0,loggerConsoleStyle:!0,includes:Object.freeze({internal:!1,dev:!1,min:256}),filtered:function(){},include:function(){return{}},create:null,creatExt:null,named(e,n,r){return this.create({names:[...e.names,{name:n,key:r}]})},style:{bold:void 0,italic:void 0,cssMemo:new Map([["",""]]),collapseOnRE:/[a-z- ]+/g,color:void 0,collapsed(e){if(e.length<5)return e;let n=e.replace(this.collapseOnRE,"");return this.cssMemo.has(n)||this.cssMemo.set(n,this.css(e)),n},css(e){var n,r,a,c;let u=this.cssMemo.get(e);if(u)return u;let f="color:".concat((r=(n=this.color)==null?void 0:n.call(this,e))!=null?r:"hsl(".concat((e.charCodeAt(0)+e.charCodeAt(e.length-1))%360,", 100%, 60%)"));return(a=this.bold)!=null&&a.test(e)&&(f+=";font-weight:600"),(c=this.italic)!=null&&c.test(e)&&(f+=";font-style:italic"),this.cssMemo.set(e,f),f}}}}),e5,K2,X2=R(()=>{NK(),NK(),e5=LK(console,{_debug:function(){},_error:function(){}}),e5.configureLogging({dev:!0,min:64}),K2=e5.getLogger().named("Theatre.js (default logger)").utilFor.dev()}),cd,lh,FK,qce=R(()=>{Sc(),cd=Mt,X2(),gc(),lh=28,FK=(e,n)=>{var r;cd.prism.ensurePrism();let a=!0,c=XE+lh,u=0,f=n.atomP.ahistoric.projects.stateByProjectId[e.address.projectId].stateBySheetId[e.address.sheetId].sequence.collapsableItems,p=f.byId[Si.forSheet()].isCollapsed,v=(r=(0,cd.pointerToPrism)(p).getValue())!=null?r:!1,y={type:"sheet",isCollapsed:v,sheet:e,children:[],sheetItemKey:Si.forSheet(),shouldRender:a,top:XE,depth:0,n:u,nodeHeight:a?lh:0,heightIncludingChildren:-1};u+=1;for(let C of Object.values((0,cd.val)(e.objectsP)))C&&k(C,y.children,y.depth+1,!v);y.heightIncludingChildren=c-y.top;function k(C,L,N,U){var G;let Q=(0,cd.val)(C.template.getMapOfValidSequenceTracks_forStudio()),J=(0,cd.val)(C.template.configPointer);if(Object.keys(Q).length===0)return;let ie=f.byId[Si.forSheetObject(C)].isCollapsed,xe=(G=(0,cd.pointerToPrism)(ie).getValue())!=null?G:!1,Me={type:"sheetObject",isCollapsed:xe,sheetItemKey:Si.forSheetObject(C),shouldRender:U,top:c,children:[],depth:N,n:u,sheetObject:C,nodeHeight:U?lh:0,heightIncludingChildren:-1};L.push(Me),U&&(u+=1,c+=Me.nodeHeight),P(C,Q,[],J,Me.children,N+1,U&&!xe),Me.heightIncludingChildren=c-Me.top}function P(C,L,N,U,G,Q,J){for(let[ie,xe]of Object.entries(L)){let Me=U.props[ie];T(C,xe,[...N,ie],Me,G,Q,J)}}function T(C,L,N,U,G,Q,J){U.type==="compound"?E(C,L,U,N,U,G,Q,J):U.type==="enum"?K2.warn("Prop type enum is not yet supported in the sequence editor"):A(C,L,N,U,G,Q,J)}function E(C,L,N,U,G,Q,J,ie){var xe;let Me=f.byId[Si.forSheetObjectProp(C,U)].isCollapsed,ue=(xe=(0,cd.pointerToPrism)(Me).getValue())!=null?xe:!1,Ae={type:"propWithChildren",isCollapsed:ue,propConf:N,pathToProp:U,sheetItemKey:Si.forSheetObjectProp(C,U),sheetObject:C,shouldRender:ie,top:c,children:[],nodeHeight:ie?lh:0,heightIncludingChildren:-1,depth:J,trackMapping:L,n:u};Q.push(Ae),ie&&(c+=Ae.nodeHeight,u+=1),P(C,L,U,G,Ae.children,J+1,ie&&!ue),Ae.heightIncludingChildren=c-Ae.top}function A(C,L,N,U,G,Q,J){let ie={type:"primitiveProp",propConf:U,depth:Q,sheetItemKey:Si.forSheetObjectProp(C,N),sheetObject:C,pathToProp:N,shouldRender:J,top:c,nodeHeight:J?lh:0,heightIncludingChildren:J?lh:0,trackId:L,n:u};G.push(ie),u+=1,c+=ie.nodeHeight}return y}});function Kce(e,n){let r=_e(),a=r.atomP.ahistoric.projects.stateByProjectId[e.address.projectId].stateBySheetId[e.address.sheetId],c=r.atomP.historic.projects.stateByProjectId[e.address.projectId].stateBySheetId[e.address.sheetId];return(0,Ko.prism)(()=>{var u;let f=jce("tree",()=>FK(e,r),[]),p=(0,Ko.val)(n),v=(0,Ko.val)(r.atomP.historic.panels.sequenceEditor.graphEditor),y=(0,Ko.val)(c.sequenceEditor.selectedPropsByObject),k=!!y&&Object.keys(y).length>0,{leftDims:P,rightDims:T,graphEditorDims:E,dopeSheetDims:A,horizontalScrollbarDims:C}=Ko.prism.memo("leftDims",()=>{var Ae;let We={width:Math.floor(p.width*jK),height:p.height,screenX:p.screenX,screenY:p.screenY},oe={width:p.width-We.width,height:p.height,screenX:p.screenX+We.width,screenY:p.screenY},De=k&&(v==null?void 0:v.isOpen)===!0,q=Math.floor((De?Pr((Ae=v==null?void 0:v.height)!=null?Ae:.5,.1,.7):0)*p.heightWithoutBorder),Fe=0+q,Pt=p.height-Fe,Pe={width:p.width,height:Pt,screenX:p.screenX,screenY:p.screenY},ke={isAvailable:k,isOpen:De,width:oe.width,height:q,screenX:p.screenX,screenY:p.screenY+Pt,padding:{top:20,bottom:20}};return{leftDims:We,rightDims:oe,graphEditorDims:ke,dopeSheetDims:Pe,horizontalScrollbarDims:{bottom:0}}},[p,v,k]),L=Ko.prism.memo("graphEditorVerticalSpace",()=>{let Ae=E.height-E.padding.top-E.padding.bottom;return{space:Ae,fromExtremumSpace(We){return We*Ae},toExtremumSpace(We){return We/Ae}}},[E]),[N,U]=Ko.prism.state("isSeeking",!1),G={isSeeking:N,setIsSeeking:U},Q={},J=(u=(0,Ko.val)(a.sequence.clippedSpaceRange))!=null?u:BK,ie=Ko.prism.memo("scaledSpace",()=>{let Ae=J.end-J.start,We=T.width,oe=Ae/We,De=We/Ae;return{fromUnitSpace(q){return q*De},toUnitSpace(q){return q*oe},leftPadding:10}},[J,T.width]),xe=Ko.prism.memo("setClippedSpaceRange",()=>function(Ae){r.transaction(({stateEditors:We})=>{let oe=O({},Ae);if(oe.end<=oe.start&&(oe.end=oe.start+1),oe.start<0){let De=oe.end-oe.start;oe.start=0,oe.end=De}We.studio.ahistoric.projects.stateByProjectId.stateBySheetId.sequence.clippedSpaceRange.set(W(O({},e.address),{range:oe}))})},[]),Me=Ko.prism.memo("clippedSpace",()=>({range:J,width:T.width,fromUnitSpace(Ae){return ie.fromUnitSpace(Ae-J.start)+ie.leftPadding},toUnitSpace(Ae){return ie.toUnitSpace(Ae-ie.leftPadding)+J.start},setRange:xe}),[J,T.width,ie,xe]),ue=Ko.prism.memo("selection.current",()=>new Ko.Atom({}),[]);return LD("finalAtom",{sheet:e,tree:f,panelDims:p,leftDims:P,rightDims:T,dopeSheetDims:A,horizontalScrollbarDims:C,seeker:G,unitSpace:Q,scaledSpace:ie,clippedSpace:Me,graphEditorDims:E,graphEditorVerticalSpace:L,selectionAtom:ue}).pointer})}var Ko,jK,BK,Xce=R(()=>{Ge(),Bce(),UH(),Ko=Mt,qce(),Jr(),jK=.2,BK={start:0,end:10}});function $ce(e){let{fullSecondStampsContainer:n,sequencePositionFormatter:r,snapToGrid:a,unitSpaceToClippedSpace:c}=e,u="";jq(e,(f,p)=>{let v=a(f),y=c(v);p?u+=UK(r.formatFullUnitForGrid(v),y,"full-unit"):u+=UK(r.formatSubUnitForGrid(v),y,"sub-unit")}),n.innerHTML=u}function UK(e,n,r){return'<span class="'.concat(r,'" style="transform: translate3d(').concat(n.toFixed(1),'px, -50%, 0);">').concat(e,"</span>")}var ch,uh,VK,HK,ud,GK,WK,qK,KK,XK,$K,ZK=R(()=>{ch=Mt,ca(),uh=ee(Oe()),Xe(),Uq(),Ge(),HK=le.div(VK||(VK=Y([`
  position: absolute;
  top: 0;
  left: 0;
  height: 100%;
  pointer-events: none;
`]))),ud={fullUnitStampColor:"#6a6a6a",stampFontSize:"10px",get subUnitStampColor(){return Jy(.2,ud.fullUnitStampColor)}},WK=le.div(GK||(GK=Y([`
  position: absolute;
  top: 0;
  height: 100%;
  left: 0;
  overflow: hidden;
  z-index: 2;
  will-change: transform;
  pointer-events: none;
`]))),KK=le.div(qK||(qK=Y([`
  position: absolute;
  top: 0;
  left: 0;

  & > span {
    position: absolute;
    display: block;
    top: 9px;
    left: -10px;
    color: `,`;
    text-align: center;
    font-size: `,`;
    width: 20px;

    &.full-unit {
      color: `,`;
    }

    &.sub-unit {
      color: `,`;
    }
  }

  pointer-events: none;
`])),ud.fullUnitStampColor,ud.stampFontSize,ud.fullUnitStampColor,ud.subUnitStampColor),XK=({layoutP:e,width:n})=>{let r=(0,uh.useRef)(null),[a,c]=(0,uh.useState)(null);return(0,uh.useLayoutEffect)(()=>{if(a)return(0,ch.prism)(()=>{let u=(0,ch.val)(e.sheet).getSequence();return{fullSecondStampsContainer:a,clippedSpaceRange:(0,ch.val)(e.clippedSpace.range),clippedSpaceWidth:(0,ch.val)(e.clippedSpace.width),unitSpaceToClippedSpace:(0,ch.val)(e.clippedSpace.fromUnitSpace),leftPadding:(0,ch.val)(e.scaledSpace.leftPadding),fps:u.subUnitsPerUnit,sequencePositionFormatter:u.positionFormatter,snapToGrid:f=>u.closestGridPosition(f)}}).onChange(_e().ticker,$ce,!0)},[a,n,e]),uh.default.createElement(HK,{ref:r,style:{width:n+"px"}},uh.default.createElement(WK,{style:{width:n+"px"}},uh.default.createElement(KK,{ref:c})))},$K=XK});function Zce(e){let[n,r]=(0,t5.useState)(!1);return(0,t5.useEffect)(()=>{if(r(!1),!e)return;let a=u=>{u.target===e?r(!0):r(!1)},c=()=>{r(!1)};return e.addEventListener("mouseenter",a),e.addEventListener("mousemove",a),e.addEventListener("mouseleave",c),()=>{r(!1),e.removeEventListener("mouseenter",a),e.removeEventListener("mousemove",a),e.removeEventListener("mouseleave",c)}},[e]),n}var t5,Yce=R(()=>{t5=ee(Oe())});function Jce(e,n){let r=0,[a,c]=e,[u,f]=n;return c-a>f-u?[u,f]:(a<u&&(r=0-a),c>f&&(r=f-c),[a+r,c+r])}var Cl,dd,pi,n5,YK,$2,JK,QK,eX=R(()=>{Cl=Mt,sn(),rr(),Ge(),fh(),Mo(),hi(),nr(),dd=ee(Oe()),Xe(),Gi(),pi={enabled:{backgroundColor:"#2C2F34",stroke:"#646568"},disabled:{backgroundColor:"#282a2cc5",stroke:"#595a5d"},hover:{backgroundColor:"#34373D",stroke:"#C8CAC0"},dragging:{backgroundColor:"#3F444A",stroke:"#C8CAC0"},thumbWidth:9,hitZoneWidth:26,rangeStripMinWidth:30},n5=1e3,$2=le.div(YK||(YK=Y([`
  position: absolute;
  height: `,`px;
  background-color: `,`;
  cursor: grab;
  top: 0;
  left: 0;
  width: `,`px;
  transform-origin: left top;
  &:hover {
    background-color: `,`;
  }
  &.dragging {
    background-color: `,`;
    cursor: grabbing !important;
  }
  `,`;

  /* covers the one pixel space between the focus range strip and the top strip
  of the sequence editor panel, which would have caused that one pixel to act
  like a panel drag zone */
  &:after {
    display: block;
    content: ' ';
    position: absolute;
    bottom: -1px;
    height: 1px;
    left: 0;
    right: 0;
    background: transparent;
    pointer-events: normal;
    z-index: -1;
  }
`])),()=>Il-1,e=>e.enabled?pi.enabled.backgroundColor:pi.disabled.backgroundColor,n5,pi.hover.backgroundColor,pi.dragging.backgroundColor,tr),JK=({layoutP:e})=>{let n=(0,dd.useMemo)(()=>(0,Cl.prism)(()=>{let{projectId:y,sheetId:k}=(0,Cl.val)(e.sheet).address;return(0,Cl.val)(_e().atomP.ahistoric.projects.stateByProjectId[y].stateBySheetId[k].sequence.focusRange)}),[e]),[r,a]=Qn(null),[c]=To(a,{menuItems:()=>{let y=(0,Cl.val)(e.sheet),k=n.getValue();return[{label:"Delete focus range",callback:()=>{_e().tempTransaction(({stateEditors:P})=>{P.studio.ahistoric.projects.stateByProjectId.stateBySheetId.sequence.focusRange.unset(O({},y.address))}).commit()}},{label:k!=null&&k.enabled?"Disable focus range":"Enable focus range",callback:()=>{k!==void 0&&_e().tempTransaction(({stateEditors:P})=>{P.studio.ahistoric.projects.stateByProjectId.stateBySheetId.sequence.focusRange.set(W(O({},y.address),{range:k.range,enabled:!k.enabled}))}).commit()}}]}}),u=In(e.scaledSpace.toUnitSpace),f=In(e.sheet),p=(0,dd.useMemo)(()=>{let y,k;return{debugName:"FocusRangeStrip",onDragStart(P){let T,E=n.getValue();if(!E)return!1;let A=E.range.start,C=E.range.end,L=!1,N=(0,Cl.val)(e.sheet).getSequence();return{onDrag(U){if(E=n.getValue(),E){L=!0;let G=u(U),Q=A+G,J=C+G;J<Q&&(J=Q),[y,k]=Jce([Q,J],[0,N.length]).map(ie=>N.closestGridPosition(ie)),T&&T.discard(),T=_e().tempTransaction(({stateEditors:ie})=>{var xe;ie.studio.ahistoric.projects.stateByProjectId.stateBySheetId.sequence.focusRange.set(W(O({},f.address),{range:{start:y,end:k},enabled:(xe=E==null?void 0:E.enabled)!=null?xe:!0}))})}},onDragEnd(){E&&(L&&T!==void 0?T.commit():T&&T.discard())}}},lockCSSCursorTo:"grabbing"}},[f,u]),[v]=Gr(a,p);return Mc(v,-1),Mn(()=>{let y=n.getValue(),k=(y==null?void 0:y.range)||{start:0,end:0},P=(0,Cl.val)(e.clippedSpace.fromUnitSpace)(k.start),T=(0,Cl.val)(e.clippedSpace.fromUnitSpace)(k.end),E,A;return P<0&&(P=0),T>(0,Cl.val)(e.clippedSpace.width)&&(T=(0,Cl.val)(e.clippedSpace.width)),P>T?(A=0,E=0):(A=P,E=(T-P)/n5),y?dd.default.createElement(dd.default.Fragment,null,c,dd.default.createElement($2,{id:"range-strip",enabled:y.enabled,className:"".concat(v?"dragging":""," ").concat(y.enabled?"enabled":""),ref:r,style:{transform:"translateX(".concat(A,"px) scale(").concat(E,", 1)")}})):dd.default.createElement(dd.default.Fragment,null)},[e,r,n,c,v])},QK=JK}),fd,Ac,tX,nX,rX,iX,oX,aX,sX,r5,Qce=R(()=>{fd=Mt,sn(),Ge(),fh(),ua(),hi(),nr(),Ac=ee(Oe()),Xe(),Gi(),eX(),Ts(),nX=le.div(tX||(tX=Y([`
  position: absolute;
  top: 0;
  // the right handle has to be pulled back by its width since its right side indicates its position, not its left side
  left: `,`px;
  transform-origin: left top;
  width: `,`px;
  height: `,`px;
  z-index: 3;

  --bg: `,`;

  stroke: `,`;
  user-select: none;

  cursor: `,`;

  // no pointer events unless pointer-root is in normal mode _and_ the
  // focus range is enabled
  #pointer-root & {
    pointer-events: none;
  }

  #pointer-root.normal & {
    pointer-events: auto;
  }

  #pointer-root.draggingPositionInSequenceEditor & {
    pointer-events: auto;
    cursor: var(`,`);
  }

  &.dragging {
    pointer-events: none !important;
  }

  // highlight the handle if it's hovered, or the whole strip is hovverd
  `,`:hover ~ &, &:hover {
    --bg: `,`;
    stroke: `,`;
  }

  // highlight the handle when it's being dragged or the whole strip is being dragged.
  // using dragging.dragging to give this selector priority, as it seems to be overridden
  // by the hover selector above
  &.dragging,
  `,`.dragging.dragging ~ & {
    --bg: `,`;
    stroke: `,`;
  }

  #pointer-root.draggingPositionInSequenceEditor &:hover {
    --bg: `,`;
    stroke: #40aaa4;
  }

  background-color: var(--bg);

  // a larger hit zone
  &:before {
    display: block;
    content: ' ';
    position: absolute;
    inset: -8px;
  }
`])),e=>e.type==="start"?0:-pi.thumbWidth,pi.thumbWidth,()=>Il-1,({enabled:e})=>e?pi.enabled.backgroundColor:pi.disabled.backgroundColor,pi.enabled.stroke,e=>e.type==="start"?"w-resize":"e-resize",yc,()=>$2,pi.hover.backgroundColor,pi.hover.stroke,()=>$2,pi.dragging.backgroundColor,pi.dragging.stroke,pi.dragging.backgroundColor),iX=le.div(rX||(rX=Y([`
  position: absolute;
  top: 0;
  bottom: 0;
  pointer-events: none;

  background: linear-gradient(
    `,`deg,
    var(--bg) 0%,
    #ffffff00 100%
  );

  width: 12px;
  left: `,`px;
`])),e=>e.type==="start"?90:-90,e=>e.type==="start"?pi.thumbWidth:-pi.thumbWidth+1),aX=le.div(oX||(oX=Y([`
  position: absolute;
  top: 0;
  bottom: 0;
  pointer-events: none;

  background: linear-gradient(
    `,`deg,
    `,` 0%,
    #ffffff00 100%
  );

  width: 12px;
  left: `,`px;
`])),e=>e.type==="start"?-90:90,()=>d_.backgroundColor,e=>e.type==="start"?-12:pi.thumbWidth),sX=({layoutP:e,thumbType:n})=>{var r;let[a,c]=Qn(null),u=(0,Ac.useMemo)(()=>(0,fd.prism)(()=>{let{projectId:y,sheetId:k}=(0,fd.val)(e.sheet).address;return(0,fd.val)(_e().atomP.ahistoric.projects.stateByProjectId[y].stateBySheetId[k].sequence.focusRange)}),[e]),f=(0,Ac.useMemo)(()=>({debugName:"FocusRangeThumb",onDragStart(){let y,k,P=(0,fd.val)(e.sheet),T={start:0,end:P.getSequence().length},E=u.getValue()||{range:T,enabled:!1},A=E.enabled,C=E.range[n],L=(0,fd.val)(e.scaledSpace.toUnitSpace),N=L(pi.rangeStripMinWidth);return{onDrag(U,G,Q){var J;let ie,xe=Po.checkIfMouseEventSnapToPos(Q,{ignore:c});if(xe==null){let ue=L(U);ie=C+ue}else ie=xe;k=((J=u.getValue())==null?void 0:J.range)||T,n==="start"?ie=Math.max(Math.min(ie,k.end-N),0):ie=Math.min(Math.max(ie,k.start+N),P.getSequence().length);let Me=P.getSequence().closestGridPosition(ie);y!==void 0&&y.discard(),y=_e().tempTransaction(({stateEditors:ue})=>{ue.studio.ahistoric.projects.stateByProjectId.stateBySheetId.sequence.focusRange.set(W(O({},P.address),{range:W(O({},k),{[n]:Me}),enabled:A}))})},onDragEnd(U){U?y==null||y.commit():y==null||y.discard()}}}}),[e]),[p]=Gr(c,f);za(p,"draggingPositionInSequenceEditor",n==="start"?"w-resize":"e-resize");let v=In(u);return Mc(p,(r=v==null?void 0:v.range[n])!=null?r:0),Mn(()=>{let y=u.getValue();if(!y)return null;let{enabled:k}=y,P=y.range[n],T=(0,fd.val)(e.clippedSpace.fromUnitSpace)(P);return(T<0||(0,fd.val)(e.clippedSpace.width)<T)&&(T=-1e4),Ac.default.createElement(nX,W(O(O({ref:a},Po.includePositionSnapAttrs(P)),El(P)),{className:"".concat(p&&"dragging"," ").concat(k&&"enabled"),enabled:k,type:n,style:{transform:"translate3d(".concat(T,"px, 0, 0)")}}),Ac.default.createElement(iX,{type:n,enabled:k}),Ac.default.createElement(aX,{type:n}),Ac.default.createElement("svg",{viewBox:"0 0 9 18",xmlns:"http://www.w3.org/2000/svg"},Ac.default.createElement("line",{x1:"4",y1:"6",x2:"4",y2:"12"}),Ac.default.createElement("line",{x1:"6",y1:"6",x2:"6",y2:"12"})))},[e,a,u,p])},r5=sX});function eue(e,n){let[r,a]=(0,Al.useState)("none");return za(r!=="none","dragging",r==="creating"?"ew-resize":"move"),(0,Al.useMemo)(()=>{let c=()=>({debugName:"FocusRangeZone/focusRangeCreationGestureHandlers",onDragStart(f){let p,v=(0,dh.val)(e.clippedSpace.toUnitSpace),y=(0,dh.val)(e.scaledSpace.toUnitSpace),k=(0,dh.val)(e.sheet),P=k.getSequence(),T=f.target.getBoundingClientRect(),E=v(f.clientX-T.left),A=y(pi.rangeStripMinWidth);return{onDrag(C){let L=y(C),N=E,U=E+L;[N,U]=[Pr(N,0,P.length),Pr(U,0,P.length)].map(G=>P.closestGridPosition(G)),U<N?[N,U]=[Math.max(Math.min(U,N-A),0),N]:C>0&&(U=Math.min(Math.max(U,N+A),P.length)),p&&p.discard(),p=_e().tempTransaction(({stateEditors:G})=>{G.studio.ahistoric.projects.stateByProjectId.stateBySheetId.sequence.focusRange.set(W(O({},k.address),{range:{start:N,end:U},enabled:!0}))})},onDragEnd(C){C&&p!==void 0?p.commit():p&&p.discard()}}},lockCSSCursorTo:"ew-resize"}),u=()=>({debugName:"FocusRangeZone/panelMoveGestureHandlers",onDragStart(){let f,p=n.current,v=n.current.addBoundsHighlightLock();return{onDrag(y,k){let P=W(O({},p.dims),{top:Pr(p.dims.top+k,0,window.innerHeight-dl),left:Pr(p.dims.left+y,-p.dims.width+dl,window.innerWidth-dl)}),T=Qk(P,{width:window.innerWidth,height:window.innerHeight});f==null||f.discard(),f=_e().tempTransaction(({stateEditors:E})=>{E.studio.historic.panelPositions.setPanelPosition({position:T,panelId:p.panelId})})},onDragEnd(y){v(),y?f==null||f.commit():f==null||f.discard()}}},lockCSSCursorTo:"move"});return{debugName:"FocusRangeZone",onDragStart(f){let[p,v]=f.shiftKey?["creating",c().onDragStart(f)]:["moving-panel",u().onDragStart(f)];return a(p),v===!1?!1:{onDrag(y,k,P,T,E){v.onDrag(y,k,P,T,E)},onDragEnd(y){var k;a("none"),(k=v.onDragEnd)==null||k.call(v,y)}}}}},[e,n])}var dh,Al,lX,cX,uX,dX,tue=R(()=>{dh=Mt,sn(),Ge(),fg(),fh(),ua(),hi(),Yce(),r7(),nr(),Jr(),Al=ee(Oe()),Xe(),eX(),Qce(),gc(),cX=le.div(lX||(lX=Y([`
  position: absolute;
  height: `,`px;
  left: 0;
  right: 0;
  box-sizing: border-box;
  /* Use the "grab" cursor if the shift key is up, which is the one used on the top strip of the sequence editor */
  cursor: `,`;
`])),()=>Il,e=>e.isShiftDown?"ew-resize":"move"),uX=({layoutP:e})=>{let[n,r]=Qn(null),a=dg(),c=(0,Al.useRef)(a);c.current=a;let u=(0,Al.useMemo)(()=>(0,dh.prism)(()=>{let{projectId:v,sheetId:y}=(0,dh.val)(e.sheet).address;return(0,dh.val)(_e().atomP.ahistoric.projects.stateByProjectId[v].stateBySheetId[y].sequence.focusRange)}),[e]);Gr(r,eue(e,c));let f=t7("Shift"),p=Zce(r);return(0,Al.useEffect)(()=>{if(!f&&p)return c.current.addBoundsHighlightLock()},[!f&&p]),Mn(()=>Al.default.createElement(cX,{ref:n,isShiftDown:f},Al.default.createElement(QK,{layoutP:e}),Al.default.createElement(r5,{thumbType:"start",layoutP:e}),Al.default.createElement(r5,{thumbType:"end",layoutP:e})),[e,u,f])},dX=uX}),Sg,Il,d_,fX,hX,pX,mX,fh=R(()=>{sn(),Sg=ee(Oe()),Xe(),ZK(),Gi(),rr(),tue(),Il=18,d_={backgroundColor:"#1f2120eb",borderColor:"#1c1e21"},hX=le.div(fX||(fX=Y([`
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  height: `,`px;
  box-sizing: border-box;
  background: `,`;
  border-bottom: 1px solid `,`;
  `,`;
`])),Il,d_.backgroundColor,d_.borderColor,tr),pX=({layoutP:e})=>{let n=In(e.rightDims.width);return Sg.default.createElement(Sg.default.Fragment,null,Sg.default.createElement(hX,O({},El("hide")),Sg.default.createElement($K,{layoutP:e,width:n,height:Il}),Sg.default.createElement(dX,{layoutP:e})))},mX=pX}),hh,gX,vX,yX,bX,_X,xX,wX,SX,nue=R(()=>{hh=ee(Oe()),Xe(),sn(),Ge(),sI(),Uf(),gX=e=>isFinite(e)&&e>0,yX=le.div(vX||(vX=Y([`
  display: flex;
  gap: 8px;
  padding: 4px 8px;
  height: 28px;
  align-items: center;
`]))),_X=le.div(bX||(bX=Y([`
  `,`;
  white-space: nowrap;
`])),Zu),xX=({deltaX:e})=>e*.25,wX=({layoutP:e})=>{let n=In(e.sheet),r=(0,hh.useMemo)(()=>{let c;return{temporarilySetValue(u){c&&(c.discard(),c=void 0),c=_e().tempTransaction(({stateEditors:f})=>{f.coreByProject.historic.sheetsById.sequence.setLength(W(O({},n.address),{length:u}))})},discardTemporaryValue(){c&&(c.discard(),c=void 0)},permanentlySetValue(u){c&&(c.discard(),c=void 0),_e().transaction(({stateEditors:f})=>{f.coreByProject.historic.sheetsById.sequence.setLength(W(O({},n.address),{length:u}))})}}},[e,n]),a=(0,hh.useRef)(null);return(0,hh.useLayoutEffect)(()=>{a.current.focus()},[]),Mn(()=>{let c=n.getSequence().length;return hh.default.createElement(yX,null,hh.default.createElement(_X,null,"Sequence length"),hh.default.createElement(rk,W(O({value:c},r),{isValid:gX,inputRef:a,nudge:xX})))},[n,r,a])},SX=wX});function rue(e,n){let r=(0,Xo.useRef)(n);r.current=n;let a=(0,Xo.useMemo)(()=>({debugName:"LengthIndicator/useDragBulge",lockCSSCursorTo:"ew-resize",onDragStart(u){let f,p=r.current,v=(0,ph.val)(r.current.layoutP.sheet),y=v.getSequence().length,k=(0,ph.val)(p.layoutP.scaledSpace.toUnitSpace);return{onDrag(P,T,E){let A=k(P);f&&(f.discard(),f=void 0),f=_e().tempTransaction(({stateEditors:C})=>{C.coreByProject.historic.sheetsById.sequence.setLength(W(O({},v.address),{length:y+A}))})},onDragEnd(P){P?f&&f.commit():f&&f.discard()}}}}),[]),[c]=Gr(e,a);return Mc(c,-1),[c]}var ph,Xo,i5,f_,EX,hd,kX,TX,MX,PX,CX,AX,IX,DX,OX,RX,LX,iue=R(()=>{sn(),ph=Mt,Xo=ee(Oe()),Xe(),Oc(),fh(),nr(),hi(),Ge(),gl(),Gi(),Qm(),nue(),rr(),yl(),i5=1e3,f_={stripNormal:"#0000006c",stripActive:"#000000"},hd=le.div(EX||(EX=Y([`
  position: absolute;
  top: 0;
  left: 0;
  width: 4px;
  z-index: `,`;
  pointer-events: none;

  &:after {
    display: block;
    content: ' ';
    position: absolute;
    /* top: `,`px; */
    top: 0;
    bottom: 0;
    left: -1px;
    width: 1px;
    background-color: `,`;
  }

  &:hover:after,
  &.dragging:after {
    background-color: `,`;
  }
`])),()=>Ol.lengthIndicatorStrip,Il,f_.stripNormal,f_.stripActive),TX=le.div(kX||(kX=Y([`
  position: absolute;
  top: `,`px;
  width: 100px;
  left: -50px;
  pointer-events: none;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  z-index: 1;
`])),Il-15),PX=le.div(MX||(MX=Y([`
  margin-top: 8px;
  font-size: 10px;
  white-space: nowrap;
  padding: 2px 8px;
  border-radius: 2px;
  `,`;
  cursor: ew-resize;
  color: #464646;
  background-color: #0000004d;
  display: none;

  `,":hover &, ",`.dragging & {
    display: block;
    color: white;
    background-color: `,`;
  }
`])),tr,hd,hd,f_.stripActive),AX=le.div(CX||(CX=Y([`
  font-size: 10px;
  white-space: nowrap;
  padding: 1px 2px;
  border-radius: 2px;
  `,`;
  justify-content: center;
  align-items: center;
  cursor: ew-resize;
  color: #5d5d5d;
  background-color: #191919;

  `,":hover &, ",`.dragging & {
    color: white;
    background-color: `,`;

    & > svg:first-child {
      margin-right: -1px;
    }
  }

  & > svg:first-child {
    margin-right: -4px;
  }
`])),tr,hd,hd,f_.stripActive),DX=le.div(IX||(IX=Y([`
  position: absolute;
  top: 0;
  left: 0;
  background-color: rgb(23 23 23 / 43%);
  width: `,`px;
  z-index: `,`;
  transform-origin: left top;

  `,".dragging ~ &, ",`:hover ~ & {
    background-color: rgb(23 23 23 / 60%);
  }
`])),i5,()=>Ol.lengthIndicatorCover,hd,hd),OX=-1e4,RX=({layoutP:e})=>{let[n,r]=Qn(null),[a]=rue(r,{layoutP:e}),{node:c,toggle:u,close:f}=ml({debugName:"LengthIndicator"},()=>Xo.default.createElement(vl,null,Xo.default.createElement(SX,{layoutP:e,onRequestClose:f})));return Mn(()=>{let p=(0,ph.val)(e.sheet),v=(0,ph.val)(e.rightDims.height),y=p.getSequence(),k=y.length,P=k,T=(0,ph.val)(e.clippedSpace.fromUnitSpace)(P),E=(0,ph.val)(e.clippedSpace.width),A,C;return T>E?(C=0,A=0):(T<0&&(T=0),C=T,A=(E-T)/i5),Xo.default.createElement(Xo.default.Fragment,null,c,Xo.default.createElement(hd,{style:{height:v+"px",transform:"translateX(".concat(C===0?OX:C,"px)")},className:a?"dragging":""},Xo.default.createElement(TX,null,Xo.default.createElement(AX,O({ref:n,onClick:L=>{u(L,r)}},El("hide")),Xo.default.createElement(Koe,null),Xo.default.createElement(Xoe,null)),Xo.default.createElement(PX,null,"Sequence length:"," ",y.positionFormatter.formatBasic(k)))),Xo.default.createElement(DX,{title:"Length",style:{height:v+"px",transform:"translateX(".concat(C,"px) scale(").concat(A,", 1)")}}))},[e,n,a,c])},LX=RX}),o5,Ic,zX,NX,FX,jX,BX,UX,VX,HX,oue=R(()=>{sn(),o5=Mt,Ic=ee(Oe()),Xe(),ZK(),Oc(),fh(),Gi(),NX=le.div(zX||(zX=Y([`
  position: absolute;
  top: 0;
  left: 0;
  margin-top: 0px;
`]))),jX=le.div(FX||(FX=Y([`
  position: absolute;
  top: 16px;
  font-size: `,`;
  color: `,`;
  text-align: center;
  transform: translateX(-50%);
  background: `,`;
  padding: 1px 8px;
  font-variant-numeric: tabular-nums;
  pointer-events: none;
  z-index: `,`;
`])),ud.stampFontSize,ud.fullUnitStampColor,d_.backgroundColor,()=>Ol.currentFrameStamp),UX=le.div(BX||(BX=Y([`
  position: absolute;
  top: 5px;
  left: -0px;
  bottom: 0;
  width: 0.5px;
  background: rgba(100, 100, 100, 0.2);
  pointer-events: none;
`]))),VX=Ic.default.memo(({layoutP:e})=>{let[n,r]=In(k7()),a=In(e.clippedSpace.fromUnitSpace),{sequence:c,formatter:u,clippedSpaceWidth:f}=Mn(()=>{let k=(0,o5.val)(e.sheet).getSequence(),P=(0,o5.val)(e.clippedSpace.width);return{sequence:k,formatter:k.positionFormatter,clippedSpaceWidth:P}},[e]);if(n==-1)return Ic.default.createElement(Ic.default.Fragment,null);let p=r===3?c.closestGridPosition(n):n,v=a(p),y=v>=0&&v<=f;return Ic.default.createElement(Ic.default.Fragment,null,Ic.default.createElement(NX,null,Ic.default.createElement(jX,{style:{opacity:y?1:0,transform:"translate3d(calc(".concat(v,"px - 50%), 0, 0)")}},u.formatForPlayhead(p)),Ic.default.createElement(UX,{posType:r,style:{opacity:y?1:0,transform:"translate3d(".concat(v,"px, 0, 0)")}}))," ")}),HX=VX}),Ms,Io,GX,WX,qX,KX,XX,Z2,$X,a5,ZX,Y2,YX,J2,JX,s5,QX,e$,aue=R(()=>{sn(),Ms=Mt,GS(),ca(),Io=ee(Oe()),Xe(),Oc(),Gi(),rr(),hi(),WX=le.div(GX||(GX=Y([`
  --threadHeight: 6px;
  --bg-inactive: #32353b;
  --bg-active: #5b5c5d;
  position: absolute;
  height: 0;
  width: 100%;
  left: 12px;
  /* bottom: 8px; */
  z-index: `,`;
  `,`
`])),()=>Ol.horizontalScrollbar,tr),KX=le.div(qX||(qX=Y([`
  position: relative;
  top: 0;
  left: 0;
  width: 100%;
  height: var(--threadHeight);
`]))),Z2=le.div(XX||(XX=Y([`
  position: absolute;
  height: 5px;
  background: var(--bg-inactive);
  cursor: ew-resize;
  z-index: 2;

  &:hover,
  &:active {
    background: var(--bg-active);
  }

  &:after {
    `,`;
    display: block;
    content: ' ';
  }
`])),dA("absolute","-4px")),a5=le.div($X||($X=Y([`
  position: absolute;
  height: 5px;
  width: 7px;
  left: 0;
  z-index: 2;
  top: 0;
  bottom: 0;
  display: block;

  &:hover:before {
    background: var(--bg-active);
  }

  &:before {
    `,`;
    display: block;
    content: ' ';
    background: var(--bg-inactive);
    border-radius: 0 2px 2px 0;
  }

  &:after {
    `,`;
    display: block;
    content: ' ';
  }
`])),dA("absolute","0"),dA("absolute","-4px")),Y2=le(a5)(ZX||(ZX=Y([`
  left: calc(-1 * 7px);
  cursor: w-resize;
  &:before {
    transform: scaleX(-1);
  }
`]))),J2=le(a5)(YX||(YX=Y([`
  cursor: e-resize;
  left: 0px;
`]))),s5=le.div(JX||(JX=Y([`
  display: `,`;
  position: absolute;
  top: -20px;
  left: 4px;
  padding: 0 4px;
  transform: translateX(-50%);
  background: #131d1f;
  border-radius: 4px;
  color: #fff;
  font-size: 10px;
  line-height: 18px;
  text-align: center;

  `,`:hover &,
  `,`:hover &,
  `,":hover ~ ",` &,
  `,":hover ~ ",` & {
    display: block;
  }
`])),e=>e.active?"block":"none",Y2,J2,Z2,Y2,Z2,J2),QX=({layoutP:e})=>{let n=(0,Io.useCallback)(L=>L.toFixed(2),[]),r=(0,Io.useMemo)(()=>(0,Ms.prism)(()=>{let L=(0,Ms.val)(e.rightDims.width)-25,N=(0,Ms.val)(e.clippedSpace.range),U=(0,Ms.val)(e.sheet).getSequence().length,G=Math.max(N.end,U),Q=N.start/G*L,J=N.end/G*L;return{rightWidth:L,clippedSpaceRange:N,sequenceLength:U,assumedLengthOfSequence:G,rangeStartX:Q,rangeEndX:J,bottom:(0,Ms.val)(e.horizontalScrollbarDims.bottom)}}),[e]),{rangeStartX:a,rangeEndX:c,clippedSpaceRange:u,bottom:f}=In(r),[p,v]=(0,Io.useState)("nothing"),y=(0,Io.useMemo)(()=>{let L=(0,Ms.val)(r),N=()=>{L=(0,Ms.val)(r)},U=G=>G/L.rightWidth*L.assumedLengthOfSequence;return{onRangeDragStart(){return N(),{onDrag(G){v("both");let Q=U(G),J=ac(L.clippedSpaceRange,ie=>ie+Q);(0,Ms.val)(e.clippedSpace.setRange)(J)},onDragEnd(){v("nothing")}}},onRangeStartDragStart(){return N(),{onDrag(G){v("start");let Q=U(G),J={start:L.clippedSpaceRange.start+Q,end:L.clippedSpaceRange.end};J.start>J.end-1&&(J.start=J.end-1),J.start<=0&&(J.start=0),(0,Ms.val)(e.clippedSpace.setRange)(J)},onDragEnd(){v("nothing")}}},onRangeEndDragStart(){return N(),{onDrag(G){v("end");let Q=U(G),J={start:L.clippedSpaceRange.start,end:L.clippedSpaceRange.end+Q};J.end<J.start+1&&(J.end=J.start+1),J.end>=L.assumedLengthOfSequence&&(J.end=L.assumedLengthOfSequence),(0,Ms.val)(e.clippedSpace.setRange)(J)},onDragEnd(){v("nothing")}}}}},[e,r]),[k,P]=(0,Io.useState)(null);Gr(k,{debugName:"HorizontalScrollbar/onRangeDrag",onDragStart:y.onRangeDragStart,lockCSSCursorTo:"ew-resize"});let[T,E]=(0,Io.useState)(null);Gr(T,{debugName:"HorizontalScrollbar/onRangeStartDrag",onDragStart:y.onRangeStartDragStart,lockCSSCursorTo:"w-resize"});let[A,C]=(0,Io.useState)(null);return Gr(A,{debugName:"HorizontalScrollbar/onRangeEndDrag",onDragStart:y.onRangeEndDragStart,lockCSSCursorTo:"e-resize"}),Io.default.createElement(WX,O({style:{bottom:f+8+"px"}},El("hide")),Io.default.createElement(KX,null,Io.default.createElement(Z2,{ref:P,style:{width:"".concat(c-a,"px"),transform:"translate3d(".concat(a,"px, 0, 0)")}}),Io.default.createElement(Y2,{ref:E,style:{transform:"translate3d(".concat(a,"px, 0, 0)")}},Io.default.createElement(s5,{active:p==="both"||p==="start"},n(u.start))),Io.default.createElement(J2,{ref:C,style:{transform:"translate3d(".concat(c,"px, 0, 0)")}},Io.default.createElement(s5,{active:p==="both"||p==="end"},n(u.end)))))},e$=QX}),t$,n$,r$,i$,o$,sue=R(()=>{t$=ee(Oe()),Xe(),r$=le.div(n$||(n$=Y([`
  position: absolute;
  inset: `,`px;
`])),e=>e.room*-1),i$=e=>t$.default.createElement(r$,{room:e.room}),o$=i$}),Q2,eT,l5,a$,s$,l$,c$,u$,d$,f$,h$,lue=R(()=>{Xe(),sn(),sI(),Uf(),Q2=ee(Oe()),eT=ee(Oe()),l5=Mt,nm(),a$=e=>isFinite(e)&&e>=0,l$=le.div(s$||(s$=Y([`
  display: flex;
  gap: 8px;
  padding: 4px 8px;
  height: 28px;
  align-items: center;
`]))),u$=le.div(c$||(c$=Y([`
  `,`;
  white-space: nowrap;
`])),Zu),d$=({deltaX:e})=>e*.25,f$=({layoutP:e,onRequestClose:n})=>{let r=(0,l5.val)(e.sheet),a=r.getSequence(),c=(0,Q2.useMemo)(()=>{let f,p=a.position;return{temporarilySetValue(v){f&&(f=void 0),f=Pr(v,0,a.length),a.position=f},discardTemporaryValue(){f&&(f=void 0,a.position=p,n("discardTemporaryValue"))},permanentlySetValue(v){f&&(f=void 0),a.position=Pr(v,0,a.length),n("permanentlySetValue")}}},[e,a]),u=(0,Q2.useRef)(null);return(0,Q2.useLayoutEffect)(()=>{u.current.focus()},[]),Mn(()=>{let f=r.getSequence(),p=Number((0,l5.val)(f.pointer.position).toFixed(3));return eT.default.createElement(l$,null,eT.default.createElement(u$,null,"Sequence position"),eT.default.createElement(rk,W(O({value:p},c),{isValid:a$,inputRef:u,nudge:d$})))},[r,c,u])},h$=f$}),p$,cue=R(()=>{p$=typeof navigator!="undefined"&&navigator.platform.toUpperCase().indexOf("MAC")>=0}),m$,uue=R(()=>{cue(),m$=e=>p$?e.metaKey===!0:e.ctrlKey===!0});function due(){tT=!1}function fue(){tT=!0}function hue(){let e=_e();(0,g$.useEffect)(()=>{let n=r=>{let a=r.composedPath()[0];if(!(a&&(a.tagName==="INPUT"||a.tagName==="TEXTAREA"))){if(r.key==="z"||r.key==="Z"||r.code==="KeyZ")if(m$(r))r.shiftKey===!0?e.redo():e.undo();else return;else if(r.code==="Space"&&!r.shiftKey&&!r.metaKey&&!r.altKey&&!r.ctrlKey){if(!tT)return;let c=goe();if(c)if(c.playing)c.pause();else{let{projectId:u,sheetId:f}=c.address,p=(0,Ps.prism)(()=>{let k=(0,Ps.val)(_e().atomP.ahistoric.projects.stateByProjectId[u].stateBySheetId[f].sequence.focusRange);return Ps.prism.memo("shouldFollowFocusRange",()=>{let P=c.position;if(k){let T=P>=k.range.start&&P<=k.range.end;return k.enabled?!!T:!0}else return!0},[])&&k&&k.enabled?{range:[k.range.start,k.range.end],isFollowingARange:!0}:{range:[0,(0,Ps.val)(c.pointer.length)],isFollowingARange:!1}}),v=c.playDynamicRange((0,Ps.prism)(()=>(0,Ps.val)(p).range),_e().ticker),y=c5(c);v.finally(()=>{y.set(void 0)}),y.set(p)}else return}else if(r.altKey&&(r.key==="\\"||r.code==="Backslash"||r.code==="IntlBackslash"))e.transaction(({stateEditors:c,drafts:u})=>{c.studio.ahistoric.setVisibilityState(u.ahistoric.visibilityState==="everythingIsHidden"?"everythingIsVisible":"everythingIsHidden")});else return;r.preventDefault(),r.stopPropagation()}};return window.addEventListener("keydown",n),()=>{window.removeEventListener("keydown",n)}},[])}var g$,Ps,tT,c5,v$,u5=R(()=>{g$=ee(Oe()),Ge(),uue(),Wu(),Ps=Mt,xk(),tT=!0,c5=bb(e=>new Ps.Atom(void 0)),v$=bb(e=>(0,Ps.prism)(()=>{let n=c5(e).prism.getValue();if(n)return n.getValue().isFollowingARange;{let{projectId:r,sheetId:a}=e.address,c=(0,Ps.val)(_e().atomP.ahistoric.projects.stateByProjectId[r].stateBySheetId[a].sequence.focusRange);if(!c||!c.enabled)return!1;let u=(0,Ps.val)(e.pointer.position);return u>=c.range.start&&u<=c.range.end}}))});function pue(e,n){return To(e,{menuItems(){return[{label:"Place marker",callback:()=>{_e().transaction(({stateEditors:r})=>{let a=(0,Dl.val)(n.layoutP.sheet),c=a.getSequence();r.studio.historic.projects.stateByProjectId.stateBySheetId.sequenceEditor.replaceMarkers({sheetAddress:a.address,markers:[{id:ese(),position:c.position}],snappingFunction:c.closestGridPosition})})}}]}})}var Dl,Ha,y$,mh,b$,_$,x$,d5,w$,S$,E$,k$,T$,M$,mue=R(()=>{sue(),hi(),nr(),sn(),Dl=Mt,nm(),Ha=ee(Oe()),Xe(),Oc(),Gi(),rr(),gl(),yl(),lue(),u5(),ua(),Mo(),Ge(),Sc(),Ts(),Zf(),mh=le.div(y$||(y$=Y([`
  --thumbColor: #00e0ff;
  position: absolute;
  top: 0;
  left: 0;
  width: 5px;
  height: 100%;
  z-index: `,`;
  pointer-events: none;

  display: `,`;
`])),()=>Ol.playhead,e=>e.isVisible?"block":"none"),_$=le.div(b$||(b$=Y([`
  position: absolute;
  top: 8px;
  width: 0;
  height: calc(100% - 8px);
  border-left: 1px solid #27e0fd;
  z-index: 10;
  pointer-events: none;

  #pointer-root.draggingPositionInSequenceEditor &:not(.seeking) {
    /* pointer-events: auto; */
    /* cursor: var(`,`); */

    &:after {
      position: absolute;
      inset: -8px;
      display: block;
      content: ' ';
    }
  }
`])),yc),d5=le.div(x$||(x$=Y([`
  background-color: var(--thumbColor);
  position: absolute;
  width: 5px;
  height: 13px;
  top: -4px;
  left: -2px;
  z-index: 11;
  cursor: ew-resize;
  --sunblock-color: #1f2b2b;

  `,`;

  `,`.seeking > & {
    pointer-events: none !important;
  }

  #pointer-root.draggingPositionInSequenceEditor
    `,`:not(.seeking)
    > & {
    pointer-events: auto;
    cursor: var(`,`);
  }

  `,`.playheadattachedtofocusrange > & {
    top: -8px;
    --sunblock-color: #005662;
    &:before,
    &:after {
      border-bottom-width: 8px;
    }
  }

  &:before {
    position: absolute;
    display: block;
    content: ' ';
    left: -2px;
    width: 0;
    height: 0;
    border-bottom: 4px solid var(--sunblock-color);
    border-left: 2px solid transparent;
  }

  &:after {
    position: absolute;
    display: block;
    content: ' ';
    right: -2px;
    width: 0;
    height: 0;
    border-bottom: 4px solid var(--sunblock-color);
    border-right: 2px solid transparent;
  }
`])),tr,mh,mh,yc,mh),S$=le.div(w$||(w$=Y([`
  position: absolute;
  left: 1px;
  right: 1px;
  top: 13px;
  border-top: 3px solid var(--thumbColor);
  border-right: 1px solid transparent;
  border-left: 1px solid transparent;
  pointer-events: none;

  /* `,`.playheadattachedtofocusrange & {
    top: 10px;
    &:before,
    &:after {
      height: 15px;
    }
  } */

  &:before {
    position: absolute;
    display: block;
    content: ' ';
    top: -4px;
    left: -2px;
    height: 8px;
    width: 2px;
    background: none;
    border-radius: 0 100% 0 0;
    border-top: 1px solid var(--thumbColor);
    border-right: 1px solid var(--thumbColor);
  }

  &:after {
    position: absolute;
    display: block;
    content: ' ';
    top: -4px;
    right: -2px;
    height: 8px;
    width: 2px;
    background: none;
    border-radius: 100% 0 0 0;
    border-top: 1px solid var(--thumbColor);
    border-left: 1px solid var(--thumbColor);
  }
`])),mh),k$=le.div(E$||(E$=Y([`
  display: none;
  position: absolute;
  top: -20px;
  left: 4px;
  padding: 0 2px;
  transform: translateX(-50%);
  background: #1a1a1a;
  border-radius: 4px;
  color: #fff;
  font-size: 10px;
  line-height: 18px;
  text-align: center;
  `,":hover &, ",`.seeking & {
    display: block;
  }
`])),d5,mh),T$=({layoutP:e})=>{let[n,r]=Qn(null),{node:a,toggle:c,close:u}=ml({debugName:"Playhead"},()=>Ha.default.createElement(vl,null,Ha.default.createElement(h$,{layoutP:e,onRequestClose:u}))),f=(0,Ha.useMemo)(()=>({debugName:"RightOverlay/Playhead",onDragStart(){let y=(0,Dl.val)(e.sheet).getSequence(),k=y.position,P=(0,Dl.val)(e.scaledSpace.toUnitSpace),T=(0,Dl.val)(e.seeker.setIsSeeking);return T(!0),XD(),{onDrag(E,A,C){var L;let N=P(E);y.position=(L=Po.checkIfMouseEventSnapToPos(C,{ignore:r}))!=null?L:Pr(k+N,0,y.length)},onDragEnd(E){T(!1),$f()},onClick(E){c(E,n.current)}}}}),[e,r]),[p]=Gr(r,f);za(p,"draggingPositionInSequenceEditor","ew-resize"),Mc(In(e.seeker.isSeeking)||p,-1);let[v]=pue(r,{layoutP:e});return Mn(()=>{let y=(0,Dl.val)(e.seeker.isSeeking),k=(0,Dl.val)(e.sheet).getSequence(),P=(0,Dl.val)(v$(k)),T=k.positionPrism.getValue(),E=(0,Dl.val)(e.clippedSpace.fromUnitSpace)(T),A=E>=0&&E<=(0,Dl.val)(e.clippedSpace.width);return Ha.default.createElement(Ha.default.Fragment,null,v,a,Ha.default.createElement(mh,O({isVisible:A,style:{transform:"translate3d(".concat(E,"px, 0, 0)")},className:"".concat(y&&"seeking"," ").concat(P&&"playheadattachedtofocusrange")},El("hide")),Ha.default.createElement(d5,O({ref:n},Po.includePositionSnapAttrs(T)),Ha.default.createElement(o$,{room:8}),Ha.default.createElement(S$,null),Ha.default.createElement(k$,null,k.positionFormatter.formatForPlayhead(k.closestGridPosition(T)))),Ha.default.createElement(_$,W(O({},Po.includePositionSnapAttrs(T)),{className:y?"seeking":""}))))},[e,n,a])},M$=T$}),gh,h_,nT,P$,C$,A$,I$,gue=R(()=>{gh=Mt,sn(),Ge(),fh(),h_=ee(Oe()),Xe(),nT=1e3,C$=le.div(P$||(P$=Y([`
  position: absolute;
  top: `,`px;
  left: 0;
  opacity: 0.15;
  width: `,`px;
  transform-origin: top left;
  pointer-events: none;
  background-color: `,`;
`])),Il,nT,e=>e.enabled?"#000000":"transparent"),A$=({layoutP:e})=>{let n=(0,h_.useMemo)(()=>(0,gh.prism)(()=>{let{projectId:r,sheetId:a}=(0,gh.val)(e.sheet).address;return(0,gh.val)(_e().atomP.ahistoric.projects.stateByProjectId[r].stateBySheetId[a].sequence.focusRange)}),[e]);return Mn(()=>{let r=n.getValue();if(!r||!r.enabled)return null;let a=(0,gh.val)(e.rightDims.height)-Il,c=(0,gh.val)(e.clippedSpace.fromUnitSpace),u=(0,gh.val)(e.clippedSpace.width),f=[];{let p=0,v=c(r.range.start),y,k;p>v?(k=0,y=0):(v>u&&(v=u),k=p,y=(v-p)/nT),f.push({translateX:k,scaleX:y})}{let p=c(r.range.end),v=u,y,k;p>v?(k=0,y=0):(p<0&&(p=0),k=p,y=(v-p)/nT),f.push({translateX:k,scaleX:y})}return h_.default.createElement(h_.default.Fragment,null,f.map(({translateX:p,scaleX:v},y)=>h_.default.createElement(C$,{key:"curtain-".concat(y),enabled:!0,style:{height:"".concat(a,"px"),transform:"translateX(".concat(p,"px) scaleX(").concat(v,")")}})))},[e,n])},I$=A$}),Eg,D$,O$,R$,L$,z$,vue=R(()=>{Eg=ee(Oe()),Xe(),sn(),Ge(),Uf(),pI(),O$=le.div(D$||(D$=Y([`
  display: flex;
  gap: 8px;
  /* padding: 4px 8px; */
  height: 28px;
  align-items: center;
`]))),le.div(R$||(R$=Y([`
  `,`;
  white-space: nowrap;
`])),Zu),L$=({layoutP:e,marker:n})=>{var r;let a=In(e.sheet),c=(0,Eg.useMemo)(()=>{let f;return{temporarilySetValue(p){f&&(f.discard(),f=void 0),f=_e().tempTransaction(({stateEditors:v})=>{v.studio.historic.projects.stateByProjectId.stateBySheetId.sequenceEditor.updateMarker({sheetAddress:a.address,markerId:n.id,label:p})})},discardTemporaryValue(){f&&(f.discard(),f=void 0)},permanentlySetValue(p){f&&(f.discard(),f=void 0),_e().transaction(({stateEditors:v})=>{v.studio.historic.projects.stateByProjectId.stateBySheetId.sequenceEditor.updateMarker({sheetAddress:a.address,markerId:n.id,label:p})})}}},[e,a]),u=(0,Eg.useRef)(null);return(0,Eg.useLayoutEffect)(()=>{u.current.focus()},[]),Eg.default.createElement(O$,null,Eg.default.createElement(ok,W(O({value:(r=n.label)!=null?r:""},c),{isValid:()=>!0,inputRef:u})))},z$=L$});function yue(e,n){return To(e,{menuItems(){return[{label:"Remove marker",callback:()=>{_e().transaction(({stateEditors:r})=>{r.studio.historic.projects.stateByProjectId.stateBySheetId.sequenceEditor.removeMarker({sheetAddress:n.sheetAddress,markerId:n.markerId})})}}]}})}function bue(e,n){let r=(0,Do.useRef)(n);r.current=n;let a=(0,Do.useMemo)(()=>({debugName:"MarkerDot/useDragMarker (".concat(n.marker.id,")"),onDragStart(u){let f=r.current.marker,p=(0,rT.val)(n.layoutP.scaledSpace.toUnitSpace),v;return XD(),{onDrag(y,k,P){var T;let E=f,A=Math.max((T=Po.checkIfMouseEventSnapToPos(P,{ignore:e}))!=null?T:E.position+p(y),0);v==null||v.discard(),v=_e().tempTransaction(({stateEditors:C})=>{C.studio.historic.projects.stateByProjectId.stateBySheetId.sequenceEditor.replaceMarkers({sheetAddress:(0,rT.val)(n.layoutP.sheet.address),markers:[W(O({},E),{position:A})],snappingFunction:(0,rT.val)(n.layoutP.sheet).getSequence().closestGridPosition})})},onDragEnd(y){y?v==null||v.commit():v==null||v.discard(),$f()}}}}),[]),[c]=Gr(e,a);return Mc(c,n.marker.position),za(c,"draggingPositionInSequenceEditor draggingMarker","ew-resize"),[c]}var rT,Do,f5,h5,N$,F$,j$,B$,U$,iT,V$,H$,G$,W$,q$,K$,_ue=R(()=>{rT=Mt,sn(),Ge(),ua(),Mo(),nr(),Do=ee(Oe()),Xe(),Gi(),hi(),Oc(),Ts(),c2(),D7(),Zf(),gl(),yl(),vue(),f5=12,h5=12,N$=f5*2,F$=h5*2,B$=le.div(j$||(j$=Y([`
  position: absolute;
  // below the sequence ruler "top bar"
  top: 18px;
  z-index: `,`;
`])),()=>Ol.marker),iT=le.div(U$||(U$=Y([`
  position: absolute;
  `,`
  pointer-events: none;
`])),ja(f5,h5)),V$=Do.default.memo(()=>Do.default.createElement(iT,{children:Do.default.createElement("svg",{width:"100%",height:"100%",viewBox:"0 0 12 12",fill:"none",xmlns:"http://www.w3.org/2000/svg"},Do.default.createElement("path",{d:"M12 5H0V7H2.71973L5.96237 10.2426L9.20501 7H12V5Z",fill:"#40AAA4"}))})),G$=le.div(H$||(H$=Y([`
  z-index: 1;
  cursor: ew-resize;

  `,`

  // :not dragging marker to ensure that markers don't snap to other markers
  // this works because only one marker track (so this technique is not used by keyframes...)
  #pointer-root.draggingPositionInSequenceEditor:not(.draggingMarker) & {
    `,`
  }

  // "All instances of this component <Mark/> inside #pointer-root when it has the .draggingPositionInSequenceEditor class"
  // ref: https://styled-components.com/docs/basics#pseudoelements-pseudoselectors-and-nesting
  #pointer-root.draggingPositionInSequenceEditor:not(.draggingMarker) &,
  #pointer-root.draggingPositionInSequenceEditor
    &.`,` {
    pointer-events: auto;
    cursor: var(`,`);
  }

  &:hover
    + `,`,
    // notice , "or" in CSS
    &.`,`
    + `,` {
    `,`
  }
`])),kl.CSS,kl.CSS_WHEN_SOMETHING_DRAGGING,kl.BEING_DRAGGED_CLASS,yc,iT,kl.BEING_DRAGGED_CLASS,iT,ja(N$,F$)),W$=({layoutP:e,markerId:n})=>{let r=In(e.sheet.address),a=In(_e().atomP.historic.projects.stateByProjectId[r.projectId].stateBySheetId[r.sheetId].sequenceEditor.markerSet.byId[n]);if(!a)return null;let c=In(e.clippedSpace.width),u=In(e.clippedSpace.fromUnitSpace)(a.position),f=u<=0||u>c,p=f?-1e4:u,v=f?0:1;return Do.default.createElement(B$,{style:{transform:"translateX(".concat(p,"px) scale(").concat(v,")")}},Do.default.createElement(K$,{marker:a,layoutP:e}))},q$=W$,K$=({layoutP:e,marker:n})=>{let r=In(e.sheet.address),[a,c]=Qn(null),[u]=yue(c,{sheetAddress:r,markerId:n.id}),[f]=bue(c,{layoutP:e,marker:n}),{node:p,toggle:v,close:y}=ml({debugName:"MarkerPopover"},()=>Do.default.createElement(vl,null,Do.default.createElement(z$,{marker:n,layoutP:e,onRequestClose:y})));return Do.default.createElement(Do.default.Fragment,null,u,p,Do.default.createElement(G$,O({title:n.label?"Marker: ".concat(n.label):"Marker",ref:a,onClick:k=>{v(k,a.current)}},kl.reactProps({isDragging:f,position:n.position}))),Do.default.createElement(V$,null))}}),oT,X$,$$,xue=R(()=>{sn(),Ge(),oT=ee(Oe()),_ue(),X$=({layoutP:e})=>{let n=In(e.sheet.address),r=_e().atomP.historic.projects.stateByProjectId[n.projectId].stateBySheetId[n.sheetId].sequenceEditor.markerSet,a=In(r.allIds);return oT.default.createElement(oT.default.Fragment,null,a&&Object.keys(a).map(c=>oT.default.createElement(q$,{key:c,layoutP:e,markerId:c})))},$$=X$}),Z$,Dc,Y$,J$,Q$,eZ,wue=R(()=>{Oc(),sn(),Z$=Mt,Dc=ee(Oe()),Xe(),iue(),oue(),aue(),mue(),fh(),gue(),xue(),J$=le.div(Y$||(Y$=Y([`
  position: absolute;
  top: 0;
  right: 0;
  bottom: 0;
  z-index: `,`;
  overflow: visible;
  pointer-events: none;
`])),()=>Ol.rightOverlay),Q$=({layoutP:e})=>Mn(()=>{let n=(0,Z$.val)(e.rightDims.width);return Dc.default.createElement(J$,{style:{width:n+"px"}},Dc.default.createElement(M$,{layoutP:e}),Dc.default.createElement(e$,{layoutP:e}),Dc.default.createElement(HX,{layoutP:e}),Dc.default.createElement(mX,{layoutP:e}),Dc.default.createElement($$,{layoutP:e}),Dc.default.createElement(LX,{layoutP:e}),Dc.default.createElement(I$,{layoutP:e}))},[e]),eZ=Q$}),tZ,aT,nZ,rZ,iZ,oZ,Sue=R(()=>{tZ=Mt,sn(),Ge(),aT=ee(Oe()),Xe(),Qm(),Gi(),rZ=le.button(nZ||(nZ=Y([`
  outline: none;
  background-color: #1c1d21;
  border: 1px solid #191919;
  border-radius: 2px;
  display: flex;
  bottom: 14px;
  right: 8px;
  z-index: 1;
  position: absolute;

  padding: 4px 8px;
  display: flex;
  color: #656d77;
  line-height: 20px;
  font-size: 10px;

  &:hover {
    color: white;
  }

  & > svg {
    transition: transform 0.3s;
    transform: rotateZ(0deg);
  }

  &:hover > svg {
    transform: rotateZ(-20deg);
  }

  &.open > svg {
    transform: rotateZ(-180deg);
  }

  &.open:hover > svg {
    transform: rotateZ(-160deg);
  }
`]))),iZ=({layoutP:e})=>{let n=In(e.graphEditorDims.isOpen),r=(0,aT.useCallback)(()=>{let a=(0,tZ.val)(e.graphEditorDims.isOpen);_e().transaction(({stateEditors:c})=>{c.studio.historic.panels.sequenceEditor.graphEditor.setIsOpen({isOpen:!a})})},[e]);return aT.default.createElement(rZ,O({onClick:r,title:"Toggle graph editor",className:n?"open":""},El("hide")),aT.default.createElement(dae,null))},oZ=iZ}),Cs,zr,aZ,sZ,lZ,cZ,Ol,uZ,dZ,fZ,hZ,pZ,mZ,gZ,vZ,yZ,Oc=R(()=>{Wu(),sn(),UH(),Cs=Mt,zr=ee(Oe()),Xe(),Fce(),W2(),Xce(),wue(),fg(),q9(),xH(),Gi(),Tn(),Jr(),Sue(),gc(),Hf(),sZ=le(OD)(aZ||(aZ=Y([`
  z-index: `,`;
  box-shadow: 2px 2px 0 rgb(0 0 0 / 11%);
`])),Wm.sequenceEditorPanel),cZ=le.div(lZ||(lZ=Y([`
  background-color: rgba(40, 43, 47, 0.99);
  position: absolute;
  left: 0;
  top: 0;
  bottom: 0;
  z-index: -1;
  pointer-events: none;
`]))),Ol=(()=>{let e={rightBackground:0,scrollableArea:0,rightOverlay:0,lengthIndicatorCover:0,lengthIndicatorStrip:0,playhead:0,currentFrameStamp:0,marker:0,horizontalScrollbar:0},n=-1;for(let r of Object.keys(e))e[r]=n,n++;return e})(),dZ=le(MD)(uZ||(uZ=Y([`
  position: absolute;
  left: 0;
  top: 0;
  z-index: 1;
`]))),fZ={edges:{left:{from:"screenLeft",distance:.1},right:{from:"screenRight",distance:.2},top:{from:"screenBottom",distance:.4},bottom:{from:"screenBottom",distance:.01}}},hZ={width:800,height:200},pZ=e=>zr.default.createElement(TD,{panelId:"sequenceEditor",defaultPosition:fZ,minDims:hZ},zr.default.createElement(mZ,null)),mZ=()=>{let{dims:e}=dg(),[n,r]=(0,zr.useState)(null);return l8(n),Mn(()=>{let a=Cs.prism.memo("panelSize",()=>{let T=e.width,E=e.height;return{width:T,height:E,widthWithoutBorder:T-2,heightWithoutBorder:E-4,screenX:e.left,screenY:e.top}},[e]),c=xo(Gu().filter(T=>Yt(T)||pt(T)).map(T=>pt(T)?T.sheet:T));if(xo(c.map(T=>T.template)).length!==1)return zr.default.createElement(zr.default.Fragment,null);let u=c[0];if(!u)return zr.default.createElement(zr.default.Fragment,null);let f=LD("panelSizeP",a).pointer,p=Cs.prism.memo("key",()=>JSON.stringify(u.address),[u]),v=Cs.prism.memo("layout",()=>Kce(u,f),[u,f]).getValue();if((0,Cs.val)(v.tree.children).length===0)return zr.default.createElement(zr.default.Fragment,null);let y=Cs.prism.memo("containerRef",yZ,[]),k=(0,Cs.val)(v.graphEditorDims.isAvailable),P=(0,Cs.val)(v.graphEditorDims.isOpen);return zr.default.createElement(sZ,{ref:T=>{y(T),T!==n&&r(T)}},zr.default.createElement(cZ,{style:{width:"".concat((0,Cs.val)(v.leftDims.width),"px")}}),zr.default.createElement(P7,{layoutP:v},zr.default.createElement(gZ,{layoutP:v}),zr.default.createElement(RK,{key:p+"-dopeSheet",layoutP:v}),P&&zr.default.createElement(nK,{key:p+"-graphEditor",layoutP:v}),k&&zr.default.createElement(oZ,{layoutP:v}),zr.default.createElement(eZ,{layoutP:v})))},[e,n])},gZ=({layoutP:e})=>Mn(()=>{let n=(0,Cs.val)(e.sheet);return zr.default.createElement(dZ,{style:{width:(0,Cs.val)(e.leftDims.width)}},zr.default.createElement(RA,null,zr.default.createElement(Hu,null,n.address.sheetId," "),zr.default.createElement(ob,null,":","\xA0"),zr.default.createElement(Hu,null,n.address.sheetInstanceId," "),zr.default.createElement(ob,null,"\xA0",">","\xA0"),zr.default.createElement(Hu,null,"Sequence")))},[e]),vZ=pZ,yZ=()=>{let e=null,n={passive:!1,capture:!1},r=a=>{Math.abs(a.deltaY)<Math.abs(a.deltaX)&&(a.preventDefault(),a.stopPropagation())};return a=>{e!==a&&e&&e.removeEventListener("wheel",r,n),e=a,a&&a.addEventListener("wheel",r,n)}}}),vh,bZ,_Z,Eue=R(()=>{Toe(),SD(),vh=ee(Oe()),Ge(),sn(),Bse(),Oc(),bZ=()=>{let e=In(_e().paneManager.allPanesD),n=Object.entries(e).map(([r,a])=>vh.default.createElement(BH,{key:"pane-".concat(r),paneInstance:a}));return vh.default.createElement(vh.default.Fragment,null,n,vh.default.createElement(CF,null),vh.default.createElement(U9,null),vh.default.createElement(vZ,null))},_Z=bZ}),xZ,wZ,SZ,kue=R(()=>{Xe(),Uk(),wZ=le(lg)(xZ||(xZ=Y([`
  --popover-outer-stroke: #e11c1c;
  --popover-inner-stroke: #2c1c1c;
  --popover-bg: #2c1c1c;
  pointer-events: none !important;
`]))),SZ=wZ}),Tue=se((e,n)=>{var r,a;r=[],a=[];function c(u,f,p){var v,y,k,P,T,E,A,C;if(u===f)return 0;if(v=u.length,y=f.length,v===0)return y;if(y===0)return v;for(p&&(u=u.toLowerCase(),f=f.toLowerCase()),A=0;A<v;)a[A]=u.charCodeAt(A),r[A]=++A;for(C=0;C<y;)for(k=f.charCodeAt(C),P=T=C++,A=-1;++A<v;)E=k===a[A]?T:T+1,T=r[A],r[A]=P=T>P?E>P?P+1:E:E>T?T+1:E;return P}n.exports=c}),Mue=se((e,n)=>{var r=Tue();function a(){var c,u,f,p,v,y=0,k=arguments[0],P=arguments[1],T=P.length,E=arguments[2];E&&(p=E.threshold,v=E.ignoreCase),p===void 0&&(p=0);for(var A=0;A<T;++A)v?u=r(k,P[A],!0):u=r(k,P[A]),u>k.length?c=1-u/P[A].length:c=1-u/k.length,c>y&&(y=c,f=P[A]);return y>=p?f:null}n.exports=a});function Pue(e,n,r="Did you mean ",a="?"){let c=(0,EZ.default)(e,n,{threshold:.7});return c?r+JSON.stringify(c)+a:""}var EZ,Cue=R(()=>{EZ=ee(Mue())});function kZ(e,n){return e.length<=n?e:e.substr(0,n-3)+"..."}var Aue=R(()=>{}),TZ,p5,MZ=R(()=>{Aue(),TZ=e=>typeof e=="string"?'string("'.concat(kZ(e,10),'")'):typeof e=="number"?"number(".concat(kZ(String(e),10),")"):e===null?"null":e===void 0?"undefined":typeof e=="boolean"?String(e):Array.isArray(e)?"array":typeof e=="object"?"object":"unknown",p5=TZ}),PZ,CZ,m5,AZ=R(()=>{Xe(),Ff(),CZ=le(dN)(PZ||(PZ=Y([`
  display: flex;
  height: fit-content;
  backdrop-filter: blur(14px);
  border-radius: 2px;
`]))),m5=CZ}),kg,IZ,DZ,OZ,Tg,p_=R(()=>{Xe(),rr(),kg=ee(Oe()),zb(),tk(),UV(),AZ(),DZ=le.button(IZ||(IZ=Y([`
  `,`;
  position: relative;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 14px;
  font-weight: 600;
  width: 32px;
  height: 32px;
  outline: none;

  color: #a8a8a9;

  background: rgba(40, 43, 47, 0.8);
  backdrop-filter: blur(14px);
  border: none;
  border-bottom: 1px solid rgba(255, 255, 255, 0.08);
  border-radius: 2px;

  svg {
    display: block;
  }

  &:hover {
    background: rgba(59, 63, 69, 0.8);
  }

  &:active {
    background: rgba(82, 88, 96, 0.8);
  }

  &.selected {
    color: rgba(255, 255, 255, 0.8);
    border-bottom: 1px solid rgba(255, 255, 255, 0.7);
  }

  // Don't blur if in a button group, because it already blurs. We need to blur
  // on the group-level, otherwise we get seams.
  `,` > & {
    backdrop-filter: none;
    filter: none;
    border-radius: 0;

    &:first-child {
      border-top-left-radius: 2px;
      border-bottom-left-radius: 2px;
    }

    &:last-child {
      border-bottom-right-radius: 2px;
      border-top-right-radius: 2px;
    }
  }

  @supports not (backdrop-filter: blur()) {
    background: rgba(40, 43, 47, 0.95);
  }
`])),tr,m5),OZ=kg.default.forwardRef((e,n)=>{var r=e,{title:a}=r,c=we(r,["title"]);let[u,f]=sg({enabled:typeof a=="string"},()=>kg.default.createElement(pD,null,a));return kg.default.createElement(kg.default.Fragment,null,u,kg.default.createElement(DZ,O({ref:ek([f,n])},c))," ")}),Tg=OZ}),RZ,LZ,zZ,NZ,FZ,Iue=R(()=>{RZ=ee(Oe()),p_(),Xe(),rr(),zZ=le(Tg)(LZ||(LZ=Y([`
  `,`;
  & > svg {
    width: 1em;
    height: 1em;
    pointer-events: none;
  }
`])),tr),NZ=({config:e,testId:n})=>{var r;return RZ.default.createElement(zZ,{onClick:e.onClick,"data-testid":n,title:e.title,dangerouslySetInnerHTML:{__html:(r=e.svgSource)!=null?r:""}})},FZ=NZ});function Due({value:e,label:n,icon:r,onClick:a,isSelected:c}){return Mg.default.createElement(Mg.default.Fragment,null,Mg.default.createElement(Tg,{forwardedAs:lN,className:c?"selected":void 0,"aria-label":n,onClick:a,title:n},r))}var Mg,jZ,BZ,Oue=R(()=>{Mg=ee(Oe()),Ff(),p_(),AZ(),jZ=({value:e,onChange:n,options:r})=>Mg.default.createElement(m5,null,r.map(({label:a,icon:c,value:u})=>Mg.default.createElement(Due,{key:u,value:u,isSelected:e===u,label:a,icon:c,onClick:()=>n(u)}))),BZ=jZ}),g5,UZ,VZ,HZ,GZ,Rue=R(()=>{g5=ee(Oe()),Xe(),rr(),Oue(),VZ=le.div(UZ||(UZ=Y([`
  `,`;
  & > svg {
    width: 1em;
    height: 1em;
    pointer-events: none;
  }
`])),tr),HZ=({config:e})=>g5.default.createElement(BZ,{onChange:e.onChange,options:e.options.map(({label:n,value:r,svgSource:a})=>({label:n,value:r,icon:g5.default.createElement(VZ,{dangerouslySetInnerHTML:{__html:a}})})),value:e.value}),GZ=HZ}),m_,WZ,qZ,KZ,XZ,Lue=R(()=>{m_=ee(Oe()),Xe(),rr(),p_(),JB(),gl(),qZ=le.div(WZ||(WZ=Y([`
  `,`;
  & > svg {
    width: 1em;
    height: 1em;
    pointer-events: none;
  }
`])),tr),KZ=({config:e})=>{let n=(0,m_.useRef)(null),r=ml(()=>{let a=n.current.getBoundingClientRect();return{debugName:"ExtensionFlyoutMenu:"+e.label,constraints:{maxX:a.right,maxY:8,minX:a.left,minY:8},verticalGap:2}},()=>m_.default.createElement(HI,{items:e.items.map((a,c)=>({label:a.label,callback:()=>{var u;try{(u=a.onClick)==null||u.call(a)}catch(f){console.error(f)}}})),onRequestClose:()=>{r.close("clicked")}}));return m_.default.createElement(qZ,null,r.node,m_.default.createElement(Tg,{ref:n,onClick:a=>{r.open(a,n.current)}},e.label))},XZ=KZ});function zue(e){return v5[e]}var g_,$Z,v5,ZZ,YZ,Nue=R(()=>{Cue(),MZ(),g_=ee(Oe()),Iue(),Rue(),Lue(),$Z=e=>g_.default.createElement(g_.default.Fragment,null,e.config.map((n,r)=>g_.default.createElement(ZZ,{config:n,key:r}))),v5={Icon:FZ,Switch:GZ,Flyout:XZ},ZZ=({config:e})=>{let n=zue(e.type);if(!n)throw new Error("No tool with tool.type ".concat(p5(e.type)," exists. Did you mean ").concat(Pue(e.type,Object.keys(v5))));return g_.default.createElement(n,{config:e})},YZ=$Z}),JZ,Rl,QZ,eY,tY,y5,nY,rY,b5,iY=R(()=>{JZ=Mt,sn(),Ge(),Rl=ee(Oe()),Xe(),Nue(),eY=le.div(QZ||(QZ=Y([`
  height: 36px;
  /* pointer-events: none; */

  display: flex;
  gap: 0.5rem;
  justify-content: center;
`]))),y5=le.div(tY||(tY=Y([`
  position: abolute;
  height: 32px;
  width: 1px;
  background: #373b40;
  opacity: 0.4;
`]))),nY=({extension:e,toolbarId:n})=>{var r;let a=(0,Rl.useMemo)(()=>new JZ.Atom([]),[]),c=(r=e.toolbars)==null?void 0:r[n];(0,Rl.useLayoutEffect)(()=>{let f=c==null?void 0:c(a.set.bind(a),_e().publicApi);if(typeof f=="function")return f},[e,n,c]);let u=In(a.prism);return Rl.default.createElement(YZ,{config:u})},rY=({toolbarId:e,showLeftDivider:n})=>{var r;let a=[],c=In(_e().atomP.ephemeral.extensions.byId),u=!1;for(let[,f]of Object.entries(c))!f||!((r=f.toolbars)!=null&&r[e])||(a.push(Rl.default.createElement(Rl.default.Fragment,{key:"extensionToolbar-"+f.id},u?Rl.default.createElement(y5,null):void 0,Rl.default.createElement(nY,{extension:f,toolbarId:e}))),u=!0);return a.length===0?null:Rl.default.createElement(eY,{"data-testid":"theatre-extensionToolbar-".concat(e)},n?Rl.default.createElement(y5,null):void 0,a)},b5=rY}),v_,oY,aY,sY,sT,Fue=R(()=>{Xe(),v_=ee(Oe()),p_(),aY=le(Tg)(oY||(oY=Y([`
  color: `,`;

  border-bottom: 1px solid
    `,`;
`])),({pinned:e})=>e?"rgba(255, 255, 255, 0.8)":"#A8A8A9",({pinned:e})=>e?"rgba(255, 255, 255, 0.7)":"rgba(255, 255, 255, 0.08)"),sY=(0,v_.forwardRef)((e,n)=>{var r=e,{children:a,hint:c,pinned:u,icon:f,pinHintIcon:p,unpinHintIcon:v}=r,y=we(r,["children","hint","pinned","icon","pinHintIcon","unpinHintIcon"]);let[k,P]=(0,v_.useState)(!1),T=k||c;return v_.default.createElement(aY,W(O({},y),{pinned:u,ref:n,onMouseOver:()=>P(!0),onMouseOut:()=>P(!1)}),v_.default.createElement("div",{style:{pointerEvents:"none",width:"fit-content",height:"fit-content",inset:0}},T&&!u?p:T&&u?v:f),a)}),sT=sY});function jue(e){return _5.createElement("svg",O({width:16,height:16,viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),_5.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M12.732 4.048l-.792-.792L7.2 8l4.74 4.744.792-.792L8.781 8l3.951-3.952zm-3.932 0l-.792-.792L3.268 8l4.74 4.744.792-.792L4.848 8 8.8 4.048z",fill:"currentColor"}))}var _5,x5,Bue=R(()=>{_5=ee(Oe()),x5=jue});function Uue(e){return w5.createElement("svg",O({width:16,height:16,viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),w5.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M3.694 3.765l.792-.792 4.74 4.744-4.74 4.744-.792-.793 3.951-3.951-3.951-3.952zm3.932 0l.792-.792 4.74 4.744-4.74 4.744-.792-.793 3.952-3.951-3.952-3.952z",fill:"currentColor"}))}var w5,S5,Vue=R(()=>{w5=ee(Oe()),S5=Uue}),mi,lY,cY,uY,E5,dY,pd,fY,hY,pY,mY,gY,vY,yY,bY,_Y,lT,xY,wY,k5,T5,SY,EY,Hue=R(()=>{sn(),Ge(),mi=ee(Oe()),Xe(),cY=le.div(lY||(lY=Y([`
  width: 138px;
  border-radius: 2px;
  background-color: rgba(42, 45, 50, 0.9);
  position: absolute;
  display: flex;
  flex-direction: column;
  align-items: stretch;
  justify-content: flex-start;
  box-shadow: 0px 1px 1px rgba(0, 0, 0, 0.25), 0px 2px 6px rgba(0, 0, 0, 0.15);
  backdrop-filter: blur(14px);
  pointer-events: auto;
  // makes the edges of the item highlights match the rounded corners
  overflow: hidden;

  @supports not (backdrop-filter: blur()) {
    background-color: rgba(42, 45, 50, 0.98);
  }

  color: rgba(255, 255, 255, 0.9);

  & a {
    // Fix colors of links to not be default
    color: inherit;
  }
`]))),E5=le.div(uY||(uY=Y([`
  position: relative;
  padding: 0px 12px;
  font-weight: 400;
  font-size: 11px;
  height: 32px;
  text-decoration: none;
  user-select: none;
  display: flex;
  flex-direction: row;
  align-items: center;
  cursor: default;
`]))),pd=le(E5)(dY||(dY=Y([`
  &:before {
    position: absolute;
    display: block;
    content: ' ';
    inset: 3px;
    border-radius: 3px;
    background: rgba(255, 255, 255, 0.1);
    opacity: 0;
  }

  &.secondary {
    color: rgba(255, 255, 255, 0.5);
  }

  &:hover {
    /* background-color: #398995; */
    color: white !important;
    &:before {
      opacity: 1;
    }
  }
`]))),hY=le(E5)(fY||(fY=Y([`
  height: auto;
  min-height: 32px;
  padding-top: 12px;
  padding-bottom: 10px;
  flex-direction: column;
  justify-content: flex-start;
  align-items: stretch;
  gap: 8px;
  color: rgba(255, 255, 255, 0.5);
`]))),mY=le.div(pY||(pY=Y([`
  font-weight: 600;
`]))),vY=le.div(gY||(gY=Y([`
  display: flex;
  flex-direction: row;
  justify-content: space-between;
`]))),bY=le.div(yY||(yY=Y([`
  margin-left: 2px;
`]))),lT=le.div(_Y||(_Y=Y([`
  height: 1px;
  margin: 0 2px;
  background: rgba(255, 255, 255, 0.02);
`]))),wY=le.div(xY||(xY=Y([`
  position: absolute;
  width: 8px;
  height: 8px;
  background: #40aaa4;
  right: 14px;
  top: 12px;
  border-radius: 50%;
`]))),k5="0.7.2",T5=k5.match(/^[^\-]+/)[0],SY=mi.default.forwardRef((e,n)=>{let r=In(_e().atomP.ahistoric.updateChecker.result.hasUpdates);return mi.default.createElement(cY,{ref:n},mi.default.createElement(pd,{as:"a",href:"https://www.theatrejs.com/docs/latest",className:"",target:"_blank"},"Docs"),mi.default.createElement(pd,{as:"a",href:"https://www.theatrejs.com/docs/latest/releases",className:"",target:"_blank"},"Changelog"),mi.default.createElement(lT,null),mi.default.createElement(pd,{as:"a",href:"https://github.com/theatre-js/theatre",className:"",target:"_blank"},"Github"),mi.default.createElement(pd,{as:"a",href:"https://twitter.com/theatre_js",className:"",target:"_blank"},"Twitter"),mi.default.createElement(pd,{className:"",as:"a",href:"https://discord.gg/bm9f8F9Y9N",target:"_blank"},"Discord"),mi.default.createElement(lT,null),mi.default.createElement(hY,null,mi.default.createElement(mY,null,"Version"),mi.default.createElement(vY,null,mi.default.createElement(bY,null,k5," ",r===!0?"(outdated)":r===!1?"(latest)":""))),r===!0&&mi.default.createElement(mi.default.Fragment,null,mi.default.createElement(lT,null),mi.default.createElement(pd,{as:"a",href:"https://www.theatrejs.com/docs/latest/releases".concat(encodeURIComponent(T5)),className:"",target:"_blank"},"Update",mi.default.createElement(wY,null)),mi.default.createElement(pd,{as:"a",href:"https://www.theatrejs.com/docs/latest/releases#".concat(encodeURIComponent(T5)),className:"",target:"_blank"},"What's new?")))}),EY=SY}),vr,kY,TY,MY,PY,CY,AY,M5,IY,P5,DY,C5,OY,RY,Gue=R(()=>{sn(),Ge(),vr=ee(Oe()),Xe(),zb(),kue(),Uk(),kY=Mt,iY(),Fue(),ab(),Bue(),Vue(),p_(),gl(),Hue(),Wb(),MY=le.div(TY||(TY=Y([`
  height: 36px;
  pointer-events: none;

  display: flex;
  justify-content: space-between;
  padding: 12px;
`]))),CY=le.div(PY||(PY=Y([`
  color: white;
  width: 14px;
  height: 14px;
  background: #d00;
  border-radius: 4px;
  text-align: center;
  line-height: 14px;
  font-weight: 600;
  font-size: 8px;
  position: relative;
  left: -6px;
  top: -11px;
  margin-right: -14px;
  box-shadow: 0 4px 6px -4px #00000059;
`]))),M5=le.div(AY||(AY=Y([`
  display: flex;
  gap: 8px;
`]))),P5=le.div(IY||(IY=Y([`
  position: absolute;
  background: `,`;
  width: 6px;
  height: 6px;
  border-radius: 50%;
  right: -2px;
  top: -2px;
`])),({type:e})=>e==="info"?"#40aaa4":"#f59e0b"),le.div(DY||(DY=Y([`
  position: absolute;
  height: 32px;
  width: 1px;
  background: #373b40;
  opacity: 0.4;
`]))),C5=!1,OY=()=>{var e,n,r;let a=Mn(()=>{let C=(0,kY.val)(_e().atomP.ephemeral.coreByProject);return Object.entries(C).map(([L,N])=>({projectId:L,state:N})).filter(({state:L})=>L.loadingState.type==="browserStateIsNotBasedOnDiskState")},[]),[c,u]=sg({enabled:a.length>0,enterDelay:a.length>0?0:200},()=>a.length>0?vr.default.createElement(SZ,null,a.length===1?'There is a state conflict in project "'.concat(a[0].projectId,'". Select the project in the outline below in order to fix it.'):"There are ".concat(a.length," projects that have state conflicts. They are highlighted in the outline below. ")):vr.default.createElement(lg,null,vr.default.createElement(vr.default.Fragment,null,"Outline"))),f=(e=In(_e().atomP.ahistoric.pinOutline))!=null?e:!0,p=(n=In(_e().atomP.ahistoric.pinDetails))!=null?n:!0,v=In(_e().atomP.ahistoric.updateChecker.result.hasUpdates)===!0,y=ml(()=>{let C=k.current.getBoundingClientRect();return{debugName:"More Menu",constraints:{maxX:C.right,maxY:8,minX:C.left-140,minY:8},verticalGap:2}},()=>vr.default.createElement(EY,null)),k=(0,vr.useRef)(null),P=(0,vr.useMemo)(()=>(window.__IS_VISUAL_REGRESSION_TESTING&&(C5||(C5=!0,console.warn("Visual regression testing enabled, so we're showing the updates badge unconditionally"))),v||window.__IS_VISUAL_REGRESSION_TESTING?!0:v),[v]),{hasNotifications:T}=vD(),[E,A]=c9();return vr.default.createElement(MY,null,vr.default.createElement(M5,null,c,vr.default.createElement(sT,{ref:u,"data-testid":"OutlinePanel-TriggerButton",onClick:()=>{_e().transaction(({stateEditors:C,drafts:L})=>{var N;C.studio.ahistoric.setPinOutline(!((N=L.ahistoric.pinOutline)==null||N))})},icon:vr.default.createElement(zA,null),pinHintIcon:vr.default.createElement(S5,null),unpinHintIcon:vr.default.createElement(x5,null),pinned:f}),a.length>0?vr.default.createElement(CY,null,a.length):null,vr.default.createElement(b5,{showLeftDivider:!0,toolbarId:"global"})),vr.default.createElement(M5,null,E,vr.default.createElement(sT,{ref:A,onClick:()=>{_e().transaction(({stateEditors:C,drafts:L})=>{var N;C.studio.ahistoric.setPinNotifications(!((N=L.ahistoric.pinNotifications)!=null&&N))})},icon:vr.default.createElement($E,null),pinHintIcon:vr.default.createElement($E,null),unpinHintIcon:vr.default.createElement($E,null),pinned:(r=In(_e().atomP.ahistoric.pinNotifications))!=null?r:!1},T&&vr.default.createElement(P5,{type:"warning"})),y.node,vr.default.createElement(Tg,{ref:k,onClick:C=>{y.toggle(C,k.current)}},vr.default.createElement(PN,null),P&&vr.default.createElement(P5,{type:"info"})),vr.default.createElement(sT,{ref:u,onClick:()=>{_e().transaction(({stateEditors:C,drafts:L})=>{var N;C.studio.ahistoric.setPinDetails(!((N=L.ahistoric.pinDetails)==null||N))})},icon:vr.default.createElement(MN,null),pinHintIcon:vr.default.createElement(x5,null),unpinHintIcon:vr.default.createElement(S5,null),pinned:p})))},RY=OY}),LY,y_,zY,b_,NY,FY,jY,BY,UY=R(()=>{LY=Mt,sn(),y_=ee(Oe()),zY=ee(Ia()),b_=new LY.Atom({set:{},byId:{}}),NY=1,FY=()=>{let e=NY++;function n(a,c,u){b_.reduce(f=>({byId:W(O({},f.byId),{[e]:{comp:a,props:c,portalNode:u}}),set:W(O({},f.set),{[e]:!0})}))}function r(){b_.reduce(a=>{let c=O({},a.set),u=O({},a.byId);return delete c[e],{byId:u,set:c}})}return{mountOrRender:n,unmount:r}},jY=()=>{let e=Object.keys(In(b_.pointer.set));return y_.default.createElement(y_.default.Fragment,null,e.map(n=>y_.default.createElement(BY,{key:"id-"+n,id:n})))},BY=({id:e})=>{let{comp:n,portalNode:r,props:a}=In(b_.pointer.byId[e]);return(0,zY.createPortal)(y_.default.createElement(n,O({},a)),r)}});function Wue(e){let n=_e(),[r,a]=Qn(void 0),c=LK();c.configureLogging({min:128,dev:I5,internal:I5});let u=c.getLogger().named("Theatre.js UIRoot");hue();let f=In(n.atomP.ahistoric.visibilityState);return(0,Ki.useEffect)(()=>(f==="everythingIsHidden"&&console.warn("Theatre.js Studio is hidden. Use the keyboard shortcut 'alt + \\' to restore the studio, or call studio.ui.restore()."),()=>{}),[f]),Mn(()=>{let p=(0,A5.val)(n.atomP.ahistoric.visibilityState);return(0,A5.val)(n.atomP.ephemeral.initialised)?Ki.default.createElement(WF,{logger:u},Ki.default.createElement(KU,null,Ki.default.createElement(Ioe,null,Ki.default.createElement(KY,null),Ki.default.createElement(Hm.Provider,{value:a},Ki.default.createElement(OA,{target:window.__IS_VISUAL_REGRESSION_TESTING===!0?void 0:e.containerShadow},Ki.default.createElement(Ki.default.Fragment,null,Ki.default.createElement(HY,null),Ki.default.createElement(WY,{className:p==="everythingIsHidden"?"invisible":""},Ki.default.createElement(DA,{ref:r}),Ki.default.createElement(RY,null),Ki.default.createElement(_Z,null),Ki.default.createElement(u9,null)))))))):null},[n,r,a])}var A5,Ki,VY,HY,GY,WY,qY,I5,KY,que=R(()=>{Ge(),sn(),A5=Mt,Ki=ee(Oe()),Xe(),Eue(),Gue(),nr(),Ff(),u5(),ua(),XU(),iI(),UY(),rr(),X2(),Ku(),Wb(),HY=typeof window!="undefined"?Cm(VY||(VY=Y([`
  :host {
    contain: strict;
  }
`]))):{},WY=le(GF)(GY||(GY=Y([`
  z-index: 50;
  position: fixed;
  inset: 0;

  &.invisible {
    pointer-events: none !important;
    opacity: 0;
    transform: translateX(1000000px);
  }
`]))),I5=/Playground.+Theatre\.js/.test((qY=typeof document!="undefined"?document==null?void 0:document.title:null)!=null?qY:""),KY=()=>Ki.default.createElement(jY,null)}),Kue=se(e=>{var n=Ia();e.createRoot=n.createRoot,e.hydrateRoot=n.hydrateRoot}),XY={};me(XY,{default:()=>YY});var $Y,ZY,YY,Xue=R(()=>{que(),$Y=ee(Oe()),ZY=ee(Kue()),UY(),rr(),iY(),YY=class{constructor(){Te(this,"containerEl",document.createElement("div")),Te(this,"_renderTimeout"),Te(this,"_documentBodyUIIsRenderedIn"),Te(this,"containerShadow"),this.containerEl.id="theatrejs-studio-root",this.containerEl.style.cssText=`
      position: fixed;
      top: 0;
      right: 0;
      bottom: 0;
      left: 0;
      pointer-events: none;
      z-index: 100;
    `;let e=()=>{if(window.__IS_VISUAL_REGRESSION_TESTING===!0){let n=document.createElement("div");return n.id="theatrejs-faux-shadow-root",document.body.appendChild(n),n}else return this.containerEl.attachShadow({mode:"open"})};this.containerShadow=e()}render(){let e=()=>{if(!document.body){this._renderTimeout=setTimeout(e,5);return}this._renderTimeout=void 0,this._documentBodyUIIsRenderedIn=document.body,this._documentBodyUIIsRenderedIn.appendChild(this.containerEl),ZY.default.createRoot(this.containerShadow).render($Y.default.createElement(Wue,{containerShadow:this.containerShadow}))};this._renderTimeout=setTimeout(e,10)}renderToolset(e,n){let r=FY();return r.mountOrRender(Qie(b5),{toolbarId:e},n),r.unmount}}}),$ue=se(e=>{e.compare=c,e.reduce=u;var n,r,a;e.REMOVE=n=-1,e.ADD=r=1,e.EQUAL=a=0;function c(k,P){var T=k.length,E=P.length,A=f(k,P),C=A<T&&A<E?p(k,P):0,L=C+A-1;T-=L,E-=L;for(var N=y(T,E),U=T-1;U>=0;--U)for(var G=E-1;G>=0;--G)N[G][U]=v(N,k,P,A,U,G);return{prefix:A,matrix:N,suffix:C}}function u(k,P,T){var E,A,C,L,N=T.matrix,U=T.prefix;for(E=0;E<U;++E)P=k(P,a,E,E);for(C=E,U=N.length,E=0,A=0;E<U;)switch(L=N[E][A].type,P=k(P,L,E+C,A+C),L){case a:++E,++A;break;case n:++A;break;case r:++E;break}for(E+=C,A+=C,U=T.suffix,C=0;C<U;++C)P=k(P,a,E+C,A+C);return P}function f(k,P){for(var T=0,E=Math.min(k.length,P.length);T<E&&k[T]===P[T];)++T;return T}function p(k,P){for(var T=k.length-1,E=P.length-1,A=Math.min(T,E),C=0;C<A&&k[T-C]===P[E-C];)++C;return C}function v(k,P,T,E,A,C){return P[A+E]===T[C+E]?{value:k[C+1][A+1].value,type:a}:k[C][A+1].value<k[C+1][A].value?{value:k[C][A+1].value+1,type:n}:{value:k[C+1][A].value+1,type:r}}function y(k,P){var T=[],E,A,C;for(C=T[P]=[],A=0;A<k;++A)C[A]={value:k-A,type:n};for(E=0;E<P;++E)T[E]=[],T[E][k]={value:P-E,type:r};return T[P][k]={value:0,type:a},T}}),JY=se(e=>{e.cons=n,e.tail=r,e.map=a;function n(c,u){var f=u.length,p=new Array(f+1);p[0]=c;for(var v=0;v<f;++v)p[v+1]=u[v];return p}function r(c){for(var u=c.length-1,f=new Array(u),p=0;p<u;++p)f[p]=c[p+1];return f}function a(c,u){for(var f=new Array(u.length),p=0;p<u.length;++p)f[p]=c(u[p]);return f}}),Zue=se((e,n)=>{n.exports=f;var r=/\/|~1|~0/g,a="/",c="~",u="~1";function f(p,v){var y,k,P,T;for(y=p.charAt(0)===a?1:0,k="",r.lastIndex=y;P=r.exec(p);)if(T=P[0],k+=p.slice(y,r.lastIndex-T.length),y=r.lastIndex,T===a){if(v(k)===!1)return p;k=""}else k+=T===u?a:c;return k+=p.slice(y),v(k),p}}),D5=se(e=>{var n=Zue();e.find=k,e.join=T,e.absolute=P,e.parse=E,e.contains=A,e.encodeSegment=L,e.decodeSegment=C,e.parseArrayIndex=G,e.isValidArrayIndex=U;var r="/",a=/\//g,c="~1",u=/~1/g,f="~",p=/~/g,v="~0",y=/~0/g;function k(J,ie,xe,Me){if(typeof ie=="string"){if(ie==="")return{target:J,key:void 0};if(ie===r)return{target:J,key:""};var ue=J,Ae,We=Me!==void 0;return n(ie,function(oe){if(J==null)return ue=null,!1;Array.isArray(J)?Ae=We?Q(xe,G(oe),J,Me):oe==="-"?oe:G(oe):Ae=oe,ue=J,J=J[Ae]}),ue===null?void 0:{target:ue,key:Ae}}}function P(J){return J[0]===r?J:r+J}function T(J){return J.join(r)}function E(J){var ie=[];return n(J,ie.push.bind(ie)),ie}function A(J,ie){return ie.indexOf(J)===0&&ie[J.length]===r}function C(J){return J.replace(u,r).replace(y,f)}function L(J){return J.replace(p,v).replace(a,c)}var N=/^(0|[1-9]\d*)$/;function U(J){return N.test(J)}function G(J){if(U(J))return+J;throw new SyntaxError("invalid array index "+J)}function Q(J,ie,xe,Me){var ue=ie;if(ue<0)throw new Error("array index out of bounds "+ue);if(Me!==void 0&&typeof J=="function"&&(ue=J(ie,xe,Me),ue<0))throw new Error("could not find patch context "+Me);return ue}}),QY=se((e,n)=>{n.exports=r;function r(u){return u==null||typeof u!="object"?u:Array.isArray(u)?a(u):c(u)}function a(u){for(var f=u.length,p=new Array(f),v=0;v<f;++v)p[v]=r(u[v]);return p}function c(u){for(var f=Object.keys(u),p={},v,y=0,k=f.length;y<k;++y)v=f[y],p[v]=r(u[v]);return p}}),Yue=se((e,n)=>{n.exports=r;function r(u,f){return u===f?!0:Array.isArray(u)&&Array.isArray(f)?a(u,f):typeof u=="object"&&typeof f=="object"?c(u,f):!1}function a(u,f){if(u.length!==f.length)return!1;for(var p=0;p<u.length;++p)if(!r(u[p],f[p]))return!1;return!0}function c(u,f){if(u===null&&f!==null||u!==null&&f===null)return!1;var p=Object.keys(u),v=Object.keys(f);if(p.length!==v.length)return!1;for(var y=0,k;y<p.length;++y)if(k=p[y],!(k in f&&r(u[k],f[k])))return!1;return!0}}),Jue=se((e,n)=>{var r=D5();n.exports=function(k,P){var T=r.parse(k.path),E=r.parse(P.path),A=v(T,E),C=u(T,E,A.length),L=y(k),N=y(P);return A.length===0&&!C?[N,L]:C?c(L,T,N,E):a(L,T,N)};function a(k,P,T,E){if(k.path===T.path)throw new TypeError("cannot commute "+k.op+","+T.op+" with identical object paths");return[T,k]}function c(k,P,T,E){return P.length===E.length?f(k,P,T,E):(P.length>E.length?(P=p(T,E,k,P,-1),k.path=r.absolute(r.join(P))):(E=p(k,P,T,E,1),T.path=r.absolute(r.join(E))),[T,k])}function u(k,P,T){return r.isValidArrayIndex(k[T])&&r.isValidArrayIndex(P[T])}function f(k,P,T,E){var A=P.length-1,C=+P[A],L=+E[A],N;return C<L?k.op==="add"||k.op==="copy"?(N=E.slice(),N[A]=Math.max(0,L-1),T.path=r.absolute(r.join(N))):k.op==="remove"&&(N=E.slice(),N[A]=L+1,T.path=r.absolute(r.join(N))):T.op==="add"||T.op==="copy"?(N=P.slice(),N[A]=C+1,k.path=r.absolute(r.join(N))):C>L&&T.op==="remove"&&(N=P.slice(),N[A]=Math.max(0,C-1),k.path=r.absolute(r.join(N))),[T,k]}function p(k,P,T,E,A){var C=P.length-1,L=+P[C],N=+E[C],U=E.slice();return L>N||(k.op==="add"||k.op==="copy"?U[C]=Math.max(0,N-A):k.op==="remove"&&(U[C]=Math.max(0,N+A))),U}function v(k,P){var T=k.length,E=P.length;if(T===0||E===0||T<2&&E<2)return[];for(var A=T===E?T-1:Math.min(T,E),C=0;C<A&&k[C]===P[C];)++C;return k.slice(0,C)}function y(k){return k.op==="remove"?{op:k.op,path:k.path}:k.op==="copy"||k.op==="move"?{op:k.op,path:k.path,from:k.from}:{op:k.op,path:k.path,value:k.value}}}),eJ=se((e,n)=>{n.exports=r;function r(a){Error.call(this),this.name=this.constructor.name,this.message=a,typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,this.constructor)}r.prototype=Object.create(Error.prototype),r.prototype.constructor=r}),O5=se((e,n)=>{n.exports=r;function r(a){Error.call(this),this.name=this.constructor.name,this.message=a,typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,this.constructor)}r.prototype=Object.create(Error.prototype),r.prototype.constructor=r}),tJ=se((e,n)=>{n.exports=r;function r(a){Error.call(this),this.name=this.constructor.name,this.message=a,typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,this.constructor)}r.prototype=Object.create(Error.prototype),r.prototype.constructor=r}),nJ=se(e=>{var n=D5(),r=QY(),a=Yue(),c=Jue(),u=JY(),f=eJ(),p=O5(),v=tJ(),y=n.find,k=n.parseArrayIndex;e.test={apply:P,inverse:T,commute:E},e.add={apply:A,inverse:L,commute:N},e.remove={apply:J,inverse:xe,commute:Me},e.replace={apply:U,inverse:G,commute:Q},e.move={apply:ue,inverse:Ae,commute:We},e.copy={apply:oe,inverse:De,commute:N};function P(Pe,ke,Be){var mt=y(Pe,ke.path,Be.findContext,ke.context),ae=mt.target,de,Ze;if(Array.isArray(ae)?(de=k(mt.key),Ze=ae[de]):Ze=mt.key===void 0?mt.target:mt.target[mt.key],!a(Ze,ke.value))throw new f("test failed "+JSON.stringify(ke));return Pe}function T(Pe,ke){return Pe.push(ke),1}function E(Pe,ke){if(Pe.path===ke.path&&ke.op==="remove")throw new TypeError("Can't commute test,remove -> remove,test for same path");return ke.op==="test"||ke.op==="replace"?[ke,Pe]:c(Pe,ke)}function A(Pe,ke,Be){var mt=y(Pe,ke.path,Be.findContext,ke.context);if(q(mt))throw new p("path does not exist "+ke.path);if(ke.value===void 0)throw new p("missing value");var ae=r(ke.value);return mt.key===void 0?ae:(C(mt,ae),Pe)}function C(Pe,ke){var Be=Pe.target;if(Array.isArray(Be))if(Pe.key==="-")Be.push(ke);else{if(Pe.key>Be.length)throw new p("target of add outside of array bounds");Be.splice(Pe.key,0,ke)}else if(Pt(Be))Be[Pe.key]=ke;else throw new p("target of add must be an object or array "+Pe.key)}function L(Pe,ke){var Be=ke.context;return Be!==void 0&&(Be={before:Be.before,after:u.cons(ke.value,Be.after)}),Pe.push({op:"test",path:ke.path,value:ke.value,context:Be}),Pe.push({op:"remove",path:ke.path,context:Be}),1}function N(Pe,ke){if(Pe.path===ke.path&&ke.op==="remove")throw new TypeError("Can't commute add,remove -> remove,add for same path");return c(Pe,ke)}function U(Pe,ke,Be){var mt=y(Pe,ke.path,Be.findContext,ke.context);if(q(mt)||Fe(mt))throw new p("path does not exist "+ke.path);if(ke.value===void 0)throw new p("missing value");var ae=r(ke.value);if(mt.key===void 0)return ae;var de=mt.target;return Array.isArray(de)?de[k(mt.key)]=ae:de[mt.key]=ae,Pe}function G(Pe,ke,Be,mt){var ae=mt[Be-1];if(ae===void 0||ae.op!=="test"||ae.path!==ke.path)throw new v("cannot invert replace w/o test");var de=ae.context;return de!==void 0&&(de={before:de.before,after:u.cons(ae.value,u.tail(de.after))}),Pe.push({op:"test",path:ae.path,value:ke.value}),Pe.push({op:"replace",path:ae.path,value:ae.value}),2}function Q(Pe,ke){if(Pe.path===ke.path&&ke.op==="remove")throw new TypeError("Can't commute replace,remove -> remove,replace for same path");return ke.op==="test"||ke.op==="replace"?[ke,Pe]:c(Pe,ke)}function J(Pe,ke,Be){var mt=y(Pe,ke.path,Be.findContext,ke.context);if(q(mt)||mt.target[mt.key]===void 0)throw new p("path does not exist "+ke.path);return ie(mt),Pe}function ie(Pe){var ke=Pe.target,Be;if(Array.isArray(ke))return Be=ke.splice(k(Pe.key),1),Be[0];if(Pt(ke))return Be=ke[Pe.key],delete ke[Pe.key],Be;throw new p("target of remove must be an object or array")}function xe(Pe,ke,Be,mt){var ae=mt[Be-1];if(ae===void 0||ae.op!=="test"||ae.path!==ke.path)throw new v("cannot invert remove w/o test");var de=ae.context;return de!==void 0&&(de={before:de.before,after:u.tail(de.after)}),Pe.push({op:"add",path:ae.path,value:ae.value,context:de}),2}function Me(Pe,ke){return Pe.path===ke.path&&ke.op==="remove"?[ke,Pe]:c(Pe,ke)}function ue(Pe,ke,Be){if(n.contains(ke.path,ke.from))throw new p("move.from cannot be ancestor of move.path");var mt=y(Pe,ke.path,Be.findContext,ke.context),ae=y(Pe,ke.from,Be.findContext,ke.fromContext);return C(mt,ie(ae)),Pe}function Ae(Pe,ke){return Pe.push({op:"move",path:ke.from,context:ke.fromContext,from:ke.path,fromContext:ke.context}),1}function We(Pe,ke){if(Pe.path===ke.path&&ke.op==="remove")throw new TypeError("Can't commute move,remove -> move,replace for same path");return c(Pe,ke)}function oe(Pe,ke,Be){var mt=y(Pe,ke.path,Be.findContext,ke.context),ae=y(Pe,ke.from,Be.findContext,ke.fromContext);if(q(ae)||Fe(ae))throw new p("copy.from must exist");var de=ae.target,Ze;return Array.isArray(de)?Ze=de[k(ae.key)]:Ze=de[ae.key],C(mt,r(Ze)),Pe}function De(Pe,ke){throw new v("cannot invert "+ke.op)}function q(Pe){return Pe===void 0||Pe.target==null&&Pe.key!==void 0}function Fe(Pe){return Pe.key!==void 0&&Pe.target[Pe.key]===void 0}function Pt(Pe){return Pe!==null&&typeof Pe=="object"}}),Que=se(e=>{var n=nJ(),r=QY(),a=O5();e.apply=u,e.applyInPlace=f,e.clone=r,e.isValidObject=v,e.defaultHash=p;var c={};function u(k,P,T){return f(k,r(P),T)}function f(k,P,T){if(T||(T=c),!Array.isArray(k))return P;for(var E,A,C=0;C<k.length;++C){if(A=k[C],E=n[A.op],E===void 0)throw new a("invalid op "+JSON.stringify(A));P=E.apply(P,A,T)}return P}function p(k){return v(k)||y(k)?JSON.stringify(k):k}function v(k){return k!==null&&Object.prototype.toString.call(k)==="[object Object]"}function y(k){return Object.prototype.toString.call(k)==="[object Array]"}}),ede=se((e,n)=>{var r=nJ();n.exports=function(c){var u=[],f,p;for(f=c.length-1;f>=0;f-=p)p=a(u,c[f],f,c);return u};function a(c,u,f,p){var v=r[u.op];return v!==void 0&&typeof v.inverse=="function"?v.inverse(c,u,f,p):1}}),tde=se(e=>{var n=$ue(),r=JY(),a=Que(),c=ede(),u=D5(),f=u.encodeSegment;e.diff=y,e.patch=a.apply,e.patchInPlace=a.applyInPlace,e.inverse=c,e.clone=a.clone,e.InvalidPatchOperationError=O5(),e.TestFailedError=eJ(),e.PatchNotInvertibleError=tJ();var p=a.isValidObject,v=a.defaultHash;function y(G,Q,J){return P(G,Q,"",k(J,[])).patch}function k(G,Q){return typeof G=="object"?{patch:Q,hash:L(U,G.hash,v),makeContext:L(U,G.makeContext,N),invertible:G.invertible!==!1}:{patch:Q,hash:L(U,G,v),makeContext:N,invertible:!0}}function P(G,Q,J,ie){return Array.isArray(G)&&Array.isArray(Q)?E(G,Q,J,ie):p(G)&&p(Q)?T(G,Q,J,ie):C(G,Q,J,ie)}function T(G,Q,J,ie){var xe=Object.keys(Q),Me=ie.patch,ue,Ae;for(ue=xe.length-1;ue>=0;--ue){Ae=xe[ue];var We=J+"/"+f(Ae);G[Ae]!==void 0?P(G[Ae],Q[Ae],We,ie):Me.push({op:"add",path:We,value:Q[Ae]})}for(xe=Object.keys(G),ue=xe.length-1;ue>=0;--ue)if(Ae=xe[ue],Q[Ae]===void 0){var oe=J+"/"+f(Ae);ie.invertible&&Me.push({op:"test",path:oe,value:G[Ae]}),Me.push({op:"remove",path:oe})}return ie}function E(G,Q,J,ie){var xe=r.map(ie.hash,G),Me=r.map(ie.hash,Q),ue=n.compare(xe,Me);return A(G,Q,J,ie,ue)}function A(G,Q,J,ie,xe){var Me=0;return n.reduce(function(ue,Ae,We,oe){var De,q,Fe=ue.patch,Pt=J+"/"+(oe+Me);return Ae===n.REMOVE?(De=Fe[Fe.length-1],q=ue.makeContext(oe,G),ue.invertible&&Fe.push({op:"test",path:Pt,value:G[oe],context:q}),De!==void 0&&De.op==="add"&&De.path===Pt?(De.op="replace",De.context=q):Fe.push({op:"remove",path:Pt,context:q}),Me-=1):Ae===n.ADD?(Fe.push({op:"add",path:Pt,value:Q[We],context:ue.makeContext(oe,G)}),Me+=1):P(G[oe],Q[We],Pt,ue),ue},ie,xe)}function C(G,Q,J,ie){return G!==Q&&(ie.invertible&&ie.patch.push({op:"test",path:J,value:G}),ie.patch.push({op:"replace",path:J,value:Q})),ie}function L(G,Q,J){return G(Q)?Q:J}function N(){}function U(G){return typeof G=="function"}}),yh=se((e,n)=>{function r(a,c){for(var u=0,f=c.length-1;u<f;u++){if(!a[c[u]])return null;a=a[c[u]]}return a}n.exports=r}),md=se((e,n)=>{function r(c){return c==="~0"?"~":"/"}function a(c){var u=c.split("/");if(c.indexOf("~")===-1)return u;for(var f=0,p=u.length;f<p;f++)u[f].indexOf("~")!==-1&&(u[f]=u[f].replace(/~[01]/g,r));return u}n.exports=a}),nde=se((e,n)=>{var r=yh(),a=md();function c(u,f){var p=a(f),v=p[p.length-1],y=r(u,p);return y?y[v]:void 0}n.exports=c}),cT=se((e,n)=>{function r(a,c){if(a===c)return!0;if(!(a&&c)||typeof a!="object"||typeof c!="object"||a.length!==c.length)return!1;if(Array.isArray(a)){if(!Array.isArray(c))return!1;for(var u=0,f=a.length;u<f;u++)if(!r(a[u],c[u]))return!1;return!0}var p=Object.keys(a);if(p.length!==Object.keys(c).length)return!1;for(var v=0,y=p.length;v<y;v++){var k=p[v];if(!r(a[k],c[k]))return!1}return!0}n.exports=r}),uT=se((e,n)=>{function r(a,c){if(c==="-")return a.length;for(var u=0,f=c.length;u<f;u++){var p=c.charCodeAt(u);if(57<p||p<48)return 1/0}return+c}n.exports=r}),dT=se((e,n)=>{var r=cT(),a=yh(),c=uT(),u=md();function f(p,v,y,k){if(typeof y=="undefined")return"[op:add] require value, but got undefined";var P=u(v),T=P[P.length-1],E=a(p,P);if(E===null)return"[op:add] path not found: "+v;if(Array.isArray(E)){var A=c(E,T);if(E.length<A)return"[op:add] invalid array index: "+v;k(p,P).splice(A,0,y)}else r(E[T],y)||(k(p,P)[T]=y)}n.exports=f}),rJ=se((e,n)=>{var r=yh(),a=uT(),c=md();function u(f,p,v){var y=c(p),k=y[y.length-1],P=r(f,y);if(P===null)return"[op:remove] path not found: "+p;if(Array.isArray(P)){var T=a(P,k);if(P.length<=T)return"[op:remove] invalid array index: "+p;v(f,y).splice(T,1)}else delete v(f,y)[k]}n.exports=u}),iJ=se((e,n)=>{var r=cT(),a=yh(),c=uT(),u=md();function f(p,v,y,k){if(typeof y=="undefined")return"[op:replace] require value, but got undefined";var P=u(v),T=P[P.length-1],E=a(p,P);if(E===null)return"[op:replace] path not found: "+v;if(Array.isArray(E)){var A=c(E,T);if(E.length<=A)return"[op:replace] invalid array index: "+v;r(E[A],y)||k(p,P).splice(A,1,y)}else r(E[T],y)||(k(p,P)[T]=y)}n.exports=f}),oJ=se((e,n)=>{var r=dT(),a=yh(),c=uT(),u=md();function f(p,v,y,k){if(y!==v){var P=u(v),T=P[P.length-1],E=a(p,P);if(E===null)return"[op:move] path not found: "+v;var A=void 0;if(Array.isArray(E)){var C=c(E,T);if(E.length<=C)return"[op:move] invalid array index: "+y;A=E[C],k(p,P).splice(C,1)}else A=E[T],delete k(p,P)[T];return r(p,y,A,k)}}n.exports=f}),aJ=se((e,n)=>{var r=yh(),a=md(),c=dT();function u(f,p,v,y){var k=a(p),P=k[k.length-1],T=r(f,k);return T===null?"[op:copy] path not found: "+p:c(f,v,T[P],y)}n.exports=u}),sJ=se((e,n)=>{var r=cT(),a=yh(),c=md();function u(f,p,v){var y=c(p),k=y[y.length-1],P=a(f,y);if(P===null)return"[op:test] path not found: "+p;if(!r(P[k],v)){var T=JSON.stringify(P[k]),E=JSON.stringify(v);return"[op:test] not matched: "+T+" "+E}}n.exports=u}),R5=se((e,n)=>{function r(a){if(!a||typeof a!="object")return a;if(Array.isArray(a)){for(var c=a.length,u=new Array(c),f=0;f<c;f++)u[f]=a[f];return u}for(var p=Object.keys(a),v={},y=0,k=p.length;y<k;y++){var P=p[y];v[P]=a[P]}return v}n.exports=r}),rde=se((e,n)=>{var r=nde(),a=dT(),c=rJ(),u=iJ(),f=oJ(),p=aJ(),v=sJ(),y=cT(),k=R5(),P=md();function T(E,A){return{get:function(C){return r(E,C)},add:function(C,L){return a(E,C,L,A)},remove:function(C){return c(E,C,A)},replace:function(C,L){return u(E,C,L,A)},move:function(C,L){return f(E,C,L,A)},copy:function(C,L){return p(E,C,L,A)},test:function(C,L){return v(E,C,L)},deepEqual:y,shallowCopy:k,toKeys:P}}n.exports=T}),ide=se((e,n)=>{function r(a,c,u,f){return f.error=u,f.partial?c[""]:a}n.exports=r}),ode=se((e,n)=>{function r(a){return!!a}n.exports=r}),ade=se((e,n)=>{function r(a){if(a)throw new TypeError(a)}n.exports=r}),sde=se((e,n)=>{var r=R5();function a(c,u){for(var f=0,p=u.length-1;f<p;f++)c=c[u[f]]=r(c[u[f]]);return c}n.exports=a}),lde=se((e,n)=>{var r=R5();function a(u,f,p){var v=u[f];return p.has(v)||(v=r(v),p.add(v)),v}function c(u,f,p){for(var v=0,y=f.length-1;v<y;v++)u=u[f[v]]=a(u,f[v],p);return u}n.exports=c}),cde=se((e,n)=>{var r=rde(),a=ide(),c=ode(),u=ade(),f=sde(),p=lde(),v=dT(),y=rJ(),k=iJ(),P=oJ(),T=aJ(),E=sJ(),A=Set||function(){var L=[];return L.has=function(N){return this.indexOf(N)!==-1},L.add=function(N){this.push(N)},L};function C(L,N,U){if(N.length===0)return L;U=U||{};for(var G=U.strict?u:c,Q=N.length===1?f:function(Ae){return function(We,oe){return p(We,oe,Ae)}}(new A),J={"":L},ie,xe=0,Me=N.length;xe<Me;xe++){var ue=N[xe];switch(ue.op){case"add":if(G(v(J,""+ue.path,ue.value,Q)))return a(L,J,ue,U);break;case"remove":if(G(y(J,""+ue.path,Q)))return a(L,J,ue,U);break;case"replace":if(G(k(J,""+ue.path,ue.value,Q)))return a(L,J,ue,U);break;case"move":if(G(P(J,""+ue.from,""+ue.path,Q)))return a(L,J,ue,U);break;case"copy":if(G(T(J,""+ue.from,""+ue.path,Q)))return a(L,J,ue,U);break;case"test":if(G(E(J,""+ue.path,ue.value)))return a(L,J,ue,U);break;default:if(U.custom&&U.custom[ue.op]){if(ie=ie||r(J,Q),G(U.custom[ue.op](ie,ue,xe,N)))return a(L,J,ue,U)}else return G("[op:"+ue.op+"] unknown"),a(L,J,ue,U);break}}return J[""]}n.exports=C}),ude=se((e,n)=>{n.exports=cde()}),dde=se((e,n)=>{(function(r,a){typeof e=="object"&&typeof n=="object"?n.exports=a():typeof e=="object"?e.blobCompare=a():r.blobCompare=a()})(window,function(){return function(r){var a={};function c(u){if(a[u])return a[u].exports;var f=a[u]={i:u,l:!1,exports:{}};return r[u].call(f.exports,f,f.exports,c),f.l=!0,f.exports}return c.m=r,c.c=a,c.d=function(u,f,p){c.o(u,f)||Object.defineProperty(u,f,{enumerable:!0,get:p})},c.r=function(u){typeof Symbol!="undefined"&&Symbol.toStringTag&&Object.defineProperty(u,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(u,"__esModule",{value:!0})},c.t=function(u,f){if(1&f&&(u=c(u)),8&f||4&f&&typeof u=="object"&&u&&u.__esModule)return u;var p=Object.create(null);if(c.r(p),Object.defineProperty(p,"default",{enumerable:!0,value:u}),2&f&&typeof u!="string")for(var v in u)c.d(p,v,function(y){return u[y]}.bind(null,v));return p},c.n=function(u){var f=u&&u.__esModule?function(){return u.default}:function(){return u};return c.d(f,"a",f),f},c.o=function(u,f){return Object.prototype.hasOwnProperty.call(u,f)},c.p="",c(c.s=4)}([function(r,a,c){var u=function(k,P){if(Array.isArray(k))return k;if(Symbol.iterator in Object(k))return function(T,E){var A=[],C=!0,L=!1,N=void 0;try{for(var U,G=T[Symbol.iterator]();!(C=(U=G.next()).done)&&(A.push(U.value),!E||A.length!==E);C=!0);}catch(Q){L=!0,N=Q}finally{try{!C&&G.return&&G.return()}finally{if(L)throw N}}return A}(k,P);throw new TypeError("Invalid attempt to destructure non-iterable instance")},f=function(){function k(P,T){for(var E=0;E<T.length;E++){var A=T[E];A.enumerable=A.enumerable||!1,A.configurable=!0,"value"in A&&(A.writable=!0),Object.defineProperty(P,A.key,A)}}return function(P,T,E){return T&&k(P.prototype,T),E&&k(P,E),P}}();function p(k){if(Array.isArray(k)){for(var P=0,T=Array(k.length);P<k.length;P++)T[P]=k[P];return T}return Array.from(k)}var v=c(2),y=function(k){function P(T){(function(A,C){if(!(A instanceof C))throw new TypeError("Cannot call a class as a function")})(this,P);var E=function(A,C){if(!A)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!C||typeof C!="object"&&typeof C!="function"?A:C}(this,(P.__proto__||Object.getPrototypeOf(P)).call(this));return E._messageId=1,E._messages=new Map,E._worker=T,E._worker.onmessage=E._onMessage.bind(E),E._id=Math.ceil(1e7*Math.random()),E}return function(T,E){if(typeof E!="function"&&E!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof E);T.prototype=Object.create(E&&E.prototype,{constructor:{value:T,enumerable:!1,writable:!0,configurable:!0}}),E&&(Object.setPrototypeOf?Object.setPrototypeOf(T,E):T.__proto__=E)}(P,k),f(P,[{key:"terminate",value:function(){this._worker.terminate()}},{key:"isFree",value:function(){return this._messages.size===0}},{key:"jobsLength",value:function(){return this._messages.size}},{key:"exec",value:function(T){var E=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,A=this,C=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[],L=arguments[3];return new Promise(function(N,U){var G=A._messageId++;A._messages.set(G,[N,U,L]),A._worker.postMessage([G,E,T],C||[])})}},{key:"postMessage",value:function(){var T=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null,E=this,A=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],C=arguments[2];return new Promise(function(L,N){var U=E._messageId++;E._messages.set(U,[L,N,C]),E._worker.postMessage([U,T],A||[])})}},{key:"emit",value:function(T){for(var E=arguments.length,A=Array(E>1?E-1:0),C=1;C<E;C++)A[C-1]=arguments[C];this._worker.postMessage({eventName:T,args:A})}},{key:"_onMessage",value:function(T){var E;if(!Array.isArray(T.data)&&T.data.eventName)return(E=function U(G,Q,J){G===null&&(G=Function.prototype);var ie=Object.getOwnPropertyDescriptor(G,Q);if(ie===void 0){var xe=Object.getPrototypeOf(G);return xe===null?void 0:U(xe,Q,J)}if("value"in ie)return ie.value;var Me=ie.get;return Me!==void 0?Me.call(J):void 0}(P.prototype.__proto__||Object.getPrototypeOf(P.prototype),"emit",this)).call.apply(E,[this,T.data.eventName].concat(p(T.data.args)));var A,C=(A=T.data,Array.isArray(A)?A:Array.from(A)),L=C[0],N=C.slice(1);if(L===1)this._onEvent.apply(this,p(N));else{if(L!==0)throw new Error("Wrong message type '"+L+"'");this._onResult.apply(this,p(N))}}},{key:"_onResult",value:function(T,E,A){var C=this._messages.get(T),L=u(C,2),N=L[0],U=L[1];return this._messages.delete(T),E===1?N(A):U(A)}},{key:"_onEvent",value:function(T,E,A){var C=this._messages.get(T),L=u(C,3)[2];L&&L(E,A)}}]),P}(v);r.exports=y},function(r,a,c){r.exports=function(){return c(3)(`!function(e){var t={};function r(n){if(t[n])return t[n].exports;var o=t[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,r),o.l=!0,o.exports}r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)r.d(n,o,function(t){return e[t]}.bind(null,o));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=2)}([function(e,t,r){"use strict";var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=function e(t,r,n){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,r);if(void 0===o){var i=Object.getPrototypeOf(t);return null===i?void 0:e(i,r,n)}if("value"in o)return o.value;var a=o.get;return void 0!==a?a.call(n):void 0},i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};function a(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var f=r(1),c=0,l=1,s=0,y=1,p="main",b=function(e){return"object"===(void 0===e?"undefined":i(e))&&"function"==typeof e.then&&"function"==typeof e.catch};var v=function e(t,r){u(this,e),this.payload=t,this.transferable=r};e.exports=function(e){var t,r,i,h=(i=e,(r=p)in(t={})?Object.defineProperty(t,r,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[r]=i,t),d=self.postMessage.bind(self),m=new(function(e){function t(){return u(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),n(t,[{key:"emit",value:function(e){for(var t=arguments.length,r=Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];return d({eventName:e,args:r}),this}},{key:"emitLocally",value:function(e){for(var r,n=arguments.length,i=Array(n>1?n-1:0),a=1;a<n;a++)i[a-1]=arguments[a];(r=o(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"emit",this)).call.apply(r,[this,e].concat(i))}},{key:"operation",value:function(e,t){return h[e]=t,this}}]),t}(f)),g=function(e,t,r){var n=function(t){t&&t instanceof v?w(e,y,t.payload,t.transferable):w(e,y,t)},o=function(t){w(e,s,{message:t.message,stack:t.stack})};try{var i=_(e,t,r);b(i)?i.then(n).catch(o):n(i)}catch(e){o(e)}},_=function(e,t,r){var n=h[r||p];if(!n)throw new Error("Not found handler for this request");return n(t,O.bind(null,e))},w=function(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];d([c,e,t,r],n)},O=function(e,t,r){if(!t)throw new Error("eventName is required");if("string"!=typeof t)throw new Error("eventName should be string");d([l,e,t,r])};return self.addEventListener("message",(function(e){var t=e.data;Array.isArray(t)?g.apply(void 0,a(t)):t&&t.eventName&&m.emitLocally.apply(m,[t.eventName].concat(a(t.args)))})),m},e.exports.TransferableResponse=v},function(e,t,r){"use strict";var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}();var o=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),Object.defineProperty(this,"__listeners",{value:{},enumerable:!1,writable:!1})}return n(e,[{key:"emit",value:function(e){if(!this.__listeners[e])return this;for(var t=arguments.length,r=Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];var o=!0,i=!1,a=void 0;try{for(var u,f=this.__listeners[e][Symbol.iterator]();!(o=(u=f.next()).done);o=!0){var c=u.value;c.apply(void 0,r)}}catch(e){i=!0,a=e}finally{try{!o&&f.return&&f.return()}finally{if(i)throw a}}return this}},{key:"once",value:function(e,t){var r=this,n=function n(){r.off(e,n),t.apply(void 0,arguments)};return this.on(e,n)}},{key:"on",value:function(e,t){return this.__listeners[e]||(this.__listeners[e]=[]),this.__listeners[e].push(t),this}},{key:"off",value:function(e,t){return this.__listeners[e]=t?this.__listeners[e].filter((function(e){return e!==t})):[],this}}]),e}();e.exports=o},function(e,t,r){"use strict";r.r(t);var n=r(0);r.n(n)()().operation("binary",async({blob:e,chunk:t})=>await function(e,t){return new Promise((r,n)=>{const o=new FileReader,i=t?Math.min(t,e.size):e.size,a=e.slice(0,i);o.onload=()=>r(o.result),o.onerror=n,o.readAsBinaryString(a)})}(e,t)).operation("buffer",async({blob:e,chunk:t})=>await function(e,t){return new Promise((r,n)=>{const o=new FileReader,i=t?Math.min(t,e.size):e.size,a=e.slice(0,i);o.onload=()=>r(o.result),o.onerror=n,o.readAsArrayBuffer(a)})}(e,t)).operation("compare",({buf1:e,buf2:t})=>(function(e,t){if(e===t)return!0;if(e.byteLength!==t.byteLength)return!1;const r=new DataView(e),n=new DataView(t);for(var o=e.byteLength;o--;)if(r.getUint8(o)!==n.getUint8(o))return!1;return!0})(e,t))}]);`,null)}},function(r,a,c){var u=function(){function p(v,y){for(var k=0;k<y.length;k++){var P=y[k];P.enumerable=P.enumerable||!1,P.configurable=!0,"value"in P&&(P.writable=!0),Object.defineProperty(v,P.key,P)}}return function(v,y,k){return y&&p(v.prototype,y),k&&p(v,k),v}}(),f=function(){function p(){(function(v,y){if(!(v instanceof y))throw new TypeError("Cannot call a class as a function")})(this,p),Object.defineProperty(this,"__listeners",{value:{},enumerable:!1,writable:!1})}return u(p,[{key:"emit",value:function(v){if(!this.__listeners[v])return this;for(var y=arguments.length,k=Array(y>1?y-1:0),P=1;P<y;P++)k[P-1]=arguments[P];var T=!0,E=!1,A=void 0;try{for(var C,L=this.__listeners[v][Symbol.iterator]();!(T=(C=L.next()).done);T=!0){var N=C.value;N.apply(void 0,k)}}catch(U){E=!0,A=U}finally{try{!T&&L.return&&L.return()}finally{if(E)throw A}}return this}},{key:"once",value:function(v,y){var k=this,P=function T(){k.off(v,T),y.apply(void 0,arguments)};return this.on(v,P)}},{key:"on",value:function(v,y){return this.__listeners[v]||(this.__listeners[v]=[]),this.__listeners[v].push(y),this}},{key:"off",value:function(v,y){return this.__listeners[v]=y?this.__listeners[v].filter(function(k){return k!==y}):[],this}}]),p}();r.exports=f},function(r,a,c){var u=window.URL||window.webkitURL;r.exports=function(f,p){try{try{var v;try{(v=new(window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder||window.MSBlobBuilder)).append(f),v=v.getBlob()}catch{v=new Blob([f])}return new Worker(u.createObjectURL(v))}catch{return new Worker("data:application/javascript,"+encodeURIComponent(f))}}catch{if(!p)throw Error("Inline worker is not supported");return new Worker(p)}}},function(r,a,c){c.r(a);var u=c(0),f=c.n(u),p=c(1),v=c.n(p);c.d(a,"workersEnabled",function(){return y}),c.d(a,"default",function(){return k});let y=!!window.Worker;class k{static toBinaryStringWithWorker(T,E){return qe(this,null,function*(){let A=new f.a(new v.a),C=yield A.exec("binary",{blob:T,chunk:E});return A.terminate(),C})}static toBinaryStringWithoutWorker(T,E){return function(A,C){return new Promise((L,N)=>{let U=new FileReader,G=C?Math.min(C,A.size):A.size,Q=A.slice(0,G);U.onload=()=>L(U.result),U.onerror=N,U.readAsBinaryString(Q)})}(T,E)}static toBinaryString(T,E,A=!0){return A&&y?this.toBinaryStringWithWorker(T,E):this.toBinaryStringWithoutWorker(T,E)}static toArrayBufferWithWorker(T,E){return qe(this,null,function*(){let A=new f.a(new v.a),C=yield A.exec("buffer",{blob:T,chunk:E});return A.terminate(),C})}static toArrayBufferWithoutWorker(T,E){return function(A,C){return new Promise((L,N)=>{let U=new FileReader,G=C?Math.min(C,A.size):A.size,Q=A.slice(0,G);U.onload=()=>L(U.result),U.onerror=N,U.readAsArrayBuffer(Q)})}(T,E)}static toArrayBuffer(T,E,A=!0){return A&&y?this.toArrayBufferWithWorker(T,E):this.toArrayBufferWithoutWorker(T,E)}static compareBuffersWithWorker(T,E){return qe(this,null,function*(){if(T===E)return!0;let A=new f.a(new v.a),C=yield A.exec("compare",{buf1:T,buf2:E},[T,E]);return A.terminate(),C})}static compareBuffersWithoutWorker(T,E){return function(A,C){if(A===C)return!0;if(A.byteLength!==C.byteLength)return!1;let L=new DataView(A),N=new DataView(C);for(var U=A.byteLength;U--;)if(L.getUint8(U)!==N.getUint8(U))return!1;return!0}(T,E)}static compareBuffers(T,E,A=!0){return A&&y?this.compareBuffersWithWorker(T,E):this.compareBuffersWithoutWorker(T,E)}static sizeEqual(T,E){return T.size===E.size}static typeEqual(T,E){return T.type===E.type}static magicNumbersEqual(T,E,A=!0){return qe(this,null,function*(){if(T===E)return!0;let C=[24,16,14,12,8,6,4],[L,N]=yield Promise.all([this.toBinaryString(T,24,A),this.toBinaryString(E,24,A)]);for(let U of C)if(L.substring(0,U)===N.substring(0,U))return!0;return!1})}static bytesEqualWithBinaryString(T,E,A,C=!0){return qe(this,null,function*(){if(T===E)return!0;let[L,N]=yield Promise.all([this.toBinaryString(T,A,C),this.toBinaryString(E,A,C)]);return L===N})}static bytesEqualWithArrayBuffer(T,E,A,C=!0){return qe(this,null,function*(){if(T===E)return!0;let[L,N]=yield Promise.all([this.toArrayBuffer(T,A,C),this.toArrayBuffer(E,A,C)]);return this.compareBuffers(L,N,C)})}static isEqual(T,E){return qe(this,arguments,function*(A,C,{methods:L=["size","type","magic","byte"],byte:N="buffer",partial:U=!1,chunks:G=null,worker:Q=!0}={}){let J=null;for(let ie of L){if(J===!1||U&&J===!0)break;switch(ie){case"byte":case"bytes":case"content":G=G instanceof Array?G:[A.size],J=!0;for(let xe of G){let Me=!1;Me=N==="buffer"?yield this.bytesEqualWithArrayBuffer(A,C,xe,Q):yield this.bytesEqualWithBinaryString(A,C,xe,Q),Me||(J=!1)}break;case"magic":case"headers":case"numbers":case"mime":J=yield this.magicNumbersEqual(A,C,Q);break;case"size":case"sizes":J=this.sizeEqual(A,C);break;case"type":case"types":J=this.typeEqual(A,C);break;default:throw new Error("Blob-compare : Unknown comparison method")}}return J})}}}])})}),lJ={};me(lJ,{ToolbarDropdownSelect:()=>Cfe,default:()=>Ife}),w.exports=fe(lJ),Ge(),zt();var cJ=Mt;Tn();var fde=0,hde=class{constructor(e){this._studio=e,Te(this,"_id"),Te(this,"_state",{type:"Ready"}),this._id=String(fde++)}get status(){return this._state.type}reset(){let{_state:e}=this;if(e.type!=="Ready")if(e.type==="Captured")this._state={type:"Ready"},e.transaction.discard(),e.flagsTransaction.discard();else throw e.type==="Committed"?new Error("This scrub is already committed and can't be reset."):new Error("This scrub is already discarded and can't be reset.")}commit(){let{_state:e}=this;if(e.type==="Captured")e.transaction.commit(),e.flagsTransaction.discard(),this._state={type:"Committed"};else if(e.type==="Ready"){console.warn("Scrub is empty. Nothing to commit.");return}else throw e.type==="Committed"?new Error("This scrub is already committed."):new Error("This scrub is already discarded and can't be comitted.")}capture(e){if(this._state.type==="Captured"&&this.reset(),this._state.type==="Ready"){let n=!0;try{this._state=O({type:"Captured"},this._capture(e)),n=!1}finally{n&&(console.error("This scrub's callback threw an error. We're undo-ing all of the changes made by this scrub, and marking it as discarded."),this._state={type:"Discarded"})}}else throw this._state.type==="Committed"?new Error("This scrub is already committed and cannot capture again. If you wish to capture more, you can start a new studio.scrub() or do so before scrub.commit()"):new Error("This scrub is already discarded and cannot capture again. If you wish to capture more, you can start a new studio.scrub() or do so before scrub.discard()")}_capture(e){let n=[],r=this._studio.tempTransaction(c=>{let u=!0,f={set:(p,v)=>{if(!u)throw new Error("You seem to have called the scrub api after scrub.capture()");let{root:y,path:k}=(0,cJ.getPointerParts)(p);if(!pt(y))throw new Error("We can only scrub props of Sheet Objects for now");c.set(p,v),n.push(p)}};try{e(f)}finally{u=!1}}),a=this._studio.tempTransaction(({stateEditors:c})=>{n.forEach(u=>{let{root:f,path:p}=(0,cJ.getPointerParts)(u);if(!pt(f))return;let v=f.template.getDefaultsAtPointer(u);yt(v,(y,k)=>{c.studio.ephemeral.projects.stateByProjectId.stateBySheetId.stateByObjectKey.propsBeingScrubbed.flag(W(O({},f.address),{pathToProp:k}))},p)})});return{transaction:r,flagsTransaction:a}}discard(){let{_state:e}=this;if(e.type==="Captured"||e.type==="Ready")e.type==="Captured"&&(e.transaction.discard(),e.flagsTransaction.discard()),this._state={type:"Discarded"};else throw e.type==="Committed"?new Error("This scrub is already committed and can't be discarded."):new Error("This scrub is already discarded")}},pde=Mt,uJ=typeof window!="undefined"?Promise.resolve().then(()=>(Xue(),XY)).then(e=>e.default):null,mde=class{constructor(e){this.studio=e,Te(this,"_rendered",!1),Te(this,"_nonSSRBits",uJ?uJ.then(n=>new n):Promise.reject()),Te(this,"ready",this._nonSSRBits.then(()=>{},()=>{}))}render(){this._rendered||(this._rendered=!0,this._nonSSRBits.then(e=>{e.render()}).catch(e=>{throw console.error(e),e}))}hide(){this.studio.transaction(({drafts:e})=>{e.ahistoric.visibilityState="everythingIsHidden"})}restore(){this.render(),this.studio.transaction(({drafts:e})=>{e.ahistoric.visibilityState="everythingIsVisible"})}get isHidden(){return(0,pde.val)(this.studio.atomP.ahistoric.visibilityState)==="everythingIsHidden"}renderToolset(e,n){let r=!1,a=null;return this._nonSSRBits.then(c=>{r||(a=c.renderToolset(e,n))}).catch(c=>{console.error(c)}),()=>{if(a){a();return}r||(r=!0)}}},fT=Mt;function gde(e){return e}var vde=(e,n=gde)=>{let r=a=>({type:e,payload:n(a)});return r.type=e,r.is=a=>a&&a.type&&a.type===e,r},Ll=vde,dJ=ee(tde()),fJ=ee(ude());Sf();var hT,yde=new Uint8Array(16);function bde(){if(!hT&&(hT=typeof crypto!="undefined"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto!="undefined"&&typeof msCrypto.getRandomValues=="function"&&msCrypto.getRandomValues.bind(msCrypto),!hT))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return hT(yde)}var _de=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function xde(e){return typeof e=="string"&&_de.test(e)}var wde=xde,Xi=[];for(pT=0;pT<256;++pT)Xi.push((pT+256).toString(16).substr(1));var pT;function Sde(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,r=(Xi[e[n+0]]+Xi[e[n+1]]+Xi[e[n+2]]+Xi[e[n+3]]+"-"+Xi[e[n+4]]+Xi[e[n+5]]+"-"+Xi[e[n+6]]+Xi[e[n+7]]+"-"+Xi[e[n+8]]+Xi[e[n+9]]+"-"+Xi[e[n+10]]+Xi[e[n+11]]+Xi[e[n+12]]+Xi[e[n+13]]+Xi[e[n+14]]+Xi[e[n+15]]).toLowerCase();if(!wde(r))throw TypeError("Stringified UUID is invalid");return r}var Ede=Sde;function kde(e,n,r){e=e||{};var a=e.random||(e.rng||bde)();if(a[6]=a[6]&15|64,a[8]=a[8]&63|128,n){r=r||0;for(var c=0;c<16;++c)n[r+c]=a[c];return n}return Ede(a)}var Tde=kde,__={replaceHistory:Ll("@history/replaceHistory"),startHistoryFromScratch:Ll("@history/startHistoryFromScratch"),undo:Ll("@history/undo"),redo:Ll("@history/redo")},Mde={type:"@history/unknownAction",payload:""},Pde={maxNumberOfCommits:100},Cde=(e,n=Pde)=>{let r=L5(e(void 0,Mde));return function(a,c){return __.startHistoryFromScratch.is(c)?L5(e(void 0,c.payload)):__.replaceHistory.is(c)?c.payload:__.undo.is(c)?a?Dde(a):r:__.redo.is(c)?a?Ode(a):r:a?Ade(a,e(a.innerState,c),n):L5(e(void 0,c))}};function L5(e){return{currentCommitHash:void 0,commitsByHash:{},listOfCommitHashes:[],innerState:e}}function Ade(e,n,r){if(n===e.innerState)return e;let a=Ide(e.innerState,n);if(a.forwardDiff.length===0)return e;let c=oc(e.listOfCommitHashes),u={currentCommitHash:a.hash,commitsByHash:O({},e.commitsByHash),listOfCommitHashes:[...e.listOfCommitHashes],innerState:n};if(e.currentCommitHash!==c){let f=e.listOfCommitHashes.findIndex(p=>p===e.currentCommitHash);e.listOfCommitHashes.slice(f+1).forEach(p=>{delete u.commitsByHash[p]}),u.listOfCommitHashes.splice(f+1,u.listOfCommitHashes.length)}if(u.listOfCommitHashes.push(a.hash),u.commitsByHash[a.hash]=a,u.listOfCommitHashes.length>r.maxNumberOfCommits){let f=u.listOfCommitHashes.length-r.maxNumberOfCommits;u.listOfCommitHashes.slice(0,f).forEach(p=>{delete u.commitsByHash[p]}),u.listOfCommitHashes.splice(0,f)}return u}function Ide(e,n){let r=dJ.default.diff(e,n,{invertible:!1}),a=dJ.default.diff(n,e,{invertible:!1}),c=Date.now(),u=Tde();return{forwardDiff:r,backwardDiff:a,timestamp:c,hash:u}}function Dde(e){if(e.currentCommitHash===void 0)return e;let n=e.listOfCommitHashes.findIndex(f=>f===e.currentCommitHash);if(n===-1)throw new Error("This should never happen");let r=e.commitsByHash[e.currentCommitHash],a=(0,fJ.default)(e.innerState,r.backwardDiff),c=n-1,u=c===-1?void 0:e.listOfCommitHashes[c];return W(O({},e),{currentCommitHash:u,innerState:a})}function Ode(e){if(e.listOfCommitHashes.length===0)return e;let n=e.listOfCommitHashes.findIndex(f=>f===e.currentCommitHash);if(n===e.listOfCommitHashes.length-1)return e;let r=n+1,a=e.listOfCommitHashes[r],c=e.commitsByHash[a],u=(0,fJ.default)(e.innerState,c.forwardDiff);return W(O({},e),{currentCommitHash:a,innerState:u})}X2();var mT={ahistoric:{visibilityState:"everythingIsVisible",theTrigger:{position:{closestCorner:"bottomLeft",distanceFromHorizontalEdge:.02,distanceFromVerticalEdge:.02}},coreByProject:{},projects:{stateByProjectId:{}}},historic:{projects:{stateByProjectId:{}},autoKey:!0,coreByProject:{},panelInstanceDesceriptors:{}},ephemeral:{initialised:!1,coreByProject:{},projects:{stateByProjectId:{}},extensions:{byId:{},paneClasses:{}},showOutline:!1}},hJ=Ll("@storeBundle/replacePersistentState",e=>e),pJ=Ll("@storeBundle/reduceParts",e=>e),Pg={historic:__,replacePersistentState:hJ,reduceParts:pJ},mJ=Ll("@storeBundle/setInnerHistoricState",e=>e),Rde=(e=mT.historic,n)=>mJ.is(n)?n.payload:e,z5=Cde(Rde),gJ=(e,n)=>{if(hJ.is(n)){let{historic:r,ahistoric:a}=n.payload,c=(e==null?void 0:e.ephemeral)||mT.ephemeral;return{$persistent:{historic:r,ahistoric:a},ephemeral:c}}else if(e){let{historic:r,ahistoric:a}=e.$persistent,{ephemeral:c}=e;if(pJ.is(n)){let u={historic:e.$persistent.historic.innerState,ahistoric:e.$persistent.ahistoric,ephemeral:e.ephemeral},f=n.payload(u);if(f===u)return e;r.innerState!==f.historic&&(r=z5(r,mJ(f.historic))),a=f.ahistoric,c=f.ephemeral}else{let u=z5(r,n);if(u===r)return e;r=u}return{$persistent:r===e.$persistent.historic&&a===e.$persistent.ahistoric?e.$persistent:{historic:r,ahistoric:a},ephemeral:c}}else{let r=z5(void 0,{}),a=mT.ahistoric,c=mT.ephemeral;return{$persistent:{historic:r,ahistoric:a},ephemeral:c}}},vJ=Ll("@history/pushTempAction",e=>e),yJ=Ll("@history/discardTempAction",e=>e),bJ=Ll("@history/commitTempAction",e=>e),Lde=0,zde=()=>{let e=Lde++;return{push:n=>vJ({id:e,originalAction:n}),discard:()=>yJ(e),commit:()=>bJ(e)}},Nde=(e,n)=>{if(e){let{tempActions:r,permanent:a}=e.$temps,c;if(vJ.is(n))r=[...r,n];else if(bJ.is(n)){let f=r.find(p=>p.payload.id===n.payload);f?(c=f.payload.originalAction,r=r.filter(p=>p.payload.id!==n.payload)):K2.error("Comitting temp action group ".concat(n.payload," isn't possible as this group doesn't exist"))}else yJ.is(n)?r=r.filter(f=>f.payload.id!==n.payload):c=n;c&&(a=gJ(e.$temps.permanent,c));let u={historic:a.$persistent.historic.innerState,ahistoric:a.$persistent.ahistoric,ephemeral:a.ephemeral};for(let f of r)u=f.payload.originalAction.payload(u);return O({$temps:{tempActions:r,permanent:a},$persistent:a.$persistent},u)}else{let r=gJ(void 0,n);return{$temps:{permanent:r,tempActions:[]},$persistent:r.$persistent,historic:r.$persistent.historic.innerState,ahistoric:r.$persistent.ahistoric,ephemeral:r.ephemeral}}};Sl(),Sl(),Sc();function _J(e,n){if(typeof e!="object"||e===null)return;if(n.length===0){for(let f of Object.keys(e))delete e[f];return}let r=n.slice(0,n.length-1),a=e,c=new WeakMap;for(let f of r){let p=a,v=p[f];if(typeof v!="object"||v===null)return;c.set(v,p),a=v}let u=n.slice().reverse();for(let f of u){if(delete a[f],Object.keys(a).length>0)return;a=c.get(a)}}function Fde(e,{scale:n,origin:r,translate:a}){let c=r+(e-r)*n;return a+c}function As(e){for(var n=arguments.length,r=Array(n>1?n-1:0),a=1;a<n;a++)r[a-1]=arguments[a];throw Error("[Immer] minified error nr: "+e+(r.length?" "+r.map(function(c){return"'"+c+"'"}).join(","):"")+". Find the full error at: https://bit.ly/3cXEKWf")}function Cg(e){return!!e&&!!e[ha]}function bh(e){return!!e&&(function(n){if(!n||typeof n!="object")return!1;var r=Object.getPrototypeOf(n);if(r===null)return!0;var a=Object.hasOwnProperty.call(r,"constructor")&&r.constructor;return a===Object||typeof a=="function"&&Function.toString.call(a)===Wde}(e)||Array.isArray(e)||!!e[AJ]||!!e.constructor[AJ]||F5(e)||j5(e))}function x_(e,n,r){r===void 0&&(r=!1),Ag(e)===0?(r?Object.keys:Y5)(e).forEach(function(a){r&&typeof a=="symbol"||n(a,e[a],e)}):e.forEach(function(a,c){return n(c,a,e)})}function Ag(e){var n=e[ha];return n?n.i>3?n.i-4:n.i:Array.isArray(e)?1:F5(e)?2:j5(e)?3:0}function N5(e,n){return Ag(e)===2?e.has(n):Object.prototype.hasOwnProperty.call(e,n)}function jde(e,n){return Ag(e)===2?e.get(n):e[n]}function xJ(e,n,r){var a=Ag(e);a===2?e.set(n,r):a===3?(e.delete(n),e.add(r)):e[n]=r}function Bde(e,n){return e===n?e!==0||1/e==1/n:e!=e&&n!=n}function F5(e){return Hde&&e instanceof Map}function j5(e){return Gde&&e instanceof Set}function _h(e){return e.o||e.t}function B5(e){if(Array.isArray(e))return Array.prototype.slice.call(e);var n=qde(e);delete n[ha];for(var r=Y5(n),a=0;a<r.length;a++){var c=r[a],u=n[c];u.writable===!1&&(u.writable=!0,u.configurable=!0),(u.get||u.set)&&(n[c]={configurable:!0,writable:!0,enumerable:u.enumerable,value:e[c]})}return Object.create(Object.getPrototypeOf(e),n)}function U5(e,n){return n===void 0&&(n=!1),V5(e)||Cg(e)||!bh(e)||(Ag(e)>1&&(e.set=e.add=e.clear=e.delete=Ude),Object.freeze(e),n&&x_(e,function(r,a){return U5(a,!0)},!0)),e}function Ude(){As(2)}function V5(e){return e==null||typeof e!="object"||Object.isFrozen(e)}function Rc(e){var n=Kde[e];return n||As(18,e),n}function wJ(){return w_}function H5(e,n){n&&(Rc("Patches"),e.u=[],e.s=[],e.v=n)}function gT(e){G5(e),e.p.forEach(Vde),e.p=null}function G5(e){e===w_&&(w_=e.l)}function SJ(e){return w_={p:[],l:w_,h:e,m:!0,_:0}}function Vde(e){var n=e[ha];n.i===0||n.i===1?n.j():n.O=!0}function W5(e,n){n._=n.p.length;var r=n.p[0],a=e!==void 0&&e!==r;return n.h.g||Rc("ES5").S(n,e,a),a?(r[ha].P&&(gT(n),As(4)),bh(e)&&(e=vT(n,e),n.l||yT(n,e)),n.u&&Rc("Patches").M(r[ha],e,n.u,n.s)):e=vT(n,r,[]),gT(n),n.u&&n.v(n.u,n.s),e!==CJ?e:void 0}function vT(e,n,r){if(V5(n))return n;var a=n[ha];if(!a)return x_(n,function(u,f){return EJ(e,a,n,u,f,r)},!0),n;if(a.A!==e)return n;if(!a.P)return yT(e,a.t,!0),a.t;if(!a.I){a.I=!0,a.A._--;var c=a.i===4||a.i===5?a.o=B5(a.k):a.o;x_(a.i===3?new Set(c):c,function(u,f){return EJ(e,a,c,u,f,r)}),yT(e,c,!1),r&&e.u&&Rc("Patches").R(a,r,e.u,e.s)}return a.o}function EJ(e,n,r,a,c,u){if(Cg(c)){var f=vT(e,c,u&&n&&n.i!==3&&!N5(n.D,a)?u.concat(a):void 0);if(xJ(r,a,f),!Cg(f))return;e.m=!1}if(bh(c)&&!V5(c)){if(!e.h.F&&e._<1)return;vT(e,c),n&&n.A.l||yT(e,c)}}function yT(e,n,r){r===void 0&&(r=!1),e.h.F&&e.m&&U5(n,r)}function q5(e,n){var r=e[ha];return(r?_h(r):e)[n]}function kJ(e,n){if(n in e)for(var r=Object.getPrototypeOf(e);r;){var a=Object.getOwnPropertyDescriptor(r,n);if(a)return a;r=Object.getPrototypeOf(r)}}function K5(e){e.P||(e.P=!0,e.l&&K5(e.l))}function X5(e){e.o||(e.o=B5(e.t))}function $5(e,n,r){var a=F5(n)?Rc("MapSet").N(n,r):j5(n)?Rc("MapSet").T(n,r):e.g?function(c,u){var f=Array.isArray(c),p={i:f?1:0,A:u?u.A:wJ(),P:!1,I:!1,D:{},l:u,t:c,k:null,o:null,j:null,C:!1},v=p,y=_T;f&&(v=[p],y=xT);var k=Proxy.revocable(v,y),P=k.revoke,T=k.proxy;return p.k=T,p.j=P,T}(n,r):Rc("ES5").J(n,r);return(r?r.A:wJ()).p.push(a),a}function bT(e){return Cg(e)||As(22,e),function n(r){if(!bh(r))return r;var a,c=r[ha],u=Ag(r);if(c){if(!c.P&&(c.i<4||!Rc("ES5").K(c)))return c.t;c.I=!0,a=TJ(r,u),c.I=!1}else a=TJ(r,u);return x_(a,function(f,p){c&&jde(c.t,f)===p||xJ(a,f,n(p))}),u===3?new Set(a):a}(e)}function TJ(e,n){switch(n){case 2:return new Map(e);case 3:return Array.from(e)}return B5(e)}var MJ,w_,Z5=typeof Symbol!="undefined"&&typeof Symbol("x")=="symbol",Hde=typeof Map!="undefined",Gde=typeof Set!="undefined",PJ=typeof Proxy!="undefined"&&Proxy.revocable!==void 0&&typeof Reflect!="undefined",CJ=Z5?Symbol.for("immer-nothing"):((MJ={})["immer-nothing"]=!0,MJ),AJ=Z5?Symbol.for("immer-draftable"):"__$immer_draftable",ha=Z5?Symbol.for("immer-state"):"__$immer_state",Wde=""+Object.prototype.constructor,Y5=typeof Reflect!="undefined"&&Reflect.ownKeys?Reflect.ownKeys:Object.getOwnPropertySymbols!==void 0?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:Object.getOwnPropertyNames,qde=Object.getOwnPropertyDescriptors||function(e){var n={};return Y5(e).forEach(function(r){n[r]=Object.getOwnPropertyDescriptor(e,r)}),n},Kde={},_T={get:function(e,n){if(n===ha)return e;var r=_h(e);if(!N5(r,n))return function(c,u,f){var p,v=kJ(u,f);return v?"value"in v?v.value:(p=v.get)===null||p===void 0?void 0:p.call(c.k):void 0}(e,r,n);var a=r[n];return e.I||!bh(a)?a:a===q5(e.t,n)?(X5(e),e.o[n]=$5(e.A.h,a,e)):a},has:function(e,n){return n in _h(e)},ownKeys:function(e){return Reflect.ownKeys(_h(e))},set:function(e,n,r){var a=kJ(_h(e),n);if(a!=null&&a.set)return a.set.call(e.k,r),!0;if(!e.P){var c=q5(_h(e),n),u=c==null?void 0:c[ha];if(u&&u.t===r)return e.o[n]=r,e.D[n]=!1,!0;if(Bde(r,c)&&(r!==void 0||N5(e.t,n)))return!0;X5(e),K5(e)}return e.o[n]===r&&typeof r!="number"&&(r!==void 0||n in e.o)||(e.o[n]=r,e.D[n]=!0,!0)},deleteProperty:function(e,n){return q5(e.t,n)!==void 0||n in e.t?(e.D[n]=!1,X5(e),K5(e)):delete e.D[n],e.o&&delete e.o[n],!0},getOwnPropertyDescriptor:function(e,n){var r=_h(e),a=Reflect.getOwnPropertyDescriptor(r,n);return a&&{writable:!0,configurable:e.i!==1||n!=="length",enumerable:a.enumerable,value:r[n]}},defineProperty:function(){As(11)},getPrototypeOf:function(e){return Object.getPrototypeOf(e.t)},setPrototypeOf:function(){As(12)}},xT={};x_(_T,function(e,n){xT[e]=function(){return arguments[0]=arguments[0][0],n.apply(this,arguments)}}),xT.deleteProperty=function(e,n){return _T.deleteProperty.call(this,e[0],n)},xT.set=function(e,n,r){return _T.set.call(this,e[0],n,r,e[0])};var Xde=function(){function e(r){var a=this;this.g=PJ,this.F=!0,this.produce=function(c,u,f){if(typeof c=="function"&&typeof u!="function"){var p=u;u=c;var v=a;return function(E){var A=this;E===void 0&&(E=p);for(var C=arguments.length,L=Array(C>1?C-1:0),N=1;N<C;N++)L[N-1]=arguments[N];return v.produce(E,function(U){var G;return(G=u).call.apply(G,[A,U].concat(L))})}}var y;if(typeof u!="function"&&As(6),f!==void 0&&typeof f!="function"&&As(7),bh(c)){var k=SJ(a),P=$5(a,c,void 0),T=!0;try{y=u(P),T=!1}finally{T?gT(k):G5(k)}return typeof Promise!="undefined"&&y instanceof Promise?y.then(function(E){return H5(k,f),W5(E,k)},function(E){throw gT(k),E}):(H5(k,f),W5(y,k))}if(!c||typeof c!="object")return(y=u(c))===CJ?void 0:(y===void 0&&(y=c),a.F&&U5(y,!0),y);As(21,c)},this.produceWithPatches=function(c,u){return typeof c=="function"?function(v){for(var y=arguments.length,k=Array(y>1?y-1:0),P=1;P<y;P++)k[P-1]=arguments[P];return a.produceWithPatches(v,function(T){return c.apply(void 0,[T].concat(k))})}:[a.produce(c,u,function(v,y){f=v,p=y}),f,p];var f,p},typeof(r==null?void 0:r.useProxies)=="boolean"&&this.setUseProxies(r.useProxies),typeof(r==null?void 0:r.autoFreeze)=="boolean"&&this.setAutoFreeze(r.autoFreeze)}var n=e.prototype;return n.createDraft=function(r){bh(r)||As(8),Cg(r)&&(r=bT(r));var a=SJ(this),c=$5(this,r,void 0);return c[ha].C=!0,G5(a),c},n.finishDraft=function(r,a){var c=r&&r[ha],u=c.A;return H5(u,a),W5(void 0,u)},n.setAutoFreeze=function(r){this.F=r},n.setUseProxies=function(r){r&&!PJ&&As(20),this.g=r},n.applyPatches=function(r,a){var c;for(c=a.length-1;c>=0;c--){var u=a[c];if(u.path.length===0&&u.op==="replace"){r=u.value;break}}var f=Rc("Patches").$;return Cg(r)?f(r,a):this.produce(r,function(p){return f(p,a.slice(c+1))})},e}(),pa=new Xde;pa.produce,pa.produceWithPatches.bind(pa),pa.setAutoFreeze.bind(pa),pa.setUseProxies.bind(pa),pa.applyPatches.bind(pa);var J5=pa.createDraft.bind(pa),Q5=pa.finishDraft.bind(pa);Ef(),N3(),_m(),Cy(),rE(),W2(),Jr(),Tn();var Is={create(e){let n={byId:{},allIds:{}};if(e)for(let[r,a]of e)n.byId[r]=a,n.allIds[r]=!0;return n},shallowCopy(e){return{byId:O({},e==null?void 0:e.byId),allIds:O({},e==null?void 0:e.allIds)}},add(e,n,r){return{byId:W(O({},e==null?void 0:e.byId),{[n]:r}),allIds:W(O({},e==null?void 0:e.allIds),{[n]:!0})}},merge(e){let n=Is.create();for(let r=0;r<e.length;r++)n.byId=O(O({},n.byId),e[r].byId),n.allIds=O(O({},n.allIds),e[r].allIds);return n},remove(e,n){let r=Is.shallowCopy(e);return delete r.allIds[n],delete r.byId[n],r},filter(e,n){let r=Is.shallowCopy(e);for(let[a,c]of Object.entries(r.byId))n(c)||(delete r.allIds[a],delete r.byId[a]);return r}},IJ=e=>(eR=e,tR),eR,$i=()=>{if(eR===void 0)throw new Error("Calling stateEditors outside of a transaction is not allowed.");return eR},tR;(e=>{(n=>{(r=>{(a=>{function c(u){let f=$i().historic;f.panelPositions!=null||(f.panelPositions={}),f.panelPositions[u.panelId]=u.position}a.setPanelPosition=c})(r.panelPositions||(r.panelPositions={})),(a=>{function c(){var u;return(u=$i().historic).panels!=null||(u.panels={}),$i().historic.panels}a._ensure=c,(u=>{function f(){let p=e.studio.historic.panels._ensure();return p.outlinePanel!=null||(p.outlinePanel={}),p.outlinePanel}u._ensure=f,(p=>{function v(k){let P=[];for(let T of xo(k))Rt(T)?P.push(O({type:"Project"},T.address)):Yt(T)?(P.push(O({type:"Sheet"},T.template.address)),e.studio.historic.projects.stateByProjectId.stateBySheetId.setSelectedInstanceId(T.address)):Jt(T)?P.push(O({type:"Sheet"},T.address)):pt(T)?(P.push(O({type:"SheetObject"},T.template.address)),e.studio.historic.projects.stateByProjectId.stateBySheetId.setSelectedInstanceId(T.sheet.address)):An(T)&&P.push(O({type:"SheetObject"},T.address));u._ensure().selection=P}p.set=v;function y(){u._ensure().selection=[]}p.unset=y})(u.selection||(u.selection={}))})(a.outline||(a.outline={})),(u=>{function f(){let p=e.studio.historic.panels._ensure();return p.sequenceEditor!=null||(p.sequenceEditor={}),p.sequenceEditor}u._ensure=f,(p=>{function v(){let k=u._ensure();return k.graphEditor!=null||(k.graphEditor={height:.5,isOpen:!1}),k.graphEditor}function y(k){v().isOpen=k.isOpen}p.setIsOpen=y})(u.graphEditor||(u.graphEditor={}))})(a.sequenceEditor||(a.sequenceEditor={}))})(r.panels||(r.panels={})),(a=>{(c=>{function u(f){let p=$i().historic;return p.projects.stateByProjectId[f.projectId]||(p.projects.stateByProjectId[f.projectId]={stateBySheetId:{}}),p.projects.stateByProjectId[f.projectId]}c._ensure=u,(f=>{function p(y){let k=e.studio.historic.projects.stateByProjectId._ensure(y);return k.stateBySheetId[y.sheetId]||(k.stateBySheetId[y.sheetId]={selectedInstanceId:void 0,sequenceEditor:{selectedPropsByObject:{}}}),k.stateBySheetId[y.sheetId]}f._ensure=p;function v(y){e.studio.historic.projects.stateByProjectId.stateBySheetId._ensure(y).selectedInstanceId=y.sheetInstanceId}f.setSelectedInstanceId=v,(y=>{function k(L){let{selectedPropsByObject:N}=f._ensure(L).sequenceEditor;N[L.objectKey]||(N[L.objectKey]={});let U=N[L.objectKey],G=wl(L.pathToProp),Q=new Set(Object.keys(u_));for(let[ie,xe]of Object.entries(bT(N)))for(let[Me,ue]of Object.entries(xe))Q.delete(ue);let J=Q.size>0?Q.values().next().value:Object.keys(u_)[0];U[G]=J}y.addPropToGraphEditor=k;function P(L){let{selectedPropsByObject:N}=f._ensure(L).sequenceEditor;if(!N[L.objectKey])return;let U=N[L.objectKey],G=wl(L.pathToProp);U[G]&&_J(N,[L.objectKey,G])}y.removePropFromGraphEditor=P;function T(L){let N=e.studio.historic.projects.stateByProjectId.stateBySheetId._ensure(L).sequenceEditor;return N.markerSet||(N.markerSet=Is.create()),N.markerSet}function E(L){let N=T(L.sheetAddress),U=L.markers.filter(ie=>!!isFinite(ie.position)).map(ie=>W(O({},ie),{position:L.snappingFunction(ie.position)})),G=Ou(U,"id"),Q=Is.filter(N,ie=>ie&&!G[ie.id]),J=Ou(Object.values(Q.byId),"position");U.forEach(({position:ie})=>{let xe=J[ie];xe&&(Q=Is.remove(Q,xe.id))}),Object.assign(N,Is.merge([Q,Is.create(U.map(ie=>[ie.id,ie]))]))}y.replaceMarkers=E;function A(L){let N=T(L.sheetAddress);Object.assign(N,Is.remove(N,L.markerId))}y.removeMarker=A;function C(L){let N=T(L.sheetAddress).byId[L.markerId];N!==void 0&&(N.label=L.label)}y.updateMarker=C})(f.sequenceEditor||(f.sequenceEditor={}))})(c.stateBySheetId||(c.stateBySheetId={}))})(a.stateByProjectId||(a.stateByProjectId={}))})(r.projects||(r.projects={}))})(n.historic||(n.historic={})),(r=>{function a(c){$i().ephemeral.showOutline=c}r.setShowOutline=a,(c=>{(u=>{function f(p){let v=$i().ephemeral;return v.projects.stateByProjectId[p.projectId]||(v.projects.stateByProjectId[p.projectId]={stateBySheetId:{}}),v.projects.stateByProjectId[p.projectId]}u._ensure=f,(p=>{function v(y){let k=e.studio.ephemeral.projects.stateByProjectId._ensure(y);return k.stateBySheetId[y.sheetId]||(k.stateBySheetId[y.sheetId]={stateByObjectKey:{}}),k.stateBySheetId[y.sheetId]}p._ensure=v,(y=>{function k(P){var T;let E=e.studio.ephemeral.projects.stateByProjectId.stateBySheetId._ensure(P).stateByObjectKey;return E[T=P.objectKey]!=null||(E[T]={}),E[P.objectKey]}y._ensure=k,(P=>{function T(A){let C=e.studio.ephemeral.projects.stateByProjectId.stateBySheetId.stateByObjectKey._ensure(A);return C.valuesBeingScrubbed!=null||(C.valuesBeingScrubbed={}),C.valuesBeingScrubbed}P._ensure=T;function E(A){ll(T(A),A.pathToProp,!0)}P.flag=E})(y.propsBeingScrubbed||(y.propsBeingScrubbed={}))})(p.stateByObjectKey||(p.stateByObjectKey={}))})(u.stateBySheetId||(u.stateBySheetId={}))})(c.stateByProjectId||(c.stateByProjectId={}))})(r.projects||(r.projects={}))})(n.ephemeral||(n.ephemeral={})),(r=>{function a(v){$i().ahistoric.pinOutline=v}r.setPinOutline=a;function c(v){$i().ahistoric.pinDetails=v}r.setPinDetails=c;function u(v){$i().ahistoric.pinNotifications=v}r.setPinNotifications=u;function f(v){$i().ahistoric.visibilityState=v}r.setVisibilityState=f;function p(v){let y=i2(v.map(T=>T.pathToProp)),k=v.map(({keyframe:T,pathToProp:E})=>({keyframe:T,pathToProp:E.slice(y.length)})),P=$i();P.ahistoric.clipboard?P.ahistoric.clipboard.keyframesWithRelativePaths=k:P.ahistoric.clipboard={keyframesWithRelativePaths:k}}r.setClipboardKeyframes=p,(v=>{(y=>{function k(P){let T=$i().ahistoric;return T.projects.stateByProjectId[P.projectId]||(T.projects.stateByProjectId[P.projectId]={stateBySheetId:{}}),T.projects.stateByProjectId[P.projectId]}y._ensure=k,(P=>{function T(A){let C=e.studio.ahistoric.projects.stateByProjectId._ensure(A);return C.collapsedItemsInOutline||(C.collapsedItemsInOutline={}),C.collapsedItemsInOutline}P._ensure=T;function E(A){let C=e.studio.ahistoric.projects.stateByProjectId.collapsedItemsInOutline._ensure(A);A.isCollapsed?C[A.itemKey]=!0:delete C[A.itemKey]}P.set=E})(y.collapsedItemsInOutline||(y.collapsedItemsInOutline={})),(P=>{function T(E){let A=e.studio.ahistoric.projects.stateByProjectId._ensure(E);return A.stateBySheetId[E.sheetId]||(A.stateBySheetId[E.sheetId]={}),A.stateBySheetId[E.sheetId]}P._ensure=T,(E=>{function A(C){let L=e.studio.ahistoric.projects.stateByProjectId.stateBySheetId._ensure(C);return L.sequence||(L.sequence={}),L.sequence}E._ensure=A,(C=>{function L(U){e.studio.ahistoric.projects.stateByProjectId.stateBySheetId.sequence._ensure(U).focusRange={range:U.range,enabled:U.enabled}}C.set=L;function N(U){e.studio.ahistoric.projects.stateByProjectId.stateBySheetId.sequence._ensure(U).focusRange=void 0}C.unset=N})(E.focusRange||(E.focusRange={})),(C=>{function L(N){e.studio.ahistoric.projects.stateByProjectId.stateBySheetId.sequence._ensure(N).clippedSpaceRange=O({},N.range)}C.set=L})(E.clippedSpaceRange||(E.clippedSpaceRange={})),(C=>{function L(U){let G=e.studio.ahistoric.projects.stateByProjectId.stateBySheetId.sequence._ensure(U),Q=G.collapsableItems;return Q||(Q=G.collapsableItems=Is.create()),Q}function N(U){let G=L(U);Object.assign(G,Is.add(G,U.studioSheetItemKey,{isCollapsed:U.isCollapsed}))}C.set=N})(E.sequenceEditorCollapsableItems||(E.sequenceEditorCollapsableItems={}))})(P.sequence||(P.sequence={}))})(y.stateBySheetId||(y.stateBySheetId={}))})(v.stateByProjectId||(v.stateByProjectId={}))})(r.projects||(r.projects={}))})(n.ahistoric||(n.ahistoric={}))})(e.studio||(e.studio={})),(n=>{(r=>{(a=>{function c(u){let f=$i().historic.coreByProject[u.projectId].revisionHistory,p=50;f.unshift(u.revision),f.length>p&&(f.length=p)}a.add=c})(r.revisionHistory||(r.revisionHistory={})),(a=>{function c(p){let v=$i().historic.coreByProject[p.projectId].sheetsById;return v[p.sheetId]||(v[p.sheetId]={staticOverrides:{byObject:{}}}),v[p.sheetId]}a._ensure=c;function u(p){let v=$i().historic.coreByProject[p.projectId].sheetsById[p.sheetId];if(!v)return;delete v.staticOverrides.byObject[p.objectKey];let y=v.sequence;y&&delete y.tracksByObject[p.objectKey]}a.forgetObject=u;function f(p){$i().historic.coreByProject[p.projectId].sheetsById[p.sheetId]&&delete $i().historic.coreByProject[p.projectId].sheetsById[p.sheetId]}a.forgetSheet=f,(p=>{function v(ue){let Ae=e.coreByProject.historic.sheetsById._ensure(ue);return Ae.sequence!=null||(Ae.sequence={subUnitsPerUnit:30,length:10,type:"PositionalSequence",tracksByObject:{}}),Ae.sequence}p._ensure=v;function y(ue){v(ue).length=Pr(parseFloat(ue.length.toFixed(2)),.01,1/0)}p.setLength=y;function k(ue){v(ue).subUnitsPerUnit=Pr(ue.subUnitsPerUnit,1,te(2,12))}p.setSubUnitsPerUnit=k;function P(ue){var Ae;let We=e.coreByProject.historic.sheetsById.sequence._ensure(ue).tracksByObject;return We[Ae=ue.objectKey]!=null||(We[Ae]={trackData:{},trackIdByPropPath:{}}),We[ue.objectKey]}function T(ue,Ae){let We=P(ue),oe=wl(ue.pathToProp);if(typeof We.trackIdByPropPath[oe]=="string")return;let De=Qae(),q={type:"BasicKeyframedTrack",__debugName:"".concat(ue.objectKey,":").concat(oe),keyframes:[]};We.trackData[De]=q,We.trackIdByPropPath[oe]=De}p.setPrimitivePropAsSequenced=T;function E(ue){let Ae=P(ue),We=wl(ue.pathToProp),oe=Ae.trackIdByPropPath[We];typeof oe=="string"&&(delete Ae.trackIdByPropPath[We],delete Ae.trackData[oe],e.coreByProject.historic.sheetsById.staticOverrides.byObject.setValueOfPrimitiveProp(ue))}p.setPrimitivePropAsStatic=E;function A(ue){let Ae=P(ue);for(let We of Object.keys(Ae.trackIdByPropPath)){let oe=JSON.parse(We);if(ue.pathToProp.every((De,q)=>oe[q]===De)){let De=Ae.trackIdByPropPath[We];if(typeof De!="string")continue;delete Ae.trackIdByPropPath[We],delete Ae.trackData[De]}}e.coreByProject.historic.sheetsById.staticOverrides.byObject.setValueOfCompoundProp(ue)}p.setCompoundPropAsStatic=A;function C(ue){return P(ue).trackData[ue.trackId]}function L(ue){let Ae=C(ue);if(Ae)return Ae.keyframes.find(We=>We.id===ue.keyframeId)}function N(ue){let Ae=ue.snappingFunction(ue.position),We=C(ue);if(!We)return;let{keyframes:oe}=We,De=oe.findIndex(Pt=>Pt.position===Ae);if(De!==-1){let Pt=oe[De];Pt.value=ue.value;return}let q=VS(oe,Pt=>Pt.position<Ae);if(q===-1){oe.unshift({id:D8(),position:Ae,connectedRight:!0,handles:ue.handles||[.5,1,.5,0],type:ue.type||"bezier",value:ue.value});return}let Fe=oe[q];oe.splice(q+1,0,{id:D8(),position:Ae,connectedRight:Fe.connectedRight,handles:ue.handles||[.5,1,.5,0],type:ue.type||"bezier",value:ue.value})}p.setKeyframeAtPosition=N;function U(ue){let Ae=C(ue);if(!Ae)return;let{keyframes:We}=Ae,oe=We.findIndex(De=>De.position===ue.position);oe!==-1&&We.splice(oe,1)}p.unsetKeyframeAtPosition=U;function G(ue){let Ae=C(ue);if(!Ae)return;let We=bT(Ae.keyframes).filter(oe=>ue.keyframeIds.includes(oe.id)).map(oe=>{let De=oe.position,q=ue.snappingFunction(Fde(De,ue));return W(O({},oe),{position:q})});Me(W(O({},ue),{keyframes:We}))}p.transformKeyframes=G;function Q(ue){let Ae=C(ue);Ae&&(Ae.keyframes=Ae.keyframes.map((We,oe)=>{let De=Ae.keyframes[oe-1],q=ue.keyframeIds.includes(We.id),Fe=ue.keyframeIds.includes(De==null?void 0:De.id);return q&&!Fe?W(O({},We),{handles:[We.handles[0],We.handles[1],ue.handles[0],ue.handles[1]]}):q&&Fe?W(O({},We),{handles:[ue.handles[2],ue.handles[3],ue.handles[0],ue.handles[1]]}):Fe?W(O({},We),{handles:[ue.handles[2],ue.handles[3],We.handles[2],We.handles[3]]}):We}))}p.setTweenBetweenKeyframes=Q;function J(ue){var Ae,We,oe,De,q,Fe,Pt,Pe;let ke=L(ue);ke&&(ke.handles=[(We=(Ae=ue.end)==null?void 0:Ae[0])!=null?We:ke.handles[0],(De=(oe=ue.end)==null?void 0:oe[1])!=null?De:ke.handles[1],(Fe=(q=ue.start)==null?void 0:q[0])!=null?Fe:ke.handles[2],(Pe=(Pt=ue.start)==null?void 0:Pt[1])!=null?Pe:ke.handles[3]])}p.setHandlesForKeyframe=J;function ie(ue){let Ae=C(ue);Ae&&(Ae.keyframes=Ae.keyframes.filter(We=>ue.keyframeIds.indexOf(We.id)===-1))}p.deleteKeyframes=ie;function xe(ue){let Ae=L(ue);Ae&&(Ae.type=ue.keyframeType)}p.setKeyframeType=xe;function Me(ue){let Ae=C(ue);if(!Ae)return;let We=bT(Ae.keyframes),oe=ue.keyframes.filter(Pe=>!(typeof Pe.value=="number"&&!isFinite(Pe.value)||!Pe.handles.every(ke=>isFinite(ke)))).map(Pe=>W(O({},Pe),{position:ue.snappingFunction(Pe.position)})),De=Ou(oe,"id"),q=We.filter(Pe=>!De[Pe.id]),Fe=Ou(q,"position");oe.forEach(({position:Pe})=>{let ke=Fe[Pe];ke&&eE(q,ke)});let Pt=Ay([...q,...oe],"position");Ae.keyframes=Pt}p.replaceKeyframes=Me})(a.sequence||(a.sequence={})),(p=>{(v=>{function y(E){var A;let C=e.coreByProject.historic.sheetsById._ensure(E).staticOverrides.byObject;return C[A=E.objectKey]!=null||(C[A]={}),C[E.objectKey]}function k(E){let A=y(E);ll(A,E.pathToProp,E.value)}v.setValueOfCompoundProp=k;function P(E){let A=y(E);ll(A,E.pathToProp,E.value)}v.setValueOfPrimitiveProp=P;function T(E){let A=e.coreByProject.historic.sheetsById._ensure(E).staticOverrides.byObject[E.objectKey];A&&_J(A,E.pathToProp)}v.unsetValueOfPrimitiveProp=T})(p.byObject||(p.byObject={}))})(a.staticOverrides||(a.staticOverrides={}))})(r.sheetsById||(r.sheetsById={}))})(n.historic||(n.historic={}))})(e.coreByProject||(e.coreByProject={}))})(tR||(tR={}));function nR(){let e,n,r=new Promise((c,u)=>{e=f=>{c(f),a.status="resolved"},n=f=>{u(f),a.status="rejected"}}),a={resolve:e,reject:n,promise:r,status:"pending"};return a}var $de=Mt;function Zde(e){let n=e.getState(),r=new $de.Atom(n);return e.subscribe(()=>{let a=e.getState();r.set(a),n=a}),r}sw();function Yde(e){var n,r=e.Symbol;return typeof r=="function"?r.observable?n=r.observable:(n=r("observable"),r.observable=n):n="@@observable",n}var S_;typeof self!="undefined"?S_=self:typeof window!="undefined"?S_=window:typeof $r!="undefined"?S_=$r:S_=w;var Jde=Yde(S_),DJ=Jde,OJ={INIT:"@@redux/INIT"};function RJ(e,n,r){var a;if(typeof n=="function"&&typeof r=="undefined"&&(r=n,n=void 0),typeof r!="undefined"){if(typeof r!="function")throw new Error("Expected the enhancer to be a function.");return r(RJ)(e,n)}if(typeof e!="function")throw new Error("Expected the reducer to be a function.");var c=e,u=n,f=[],p=f,v=!1;function y(){p===f&&(p=f.slice())}function k(){return u}function P(C){if(typeof C!="function")throw new Error("Expected listener to be a function.");var L=!0;return y(),p.push(C),function(){if(L){L=!1,y();var N=p.indexOf(C);p.splice(N,1)}}}function T(C){if(!al(C))throw new Error("Actions must be plain objects. Use custom middleware for async actions.");if(typeof C.type=="undefined")throw new Error('Actions may not have an undefined "type" property. Have you misspelled a constant?');if(v)throw new Error("Reducers may not dispatch actions.");try{v=!0,u=c(u,C)}finally{v=!1}for(var L=f=p,N=0;N<L.length;N++){var U=L[N];U()}return C}function E(C){if(typeof C!="function")throw new Error("Expected the nextReducer to be a function.");c=C,T({type:OJ.INIT})}function A(){var C,L=P;return C={subscribe:function(N){if(typeof N!="object")throw new TypeError("Expected the observer to be an object.");function U(){N.next&&N.next(k())}U();var G=L(U);return{unsubscribe:G}}},C[DJ]=function(){return this},C}return T({type:OJ.INIT}),a={dispatch:T,subscribe:P,getState:k,replaceReducer:E},a[DJ]=A,a}function Qde(){for(var e=arguments.length,n=Array(e),r=0;r<e;r++)n[r]=arguments[r];return n.length===0?function(a){return a}:n.length===1?n[0]:n.reduce(function(a,c){return function(){return a(c.apply(void 0,arguments))}})}function efe(e){let n=Qde();return RJ(e.rootReducer,void 0,n)}X2(),zS();var rR=new WeakMap,tfe=(e,n,r)=>{let a=v=>{e.dispatch(Pg.replacePersistentState(v))},c=LJ(r),u=()=>e.getState().$persistent;p();let f=()=>{let v=u(),y=rR.get(e);v!==y&&(rR.set(e,v),localStorage.setItem(c,JSON.stringify(v)))};e.subscribe(gm(f,1e3)),window&&window.addEventListener("beforeunload",f);function p(){let v=localStorage.getItem(c);if(v){let y,k=!0;try{y=JSON.parse(v),k=!1}catch{K2.warn("Could not parse Theatre's persisted state. This must be a bug. Please report it.")}finally{k||a(y),n()}}else n()}},nfe=(e,n)=>{let r=LJ(n),a=e.getState().$persistent;localStorage.removeItem(r),rR.set(e,a)};function LJ(e){return e+".persistent"}VU(),Tn(),rc(),gr(),zt(),Mk();var wT=Mt;$u(),Jr(),MZ();function iR(e){if(typeof e=="boolean"||typeof e=="string"||typeof e=="number")return e;if(al(e)){let n={},r=!1;for(let[a,c]of Object.entries(e))iR(c)!==void 0&&(n[a]=c,r=!0);if(r)return n}else return}function zJ(e,n,r){for(let[a,c]of Object.entries(e.props))if(c.type==="compound")zJ(c,[...n,a],r);else{if(c.type==="enum")throw new Error("Not yet implemented");r(c,[...n,a])}}function rfe(e,n,r){return{set:(a,c)=>{e();let u=iR(c);if(typeof u=="undefined")return;let{root:f,path:p}=(0,wT.getPointerParts)(a);if(pt(f)){let v=f.template.getMapOfValidSequenceTracks_forStudio().getValue(),y=wk(f.template.staticConfig,p);if(!y)throw new Error("Object ".concat(f.address.objectKey," does not have a prop at ").concat(JSON.stringify(p)));let k=(P,T,E)=>{if(P==null)return;if(iR(T.deserializeAndSanitize(P))===void 0)throw new Error("Invalid value ".concat(p5(P)," for object.props").concat(E.map(L=>"[".concat(JSON.stringify(L),"]")).join("")," is invalid"));let A=W(O({},f.address),{pathToProp:E}),C=nc(v,E);if(typeof C=="string"){let L=f.sheet.getSequence();L.position=L.closestGridPosition(L.position),n.coreByProject.historic.sheetsById.sequence.setKeyframeAtPosition(W(O({},A),{trackId:C,position:L.position,value:P,snappingFunction:L.closestGridPosition,type:"bezier"}))}else n.coreByProject.historic.sheetsById.staticOverrides.byObject.setValueOfPrimitiveProp(W(O({},A),{value:P}))};if(y.type==="compound"){let P=(0,wT.getPointerParts)(a).path,T=P.length;zJ(y,P,(E,A)=>{let C=A.slice(T),L=Yu(u,C);if(typeof L!="undefined")k(L,E,A);else throw new Error("Property object.props".concat(A.map(N=>"[".concat(JSON.stringify(N),"]")).join("")," is required but not provided"))})}else{if(y.type==="enum")throw new Error("Enums aren't implemented yet");k(u,y,p)}}else if(Yn(f)){let[v]=p;if(v==="subUnitsPerUnit"){if(typeof u!="number"||!cs(u)||u<1)throw new Error("Value ".concat(u," is not an integer, which is required for setting sequence prop ").concat(v));n.coreByProject.historic.sheetsById.sequence.setSubUnitsPerUnit(W(O({},f.address),{subUnitsPerUnit:u}))}else if(v==="length"){if(typeof u!="number"||u<=.001)throw new Error("Value ".concat(u," is not a positive number, which is required for setting sequence prop ").concat(v));n.coreByProject.historic.sheetsById.sequence.setLength(W(O({},f.address),{length:u}))}else throw new Error("Setting sequence prop ".concat(v," is not supported"))}else throw new Error("Only setting props of SheetObject-s and sequences is supported in a transaction so far")},unset:a=>{e();let{root:c,path:u}=(0,wT.getPointerParts)(a);if(pt(c)){let f=c.template.getMapOfValidSequenceTracks_forStudio().getValue(),p=Yu(c.template.getDefaultValues().getValue(),u),v=wk(c.template.staticConfig,u),y=(k,P)=>{let T=W(O({},c.address),{pathToProp:P}),E=nc(f,P);typeof E=="string"?n.coreByProject.historic.sheetsById.sequence.unsetKeyframeAtPosition(W(O({},T),{trackId:E,position:c.sheet.getSequence().positionSnappedToGrid})):v!==void 0&&n.coreByProject.historic.sheetsById.staticOverrides.byObject.unsetValueOfPrimitiveProp(T)};v.type==="compound"?yt(p,(k,P)=>{y(k,P)},(0,wT.getPointerParts)(a).path):y(p,u)}else throw new Error("Only setting props of SheetObject-s is supported in a transaction so far")},get drafts(){return e(),r},get stateEditors(){return n}}}var ife=class{constructor(){Te(this,"_reduxStore"),Te(this,"_atom"),Te(this,"atomP"),this._reduxStore=efe({rootReducer:Nde,devtoolsOptions:{name:"Theatre.js Studio"}}),this._atom=Zde(this._reduxStore),this.atomP=this._atom.pointer}initialize(e){let n=nR();return e.usePersistentStorage===!0?tfe(this._reduxStore,()=>{this.tempTransaction(({drafts:r})=>{r.ephemeral.initialised=!0}).commit(),n.resolve()},e.persistenceKey):(this.tempTransaction(({drafts:r})=>{r.ephemeral.initialised=!0}).commit(),n.resolve()),n.promise}getState(){return this._reduxStore.getState()}__experimental_clearPersistentStorage(e){return nfe(this._reduxStore,e),this.getState()}__dev_startHistoryFromScratch(e){this._reduxStore.dispatch(Pg.historic.startHistoryFromScratch(Pg.reduceParts(n=>W(O({},n),{historic:e}))))}tempTransaction(e){let n=zde(),r,a=n.push(Pg.reduceParts(c=>{let u={historic:J5(c.historic),ahistoric:J5(c.ahistoric),ephemeral:J5(c.ephemeral)},f=!0,p=()=>{if(!f)throw new Error("You seem to have called the transaction api after studio.transaction() has finished running")},v=IJ(u),y=rfe(p,v,u);try{return e(y),f=!1,{historic:Q5(u.historic),ahistoric:Q5(u.ahistoric),ephemeral:Q5(u.ephemeral)}}catch(k){return r=k,c}finally{IJ(void 0)}}));if(this._reduxStore.dispatch(a),r)throw this._reduxStore.dispatch(n.discard()),r;return{commit:()=>{this._reduxStore.dispatch(n.commit())},discard:()=>{this._reduxStore.dispatch(n.discard())}}}undo(){this._reduxStore.dispatch(Pg.historic.undo())}redo(){this._reduxStore.dispatch(Pg.historic.redo())}createContentOfSaveFile(e){if(!this._reduxStore.getState().$persistent.historic.innerState.coreByProject[e])throw new Error("Project ".concat(e," has not been initialized."));let n=UU();this.tempTransaction(({stateEditors:a})=>{a.coreByProject.historic.revisionHistory.add({projectId:e,revision:n})}).commit();let r=this._reduxStore.getState().$persistent.historic.innerState.coreByProject[e];return O({},r)}},ofe=Mt,oR=class{constructor(){Te(this,"_values",{})}get(e,n){if(this.has(e))return this._values[e];{let r=n();return this._values[e]=r,r}}has(e){return this._values.hasOwnProperty(e)}};Tn(),Wu(),Ge(),Jr(),u5();var afe=class{constructor(e){Te(this,"ui",{hide(){_e().ui.hide()},get isHidden(){return _e().ui.isHidden},restore(){_e().ui.restore()},renderToolset(n,r){return _e().ui.renderToolset(n,r)}}),Te(this,"_cache",new oR),Te(this,"__experimental",{__experimental_disblePlayPauseKeyboardShortcut(){due()},__experimental_enablePlayPauseKeyboardShortcut(){fue()},__experimental_clearPersistentStorage(n){return _e().clearPersistentStorage(n)},__experimental_createContentOfSaveFileTyped(n){return _e().createContentOfSaveFile(n)}})}initialize(e){return _e().initialize(e)}extend(e,n){_e().extend(e,n)}transaction(e){return _e().transaction(({set:n,unset:r,stateEditors:a})=>e({set:n,unset:r,__experimental_forgetObject:c=>{if(!Xt(c))throw new Error("object in transactionApi.__experimental_forgetObject(object) must be the return type of sheet.object(...)");a.coreByProject.historic.sheetsById.forgetObject(c.address)},__experimental_forgetSheet:c=>{if(!xn(c))throw new Error("sheet in transactionApi.__experimental_forgetSheet(sheet) must be the return type of project.sheet()");a.coreByProject.historic.sheetsById.forgetSheet(c.address)}}))}_getSelectionPrism(){return this._cache.get("_getSelectionPrism()",()=>(0,ofe.prism)(()=>Gu().filter(e=>e.type==="Theatre_SheetObject"||e.type==="Theatre_Sheet").map(e=>e.publicApi)))}_getSelection(){return this._getSelectionPrism().getValue()}setSelection(e){let n=[...e].filter(r=>Xt(r)||xn(r)).map(r=>_e().corePrivateAPI(r));_e().transaction(({stateEditors:r})=>{r.studio.historic.panels.outline.selection.set(n)})}onSelectionChange(e){let n=_e();return this._getSelectionPrism().onChange(n.ticker,e,!0)}get selection(){return this._getSelection()}scrub(){return _e().scrub()}getStudioProject(){let e=_e().core;if(!e)throw new Error("You're calling studio.getStudioProject() before `@theatre/core` is loaded. To fix this:\n1. Check if `@theatre/core` is import/required in your bundle.\n2. Check the stack trace of this error and make sure the funciton that calls getStudioProject() is run after `@theatre/core` is loaded.");return _e().getStudioProject(e)}debouncedScrub(e=1e3){let n,r=gm(()=>{let a=n;a&&(n=void 0,a.commit())},e);return{capture:a=>{n||(n=this.scrub());let c=!0;try{n.capture(a),c=!1}finally{if(c){let u=n;n=void 0,u.discard()}else r()}}}}createPane(e){return _e().paneManager.createPane(e)}destroyPane(e){return _e().paneManager.destroyPane(e)}createContentOfSaveFile(e){return _e().createContentOfSaveFile(e)}};I8();var xh=Mt,sfe=class{constructor(e){this._studio=e,Te(this,"_cache",new oR),this._instantiatePanesAsTheyComeIn()}_instantiatePanesAsTheyComeIn(){let e=this._getAllPanes();e.onStale(()=>{e.getValue()})}_getAllPanes(){return this._cache.get("_getAllPanels()",()=>(0,xh.prism)(()=>{if(!(0,xh.val)(this._studio.coreP))return{};let e=(0,xh.val)(this._studio.atomP.historic.panelInstanceDesceriptors),n=(0,xh.val)(this._studio.atomP.ephemeral.extensions.paneClasses),r={};for(let a of Object.values(e)){if(!a)continue;let c=n[a.paneClass];if(!c)continue;let{instanceId:u}=a,{extensionId:f,classDefinition:p}=c,v=xh.prism.memo("instance-".concat(a.instanceId),()=>({extensionId:f,instanceId:u,definition:p}),[p]);r[u]=v}return r}))}get allPanesD(){return this._getAllPanes()}createPane(e){if(!this._studio.core)throw new Error("Can't create a pane because @theatre/core is not yet loaded");let n=(0,xh.val)(this._studio.atomP.ephemeral.extensions.paneClasses[e].extensionId),r=(0,xh.val)(this._studio.atomP.historic.panelInstanceDesceriptors),a;for(let c=1;c<1e3&&(a="".concat(e," #").concat(c),!!r[a]);c++);if(!n)throw new Error('Pane class "'.concat(e,'" is not registered.'));return this._studio.transaction(({drafts:c})=>{c.historic.panelInstanceDesceriptors[a]={instanceId:a,paneClass:e}}),this._getAllPanes().getValue()[a]}destroyPane(e){if(!this._studio.core)throw new Error("Can't do this yet because @theatre/core is not yet loaded");this._studio.transaction(({drafts:n})=>{delete n.historic.panelInstanceDesceriptors[e]})}},ST=Mt;Ge();var NJ=30*60*1e3,lfe=1e3*60*60;function cfe(){return qe(this,null,function*(){let e=_e().atomP.ahistoric.visibilityState;if((0,ST.val)(e)==="everythingIsVisible")return;let n=nR(),r=(0,ST.pointerToPrism)(e).onStale(()=>{(0,ST.val)(e)==="everythingIsVisible"&&(r(),n.resolve(void 0))});return n.promise})}function ufe(){return qe(this,null,function*(){if(!"0.7.2".match(/COMPAT/))for(yield ET(500),yield cfe();;){let e=(0,ST.val)(_e().atomP.ahistoric.updateChecker);if(e&&e.result!=="error"){let n=e.lastChecked,r=Date.now(),a=Math.abs(r-n);a<NJ&&(yield ET(NJ-a))}try{let n=yield fetch(new Request("https://updates.theatrejs.com/updates/0.7.2"));if(n.ok){let r=yield n.json();if(!dfe(r))throw new Error("Bad response");_e().transaction(({drafts:a})=>{a.ahistoric.updateChecker={lastChecked:Date.now(),result:O({},r)}}),yield ET(1e3)}else throw new Error("HTTP Error ".concat(n.statusText))}catch{yield ET(lfe)}}})}var ET=e=>new Promise(n=>setTimeout(n,e));function dfe(e){if(typeof e!="object")return!1;let n=e;return typeof n.hasUpdates!="boolean"?!1:n.hasUpdates===!0&&typeof n.newVersion=="string"&&typeof n.releasePage=="string"||n.hasUpdates===!1}var ffe=ee(Lu());function Lc(e){return new Promise((n,r)=>{e.oncomplete=e.onsuccess=()=>n(e.result),e.onabort=e.onerror=()=>r(e.error)})}function FJ(e,n){let r=indexedDB.open(e);r.onupgradeneeded=()=>r.result.createObjectStore(n);let a=Lc(r);return(c,u)=>a.then(f=>u(f.transaction(n,c).objectStore(n)))}var aR;function Ig(){return aR||(aR=FJ("keyval-store","keyval")),aR}function hfe(e,n=Ig()){return n("readonly",r=>Lc(r.get(e)))}function pfe(e,n,r=Ig()){return r("readwrite",a=>(a.put(n,e),Lc(a.transaction)))}function mfe(e,n=Ig()){return n("readwrite",r=>(r.delete(e),Lc(r.transaction)))}function sR(e,n){return e.openCursor().onsuccess=function(){this.result&&(n(this.result),this.result.continue())},Lc(e.transaction)}function gfe(e=Ig()){return e("readonly",n=>{if(n.getAllKeys)return Lc(n.getAllKeys());let r=[];return sR(n,a=>r.push(a.key)).then(()=>r)})}function vfe(e=Ig()){return e("readonly",n=>{if(n.getAll)return Lc(n.getAll());let r=[];return sR(n,a=>r.push(a.value)).then(()=>r)})}function yfe(e=Ig()){return e("readonly",n=>{if(n.getAll&&n.getAllKeys)return Promise.all([Lc(n.getAllKeys()),Lc(n.getAll())]).then(([a,c])=>a.map((u,f)=>[u,c[f]]));let r=[];return e("readonly",a=>sR(a,c=>r.push([c.key,c.value])).then(()=>r))})}var bfe=e=>{let n=FJ("theatrejs-".concat(e),"default-store");return{set:(r,a)=>pfe(r,a,n),get:r=>hfe(r,n),del:r=>mfe(r,n),keys:()=>gfe(n),entries:()=>yfe(n),values:()=>vfe(n)}};f9(),Wb();var jJ="theatre-0.4",_fe=`You seem to have imported '@theatre/studio' but haven't initialized it. You can initialize the studio by:
\`\`\`
import studio from '@theatre/studio'
studio.initialize()
\`\`\`

* If you didn't mean to import '@theatre/studio', this means that your bundler is not tree-shaking it. This is most likely a bundler misconfiguration.

* If you meant to import '@theatre/studio' without showing its UI, you can do that by running:

\`\`\`
import studio from '@theatre/studio'
studio.initialize()
studio.ui.hide()
\`\`\`
`,xfe="You seem to have imported '@theatre/studio' but called `studio.initialize()` after some delay.\nTheatre.js projects remain in pending mode (won't play their sequences) until the studio is initialized, so you should place the `studio.initialize()` line right after the import line:\n\n```\nimport studio from '@theatre/studio'\n// ... and other imports\n\nstudio.initialize()\n```\n",wfe=class{constructor(){Te(this,"ui"),Te(this,"publicApi"),Te(this,"address"),Te(this,"_projectsProxy",new fT.PointerProxy(new fT.Atom({}).pointer)),Te(this,"projectsP",this._projectsProxy.pointer),Te(this,"_store",new ife),Te(this,"_corePrivateApi"),Te(this,"_cache",new oR),Te(this,"paneManager"),Te(this,"_coreAtom",new fT.Atom({})),Te(this,"_initializedDeferred",nR()),Te(this,"_initializeFnCalled",!1),Te(this,"_didWarnAboutNotInitializing",!1),Te(this,"_coreBits"),Te(this,"_rafDriver"),this.address={studioId:Db(10)},this.publicApi=new afe(this),this.ui=new mde(this),this._attachToIncomingProjects(),this.paneManager=new sfe(this),typeof window!="undefined"&&setTimeout(()=>{this._initializeFnCalled||(console.error(_fe),this._didWarnAboutNotInitializing=!0)},100)}get ticker(){if(!this._rafDriver)throw new Error("`studio.ticker` was read before studio.initialize() was called.");return this._rafDriver.ticker}get atomP(){return this._store.atomP}initialize(e){return qe(this,null,function*(){if(!this._coreBits)throw new Error("You seem to have imported `@theatre/studio` without importing `@theatre/core`. Make sure to include an import of `@theatre/core` before calling `studio.initializer()`.");if(this._initializeFnCalled)return this._initializedDeferred.promise;this._initializeFnCalled=!0,this._didWarnAboutNotInitializing&&console.warn(xfe);let n={persistenceKey:jJ,usePersistentStorage:!0};if(typeof(e==null?void 0:e.persistenceKey)=="string"&&(n.persistenceKey=e.persistenceKey),((e==null?void 0:e.usePersistentStorage)===!1||typeof window=="undefined")&&(n.usePersistentStorage=!1),e!=null&&e.__experimental_rafDriver){if(e.__experimental_rafDriver.type!=="Theatre_RafDriver_PublicAPI")throw new Error("parameter `rafDriver` in `studio.initialize({__experimental_rafDriver})` must be either be undefined, or the return type of core.createRafDriver()");let r=this._coreBits.privateAPI(e.__experimental_rafDriver);if(!r)throw new Error("parameter `rafDriver` in `studio.initialize({__experimental_rafDriver})` seems to come from a different version of `@theatre/core` than the version that is attached to `@theatre/studio`");this._rafDriver=r}else this._rafDriver=this._coreBits.getCoreRafDriver();try{yield this._store.initialize(n)}catch(r){this._initializedDeferred.reject(r);return}typeof window!="undefined"&&(yield this.ui.ready),this._initializedDeferred.resolve(),this.ui.render(),ufe().catch(r=>{console.error(r)})})}get initialized(){return this._initializedDeferred.promise}_attachToIncomingProjects(){let e=(0,fT.pointerToPrism)(this.projectsP),n=r=>{for(let a of Object.values(r))a.isAttachedToStudio||a.attachToStudio(this)};e.onStale(()=>{n(e.getValue())}),n(e.getValue())}setCoreBits(e){this._coreBits=e,this._corePrivateApi=e.privateAPI,this._coreAtom.setByPointer(n=>n.core,e.coreExports),this._setProjectsP(e.projectsP)}_setProjectsP(e){this._projectsProxy.setPointer(e)}scrub(){return new hde(this)}tempTransaction(e){return this._store.tempTransaction(e)}transaction(e){return this.tempTransaction(e).commit()}__dev_startHistoryFromScratch(e){return this._store.__dev_startHistoryFromScratch(e)}get corePrivateAPI(){return this._corePrivateApi}get core(){return this._coreAtom.get().core}get coreP(){return this._coreAtom.pointer.core}extend(e,n){if(!e||typeof e!="object")throw new Error("Extensions must be JS objects");if(typeof e.id!="string")throw new Error("extension.id must be a string");let r=(n==null?void 0:n.__experimental_reconfigure)===!0,a=e.id,c=this._store.getState().ephemeral.extensions.byId[a];if(c&&!r){if(e===c||(0,ffe.default)(e,c))return;throw new Error('Extension id "'.concat(e.id,'" is already defined. If you mean to re-configure the extension, do it like this: studio.extend(extension, {__experimental_reconfigure: true})})'))}this.transaction(({drafts:u})=>{var f,p;u.ephemeral.extensions.byId[e.id]=e;let v=u.ephemeral.extensions.paneClasses;r&&c&&((f=c.panes)==null||f.forEach(y=>{delete v[y.class]})),(p=e.panes)==null||p.forEach(y=>{if(typeof y.class!="string")throw new Error("pane.class must be a string");if(y.class.length<3)throw new Error("pane.class should be a string with 3 or more characters");let k=v[y.class];if(k)if(r&&k.extensionId===e.id)console.warn('Pane class "'.concat(y.class,'" already exists. This is a bug in Theatre.js. Please report it at https://github.com/theatre-js/theatre/issues/new'));else throw new Error('Pane class "'.concat(y.class,'" already exists and is supplied by extension ').concat(k));v[y.class]={extensionId:e.id,classDefinition:y}})})}getStudioProject(e){return this._cache.get("getStudioProject",()=>e.getProject("Studio"))}getExtensionSheet(e,n){return this._cache.get("extensionSheet-"+e,()=>this.getStudioProject(n).sheet("Extension "+e))}undo(){this._store.undo()}redo(){this._store.redo()}createContentOfSaveFile(e){return this._store.createContentOfSaveFile(e)}createAssetStorage(e,n){return qe(this,null,function*(){if(typeof window=="undefined")return{getAssetUrl:()=>"",createAsset:()=>Promise.resolve(null)};if(!("indexedDB"in window))return console.log("This browser doesn't support IndexedDB."),{getAssetUrl:y=>{throw new Error("IndexedDB is required by the default asset manager, but it's not supported by this browser. To use assets, please provide your own asset manager to the project config.")},createAsset:y=>{throw new Error("IndexedDB is required by the default asset manager, but it's not supported by this browser. To use assets, please provide your own asset manager to the project config.")}};let r=bfe("".concat(e.address.projectId,"-assets")),a=yD(e),c=yield r.keys();yield Promise.all(c.map(y=>qe(this,null,function*(){a.includes(y)||(yield r.del(y))}))),yield Promise.all(c.map(y=>qe(this,null,function*(){var k,P;let T="".concat(n,"/").concat(y);try{(yield fetch(T,{method:"HEAD"})).ok&&(yield r.del(y))}catch{Gb.error("Failed to access assets","Failed to access assets at ".concat((P=(k=e.config.assets)==null?void 0:k.baseUrl)!=null?P:"/",". This is likely due to a CORS issue."))}})));let u=new Map(yield r.entries()),f=new Map,p=y=>{if(f.has(y))return f.get(y);{let k=URL.createObjectURL(y);return f.set(y,k),k}},v=y=>{let k=u.get(y);if(!k)throw new Error("Asset with id ".concat(y," not found"));return p(k)};return{getAssetUrl:y=>u.has(y)?v(y):"".concat(n,"/").concat(y),createAsset:y=>qe(this,null,function*(){var k,P,T;let E=yD(e),A=!1;if(E.includes(y.name)){let C;try{C=(k=u.get(y.name))!=null?k:yield fetch("".concat(n,"/").concat(y.name)).then(L=>L.ok?L.blob():void 0)}catch{return Gb.error("Failed to access assets","Failed to access assets at ".concat((T=(P=e.config.assets)==null?void 0:P.baseUrl)!=null?T:"/",". This is likely due to a CORS issue.")),Promise.resolve(null)}if(C){if(A=yield(yield Promise.resolve().then(()=>ee(dde()))).default.isEqual(y,C),A)return y.name;{let L=N=>{let U=prompt(N,y.name);return U===null?!1:U===""?L("Asset name cannot be empty. Please choose a different file name for this asset."):E.includes(U)?(console.log(E),L("An asset with this name already exists. Please choose a different file name for this asset.")):(y=new File([y],U,{type:y.type}),!0)};if(!L("An asset with this name already exists. Please choose a different file name for this asset."))return null}}}return u.set(y.name,y),yield r.set(y.name,y),y.name})}})}clearPersistentStorage(e=jJ){this._store.__experimental_clearPersistentStorage(e)}},lR="__TheatreJS_StudioBundle",Sfe="__TheatreJS_CoreBundle",Efe="__TheatreJS_Notifications",kfe=class{constructor(e){this._studio=e,Te(this,"_coreBundle")}get type(){return"Theatre_StudioBundle"}registerCoreBundle(e){if(this._coreBundle)throw new Error("StudioBundle.coreBundle is already registered. This is a bug.");this._coreBundle=e;let n;e.getBitsForStudio(this._studio,r=>{n=r}),this._studio.setCoreBits(n)}},Tfe=ee(Oe());Xe();var BJ,Mfe=le.div(BJ||(BJ=Y([""]))),Pfe=e=>Tfe.default.createElement(Mfe,null),Cfe=Pfe;Wb();var cR=new wfe;Ke(cR);var Afe=cR.publicApi,Ife=Afe;Dfe();function Dfe(){if(typeof window=="undefined")return;let e=window[lR];if(typeof e!="undefined")throw typeof e=="object"&&e&&typeof e.version=="string"?new Error(`It seems that the module '@theatre/studio' is loaded more than once. This could have two possible causes:
1. You might have two separate versions of Theatre.js in node_modules.
2. Or this might be a bundling misconfiguration, in case you're using a bundler like Webpack/ESBuild/Rollup.

Note that it **is okay** to import '@theatre/studio' multiple times. But those imports should point to the same module.`):new Error("The variable window.".concat(lR," seems to be already set by a module other than @theatre/core."));let n=new kfe(cR);window[lR]=n;let r=window[Sfe];r&&r!==null&&r.type==="Theatre_CoreBundle"&&n.registerCoreBundle(r)}typeof window!="undefined"&&(window[Efe]={notify:Gb});/*! Bundled license information:

lodash-es/lodash.js:
  (**
   * @license
   * Lodash (Custom Build) <https://lodash.com/>
   * Build: `lodash modularize exports="es" -o ./`
   * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
   * Released under MIT license <https://lodash.com/license>
   * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
   * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
   *)

queue-microtask/index.js:
  (*! queue-microtask. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> *)

react/cjs/react.production.min.js:
  (**
   * @license React
   * react.production.min.js
   *
   * Copyright (c) Facebook, Inc. and its affiliates.
   *
   * This source code is licensed under the MIT license found in the
   * LICENSE file in the root directory of this source tree.
   *)

scheduler/cjs/scheduler.production.min.js:
  (**
   * @license React
   * scheduler.production.min.js
   *
   * Copyright (c) Facebook, Inc. and its affiliates.
   *
   * This source code is licensed under the MIT license found in the
   * LICENSE file in the root directory of this source tree.
   *)

react-dom/cjs/react-dom.production.min.js:
  (**
   * @license React
   * react-dom.production.min.js
   *
   * Copyright (c) Facebook, Inc. and its affiliates.
   *
   * This source code is licensed under the MIT license found in the
   * LICENSE file in the root directory of this source tree.
   *)

react-is/cjs/react-is.production.min.js:
  (** @license React v17.0.2
   * react-is.production.min.js
   *
   * Copyright (c) Facebook, Inc. and its affiliates.
   *
   * This source code is licensed under the MIT license found in the
   * LICENSE file in the root directory of this source tree.
   *)

react-is/cjs/react-is.production.min.js:
  (** @license React v16.13.1
   * react-is.production.min.js
   *
   * Copyright (c) Facebook, Inc. and its affiliates.
   *
   * This source code is licensed under the MIT license found in the
   * LICENSE file in the root directory of this source tree.
   *)

jszip/dist/jszip.min.js:
  (*!
  
  JSZip v3.10.1 - A JavaScript class for generating and reading zip files
  <http://stuartk.com/jszip>
  
  (c) 2009-2016 Stuart Knightley <stuart [at] stuartk.com>
  Dual licenced under the MIT license or GPLv3. See https://raw.github.com/Stuk/jszip/main/LICENSE.markdown.
  
  JSZip uses the library pako released under the MIT license :
  https://github.com/nodeca/pako/blob/main/LICENSE
  *)

jiff/lib/lcs.js:
  (** @license MIT License (c) copyright 2010-2014 original author or authors *)

jiff/lib/array.js:
  (** @license MIT License (c) copyright 2010-2014 original author or authors *)

jiff/lib/jsonPointerParse.js:
  (** @license MIT License (c) copyright 2010-2014 original author or authors *)

jiff/lib/jsonPointer.js:
  (** @license MIT License (c) copyright 2010-2014 original author or authors *)

jiff/lib/clone.js:
  (** @license MIT License (c) copyright 2010-2014 original author or authors *)

jiff/lib/jsonPatch.js:
  (** @license MIT License (c) copyright 2010-2014 original author or authors *)

jiff/jiff.js:
  (** @license MIT License (c) copyright 2010-2014 original author or authors *)
*/})(jL,jL.exports);var $_e=X_e(jL.exports),$n={exports:{}};(function(w,t){var i=Object.create,l=Object.defineProperty,d=Object.defineProperties,g=Object.getOwnPropertyDescriptor,_=Object.getOwnPropertyDescriptors,b=Object.getOwnPropertyNames,M=Object.getOwnPropertySymbols,I=Object.getPrototypeOf,F=Object.prototype.hasOwnProperty,j=Object.prototype.propertyIsEnumerable,B=(h,x,D)=>x in h?l(h,x,{enumerable:!0,configurable:!0,writable:!0,value:D}):h[x]=D,K=(h,x)=>{for(var D in x||(x={}))F.call(x,D)&&B(h,D,x[D]);if(M)for(var D of M(x))j.call(x,D)&&B(h,D,x[D]);return h},te=(h,x)=>d(h,_(x)),X=(h,x)=>function(){return x||(0,h[b(h)[0]])((x={exports:{}}).exports,x),x.exports},O=(h,x)=>{for(var D in x)l(h,D,{get:x[D],enumerable:!0})},W=(h,x,D,H)=>{if(x&&typeof x=="object"||typeof x=="function")for(let ne of b(x))!F.call(h,ne)&&ne!==D&&l(h,ne,{get:()=>x[ne],enumerable:!(H=g(x,ne))||H.enumerable});return h},we=(h,x,D)=>(D=h!=null?i(I(h)):{},W(x||!h||!h.__esModule?l(D,"default",{value:h,enumerable:!0}):D,h)),R=h=>W(l({},"__esModule",{value:!0}),h),se=(h,x,D)=>(B(h,typeof x!="symbol"?x+"":x,D),D),me=X({"../node_modules/timing-function/lib/UnitBezier.js"(h,x){x.exports=function(){function D(H,ne,ce,Ce){this.set(H,ne,ce,Ce)}return D.prototype.set=function(H,ne,ce,Ce){this._cx=3*H,this._bx=3*(ce-H)-this._cx,this._ax=1-this._cx-this._bx,this._cy=3*ne,this._by=3*(Ce-ne)-this._cy,this._ay=1-this._cy-this._by},D.epsilon=1e-6,D.prototype._sampleCurveX=function(H){return((this._ax*H+this._bx)*H+this._cx)*H},D.prototype._sampleCurveY=function(H){return((this._ay*H+this._by)*H+this._cy)*H},D.prototype._sampleCurveDerivativeX=function(H){return(3*this._ax*H+2*this._bx)*H+this._cx},D.prototype._solveCurveX=function(H,ne){var ce,Ce,He,$e,ct,It;for(He=void 0,$e=void 0,ct=void 0,It=void 0,ce=void 0,Ce=void 0,ct=H,Ce=0;Ce<8;){if(It=this._sampleCurveX(ct)-H,Math.abs(It)<ne)return ct;if(ce=this._sampleCurveDerivativeX(ct),Math.abs(ce)<ne)break;ct=ct-It/ce,Ce++}if(He=0,$e=1,ct=H,ct<He)return He;if(ct>$e)return $e;for(;He<$e;){if(It=this._sampleCurveX(ct),Math.abs(It-H)<ne)return ct;H>It?He=ct:$e=ct,ct=($e-He)*.5+He}return ct},D.prototype.solve=function(H,ne){return this._sampleCurveY(this._solveCurveX(H,ne))},D.prototype.solveSimple=function(H){return this._sampleCurveY(this._solveCurveX(H,1e-6))},D}()}}),ze=X({"../node_modules/levenshtein-edit-distance/index.js"(h,x){var D,H;D=[],H=[];function ne(ce,Ce,He){var $e,ct,It,Ot,le,Xe,Qt,Nn;if(ce===Ce)return 0;if($e=ce.length,ct=Ce.length,$e===0)return ct;if(ct===0)return $e;for(He&&(ce=ce.toLowerCase(),Ce=Ce.toLowerCase()),Qt=0;Qt<$e;)H[Qt]=ce.charCodeAt(Qt),D[Qt]=++Qt;for(Nn=0;Nn<ct;)for(It=Ce.charCodeAt(Nn),Ot=le=Nn++,Qt=-1;++Qt<$e;)Xe=It===H[Qt]?le:le+1,le=D[Qt],D[Qt]=Ot=le>Ot?Xe>Ot?Ot+1:Xe:Xe>le?le+1:Xe;return Ot}x.exports=ne}}),ee=X({"../node_modules/propose/propose.js"(h,x){var D=ze();function H(){var ne,ce,Ce,He,$e,ct=0,It=arguments[0],Ot=arguments[1],le=Ot.length,Xe=arguments[2];Xe&&(He=Xe.threshold,$e=Xe.ignoreCase),He===void 0&&(He=0);for(var Qt=0;Qt<le;++Qt)$e?ce=D(It,Ot[Qt],!0):ce=D(It,Ot[Qt]),ce>It.length?ne=1-ce/Ot[Qt].length:ne=1-ce/It.length,ne>ct&&(ct=ne,Ce=Ot[Qt]);return ct>=He?Ce:null}x.exports=H}}),fe=X({"../node_modules/fast-deep-equal/index.js"(h,x){x.exports=function D(H,ne){if(H===ne)return!0;if(H&&ne&&typeof H=="object"&&typeof ne=="object"){if(H.constructor!==ne.constructor)return!1;var ce,Ce,He;if(Array.isArray(H)){if(ce=H.length,ce!=ne.length)return!1;for(Ce=ce;Ce--!==0;)if(!D(H[Ce],ne[Ce]))return!1;return!0}if(H.constructor===RegExp)return H.source===ne.source&&H.flags===ne.flags;if(H.valueOf!==Object.prototype.valueOf)return H.valueOf()===ne.valueOf();if(H.toString!==Object.prototype.toString)return H.toString()===ne.toString();if(He=Object.keys(H),ce=He.length,ce!==Object.keys(ne).length)return!1;for(Ce=ce;Ce--!==0;)if(!Object.prototype.hasOwnProperty.call(ne,He[Ce]))return!1;for(Ce=ce;Ce--!==0;){var $e=He[Ce];if(!D(H[$e],ne[$e]))return!1}return!0}return H!==H&&ne!==ne}}}),Te={};O(Te,{createRafDriver:()=>ll,getProject:()=>$y,notify:()=>sc,onChange:()=>zm,types:()=>Iy,val:()=>Zy}),w.exports=R(Te);var Y={};O(Y,{createRafDriver:()=>ll,getProject:()=>$y,notify:()=>sc,onChange:()=>zm,types:()=>Iy,val:()=>Zy});var qe=Mt,Tt=class{constructor(){se(this,"atom",new qe.Atom({projects:{}}))}add(h,x){this.atom.setByPointer(D=>D.projects[h],x)}get(h){return this.atom.get().projects[h]}has(h){return!!this.get(h)}},xt=new Tt,Ke=xt,_e=new WeakMap;function Qe(h){return _e.get(h)}function Ge(h,x){_e.set(h,x)}var yt=[],ft=Array.isArray,gt=ft,zt=typeof $r=="object"&&$r&&$r.Object===Object&&$r,kt=zt,Rt=typeof self=="object"&&self&&self.Object===Object&&self,Yt=kt||Rt||Function("return this")(),Jt=Yt,pt=Jt.Symbol,Yn=pt,An=Object.prototype,xn=An.hasOwnProperty,Xt=An.toString,Tn=Yn?Yn.toStringTag:void 0;function Ln(h){var x=xn.call(h,Tn),D=h[Tn];try{h[Tn]=void 0;var H=!0}catch{}var ne=Xt.call(h);return H&&(x?h[Tn]=D:delete h[Tn]),ne}var hn=Ln,Mr=Object.prototype,Or=Mr.toString;function jr(h){return Or.call(h)}var dr=jr,Wn="[object Null]",qn="[object Undefined]",pr=Yn?Yn.toStringTag:void 0;function Zr(h){return h==null?h===void 0?qn:Wn:pr&&pr in Object(h)?hn(h):dr(h)}var Se=Zr;function he(h){return h!=null&&typeof h=="object"}var ut=he,Nt="[object Symbol]";function jt(h){return typeof h=="symbol"||ut(h)&&Se(h)==Nt}var qt=jt,vn=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,ve=/^\w*$/;function Et(h,x){if(gt(h))return!1;var D=typeof h;return D=="number"||D=="symbol"||D=="boolean"||h==null||qt(h)?!0:ve.test(h)||!vn.test(h)||x!=null&&h in Object(x)}var Ht=Et;function Ut(h){var x=typeof h;return h!=null&&(x=="object"||x=="function")}var Ie=Ut,Gt="[object AsyncFunction]",Bt="[object Function]",fn="[object GeneratorFunction]",Kt="[object Proxy]";function tn(h){if(!Ie(h))return!1;var x=Se(h);return x==Bt||x==fn||x==Gt||x==Kt}var Ft=tn,pn=Jt["__core-js_shared__"],zn=pn,Bn=function(){var h=/[^.]+$/.exec(zn&&zn.keys&&zn.keys.IE_PROTO||"");return h?"Symbol(src)_1."+h:""}();function ti(h){return!!Bn&&Bn in h}var Ni=ti,Uo=Function.prototype,ns=Uo.toString;function Js(h){if(h!=null){try{return ns.call(h)}catch{}try{return h+""}catch{}}return""}var Mi=Js,rs=/[\\^$.*+?()[\]{}|]/g,Wl=/^\[object .+?Constructor\]$/,bi=Function.prototype,Fi=Object.prototype,eu=bi.toString,ye=Fi.hasOwnProperty,nt=RegExp("^"+eu.call(ye).replace(rs,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function dt(h){if(!Ie(h)||Ni(h))return!1;var x=Ft(h)?nt:Wl;return x.test(Mi(h))}var at=dt;function bt(h,x){return h==null?void 0:h[x]}var wn=bt;function En(h,x){var D=wn(h,x);return at(D)?D:void 0}var Sn=En,Dn=Sn(Object,"create"),Vn=Dn;function jn(){this.__data__=Vn?Vn(null):{},this.size=0}var Hn=jn;function xr(h){var x=this.has(h)&&delete this.__data__[h];return this.size-=x?1:0,x}var ta=xr,ni="__lodash_hash_undefined__",Pi=Object.prototype,to=Pi.hasOwnProperty;function Gn(h){var x=this.__data__;if(Vn){var D=x[h];return D===ni?void 0:D}return to.call(x,h)?x[h]:void 0}var na=Gn,kr=Object.prototype,ji=kr.hasOwnProperty;function ci(h){var x=this.__data__;return Vn?x[h]!==void 0:ji.call(x,h)}var _i=ci,ra="__lodash_hash_undefined__";function ri(h,x){var D=this.__data__;return this.size+=this.has(h)?0:1,D[h]=Vn&&x===void 0?ra:x,this}var ia=ri;function yo(h){var x=-1,D=h==null?0:h.length;for(this.clear();++x<D;){var H=h[x];this.set(H[0],H[1])}}yo.prototype.clear=Hn,yo.prototype.delete=ta,yo.prototype.get=na,yo.prototype.has=_i,yo.prototype.set=ia;var ui=yo;function op(){this.__data__=[],this.size=0}var U0=op;function wa(h,x){return h===x||h!==h&&x!==x}var Qs=wa;function V0(h,x){for(var D=h.length;D--;)if(Qs(h[D][0],x))return D;return-1}var Sa=V0,tu=Array.prototype,H0=tu.splice;function ap(h){var x=this.__data__,D=Sa(x,h);if(D<0)return!1;var H=x.length-1;return D==H?x.pop():H0.call(x,D,1),--this.size,!0}var sp=ap;function lp(h){var x=this.__data__,D=Sa(x,h);return D<0?void 0:x[D][1]}var is=lp;function nu(h){return Sa(this.__data__,h)>-1}var cp=nu;function ru(h,x){var D=this.__data__,H=Sa(D,h);return H<0?(++this.size,D.push([h,x])):D[H][1]=x,this}var iu=ru;function el(h){var x=-1,D=h==null?0:h.length;for(this.clear();++x<D;){var H=h[x];this.set(H[0],H[1])}}el.prototype.clear=U0,el.prototype.delete=sp,el.prototype.get=is,el.prototype.has=cp,el.prototype.set=iu;var ou=el,Xd=Sn(Jt,"Map"),tl=Xd;function G0(){this.size=0,this.__data__={hash:new ui,map:new(tl||ou),string:new ui}}var W0=G0;function up(h){var x=typeof h;return x=="string"||x=="number"||x=="symbol"||x=="boolean"?h!=="__proto__":h===null}var dp=up;function Ea(h,x){var D=h.__data__;return dp(x)?D[typeof x=="string"?"string":"hash"]:D.map}var ql=Ea;function fp(h){var x=ql(this,h).delete(h);return this.size-=x?1:0,x}var $d=fp;function Zd(h){return ql(this,h).get(h)}var hp=Zd;function pp(h){return ql(this,h).has(h)}var mp=pp;function gp(h,x){var D=ql(this,h),H=D.size;return D.set(h,x),this.size+=D.size==H?0:1,this}var vp=gp;function os(h){var x=-1,D=h==null?0:h.length;for(this.clear();++x<D;){var H=h[x];this.set(H[0],H[1])}}os.prototype.clear=W0,os.prototype.delete=$d,os.prototype.get=hp,os.prototype.has=mp,os.prototype.set=vp;var au=os,q0="Expected a function";function su(h,x){if(typeof h!="function"||x!=null&&typeof x!="function")throw new TypeError(q0);var D=function(){var H=arguments,ne=x?x.apply(this,H):H[0],ce=D.cache;if(ce.has(ne))return ce.get(ne);var Ce=h.apply(this,H);return D.cache=ce.set(ne,Ce)||ce,Ce};return D.cache=new(su.Cache||au),D}su.Cache=au;var K0=su,X0=500;function ka(h){var x=K0(h,function(H){return D.size===X0&&D.clear(),H}),D=x.cache;return x}var as=ka,yp=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,lu=/\\(\\)?/g,$0=as(function(h){var x=[];return h.charCodeAt(0)===46&&x.push(""),h.replace(yp,function(D,H,ne,ce){x.push(ne?ce.replace(lu,"$1"):H||D)}),x}),Z0=$0;function bp(h,x){for(var D=-1,H=h==null?0:h.length,ne=Array(H);++D<H;)ne[D]=x(h[D],D,h);return ne}var Y0=bp,_p=1/0,Yd=Yn?Yn.prototype:void 0,xp=Yd?Yd.toString:void 0;function wp(h){if(typeof h=="string")return h;if(gt(h))return Y0(h,wp)+"";if(qt(h))return xp?xp.call(h):"";var x=h+"";return x=="0"&&1/h==-_p?"-0":x}var Jd=wp;function J0(h){return h==null?"":Jd(h)}var Sp=J0;function cu(h,x){return gt(h)?h:Ht(h,x)?[h]:Z0(Sp(h))}var nl=cu,Qd=1/0;function Ep(h){if(typeof h=="string"||qt(h))return h;var x=h+"";return x=="0"&&1/h==-Qd?"-0":x}var oa=Ep;function Kl(h,x){x=nl(x,h);for(var D=0,H=x.length;h!=null&&D<H;)h=h[oa(x[D++])];return D&&D==H?h:void 0}var Xl=Kl;function ef(h,x,D){var H=h==null?void 0:Xl(h,x);return H===void 0?D:H}var Ta=ef;function rl(h,x){return x.length===0?h:Ta(h,x)}var ss=class{constructor(){se(this,"_values",{})}get(h,x){if(this.has(h))return this._values[h];{const D=x();return this._values[h]=D,D}}has(h){return this._values.hasOwnProperty(h)}},Yr=Mt,$l=function(){try{var h=Sn(Object,"defineProperty");return h({},"",{}),h}catch{}}(),tf=$l;function kp(h,x,D){x=="__proto__"&&tf?tf(h,x,{configurable:!0,enumerable:!0,value:D,writable:!0}):h[x]=D}var Ma=kp,Zl=Object.prototype,Q0=Zl.hasOwnProperty;function uu(h,x,D){var H=h[x];(!(Q0.call(h,x)&&Qs(H,D))||D===void 0&&!(x in h))&&Ma(h,x,D)}var Yl=uu,ev=9007199254740991,nf=/^(?:0|[1-9]\d*)$/;function tv(h,x){var D=typeof h;return x=x==null?ev:x,!!x&&(D=="number"||D!="symbol"&&nf.test(h))&&h>-1&&h%1==0&&h<x}var rf=tv;function Tp(h,x,D,H){if(!Ie(h))return h;x=nl(x,h);for(var ne=-1,ce=x.length,Ce=ce-1,He=h;He!=null&&++ne<ce;){var $e=oa(x[ne]),ct=D;if($e==="__proto__"||$e==="constructor"||$e==="prototype")return h;if(ne!=Ce){var It=He[$e];ct=H?H(It,$e,He):void 0,ct===void 0&&(ct=Ie(It)?It:rf(x[ne+1])?[]:{})}Yl(He,$e,ct),He=He[$e]}return h}var Mp=Tp;function Pp(h,x,D){return h==null?h:Mp(h,x,D)}var il=Pp,ii=new WeakMap;function nv(h){return du(h)}function du(h){if(ii.has(h))return ii.get(h);const x=h.type==="compound"?Ap(h):h.type==="enum"?Cp(h):h.default;return ii.set(h,x),x}function Cp(h){const x={$case:h.defaultCase};for(const[D,H]of Object.entries(h.cases))x[D]=du(H);return x}function Ap(h){const x={};for(const[D,H]of Object.entries(h.props))x[D]=du(H);return x}var Ci=Mt,Ip=we(me());function Jl(h,x,D){return(0,Ci.prism)(()=>{const H=(0,Ci.val)(x);return Ci.prism.memo("driver",()=>H?H.type==="BasicKeyframedTrack"?fu(h,H,D):(h.logger.error("Track type not yet supported."),(0,Ci.prism)(()=>{})):(0,Ci.prism)(()=>{}),[H]).getValue()})}function fu(h,x,D){return(0,Ci.prism)(()=>{let H=Ci.prism.ref("state",{started:!1}),ne=H.current;const ce=D.getValue();return(!ne.started||ce<ne.validFrom||ne.validTo<=ce)&&(H.current=ne=hu(h,D,x)),ne.der.getValue()})}var Dp=(0,Ci.prism)(()=>{});function hu(h,x,D){const H=x.getValue();if(D.keyframes.length===0)return{started:!0,validFrom:-1/0,validTo:1/0,der:Dp};let ne=0;for(;;){const ce=D.keyframes[ne];if(!ce)return Hr.error;const Ce=ne===D.keyframes.length-1;if(H<ce.position)return ne===0?Hr.beforeFirstKeyframe(ce):Hr.error;if(ce.position===H)return Ce?Hr.lastKeyframe(ce):Hr.between(ce,D.keyframes[ne+1],x);if(ne===D.keyframes.length-1)return Hr.lastKeyframe(ce);{const He=ne+1;if(D.keyframes[He].position<=H){ne=He;continue}else return Hr.between(ce,D.keyframes[ne+1],x)}}}var Hr={beforeFirstKeyframe(h){return{started:!0,validFrom:-1/0,validTo:h.position,der:(0,Ci.prism)(()=>({left:h.value,progression:0}))}},lastKeyframe(h){return{started:!0,validFrom:h.position,validTo:1/0,der:(0,Ci.prism)(()=>({left:h.value,progression:0}))}},between(h,x,D){if(!h.connectedRight)return{started:!0,validFrom:h.position,validTo:x.position,der:(0,Ci.prism)(()=>({left:h.value,progression:0}))};const H=ce=>(ce-h.position)/(x.position-h.position);if(!h.type||h.type==="bezier"){const ce=new Ip.default(h.handles[2],h.handles[3],x.handles[0],x.handles[1]),Ce=(0,Ci.prism)(()=>{const He=H(D.getValue()),$e=ce.solveSimple(He);return{left:h.value,right:x.value,progression:$e}});return{started:!0,validFrom:h.position,validTo:x.position,der:Ce}}const ne=(0,Ci.prism)(()=>{const ce=H(D.getValue()),Ce=Math.floor(ce);return{left:h.value,right:x.value,progression:Ce}});return{started:!0,validFrom:h.position,validTo:x.position,der:ne}},error:{started:!0,validFrom:-1/0,validTo:1/0,der:Dp}};function Ql(h,x,D){const ne=D.get(h);if(ne&&ne.override===x)return ne.merged;const ce=K({},h);for(const Ce of Object.keys(x)){const He=x[Ce],$e=h[Ce];ce[Ce]=typeof He=="object"&&typeof $e=="object"?Ql($e,He,D):He===void 0?$e:He}return D.set(h,{override:x,merged:ce}),ce}function aa(h,x){let D=h;for(const H of x)D=D[H];return D}var Pa=Mt,Op=(h,x)=>{const D=Pa.prism.memo(h,()=>new Pa.Atom(x),[]);return D.set(x),D},ar=Mt,pu=Mt,Rp=/\s/;function Lp(h){for(var x=h.length;x--&&Rp.test(h.charAt(x)););return x}var zp=Lp,mu=/^\s+/;function Np(h){return h&&h.slice(0,zp(h)+1).replace(mu,"")}var gu=Np,of=0/0,af=/^[-+]0x[0-9a-f]+$/i,Fp=/^0b[01]+$/i,jp=/^0o[0-7]+$/i,Bp=parseInt;function vu(h){if(typeof h=="number")return h;if(qt(h))return of;if(Ie(h)){var x=typeof h.valueOf=="function"?h.valueOf():h;h=Ie(x)?x+"":x}if(typeof h!="string")return h===0?h:+h;h=gu(h);var D=Fp.test(h);return D||jp.test(h)?Bp(h.slice(2),D?2:8):af.test(h)?of:+h}var Z=vu,pe=1/0,Re=17976931348623157e292;function lt(h){if(!h)return h===0?h:0;if(h=Z(h),h===pe||h===-pe){var x=h<0?-1:1;return x*Re}return h===h?h:0}var yn=lt;function Jn(h){var x=yn(h),D=x%1;return x===x?D?x-D:x:0}var xi=Jn;function Vo(h){return h}var sf=Vo,ls=Sn(Jt,"WeakMap"),ec=ls,R1=Object.create,L1=function(){function h(){}return function(x){if(!Ie(x))return{};if(R1)return R1(x);h.prototype=x;var D=new h;return h.prototype=void 0,D}}(),mP=L1;function gP(h,x){var D=-1,H=h.length;for(x||(x=Array(H));++D<H;)x[D]=h[D];return x}var z1=gP;function rv(h,x){for(var D=-1,H=h==null?0:h.length;++D<H&&x(h[D],D,h)!==!1;);return h}var vP=rv;function iv(h,x,D,H){var ne=!D;D||(D={});for(var ce=-1,Ce=x.length;++ce<Ce;){var He=x[ce],$e=H?H(D[He],h[He],He,D,h):void 0;$e===void 0&&($e=h[He]),ne?Ma(D,He,$e):Yl(D,He,$e)}return D}var lf=iv,N1=9007199254740991;function F1(h){return typeof h=="number"&&h>-1&&h%1==0&&h<=N1}var yu=F1;function ov(h){return h!=null&&yu(h.length)&&!Ft(h)}var j1=ov,B1=Object.prototype;function yP(h){var x=h&&h.constructor,D=typeof x=="function"&&x.prototype||B1;return h===D}var cf=yP;function av(h,x){for(var D=-1,H=Array(h);++D<h;)H[D]=x(D);return H}var U1=av,sv="[object Arguments]";function V1(h){return ut(h)&&Se(h)==sv}var lv=V1,uf=Object.prototype,H1=uf.hasOwnProperty,bP=uf.propertyIsEnumerable,G1=lv(function(){return arguments}())?lv:function(h){return ut(h)&&H1.call(h,"callee")&&!bP.call(h,"callee")},cv=G1;function W1(){return!1}var q1=W1,uv=t&&!t.nodeType&&t,dv=uv&&!0&&w&&!w.nodeType&&w,K1=dv&&dv.exports===uv,fv=K1?Jt.Buffer:void 0,X1=fv?fv.isBuffer:void 0,$1=X1||q1,df=$1,Z1="[object Arguments]",Y1="[object Array]",J1="[object Boolean]",Q1="[object Date]",ex="[object Error]",tx="[object Function]",nx="[object Map]",rx="[object Number]",ix="[object Object]",ox="[object RegExp]",ax="[object Set]",sx="[object String]",lx="[object WeakMap]",wr="[object ArrayBuffer]",cx="[object DataView]",_P="[object Float32Array]",xP="[object Float64Array]",Up="[object Int8Array]",hv="[object Int16Array]",pv="[object Int32Array]",bu="[object Uint8Array]",ux="[object Uint8ClampedArray]",Vp="[object Uint16Array]",dx="[object Uint32Array]",mr={};mr[_P]=mr[xP]=mr[Up]=mr[hv]=mr[pv]=mr[bu]=mr[ux]=mr[Vp]=mr[dx]=!0,mr[Z1]=mr[Y1]=mr[wr]=mr[J1]=mr[cx]=mr[Q1]=mr[ex]=mr[tx]=mr[nx]=mr[rx]=mr[ix]=mr[ox]=mr[ax]=mr[sx]=mr[lx]=!1;function wP(h){return ut(h)&&yu(h.length)&&!!mr[Se(h)]}var mv=wP;function fx(h){return function(x){return h(x)}}var ff=fx,gv=t&&!t.nodeType&&t,hf=gv&&!0&&w&&!w.nodeType&&w,hx=hf&&hf.exports===gv,Hp=hx&&kt.process,px=function(){try{var h=hf&&hf.require&&hf.require("util").types;return h||Hp&&Hp.binding&&Hp.binding("util")}catch{}}(),_u=px,mx=_u&&_u.isTypedArray,vv=mx?ff(mx):mv,yv=vv,gx=Object.prototype,vx=gx.hasOwnProperty;function SP(h,x){var D=gt(h),H=!D&&cv(h),ne=!D&&!H&&df(h),ce=!D&&!H&&!ne&&yv(h),Ce=D||H||ne||ce,He=Ce?U1(h.length,String):[],$e=He.length;for(var ct in h)(x||vx.call(h,ct))&&!(Ce&&(ct=="length"||ne&&(ct=="offset"||ct=="parent")||ce&&(ct=="buffer"||ct=="byteLength"||ct=="byteOffset")||rf(ct,$e)))&&He.push(ct);return He}var yx=SP;function bx(h,x){return function(D){return h(x(D))}}var bv=bx,_x=bv(Object.keys,Object),EP=_x,kP=Object.prototype,Gp=kP.hasOwnProperty;function _v(h){if(!cf(h))return EP(h);var x=[];for(var D in Object(h))Gp.call(h,D)&&D!="constructor"&&x.push(D);return x}var TP=_v;function xx(h){return j1(h)?yx(h):TP(h)}var xu=xx;function Wp(h){var x=[];if(h!=null)for(var D in Object(h))x.push(D);return x}var xv=Wp,wx=Object.prototype,wu=wx.hasOwnProperty;function qp(h){if(!Ie(h))return xv(h);var x=cf(h),D=[];for(var H in h)H=="constructor"&&(x||!wu.call(h,H))||D.push(H);return D}var MP=qp;function Sx(h){return j1(h)?yx(h,!0):MP(h)}var wv=Sx;function PP(h,x){for(var D=-1,H=x.length,ne=h.length;++D<H;)h[ne+D]=x[D];return h}var Sv=PP,CP=bv(Object.getPrototypeOf,Object),Ev=CP,Ex="[object Object]",kx=Function.prototype,Tx=Object.prototype,kv=kx.toString,AP=Tx.hasOwnProperty,IP=kv.call(Object);function Mx(h){if(!ut(h)||Se(h)!=Ex)return!1;var x=Ev(h);if(x===null)return!0;var D=AP.call(x,"constructor")&&x.constructor;return typeof D=="function"&&D instanceof D&&kv.call(D)==IP}var Px=Mx;function Cx(h,x,D){var H=-1,ne=h.length;x<0&&(x=-x>ne?0:ne+x),D=D>ne?ne:D,D<0&&(D+=ne),ne=x>D?0:D-x>>>0,x>>>=0;for(var ce=Array(ne);++H<ne;)ce[H]=h[H+x];return ce}var Ax=Cx;function DP(h,x,D){var H=h.length;return D=D===void 0?H:D,!x&&D>=H?h:Ax(h,x,D)}var Ix=DP,Dx="\\ud800-\\udfff",OP="\\u0300-\\u036f",Su="\\ufe20-\\ufe2f",Tv="\\u20d0-\\u20ff",RP=OP+Su+Tv,LP="\\ufe0e\\ufe0f",Ox="\\u200d",zP=RegExp("["+Ox+Dx+RP+LP+"]");function NP(h){return zP.test(h)}var tc=NP;function Kp(h){return h.split("")}var FP=Kp,Mv="\\ud800-\\udfff",Rx="\\u0300-\\u036f",Lx="\\ufe20-\\ufe2f",jP="\\u20d0-\\u20ff",BP=Rx+Lx+jP,zx="\\ufe0e\\ufe0f",UP="["+Mv+"]",Pv="["+BP+"]",Xp="\\ud83c[\\udffb-\\udfff]",VP="(?:"+Pv+"|"+Xp+")",Nx="[^"+Mv+"]",Cv="(?:\\ud83c[\\udde6-\\uddff]){2}",Fx="[\\ud800-\\udbff][\\udc00-\\udfff]",Eu="\\u200d",ku=VP+"?",pf="["+zx+"]?",jx="(?:"+Eu+"(?:"+[Nx,Cv,Fx].join("|")+")"+pf+ku+")*",Tu=pf+ku+jx,Av="(?:"+[Nx+Pv+"?",Pv,Cv,Fx,UP].join("|")+")",HP=RegExp(Xp+"(?="+Xp+")|"+Av+Tu,"g");function Bx(h){return h.match(HP)||[]}var GP=Bx;function WP(h){return tc(h)?GP(h):FP(h)}var Ux=WP;function qP(h,x,D){return h===h&&(D!==void 0&&(h=h<=D?h:D),x!==void 0&&(h=h>=x?h:x)),h}var KP=qP;function mf(h,x,D){return D===void 0&&(D=x,x=void 0),D!==void 0&&(D=Z(D),D=D===D?D:0),x!==void 0&&(x=Z(x),x=x===x?x:0),KP(Z(h),x,D)}var gf=mf;function XP(){this.__data__=new ou,this.size=0}var Vx=XP;function $P(h){var x=this.__data__,D=x.delete(h);return this.size=x.size,D}var ZP=$P;function Hx(h){return this.__data__.get(h)}var YP=Hx;function JP(h){return this.__data__.has(h)}var Gx=JP,QP=200;function eC(h,x){var D=this.__data__;if(D instanceof ou){var H=D.__data__;if(!tl||H.length<QP-1)return H.push([h,x]),this.size=++D.size,this;D=this.__data__=new au(H)}return D.set(h,x),this.size=D.size,this}var Wx=eC;function Mu(h){var x=this.__data__=new ou(h);this.size=x.size}Mu.prototype.clear=Vx,Mu.prototype.delete=ZP,Mu.prototype.get=YP,Mu.prototype.has=Gx,Mu.prototype.set=Wx;var Ca=Mu;function vf(h,x){return h&&lf(x,xu(x),h)}var Iv=vf;function Dv(h,x){return h&&lf(x,wv(x),h)}var qx=Dv,$p=t&&!t.nodeType&&t,Ov=$p&&!0&&w&&!w.nodeType&&w,tC=Ov&&Ov.exports===$p,Rv=tC?Jt.Buffer:void 0,Lv=Rv?Rv.allocUnsafe:void 0;function nC(h,x){if(x)return h.slice();var D=h.length,H=Lv?Lv(D):new h.constructor(D);return h.copy(H),H}var Kx=nC;function Xx(h,x){for(var D=-1,H=h==null?0:h.length,ne=0,ce=[];++D<H;){var Ce=h[D];x(Ce,D,h)&&(ce[ne++]=Ce)}return ce}var $x=Xx;function Zx(){return[]}var Yx=Zx,rC=Object.prototype,Zp=rC.propertyIsEnumerable,zv=Object.getOwnPropertySymbols,iC=zv?function(h){return h==null?[]:(h=Object(h),$x(zv(h),function(x){return Zp.call(h,x)}))}:Yx,Pu=iC;function Nv(h,x){return lf(h,Pu(h),x)}var oC=Nv,Jx=Object.getOwnPropertySymbols,Cu=Jx?function(h){for(var x=[];h;)Sv(x,Pu(h)),h=Ev(h);return x}:Yx,Au=Cu;function aC(h,x){return lf(h,Au(h),x)}var Yp=aC;function Fv(h,x,D){var H=x(h);return gt(h)?H:Sv(H,D(h))}var Qx=Fv;function nc(h){return Qx(h,xu,Pu)}var rc=nc;function sC(h){return Qx(h,wv,Au)}var jv=sC,ew=Sn(Jt,"DataView"),Bv=ew,Uv=Sn(Jt,"Promise"),Jp=Uv,lC=Sn(Jt,"Set"),Qp=lC,Vv="[object Map]",cC="[object Object]",Hv="[object Promise]",Gv="[object Set]",tw="[object WeakMap]",nw="[object DataView]",rw=Mi(Bv),iw=Mi(tl),ow=Mi(Jp),Wv=Mi(Qp),aw=Mi(ec),ol=Se;(Bv&&ol(new Bv(new ArrayBuffer(1)))!=nw||tl&&ol(new tl)!=Vv||Jp&&ol(Jp.resolve())!=Hv||Qp&&ol(new Qp)!=Gv||ec&&ol(new ec)!=tw)&&(ol=function(h){var x=Se(h),D=x==cC?h.constructor:void 0,H=D?Mi(D):"";if(H)switch(H){case rw:return nw;case iw:return Vv;case ow:return Hv;case Wv:return Gv;case aw:return tw}return x});var al=ol,sw=Object.prototype,uC=sw.hasOwnProperty;function lw(h){var x=h.length,D=new h.constructor(x);return x&&typeof h[0]=="string"&&uC.call(h,"index")&&(D.index=h.index,D.input=h.input),D}var cw=lw,uw=Jt.Uint8Array,em=uw;function dC(h){var x=new h.constructor(h.byteLength);return new em(x).set(new em(h)),x}var tm=dC;function fC(h,x){var D=x?tm(h.buffer):h.buffer;return new h.constructor(D,h.byteOffset,h.byteLength)}var hC=fC,Pr=/\w*$/;function nm(h){var x=new h.constructor(h.source,Pr.exec(h));return x.lastIndex=h.lastIndex,x}var pC=nm,qv=Yn?Yn.prototype:void 0,dw=qv?qv.valueOf:void 0;function mC(h){return dw?Object(dw.call(h)):{}}var fw=mC;function gC(h,x){var D=x?tm(h.buffer):h.buffer;return new h.constructor(D,h.byteOffset,h.length)}var vC=gC,hw="[object Boolean]",yC="[object Date]",bC="[object Map]",pw="[object Number]",_C="[object RegExp]",xC="[object Set]",mw="[object String]",gw="[object Symbol]",wC="[object ArrayBuffer]",Iu="[object DataView]",yf="[object Float32Array]",vw="[object Float64Array]",SC="[object Int8Array]",yw="[object Int16Array]",EC="[object Int32Array]",kC="[object Uint8Array]",bw="[object Uint8ClampedArray]",TC="[object Uint16Array]",_w="[object Uint32Array]";function xw(h,x,D){var H=h.constructor;switch(x){case wC:return tm(h);case hw:case yC:return new H(+h);case Iu:return hC(h,D);case yf:case vw:case SC:case yw:case EC:case kC:case bw:case TC:case _w:return vC(h,D);case bC:return new H;case pw:case mw:return new H(h);case _C:return pC(h);case xC:return new H;case gw:return fw(h)}}var Kv=xw;function ww(h){return typeof h.constructor=="function"&&!cf(h)?mP(Ev(h)):{}}var Sw=ww,MC="[object Map]";function PC(h){return ut(h)&&al(h)==MC}var Ew=PC,kw=_u&&_u.isMap,CC=kw?ff(kw):Ew,Xv=CC,AC="[object Set]";function Tw(h){return ut(h)&&al(h)==AC}var rm=Tw,Mw=_u&&_u.isSet,Pw=Mw?ff(Mw):rm,im=Pw,IC=1,Cw=2,ic=4,$v="[object Arguments]",Zv="[object Array]",Aw="[object Boolean]",Yv="[object Date]",Jv="[object Error]",om="[object Function]",Qv="[object GeneratorFunction]",Iw="[object Map]",Dw="[object Number]",ey="[object Object]",Ow="[object RegExp]",Rw="[object Set]",sl="[object String]",ty="[object Symbol]",DC="[object WeakMap]",Lw="[object ArrayBuffer]",ny="[object DataView]",OC="[object Float32Array]",RC="[object Float64Array]",zw="[object Int8Array]",Nw="[object Int16Array]",LC="[object Int32Array]",zC="[object Uint8Array]",Fw="[object Uint8ClampedArray]",NC="[object Uint16Array]",am="[object Uint32Array]",fr={};fr[$v]=fr[Zv]=fr[Lw]=fr[ny]=fr[Aw]=fr[Yv]=fr[OC]=fr[RC]=fr[zw]=fr[Nw]=fr[LC]=fr[Iw]=fr[Dw]=fr[ey]=fr[Ow]=fr[Rw]=fr[sl]=fr[ty]=fr[zC]=fr[Fw]=fr[NC]=fr[am]=!0,fr[Jv]=fr[om]=fr[DC]=!1;function bf(h,x,D,H,ne,ce){var Ce,He=x&IC,$e=x&Cw,ct=x&ic;if(D&&(Ce=ne?D(h,H,ne,ce):D(h)),Ce!==void 0)return Ce;if(!Ie(h))return h;var It=gt(h);if(It){if(Ce=cw(h),!He)return z1(h,Ce)}else{var Ot=al(h),le=Ot==om||Ot==Qv;if(df(h))return Kx(h,He);if(Ot==ey||Ot==$v||le&&!ne){if(Ce=$e||le?{}:Sw(h),!He)return $e?Yp(h,qx(Ce,h)):oC(h,Iv(Ce,h))}else{if(!fr[Ot])return ne?h:{};Ce=Kv(h,Ot,He)}}ce||(ce=new Ca);var Xe=ce.get(h);if(Xe)return Xe;ce.set(h,Ce),im(h)?h.forEach(function(Un){Ce.add(bf(Un,x,D,Un,h,ce))}):Xv(h)&&h.forEach(function(Un,On){Ce.set(On,bf(Un,x,D,On,h,ce))});var Qt=ct?$e?jv:rc:$e?wv:xu,Nn=It?void 0:Qt(h);return vP(Nn||h,function(Un,On){Nn&&(On=Un,Un=h[On]),Yl(Ce,On,bf(Un,x,D,On,h,ce))}),Ce}var FC=bf,jw=1,jC=4;function BC(h){return FC(h,jw|jC)}var ry=BC,Bw="__lodash_hash_undefined__";function UC(h){return this.__data__.set(h,Bw),this}var Uw=UC;function Vw(h){return this.__data__.has(h)}var iy=Vw;function _f(h){var x=-1,D=h==null?0:h.length;for(this.__data__=new au;++x<D;)this.add(h[x])}_f.prototype.add=_f.prototype.push=Uw,_f.prototype.has=iy;var VC=_f;function Hw(h,x){for(var D=-1,H=h==null?0:h.length;++D<H;)if(x(h[D],D,h))return!0;return!1}var HC=Hw;function GC(h,x){return h.has(x)}var sm=GC,oy=1,WC=2;function Gw(h,x,D,H,ne,ce){var Ce=D&oy,He=h.length,$e=x.length;if(He!=$e&&!(Ce&&$e>He))return!1;var ct=ce.get(h),It=ce.get(x);if(ct&&It)return ct==x&&It==h;var Ot=-1,le=!0,Xe=D&WC?new VC:void 0;for(ce.set(h,x),ce.set(x,h);++Ot<He;){var Qt=h[Ot],Nn=x[Ot];if(H)var Un=Ce?H(Nn,Qt,Ot,x,h,ce):H(Qt,Nn,Ot,h,x,ce);if(Un!==void 0){if(Un)continue;le=!1;break}if(Xe){if(!HC(x,function(On,Kn){if(!sm(Xe,Kn)&&(Qt===On||ne(Qt,On,D,H,ce)))return Xe.push(Kn)})){le=!1;break}}else if(!(Qt===Nn||ne(Qt,Nn,D,H,ce))){le=!1;break}}return ce.delete(h),ce.delete(x),le}var ay=Gw;function Ww(h){var x=-1,D=Array(h.size);return h.forEach(function(H,ne){D[++x]=[ne,H]}),D}var qw=Ww;function Kw(h){var x=-1,D=Array(h.size);return h.forEach(function(H){D[++x]=H}),D}var Xw=Kw,$w=1,Zw=2,Yw="[object Boolean]",Jw="[object Date]",Qw="[object Error]",eS="[object Map]",tS="[object Number]",sy="[object RegExp]",lm="[object Set]",nS="[object String]",qC="[object Symbol]",KC="[object ArrayBuffer]",rS="[object DataView]",ly=Yn?Yn.prototype:void 0,cm=ly?ly.valueOf:void 0;function iS(h,x,D,H,ne,ce,Ce){switch(D){case rS:if(h.byteLength!=x.byteLength||h.byteOffset!=x.byteOffset)return!1;h=h.buffer,x=x.buffer;case KC:return!(h.byteLength!=x.byteLength||!ce(new em(h),new em(x)));case Yw:case Jw:case tS:return Qs(+h,+x);case Qw:return h.name==x.name&&h.message==x.message;case sy:case nS:return h==x+"";case eS:var He=qw;case lm:var $e=H&$w;if(He||(He=Xw),h.size!=x.size&&!$e)return!1;var ct=Ce.get(h);if(ct)return ct==x;H|=Zw,Ce.set(h,x);var It=ay(He(h),He(x),H,ne,ce,Ce);return Ce.delete(h),It;case qC:if(cm)return cm.call(h)==cm.call(x)}return!1}var XC=iS,$C=1,oS=Object.prototype,cy=oS.hasOwnProperty;function uy(h,x,D,H,ne,ce){var Ce=D&$C,He=rc(h),$e=He.length,ct=rc(x),It=ct.length;if($e!=It&&!Ce)return!1;for(var Ot=$e;Ot--;){var le=He[Ot];if(!(Ce?le in x:cy.call(x,le)))return!1}var Xe=ce.get(h),Qt=ce.get(x);if(Xe&&Qt)return Xe==x&&Qt==h;var Nn=!0;ce.set(h,x),ce.set(x,h);for(var Un=Ce;++Ot<$e;){le=He[Ot];var On=h[le],Kn=x[le];if(H)var fi=Ce?H(Kn,On,le,x,h,ce):H(On,Kn,le,h,x,ce);if(!(fi===void 0?On===Kn||ne(On,Kn,D,H,ce):fi)){Nn=!1;break}Un||(Un=le=="constructor")}if(Nn&&!Un){var ro=h.constructor,Ai=x.constructor;ro!=Ai&&"constructor"in h&&"constructor"in x&&!(typeof ro=="function"&&ro instanceof ro&&typeof Ai=="function"&&Ai instanceof Ai)&&(Nn=!1)}return ce.delete(h),ce.delete(x),Nn}var xf=uy,aS=1,um="[object Arguments]",dy="[object Array]",dm="[object Object]",sS=Object.prototype,fm=sS.hasOwnProperty;function lS(h,x,D,H,ne,ce){var Ce=gt(h),He=gt(x),$e=Ce?dy:al(h),ct=He?dy:al(x);$e=$e==um?dm:$e,ct=ct==um?dm:ct;var It=$e==dm,Ot=ct==dm,le=$e==ct;if(le&&df(h)){if(!df(x))return!1;Ce=!0,It=!1}if(le&&!It)return ce||(ce=new Ca),Ce||yv(h)?ay(h,x,D,H,ne,ce):XC(h,x,$e,D,H,ne,ce);if(!(D&aS)){var Xe=It&&fm.call(h,"__wrapped__"),Qt=Ot&&fm.call(x,"__wrapped__");if(Xe||Qt){var Nn=Xe?h.value():h,Un=Qt?x.value():x;return ce||(ce=new Ca),ne(Nn,Un,D,H,ce)}}return le?(ce||(ce=new Ca),xf(h,x,D,H,ne,ce)):!1}var ZC=lS;function fy(h,x,D,H,ne){return h===x?!0:h==null||x==null||!ut(h)&&!ut(x)?h!==h&&x!==x:ZC(h,x,D,H,fy,ne)}var hy=fy,cS=1,YC=2;function JC(h,x,D,H){var ne=D.length,ce=ne,Ce=!H;if(h==null)return!ce;for(h=Object(h);ne--;){var He=D[ne];if(Ce&&He[2]?He[1]!==h[He[0]]:!(He[0]in h))return!1}for(;++ne<ce;){He=D[ne];var $e=He[0],ct=h[$e],It=He[1];if(Ce&&He[2]){if(ct===void 0&&!($e in h))return!1}else{var Ot=new Ca;if(H)var le=H(ct,It,$e,h,x,Ot);if(!(le===void 0?hy(It,ct,cS|YC,H,Ot):le))return!1}}return!0}var py=JC;function uS(h){return h===h&&!Ie(h)}var dS=uS;function fS(h){for(var x=xu(h),D=x.length;D--;){var H=x[D],ne=h[H];x[D]=[H,ne,dS(ne)]}return x}var QC=fS;function e3(h,x){return function(D){return D==null?!1:D[h]===x&&(x!==void 0||h in Object(D))}}var hm=e3;function hS(h){var x=QC(h);return x.length==1&&x[0][2]?hm(x[0][0],x[0][1]):function(D){return D===h||py(D,h,x)}}var t3=hS;function pS(h,x){return h!=null&&x in Object(h)}var n3=pS;function r3(h,x,D){x=nl(x,h);for(var H=-1,ne=x.length,ce=!1;++H<ne;){var Ce=oa(x[H]);if(!(ce=h!=null&&D(h,Ce)))break;h=h[Ce]}return ce||++H!=ne?ce:(ne=h==null?0:h.length,!!ne&&yu(ne)&&rf(Ce,ne)&&(gt(h)||cv(h)))}var mS=r3;function i3(h,x){return h!=null&&mS(h,x,n3)}var o3=i3,gS=1,a3=2;function s3(h,x){return Ht(h)&&dS(x)?hm(oa(h),x):function(D){var H=Ta(D,h);return H===void 0&&H===x?o3(D,h):hy(x,H,gS|a3)}}var vS=s3;function l3(h){return function(x){return x==null?void 0:x[h]}}var yS=l3;function bS(h){return function(x){return Xl(x,h)}}var _S=bS;function xS(h){return Ht(h)?yS(oa(h)):_S(h)}var c3=xS;function u3(h){return typeof h=="function"?h:h==null?sf:typeof h=="object"?gt(h)?vS(h[0],h[1]):t3(h):c3(h)}var wS=u3;function d3(h){return function(x,D,H){for(var ne=-1,ce=Object(x),Ce=H(x),He=Ce.length;He--;){var $e=Ce[h?He:++ne];if(D(ce[$e],$e,ce)===!1)break}return x}}var f3=d3,SS=f3(),h3=SS;function p3(h,x){return h&&h3(h,x,xu)}var ES=p3,m3=function(){return Jt.Date.now()},my=m3,Du="Expected a function",wf=Math.max,g3=Math.min;function kS(h,x,D){var H,ne,ce,Ce,He,$e,ct=0,It=!1,Ot=!1,le=!0;if(typeof h!="function")throw new TypeError(Du);x=Z(x)||0,Ie(D)&&(It=!!D.leading,Ot="maxWait"in D,ce=Ot?wf(Z(D.maxWait)||0,x):ce,le="trailing"in D?!!D.trailing:le);function Xe(ur){var Ii=H,Eo=ne;return H=ne=void 0,ct=ur,Ce=h.apply(Eo,Ii),Ce}function Qt(ur){return ct=ur,He=setTimeout(On,x),It?Xe(ur):Ce}function Nn(ur){var Ii=ur-$e,Eo=ur-ct,Ra=x-Ii;return Ot?g3(Ra,ce-Eo):Ra}function Un(ur){var Ii=ur-$e,Eo=ur-ct;return $e===void 0||Ii>=x||Ii<0||Ot&&Eo>=ce}function On(){var ur=my();if(Un(ur))return Kn(ur);He=setTimeout(On,Nn(ur))}function Kn(ur){return He=void 0,le&&H?Xe(ur):(H=ne=void 0,Ce)}function fi(){He!==void 0&&clearTimeout(He),ct=0,H=$e=ne=He=void 0}function ro(){return He===void 0?Ce:Kn(my())}function Ai(){var ur=my(),Ii=Un(ur);if(H=arguments,ne=this,$e=ur,Ii){if(He===void 0)return Qt($e);if(Ot)return clearTimeout(He),He=setTimeout(On,x),Xe($e)}return He===void 0&&(He=setTimeout(On,x)),Ce}return Ai.cancel=fi,Ai.flush=ro,Ai}var v3=kS;function y3(h){var x=h==null?0:h.length;return x?h[x-1]:void 0}var TS=y3;function b3(h,x){return x.length<2?h:Xl(h,Ax(x,0,-1))}var MS=b3;function PS(h){return typeof h=="number"&&h==xi(h)}var _3=PS;function x3(h,x){var D={};return x=wS(x),ES(h,function(H,ne,ce){Ma(D,ne,x(H,ne,ce))}),D}var gy=x3;function CS(h,x){return x=nl(x,h),h=MS(h,x),h==null||delete h[oa(TS(x))]}var w3=CS,AS=9007199254740991,S3=Math.floor;function IS(h,x){var D="";if(!h||x<1||x>AS)return D;do x%2&&(D+=h),x=S3(x/2),x&&(h+=h);while(x);return D}var pm=IS,DS=yS("length"),E3=DS,vy="\\ud800-\\udfff",k3="\\u0300-\\u036f",T3="\\ufe20-\\ufe2f",OS="\\u20d0-\\u20ff",M3=k3+T3+OS,RS="\\ufe0e\\ufe0f",mm="["+vy+"]",yy="["+M3+"]",by="\\ud83c[\\udffb-\\udfff]",LS="(?:"+yy+"|"+by+")",_y="[^"+vy+"]",xy="(?:\\ud83c[\\udde6-\\uddff]){2}",gm="[\\ud800-\\udbff][\\udc00-\\udfff]",zS="\\u200d",NS=LS+"?",wy="["+RS+"]?",P3="(?:"+zS+"(?:"+[_y,xy,gm].join("|")+")"+wy+NS+")*",C3=wy+NS+P3,oc="(?:"+[_y+yy+"?",yy,xy,gm,mm].join("|")+")",Sf=RegExp(by+"(?="+by+")|"+oc+C3,"g");function A3(h){for(var x=Sf.lastIndex=0;Sf.test(h);)++x;return x}var FS=A3;function Sy(h){return tc(h)?FS(h):E3(h)}var jS=Sy,I3=Math.ceil;function BS(h,x){x=x===void 0?" ":Jd(x);var D=x.length;if(D<2)return D?pm(x,h):x;var H=pm(x,I3(h/jS(x)));return tc(x)?Ix(Ux(H),0,h).join(""):H.slice(0,h)}var US=BS;function VS(h,x,D){h=Sp(h),x=xi(x);var H=x?jS(h):0;return x&&H<x?US(x-H,D)+h:h}var Ef=VS;function D3(h,x){return h==null?!0:w3(h,x)}var Ey=D3,O3=5*1e3,R3=class{constructor(h){se(this,"_cache",new ss),se(this,"_keepHotUntapDebounce"),Ge(this,h)}get type(){return"Theatre_SheetObject_PublicAPI"}get props(){return Qe(this).propsP}get sheet(){return Qe(this).sheet.publicApi}get project(){return Qe(this).sheet.project.publicApi}get address(){return K({},Qe(this).address)}_valuesPrism(){return this._cache.get("_valuesPrism",()=>{const h=Qe(this);return(0,pu.prism)(()=>(0,pu.val)(h.getValues().getValue()))})}onValuesChange(h,x){return zm(this._valuesPrism(),h,x)}get value(){const h=this._valuesPrism();{if(!h.isHot){this._keepHotUntapDebounce!=null&&this._keepHotUntapDebounce.flush();const x=h.keepHot();this._keepHotUntapDebounce=v3(()=>{x(),this._keepHotUntapDebounce=void 0},O3)}this._keepHotUntapDebounce&&this._keepHotUntapDebounce()}return h.getValue()}set initialValue(h){Qe(this).setInitialValue(h)}};function HS(h){const x=new WeakMap;return D=>(x.has(D)||x.set(D,h(D)),x.get(D))}function kf(h){return h.type==="compound"||h.type==="enum"}function vm(h,x){if(!h)return;const[D,...H]=x;if(D===void 0)return h;if(!kf(h))return;const ne=h.type==="enum"?h.cases[D]:h.props[D];return vm(ne,H)}function L3(h){return!kf(h)}var z3=class{constructor(h,x,D){this.sheet=h,this.template=x,this.nativeObject=D,se(this,"$$isPointerToPrismProvider",!0),se(this,"address"),se(this,"publicApi"),se(this,"_initialValue",new ar.Atom({})),se(this,"_cache",new ss),se(this,"_logger"),se(this,"_internalUtilCtx"),this._logger=h._logger.named("SheetObject",x.address.objectKey),this._logger._trace("creating object"),this._internalUtilCtx={logger:this._logger.utilFor.internal()},this.address=te(K({},x.address),{sheetInstanceId:h.address.sheetInstanceId}),this.publicApi=new R3(this)}get type(){return"Theatre_SheetObject"}getValues(){return this._cache.get("getValues()",()=>(0,ar.prism)(()=>{const h=(0,ar.val)(this.template.getDefaultValues()),x=(0,ar.val)(this._initialValue.pointer),D=ar.prism.memo("withInitialCache",()=>new WeakMap,[]),H=Ql(h,x,D),ne=(0,ar.val)(this.template.getStaticValues()),ce=ar.prism.memo("withStatics",()=>new WeakMap,[]);let He=Ql(H,ne,ce),$e;{const It=ar.prism.memo("seq",()=>this.getSequencedValues(),[]),Ot=ar.prism.memo("withSeqsCache",()=>new WeakMap,[]);$e=(0,ar.val)((0,ar.val)(It)),He=Ql(He,$e,Ot)}return Op("finalAtom",He).pointer}))}getValueByPointer(h){const x=(0,ar.val)(this.getValues()),{path:D}=(0,ar.getPointerParts)(h);return(0,ar.val)(aa(x,D))}pointerToPrism(h){const{path:x}=(0,ar.getPointerParts)(h);return(0,ar.prism)(()=>{const D=(0,ar.val)(this.getValues());return(0,ar.val)(aa(D,x))})}getSequencedValues(){return(0,ar.prism)(()=>{const h=ar.prism.memo("tracksToProcess",()=>this.template.getArrayOfValidSequenceTracks(),[]),x=(0,ar.val)(h),D=new ar.Atom({}),H=(0,ar.val)(this.template.configPointer);return ar.prism.effect("processTracks",()=>{const ne=[];for(const{trackId:ce,pathToProp:Ce}of x){const He=this._trackIdToPrism(ce),$e=vm(H,Ce),ct=$e.deserializeAndSanitize,It=$e.interpolate,Ot=()=>{const Xe=He.getValue();if(!Xe)return D.setByPointer(Kn=>aa(Kn,Ce),void 0);const Qt=ct(Xe.left),Nn=Qt===void 0?$e.default:Qt;if(Xe.right===void 0)return D.setByPointer(Kn=>aa(Kn,Ce),Nn);const Un=ct(Xe.right),On=Un===void 0?$e.default:Un;return D.setByPointer(Kn=>aa(Kn,Ce),It(Nn,On,Xe.progression))},le=He.onStale(Ot);Ot(),ne.push(le)}return()=>{for(const ce of ne)ce()}},[H,...x]),D.pointer})}_trackIdToPrism(h){const x=this.template.project.pointers.historic.sheetsById[this.address.sheetId].sequence.tracksByObject[this.address.objectKey].trackData[h],D=this.sheet.getSequence().positionPrism;return Jl(this._internalUtilCtx,x,D)}get propsP(){return this._cache.get("propsP",()=>(0,ar.pointer)({root:this,path:[]}))}validateValue(h,x){}setInitialValue(h){this.validateValue(this.propsP,h),this._initialValue.set(h)}};function hr(h){return function(D,H){return h(D,H())}}var bo={_hmm:_o(524),_todo:_o(522),_error:_o(521),errorDev:_o(529),errorPublic:_o(545),_kapow:_o(268),_warn:_o(265),warnDev:_o(273),warnPublic:_o(289),_debug:_o(137),debugDev:_o(145),_trace:_o(73),traceDev:_o(81)};function _o(h){return Object.freeze({audience:cs(h,8)?"internal":cs(h,16)?"dev":"public",category:cs(h,4)?"troubleshooting":cs(h,2)?"todo":"general",level:cs(h,512)?512:cs(h,256)?256:cs(h,128)?128:64})}function cs(h,x){return(h&x)===x}function gr(h,x){return((x&32)===32?!0:(x&16)===16?h.dev:(x&8)===8?h.internal:!1)&&h.min<=x}var Aa={loggingConsoleStyle:!0,loggerConsoleStyle:!0,includes:Object.freeze({internal:!1,dev:!1,min:256}),filtered:function(){},include:function(){return{}},create:null,creatExt:null,named(h,x,D){return this.create({names:[...h.names,{name:x,key:D}]})},style:{bold:void 0,italic:void 0,cssMemo:new Map([["",""]]),collapseOnRE:/[a-z- ]+/g,color:void 0,collapsed(h){if(h.length<5)return h;const x=h.replace(this.collapseOnRE,"");return this.cssMemo.has(x)||this.cssMemo.set(x,this.css(h)),x},css(h){var x,D,H,ne;const ce=this.cssMemo.get(h);if(ce)return ce;let Ce="color:".concat((D=(x=this.color)==null?void 0:x.call(this,h))!=null?D:"hsl(".concat((h.charCodeAt(0)+h.charCodeAt(h.length-1))%360,", 100%, 60%)"));return(H=this.bold)!=null&&H.test(h)&&(Ce+=";font-weight:600"),(ne=this.italic)!=null&&ne.test(h)&&(Ce+=";font-style:italic"),this.cssMemo.set(h,Ce),Ce}}};function Ou(h=console,x={}){const D=te(K({},Aa),{includes:K({},Aa.includes)}),H={styled:ac.bind(D,h),noStyle:j3.bind(D,h)},ne=F3.bind(D);function ce(){return D.loggingConsoleStyle&&D.loggerConsoleStyle?H.styled:H.noStyle}return D.create=ce(),{configureLogger(Ce){var He;Ce==="console"?(D.loggerConsoleStyle=Aa.loggerConsoleStyle,D.create=ce()):Ce.type==="console"?(D.loggerConsoleStyle=(He=Ce.style)!=null?He:Aa.loggerConsoleStyle,D.create=ce()):Ce.type==="keyed"?(D.creatExt=$e=>Ce.keyed($e.names),D.create=ne):Ce.type==="named"&&(D.creatExt=N3.bind(null,Ce.named),D.create=ne)},configureLogging(Ce){var He,$e,ct,It,Ot;D.includes.dev=(He=Ce.dev)!=null?He:Aa.includes.dev,D.includes.internal=($e=Ce.internal)!=null?$e:Aa.includes.internal,D.includes.min=(ct=Ce.min)!=null?ct:Aa.includes.min,D.include=(It=Ce.include)!=null?It:Aa.include,D.loggingConsoleStyle=(Ot=Ce.consoleStyle)!=null?Ot:Aa.loggingConsoleStyle,D.create=ce()},getLogger(){return D.create({names:[]})}}}function N3(h,x){const D=[];for(let{name:H,key:ne}of x.names)D.push(ne==null?H:"".concat(H," (").concat(ne,")"));return h(D)}function F3(h){const x=K(K({},this.includes),this.include(h)),D=this.filtered,H=this.named.bind(this,h),ne=this.creatExt(h),ce=gr(x,524),Ce=gr(x,522),He=gr(x,521),$e=gr(x,529),ct=gr(x,545),It=gr(x,265),Ot=gr(x,268),le=gr(x,273),Xe=gr(x,289),Qt=gr(x,137),Nn=gr(x,145),Un=gr(x,73),On=gr(x,81),Kn=ce?ne.error.bind(ne,bo._hmm):D.bind(h,524),fi=Ce?ne.error.bind(ne,bo._todo):D.bind(h,522),ro=He?ne.error.bind(ne,bo._error):D.bind(h,521),Ai=$e?ne.error.bind(ne,bo.errorDev):D.bind(h,529),ur=ct?ne.error.bind(ne,bo.errorPublic):D.bind(h,545),Ii=Ot?ne.warn.bind(ne,bo._kapow):D.bind(h,268),Eo=It?ne.warn.bind(ne,bo._warn):D.bind(h,265),Ra=le?ne.warn.bind(ne,bo.warnDev):D.bind(h,273),hc=Xe?ne.warn.bind(ne,bo.warnPublic):D.bind(h,273),pc=Qt?ne.debug.bind(ne,bo._debug):D.bind(h,137),La=Nn?ne.debug.bind(ne,bo.debugDev):D.bind(h,145),mc=Un?ne.trace.bind(ne,bo._trace):D.bind(h,73),ps=On?ne.trace.bind(ne,bo.traceDev):D.bind(h,81),Qr={_hmm:Kn,_todo:fi,_error:ro,errorDev:Ai,errorPublic:ur,_kapow:Ii,_warn:Eo,warnDev:Ra,warnPublic:hc,_debug:pc,debugDev:La,_trace:mc,traceDev:ps,lazy:{_hmm:ce?hr(Kn):Kn,_todo:Ce?hr(fi):fi,_error:He?hr(ro):ro,errorDev:$e?hr(Ai):Ai,errorPublic:ct?hr(ur):ur,_kapow:Ot?hr(Ii):Ii,_warn:It?hr(Eo):Eo,warnDev:le?hr(Ra):Ra,warnPublic:Xe?hr(hc):hc,_debug:Qt?hr(pc):pc,debugDev:Nn?hr(La):La,_trace:Un?hr(mc):mc,traceDev:On?hr(ps):ps},named:H,utilFor:{internal(){return{debug:Qr._debug,error:Qr._error,warn:Qr._warn,trace:Qr._trace,named(ko,Sr){return Qr.named(ko,Sr).utilFor.internal()}}},dev(){return{debug:Qr.debugDev,error:Qr.errorDev,warn:Qr.warnDev,trace:Qr.traceDev,named(ko,Sr){return Qr.named(ko,Sr).utilFor.dev()}}},public(){return{error:Qr.errorPublic,warn:Qr.warnPublic,debug(ko,Sr){Qr._warn('(public "debug" filtered out) '.concat(ko),Sr)},trace(ko,Sr){Qr._warn('(public "trace" filtered out) '.concat(ko),Sr)},named(ko,Sr){return Qr.named(ko,Sr).utilFor.public()}}}}};return Qr}function ac(h,x){const D=K(K({},this.includes),this.include(x)),H=[];let ne="";for(let $e=0;$e<x.names.length;$e++){const{name:ct,key:It}=x.names[$e];if(ne+=" %c".concat(ct),H.push(this.style.css(ct)),It!=null){const Ot="%c#".concat(It);ne+=Ot,H.push(this.style.css(Ot))}}const ce=this.filtered,Ce=this.named.bind(this,x),He=[ne,...H];return ky(ce,x,D,h,He,GS(He),Ce)}function GS(h){const x=h.slice(0);for(let D=1;D<x.length;D++)x[D]+=";background-color:#e0005a;padding:2px;color:white";return x}function j3(h,x){const D=K(K({},this.includes),this.include(x));let H="";for(let He=0;He<x.names.length;He++){const{name:$e,key:ct}=x.names[He];H+=" ".concat($e),ct!=null&&(H+="#".concat(ct))}const ne=this.filtered,ce=this.named.bind(this,x),Ce=[H];return ky(ne,x,D,h,Ce,Ce,ce)}function ky(h,x,D,H,ne,ce,Ce){const He=gr(D,524),$e=gr(D,522),ct=gr(D,521),It=gr(D,529),Ot=gr(D,545),le=gr(D,265),Xe=gr(D,268),Qt=gr(D,273),Nn=gr(D,289),Un=gr(D,137),On=gr(D,145),Kn=gr(D,73),fi=gr(D,81),ro=He?H.error.bind(H,...ne):h.bind(x,524),Ai=$e?H.error.bind(H,...ne):h.bind(x,522),ur=ct?H.error.bind(H,...ne):h.bind(x,521),Ii=It?H.error.bind(H,...ne):h.bind(x,529),Eo=Ot?H.error.bind(H,...ne):h.bind(x,545),Ra=Xe?H.warn.bind(H,...ce):h.bind(x,268),hc=le?H.warn.bind(H,...ne):h.bind(x,265),pc=Qt?H.warn.bind(H,...ne):h.bind(x,273),La=Nn?H.warn.bind(H,...ne):h.bind(x,273),mc=Un?H.info.bind(H,...ne):h.bind(x,137),ps=On?H.info.bind(H,...ne):h.bind(x,145),Qr=Kn?H.debug.bind(H,...ne):h.bind(x,73),ko=fi?H.debug.bind(H,...ne):h.bind(x,81),Sr={_hmm:ro,_todo:Ai,_error:ur,errorDev:Ii,errorPublic:Eo,_kapow:Ra,_warn:hc,warnDev:pc,warnPublic:La,_debug:mc,debugDev:ps,_trace:Qr,traceDev:ko,lazy:{_hmm:He?hr(ro):ro,_todo:$e?hr(Ai):Ai,_error:ct?hr(ur):ur,errorDev:It?hr(Ii):Ii,errorPublic:Ot?hr(Eo):Eo,_kapow:Xe?hr(Ra):Ra,_warn:le?hr(hc):hc,warnDev:Qt?hr(pc):pc,warnPublic:Nn?hr(La):La,_debug:Un?hr(mc):mc,debugDev:On?hr(ps):ps,_trace:Kn?hr(Qr):Qr,traceDev:fi?hr(ko):ko},named:Ce,utilFor:{internal(){return{debug:Sr._debug,error:Sr._error,warn:Sr._warn,trace:Sr._trace,named(ms,gs){return Sr.named(ms,gs).utilFor.internal()}}},dev(){return{debug:Sr.debugDev,error:Sr.errorDev,warn:Sr.warnDev,trace:Sr.traceDev,named(ms,gs){return Sr.named(ms,gs).utilFor.dev()}}},public(){return{error:Sr.errorPublic,warn:Sr.warnPublic,debug(ms,gs){Sr._warn('(public "debug" filtered out) '.concat(ms),gs)},trace(ms,gs){Sr._warn('(public "trace" filtered out) '.concat(ms),gs)},named(ms,gs){return Sr.named(ms,gs).utilFor.public()}}}}};return Sr}var WS=Ou(console,{_debug:function(){},_error:function(){}});WS.configureLogging({dev:!0,min:64});var ym=WS.getLogger().named("Theatre.js (default logger)").utilFor.dev(),Ty=new WeakMap;function B3(h){const x=Ty.get(h);if(x)return x;const D=new Map;return Ty.set(h,D),qS([],h,D),D}function qS(h,x,D){for(const[H,ne]of Object.entries(x.props))if(!kf(ne)){const ce=[...h,H];D.set(JSON.stringify(ce),D.size),My(ce,ne,D)}for(const[H,ne]of Object.entries(x.props))if(kf(ne)){const ce=[...h,H];D.set(JSON.stringify(ce),D.size),My(ce,ne,D)}}function My(h,x,D){if(x.type==="compound")qS(h,x,D);else{if(x.type==="enum")throw new Error("Enums aren't supported yet");D.set(JSON.stringify(h),D.size)}}function KS(h){return typeof h=="object"&&h!==null&&Object.keys(h).length===0}var U3=class{constructor(h,x,D,H,ne){this.sheetTemplate=h,se(this,"address"),se(this,"type","Theatre_SheetObjectTemplate"),se(this,"_config"),se(this,"_temp_actions_atom"),se(this,"_cache",new ss),se(this,"project"),se(this,"pointerToSheetState"),se(this,"pointerToStaticOverrides"),this.address=te(K({},h.address),{objectKey:x}),this._config=new Yr.Atom(H),this._temp_actions_atom=new Yr.Atom(ne),this.project=h.project,this.pointerToSheetState=this.sheetTemplate.project.pointers.historic.sheetsById[this.address.sheetId],this.pointerToStaticOverrides=this.pointerToSheetState.staticOverrides.byObject[this.address.objectKey]}get staticConfig(){return this._config.get()}get configPointer(){return this._config.pointer}get _temp_actions(){return this._temp_actions_atom.get()}get _temp_actionsPointer(){return this._temp_actions_atom.pointer}createInstance(h,x,D){return this._config.set(D),new z3(h,this,x)}reconfigure(h){this._config.set(h)}_temp_setActions(h){this._temp_actions_atom.set(h)}getDefaultValues(){return this._cache.get("getDefaultValues()",()=>(0,Yr.prism)(()=>{const h=(0,Yr.val)(this.configPointer);return nv(h)}))}getStaticValues(){return this._cache.get("getStaticValues",()=>(0,Yr.prism)(()=>{var h;const x=(h=(0,Yr.val)(this.pointerToStaticOverrides))!=null?h:{};return(0,Yr.val)(this.configPointer).deserializeAndSanitize(x)||{}}))}getArrayOfValidSequenceTracks(){return this._cache.get("getArrayOfValidSequenceTracks",()=>(0,Yr.prism)(()=>{const h=this.project.pointers.historic.sheetsById[this.address.sheetId],x=(0,Yr.val)(h.sequence.tracksByObject[this.address.objectKey].trackIdByPropPath);if(!x)return yt;const D=[];if(!x)return yt;const H=(0,Yr.val)(this.configPointer),ne=Object.entries(x);for(const[Ce,He]of ne){const $e=XS(Ce);if(!$e)continue;const ct=vm(H,$e);!(ct&&L3(ct))||D.push({pathToProp:$e,trackId:He})}const ce=B3(H);return D.sort((Ce,He)=>{const $e=Ce.pathToProp,ct=He.pathToProp,It=ce.get(JSON.stringify($e)),Ot=ce.get(JSON.stringify(ct));return It>Ot?1:-1}),D.length===0?yt:D}))}getMapOfValidSequenceTracks_forStudio(){return this._cache.get("getMapOfValidSequenceTracks_forStudio",()=>(0,Yr.prism)(()=>{const h=(0,Yr.val)(this.getArrayOfValidSequenceTracks());let x={};for(const{pathToProp:D,trackId:H}of h)il(x,D,H);return x}))}getStaticButNotSequencedOverrides(){return this._cache.get("getStaticButNotSequencedOverrides",()=>(0,Yr.prism)(()=>{const h=(0,Yr.val)(this.getStaticValues()),x=(0,Yr.val)(this.getArrayOfValidSequenceTracks()),D=ry(h);for(const{pathToProp:H}of x){Ey(D,H);let ne=H.slice(0,-1);for(;ne.length>0;){const ce=rl(D,ne);if(!KS(ce))break;Ey(D,ne),ne=ne.slice(0,-1)}}if(!KS(D))return D}))}getDefaultsAtPointer(h){const{path:x}=(0,Yr.getPointerParts)(h),D=this.getDefaultValues().getValue();return rl(D,x)}};function XS(h){try{return JSON.parse(h)}catch{ym.warn("property ".concat(JSON.stringify(h)," cannot be parsed. Skipping."));return}}var $S=Mt,V3=HS(h=>JSON.stringify(h));we(ee());var ZS=class extends Error{},Tf=class extends ZS{},YS=Mt,JS=Mt,H3=Mt,di=Mt;function us(){let h,x;const D=new Promise((ne,ce)=>{h=Ce=>{ne(Ce),H.status="resolved"},x=Ce=>{ce(Ce),H.status="rejected"}}),H={resolve:h,reject:x,promise:D,status:"pending"};return H}var Py=()=>{},Mf=Py,G3=Mt,W3=class{constructor(){se(this,"_stopPlayCallback",Mf),se(this,"_state",new G3.Atom({position:0,playing:!1})),se(this,"statePointer"),this.statePointer=this._state.pointer}destroy(){}pause(){this._stopPlayCallback(),this.playing=!1,this._stopPlayCallback=Mf}gotoPosition(h){this._updatePositionInState(h)}_updatePositionInState(h){this._state.setByPointer(x=>x.position,h)}getCurrentPosition(){return this._state.get().position}get playing(){return this._state.get().playing}set playing(h){this._state.setByPointer(x=>x.playing,h)}play(h,x,D,H,ne){this.playing&&this.pause(),this.playing=!0;const ce=x[1]-x[0];{const le=this.getCurrentPosition();le<x[0]||le>x[1]?H==="normal"||H==="alternate"?this._updatePositionInState(x[0]):(H==="reverse"||H==="alternateReverse")&&this._updatePositionInState(x[1]):H==="normal"||H==="alternate"?le===x[1]&&this._updatePositionInState(x[0]):le===x[0]&&this._updatePositionInState(x[1])}const Ce=us(),He=ne.time,$e=ce*h;let ct=this.getCurrentPosition()-x[0];(H==="reverse"||H==="alternateReverse")&&(ct=x[1]-this.getCurrentPosition());const It=le=>{const Qt=Math.max(le-He,0)/1e3,Nn=Math.min(Qt*D+ct,$e);if(Nn!==$e){const Un=Math.floor(Nn/ce);let On=Nn/ce%1*ce;if(H!=="normal")if(H==="reverse")On=ce-On;else{const Kn=Un%2===0;H==="alternate"?Kn||(On=ce-On):Kn&&(On=ce-On)}this._updatePositionInState(On+x[0]),Ot()}else{if(H==="normal")this._updatePositionInState(x[1]);else if(H==="reverse")this._updatePositionInState(x[0]);else{const Un=(h-1)%2===0;H==="alternate"?Un?this._updatePositionInState(x[1]):this._updatePositionInState(x[0]):Un?this._updatePositionInState(x[0]):this._updatePositionInState(x[1])}this.playing=!1,Ce.resolve(!0)}};this._stopPlayCallback=()=>{ne.offThisOrNextTick(It),ne.offNextTick(It),this.playing&&Ce.resolve(!1)};const Ot=()=>ne.onNextTick(It);return ne.onThisOrNextTick(It),Ce.promise}playDynamicRange(h,x){this.playing&&this.pause(),this.playing=!0;const D=us(),H=h.keepHot();D.promise.then(H,H);let ne=x.time;const ce=He=>{const $e=Math.max(He-ne,0);ne=He;const ct=$e/1e3,It=this.getCurrentPosition(),Ot=h.getValue();if(It<Ot[0]||It>Ot[1])this.gotoPosition(Ot[0]);else{let le=It+ct;le>Ot[1]&&(le=Ot[0]+(le-Ot[1])),this.gotoPosition(le)}Ce()};this._stopPlayCallback=()=>{x.offThisOrNextTick(ce),x.offNextTick(ce),D.resolve(!1)};const Ce=()=>x.onNextTick(ce);return x.onThisOrNextTick(ce),D.promise}},QS=Mt,q3="__TheatreJS_StudioBundle",bm="__TheatreJS_CoreBundle",eE="__TheatreJS_Notifications",_m=h=>(...x)=>{var D;switch(h){case"success":{ym.debug(x.slice(0,2).join(`
`));break}case"info":{ym.debug(x.slice(0,2).join(`
`));break}case"warning":{ym.warn(x.slice(0,2).join(`
`));break}}return typeof window!="undefined"?(D=window[eE])==null?void 0:D.notify[h](...x):void 0},sc={warning:_m("warning"),success:_m("success"),info:_m("info"),error:_m("error")};typeof window!="undefined"&&(window.addEventListener("error",h=>{sc.error("An error occurred","<pre>".concat(h.message,`</pre>

See **console** for details.`))}),window.addEventListener("unhandledrejection",h=>{sc.error("An error occurred","<pre>".concat(h.reason,`</pre>

See **console** for details.`))}));var tE=class{constructor(h,x,D){this._decodedBuffer=h,this._audioContext=x,this._nodeDestination=D,se(this,"_mainGain"),se(this,"_state",new QS.Atom({position:0,playing:!1})),se(this,"statePointer"),se(this,"_stopPlayCallback",Mf),this.statePointer=this._state.pointer,this._mainGain=this._audioContext.createGain(),this._mainGain.connect(this._nodeDestination)}playDynamicRange(h,x){const D=us();this._playing&&this.pause(),this._playing=!0;let H;const ne=()=>{H==null||H(),H=this._loopInRange(h.getValue(),x).stop},ce=h.onStale(ne);return ne(),this._stopPlayCallback=()=>{H==null||H(),ce(),D.resolve(!1)},D.promise}_loopInRange(h,x){let H=this.getCurrentPosition();const ne=h[1]-h[0];H<h[0]||H>h[1]?this._updatePositionInState(h[0]):H===h[1]&&this._updatePositionInState(h[0]),H=this.getCurrentPosition();const ce=this._audioContext.createBufferSource();ce.buffer=this._decodedBuffer,ce.connect(this._mainGain),ce.playbackRate.value=1,ce.loop=!0,ce.loopStart=h[0],ce.loopEnd=h[1];const Ce=x.time;let He=H-h[0];ce.start(0,H);const $e=Ot=>{let Nn=(Math.max(Ot-Ce,0)/1e3*1+He)/ne%1*ne;this._updatePositionInState(Nn+h[0]),ct()},ct=()=>x.onNextTick($e);return x.onThisOrNextTick($e),{stop:()=>{ce.stop(),ce.disconnect(),x.offThisOrNextTick($e),x.offNextTick($e)}}}get _playing(){return this._state.get().playing}set _playing(h){this._state.setByPointer(x=>x.playing,h)}destroy(){}pause(){this._stopPlayCallback(),this._playing=!1,this._stopPlayCallback=Mf}gotoPosition(h){this._updatePositionInState(h)}_updatePositionInState(h){this._state.reduce(x=>te(K({},x),{position:h}))}getCurrentPosition(){return this._state.get().position}play(h,x,D,H,ne){this._playing&&this.pause(),this._playing=!0;let ce=this.getCurrentPosition();const Ce=x[1]-x[0];if(H!=="normal")throw new Tf('Audio-controlled sequences can only be played in the "normal" direction. '+"'".concat(H,"' given."));ce<x[0]||ce>x[1]?this._updatePositionInState(x[0]):ce===x[1]&&this._updatePositionInState(x[0]),ce=this.getCurrentPosition();const He=us(),$e=this._audioContext.createBufferSource();$e.buffer=this._decodedBuffer,$e.connect(this._mainGain),$e.playbackRate.value=D,h>1e3&&(sc.warning("Can't play sequences with audio more than 1000 times","The sequence will still play, but only 1000 times. The `iterationCount: ".concat(h,"` provided to `sequence.play()`\nis too high for a sequence with audio.\n\nTo fix this, either set `iterationCount` to a lower value, or remove the audio from the sequence."),[{url:"https://www.theatrejs.com/docs/latest/manual/audio",title:"Using Audio"},{url:"https://www.theatrejs.com/docs/latest/api/core#sequence.attachaudio",title:"Audio API"}]),h=1e3),h>1&&($e.loop=!0,$e.loopStart=x[0],$e.loopEnd=x[1]);const ct=ne.time;let It=ce-x[0];const Ot=Ce*h;$e.start(0,ce,Ot-It);const le=Nn=>{const On=Math.max(Nn-ct,0)/1e3,Kn=Math.min(On*D+It,Ot);if(Kn!==Ot){let fi=Kn/Ce%1*Ce;this._updatePositionInState(fi+x[0]),Qt()}else this._updatePositionInState(x[1]),this._playing=!1,Xe(),He.resolve(!0)},Xe=()=>{$e.stop(),$e.disconnect()};this._stopPlayCallback=()=>{Xe(),ne.offThisOrNextTick(le),ne.offNextTick(le),this._playing&&He.resolve(!1)};const Qt=()=>ne.onNextTick(le);return ne.onThisOrNextTick(le),He.promise}},K3=Mt,nE=0;function ll(h){var x;const D=Ce=>{H.tick(Ce)},H=new K3.Ticker({onActive(){var Ce;(Ce=h==null?void 0:h.start)==null||Ce.call(h)},onDormant(){var Ce;(Ce=h==null?void 0:h.stop)==null||Ce.call(h)}}),ne={tick:D,id:nE++,name:(x=h==null?void 0:h.name)!=null?x:"CustomRafDriver-".concat(nE),type:"Theatre_RafDriver_PublicAPI"},ce={type:"Theatre_RafDriver_PrivateAPI",publicApi:ne,ticker:H,start:h==null?void 0:h.start,stop:h==null?void 0:h.stop};return Ge(ne,ce),ne}function Cy(){let h=null;const H=ll({name:"DefaultCoreRafDriver",start:()=>{if(typeof window!="undefined"){const ne=ce=>{H.tick(ce),h=window.requestAnimationFrame(ne)};h=window.requestAnimationFrame(ne)}else H.tick(0),setTimeout(()=>H.tick(1),0)},stop:()=>{typeof window!="undefined"&&h!==null&&window.cancelAnimationFrame(h)}});return H}var Pf;function Ay(){return Pf||iE(Cy()),Pf}function rE(){return Ay().ticker}function iE(h){if(Pf)throw new Error("`setCoreRafDriver()` is already called.");Pf=Qe(h)}var oE=class{get type(){return"Theatre_Sequence_PublicAPI"}constructor(h){Ge(this,h)}play(h){const x=Qe(this);if(x._project.isReady()){const D=h!=null&&h.rafDriver?Qe(h.rafDriver).ticker:rE();return x.play(h!=null?h:{},D)}else{const D=us();return D.resolve(!0),D.promise}}pause(){Qe(this).pause()}get position(){return Qe(this).position}set position(h){Qe(this).position=h}__experimental_getKeyframes(h){return Qe(this).getKeyframesOfSimpleProp(h)}async attachAudio(h){const{audioContext:x,destinationNode:D,decodedBuffer:H,gainNode:ne}=await aE(h),ce=new tE(H,x,ne);return Qe(this).replacePlaybackController(ce),{audioContext:x,destinationNode:D,decodedBuffer:H,gainNode:ne}}get pointer(){return Qe(this).pointer}};async function aE(h){function x(){if(h.audioContext)return Promise.resolve(h.audioContext);const ct=new AudioContext;return ct.state==="running"||typeof window=="undefined"?Promise.resolve(ct):new Promise(It=>{const Ot=()=>{ct.resume().catch(Qt=>{console.error(Qt)})},le=["mousedown","keydown","touchstart"],Xe={capture:!0,passive:!1};le.forEach(Qt=>{window.addEventListener(Qt,Ot,Xe)}),ct.addEventListener("statechange",()=>{ct.state==="running"&&(le.forEach(Qt=>{window.removeEventListener(Qt,Ot,Xe)}),It(ct))})})}async function D(){if(h.source instanceof AudioBuffer)return h.source;const ct=us();if(typeof h.source!="string")throw new Error("Error validating arguments to sequence.attachAudio(). args.source must either be a string or an instance of AudioBuffer.");let It;try{It=await fetch(h.source)}catch(Qt){throw console.error(Qt),new Error("Could not fetch '".concat(h.source,"'. Network error logged above."))}let Ot;try{Ot=await It.arrayBuffer()}catch(Qt){throw console.error(Qt),new Error("Could not read '".concat(h.source,"' as an arrayBuffer."))}(await H).decodeAudioData(Ot,ct.resolve,ct.reject);let Xe;try{Xe=await ct.promise}catch(Qt){throw console.error(Qt),new Error("Could not decode ".concat(h.source," as an audio file."))}return Xe}const H=x(),ne=D(),[ce,Ce]=await Promise.all([H,ne]),He=h.destinationNode||ce.destination,$e=ce.createGain();return $e.connect(He),{audioContext:ce,decodedBuffer:Ce,gainNode:$e,destinationNode:He}}var X3=$3("Theatre_SheetObject");function $3(h){return x=>typeof x=="object"&&!!x&&x.type===h}var sE=class{constructor(h,x,D,H,ne){this._project=h,this._sheet=x,this._lengthD=D,this._subUnitsPerUnitD=H,se(this,"address"),se(this,"publicApi"),se(this,"_playbackControllerBox"),se(this,"_prismOfStatePointer"),se(this,"_positionD"),se(this,"_positionFormatterD"),se(this,"_playableRangeD"),se(this,"pointer",(0,H3.pointer)({root:this,path:[]})),se(this,"$$isPointerToPrismProvider",!0),se(this,"_logger"),se(this,"closestGridPosition",ce=>{const Ce=this.subUnitsPerUnit,He=1/Ce;return parseFloat((Math.round(ce/He)*He).toFixed(3))}),this._logger=h._logger.named("Sheet",x.address.sheetId).named("Instance",x.address.sheetInstanceId),this.address=te(K({},this._sheet.address),{sequenceName:"default"}),this.publicApi=new oE(this),this._playbackControllerBox=new JS.Atom(ne!=null?ne:new W3),this._prismOfStatePointer=(0,di.prism)(()=>this._playbackControllerBox.prism.getValue().statePointer),this._positionD=(0,di.prism)(()=>{const ce=this._prismOfStatePointer.getValue();return(0,di.val)(ce.position)}),this._positionFormatterD=(0,di.prism)(()=>{const ce=(0,di.val)(this._subUnitsPerUnitD);return new lE(ce)})}get type(){return"Theatre_Sequence"}pointerToPrism(h){const{path:x}=(0,YS.getPointerParts)(h);if(x.length===0)return(0,di.prism)(()=>({length:(0,di.val)(this.pointer.length),playing:(0,di.val)(this.pointer.playing),position:(0,di.val)(this.pointer.position),subUnitsPerUnit:(0,di.val)(this.pointer.subUnitsPerUnit)}));if(x.length>1)return(0,di.prism)(()=>{});const[D]=x;return D==="length"?this._lengthD:D==="subUnitsPerUnit"?this._subUnitsPerUnitD:D==="position"?this._positionD:D==="playing"?(0,di.prism)(()=>(0,di.val)(this._prismOfStatePointer.getValue().playing)):(0,di.prism)(()=>{})}getKeyframesOfSimpleProp(h){const{path:x,root:D}=(0,YS.getPointerParts)(h);if(!X3(D))throw new Tf("Argument prop must be a pointer to a SheetObject property");const H=(0,di.val)(this._project.pointers.historic.sheetsById[this._sheet.address.sheetId].sequence.tracksByObject[D.address.objectKey]);if(!H)return[];const{trackData:ne,trackIdByPropPath:ce}=H,Ce=V3(x),He=ce[Ce];if(!He)return[];const $e=ne[He];return $e?$e.keyframes:[]}get positionFormatter(){return this._positionFormatterD.getValue()}get prismOfStatePointer(){return this._prismOfStatePointer}get length(){return this._lengthD.getValue()}get positionPrism(){return this._positionD}get position(){return this._playbackControllerBox.get().getCurrentPosition()}get subUnitsPerUnit(){return this._subUnitsPerUnitD.getValue()}get positionSnappedToGrid(){return this.closestGridPosition(this.position)}set position(h){let x=h;this.pause(),x>this.length&&(x=this.length);const D=this.length;this._playbackControllerBox.get().gotoPosition(x>D?D:x)}getDurationCold(){return this._lengthD.getValue()}get playing(){return(0,di.val)(this._playbackControllerBox.get().statePointer.playing)}_makeRangeFromSequenceTemplate(){return(0,di.prism)(()=>[0,(0,di.val)(this._lengthD)])}playDynamicRange(h,x){return this._playbackControllerBox.get().playDynamicRange(h,x)}async play(h,x){const D=this.length,H=h&&h.range?h.range:[0,D],ne=h&&typeof h.iterationCount=="number"?h.iterationCount:1,ce=h&&typeof h.rate!="undefined"?h.rate:1,Ce=h&&h.direction?h.direction:"normal";return await this._play(ne,[H[0],H[1]],ce,Ce,x)}_play(h,x,D,H,ne){return this._playbackControllerBox.get().play(h,x,D,H,ne)}pause(){this._playbackControllerBox.get().pause()}replacePlaybackController(h){this.pause();const x=this._playbackControllerBox.get();this._playbackControllerBox.set(h);const D=x.getCurrentPosition();x.destroy(),h.gotoPosition(D)}},lE=class{constructor(h){this._fps=h}formatSubUnitForGrid(h){const x=h%1,D=1/this._fps;return Math.round(x/D)+"f"}formatFullUnitForGrid(h){let x=h,D="";x>=xo&&(D+=Math.floor(x/xo)+"h",x=x%xo),x>=cc&&(D+=Math.floor(x/cc)+"m",x=x%cc),x>=lc&&(D+=Math.floor(x/lc)+"s",x=x%lc);const H=1/this._fps;return x>=H&&(D+=Math.floor(x/H)+"f",x=x%H),D.length===0?"0s":D}formatForPlayhead(h){let x=h,D="";if(x>=xo){const ne=Math.floor(x/xo);D+=Ef(ne.toString(),2,"0")+"h",x=x%xo}if(x>=cc){const ne=Math.floor(x/cc);D+=Ef(ne.toString(),2,"0")+"m",x=x%cc}else D.length>0&&(D+="00m");if(x>=lc){const ne=Math.floor(x/lc);D+=Ef(ne.toString(),2,"0")+"s",x=x%lc}else D+="00s";const H=1/this._fps;if(x>=H){const ne=Math.round(x/H);D+=Ef(ne.toString(),2,"0")+"f",x=x%H}else x/H>.98?(D+=Ef(1 .toString(),2,"0")+"f",x=x%H):D+="00f";return D.length===0?"00s00f":D}formatBasic(h){return h.toFixed(2)+"s"}},lc=1,cc=lc*60,xo=cc*60,Iy={};O(Iy,{boolean:()=>mE,compound:()=>Da,file:()=>fE,image:()=>In,number:()=>Ho,rgba:()=>pE,string:()=>gE,stringLiteral:()=>eA});function Jr(h,x){return h.length<=x?h:h.substr(0,x-3)+"..."}var Z3=h=>typeof h=="string"?'string("'.concat(Jr(h,10),'")'):typeof h=="number"?"number(".concat(Jr(String(h),10),")"):h===null?"null":h===void 0?"undefined":typeof h=="boolean"?String(h):Array.isArray(h)?"array":typeof h=="object"?"object":"unknown",cE=Z3;function Oe(h,{removeAlphaIfOpaque:x=!1}={}){const D=(h.a*255|256).toString(16).slice(1),H=(h.r*255|1<<8).toString(16).slice(1)+(h.g*255|1<<8).toString(16).slice(1)+(h.b*255|1<<8).toString(16).slice(1)+(x&&D==="ff"?"":D);return"#".concat(H)}function Dy(h){return te(K({},h),{toString(){return Oe(this,{removeAlphaIfOpaque:!0})}})}function Y3(h){return Object.fromEntries(Object.entries(h).map(([x,D])=>[x,gf(D,0,1)]))}function J3(h){function x(D){return D>=.0031308?1.055*D**(1/2.4)-.055:12.92*D}return Y3({r:x(h.r),g:x(h.g),b:x(h.b),a:h.a})}function Ia(h){function x(D){return D>=.04045?((D+.055)/(1+.055))**2.4:D/12.92}return{r:x(h.r),g:x(h.g),b:x(h.b),a:h.a}}function uE(h){let x=.4122214708*h.r+.5363325363*h.g+.0514459929*h.b,D=.2119034982*h.r+.6806995451*h.g+.1073969566*h.b,H=.0883024619*h.r+.2817188376*h.g+.6299787005*h.b,ne=Math.cbrt(x),ce=Math.cbrt(D),Ce=Math.cbrt(H);return{L:.2104542553*ne+.793617785*ce-.0040720468*Ce,a:1.9779984951*ne-2.428592205*ce+.4505937099*Ce,b:.0259040371*ne+.7827717662*ce-.808675766*Ce,alpha:h.a}}function Mn(h){let x=h.L+.3963377774*h.a+.2158037573*h.b,D=h.L-.1055613458*h.a-.0638541728*h.b,H=h.L-.0894841775*h.a-1.291485548*h.b,ne=x*x*x,ce=D*D*D,Ce=H*H*H;return{r:4.0767416621*ne-3.3077115913*ce+.2309699292*Ce,g:-1.2684380046*ne+2.6097574011*ce-.3413193965*Ce,b:-.0041960863*ne-.7034186147*ce+1.707614701*Ce,a:h.alpha}}var ds=Symbol("TheatrePropType_Basic");function Cf(h){return typeof h=="object"&&!!h&&h[ds]==="TheatrePropType"}function xm(h){if(typeof h=="number")return Ho(h);if(typeof h=="boolean")return mE(h);if(typeof h=="string")return gE(h);if(typeof h=="object"&&!!h){if(Cf(h))return h;if(Px(h))return Da(h);throw new Tf("This value is not a valid prop type: ".concat(cE(h)))}else throw new Tf("This value is not a valid prop type: ".concat(cE(h)))}function dE(h){const x={};for(const D of Object.keys(h)){const H=h[D];Cf(H)?x[D]=H:x[D]=xm(H)}return x}var Da=(h,x={})=>{const D=dE(h),H=new WeakMap;return{type:"compound",props:D,valueType:null,[ds]:"TheatrePropType",label:x.label,default:gy(D,ce=>ce.default),deserializeAndSanitize:ce=>{if(typeof ce!="object"||!ce)return;if(H.has(ce))return H.get(ce);const Ce={};let He=!1;for(const[$e,ct]of Object.entries(D))if(Object.prototype.hasOwnProperty.call(ce,$e)){const It=ct.deserializeAndSanitize(ce[$e]);It!=null&&(He=!0,Ce[$e]=It)}if(H.set(ce,Ce),He)return Ce}}},fE=(h,x={})=>{const D=(H,ne,ce)=>{var Ce;const He=(Ce=x.interpolate)!=null?Ce:Lu;return{type:"file",id:He(H.id,ne.id,ce)}};return{type:"file",default:{type:"file",id:h},valueType:null,[ds]:"TheatrePropType",label:x.label,interpolate:D,deserializeAndSanitize:uc}},uc=h=>{if(!h)return;let x=!0;if(typeof h.id!="string"&&![null,void 0].includes(h.id)&&(x=!1),h.type!=="file"&&(x=!1),!!x)return h},In=(h,x={})=>{const D=(H,ne,ce)=>{var Ce;const He=(Ce=x.interpolate)!=null?Ce:Lu;return{type:"image",id:He(H.id,ne.id,ce)}};return{type:"image",default:{type:"image",id:h},valueType:null,[ds]:"TheatrePropType",label:x.label,interpolate:D,deserializeAndSanitize:Oy}},Oy=h=>{if(!h)return;let x=!0;if(typeof h.id!="string"&&![null,void 0].includes(h.id)&&(x=!1),h.type!=="image"&&(x=!1),!!x)return h},Ho=(h,x={})=>{var D;return te(K({type:"number",valueType:0,default:h,[ds]:"TheatrePropType"},x||{}),{label:x.label,nudgeFn:(D=x.nudgeFn)!=null?D:yE,nudgeMultiplier:typeof x.nudgeMultiplier=="number"?x.nudgeMultiplier:void 0,interpolate:hE,deserializeAndSanitize:Ru(x.range)})},Ru=h=>h?x=>{if(!!(typeof x=="number"&&isFinite(x)))return gf(x,h[0],h[1])}:wm,wm=h=>typeof h=="number"&&isFinite(h)?h:void 0,hE=(h,x,D)=>h+D*(x-h),pE=(h={r:0,g:0,b:0,a:1},x={})=>{const D={};for(const H of["r","g","b","a"])D[H]=Math.min(Math.max(h[H],0),1);return{type:"rgba",valueType:null,default:Dy(D),[ds]:"TheatrePropType",label:x.label,interpolate:sn,deserializeAndSanitize:Ry}},Ry=h=>{if(!h)return;let x=!0;for(const H of["r","g","b","a"])(!Object.prototype.hasOwnProperty.call(h,H)||typeof h[H]!="number")&&(x=!1);if(!x)return;const D={};for(const H of["r","g","b","a"])D[H]=Math.min(Math.max(h[H],0),1);return Dy(D)},sn=(h,x,D)=>{const H=uE(Ia(h)),ne=uE(Ia(x)),ce={L:(1-D)*H.L+D*ne.L,a:(1-D)*H.a+D*ne.a,b:(1-D)*H.b+D*ne.b,alpha:(1-D)*H.alpha+D*ne.alpha},Ce=J3(Mn(ce));return Dy(Ce)},mE=(h,x={})=>{var D;return{type:"boolean",default:h,valueType:null,[ds]:"TheatrePropType",label:x.label,interpolate:(D=x.interpolate)!=null?D:Lu,deserializeAndSanitize:Q3}},Q3=h=>typeof h=="boolean"?h:void 0;function Lu(h){return h}var gE=(h,x={})=>{var D;return{type:"string",default:h,valueType:null,[ds]:"TheatrePropType",label:x.label,interpolate:(D=x.interpolate)!=null?D:Lu,deserializeAndSanitize:vE}};function vE(h){return typeof h=="string"?h:void 0}function eA(h,x,D={}){var H,ne;return{type:"stringLiteral",default:h,valuesAndLabels:K({},x),[ds]:"TheatrePropType",valueType:null,as:(H=D.as)!=null?H:"menu",label:D.label,interpolate:(ne=D.interpolate)!=null?ne:Lu,deserializeAndSanitize(ce){if(typeof ce=="string"&&Object.prototype.hasOwnProperty.call(x,ce))return ce}}}var yE=({config:h,deltaX:x,deltaFraction:D,magnitude:H})=>{var ne;const{range:ce}=h;return!h.nudgeMultiplier&&ce&&!ce.includes(1/0)&&!ce.includes(-1/0)?D*(ce[1]-ce[0])*H:x*H*((ne=h.nudgeMultiplier)!=null?ne:1)},bE=h=>h.replace(/^[\s\/]*/,"").replace(/[\s\/]*$/,"").replace(/\s*\/\s*/g," / ");function Sm(h,x){return bE(h)}we(fe());var tA=class{get type(){return"Theatre_Sheet_PublicAPI"}constructor(h){Ge(this,h)}object(h,x,D){const H=Qe(this),ne=Sm(h),ce=H.getObject(ne),Ce=null,He=D==null?void 0:D.__actions__THIS_API_IS_UNSTABLE_AND_WILL_CHANGE_IN_THE_NEXT_VERSION;if(ce)return He&&ce.template._temp_setActions(He),ce.publicApi;{const $e=Da(x);return H.createObject(ne,Ce,$e,He).publicApi}}__experimental_getExistingObject(h){const x=Qe(this),D=Sm(h),H=x.getObject(D);return H==null?void 0:H.publicApi}get sequence(){return Qe(this).getSequence().publicApi}get project(){return Qe(this).project.publicApi}get address(){return K({},Qe(this).address)}detachObject(h){const x=Qe(this),D=Sm(h);if(!x.getObject(D)){sc.warning(`Couldn't delete object "`.concat(D,'"'),'There is no object with key "'.concat(D,`".

To fix this, make sure you are calling \`sheet.deleteObject("`).concat(D,'")` with the correct key.')),console.warn('Object key "'.concat(D,'" does not exist.'));return}x.deleteObject(D)}},zu=Mt,nA=class{constructor(h,x){this.template=h,this.instanceId=x,se(this,"_objects",new zu.Atom({})),se(this,"_sequence"),se(this,"address"),se(this,"publicApi"),se(this,"project"),se(this,"objectsP",this._objects.pointer),se(this,"type","Theatre_Sheet"),se(this,"_logger"),this._logger=h.project._logger.named("Sheet",x),this._logger._trace("creating sheet"),this.project=h.project,this.address=te(K({},h.address),{sheetInstanceId:this.instanceId}),this.publicApi=new tA(this)}createObject(h,x,D,H={}){const ce=this.template.getObjectTemplate(h,x,D,H).createInstance(this,x,D);return this._objects.setByPointer(Ce=>Ce[h],ce),ce}getObject(h){return this._objects.get()[h]}deleteObject(h){this._objects.reduce(x=>{const D=K({},x);return delete D[h],D})}getSequence(){if(!this._sequence){const h=(0,zu.prism)(()=>{const D=(0,zu.val)(this.project.pointers.historic.sheetsById[this.address.sheetId].sequence.length);return _E(D)}),x=(0,zu.prism)(()=>{const D=(0,zu.val)(this.project.pointers.historic.sheetsById[this.address.sheetId].sequence.subUnitsPerUnit);return xE(D)});this._sequence=new sE(this.template.project,this,h,x)}return this._sequence}},_E=h=>typeof h=="number"&&isFinite(h)&&h>0?h:10,xE=h=>typeof h=="number"&&_3(h)&&h>=1&&h<=1e3?h:30,Ly=class{constructor(h,x){this.project=h,se(this,"type","Theatre_SheetTemplate"),se(this,"address"),se(this,"_instances",new $S.Atom({})),se(this,"instancesP",this._instances.pointer),se(this,"_objectTemplates",new $S.Atom({})),se(this,"objectTemplatesP",this._objectTemplates.pointer),this.address=te(K({},h.address),{sheetId:x})}getInstance(h){let x=this._instances.get()[h];return x||(x=new nA(this,h),this._instances.setByPointer(D=>D[h],x)),x}getObjectTemplate(h,x,D,H){let ne=this._objectTemplates.get()[h];return ne||(ne=new U3(this,h,x,D,H),this._objectTemplates.setByPointer(ce=>ce[h],ne)),ne}},zy=Mt,wE=Mt,rA=h=>new Promise(x=>setTimeout(x,h)),iA=rA;function Br(h){for(var x=arguments.length,D=Array(x>1?x-1:0),H=1;H<x;H++)D[H-1]=arguments[H];throw Error("[Immer] minified error nr: "+h+(D.length?" "+D.map(function(ne){return"'"+ne+"'"}).join(","):"")+". Find the full error at: https://bit.ly/3cXEKWf")}function sa(h){return!!h&&!!h[wi]}function cl(h){return!!h&&(function(x){if(!x||typeof x!="object")return!1;var D=Object.getPrototypeOf(x);if(D===null)return!0;var H=Object.hasOwnProperty.call(D,"constructor")&&D.constructor;return H===Object||typeof H=="function"&&Function.toString.call(H)===Gy}(h)||Array.isArray(h)||!!h[Hy]||!!h.constructor[Hy]||Tm(h)||Mm(h))}function Ny(h){return sa(h)||Br(23,h),h[wi].t}function wo(h,x,D){D===void 0&&(D=!1),ul(h)===0?(D?Object.keys:Rm)(h).forEach(function(H){D&&typeof H=="symbol"||x(H,h[H],h)}):h.forEach(function(H,ne){return x(ne,H,h)})}function ul(h){var x=h[wi];return x?x.i>3?x.i-4:x.i:Array.isArray(h)?1:Tm(h)?2:Mm(h)?3:0}function Em(h,x){return ul(h)===2?h.has(x):Object.prototype.hasOwnProperty.call(h,x)}function SE(h,x){return ul(h)===2?h.get(x):h[x]}function km(h,x,D){var H=ul(h);H===2?h.set(x,D):H===3?(h.delete(x),h.add(D)):h[x]=D}function EE(h,x){return h===x?h!==0||1/h==1/x:h!=h&&x!=x}function Tm(h){return TE&&h instanceof Map}function Mm(h){return ME&&h instanceof Set}function So(h){return h.o||h.t}function Bi(h){if(Array.isArray(h))return Array.prototype.slice.call(h);var x=PE(h);delete x[wi];for(var D=Rm(x),H=0;H<D.length;H++){var ne=D[H],ce=x[ne];ce.writable===!1&&(ce.writable=!0,ce.configurable=!0),(ce.get||ce.set)&&(x[ne]={configurable:!0,writable:!0,enumerable:ce.enumerable,value:h[ne]})}return Object.create(Object.getPrototypeOf(h),x)}function Af(h,x){return x===void 0&&(x=!1),Fy(h)||sa(h)||!cl(h)||(ul(h)>1&&(h.set=h.add=h.clear=h.delete=Pm),Object.freeze(h),x&&wo(h,function(D,H){return Af(H,!0)},!0)),h}function Pm(){Br(2)}function Fy(h){return h==null||typeof h!="object"||Object.isFrozen(h)}function Oa(h){var x=CE[h];return x||Br(18,h),x}function jy(){return fs}function Cm(h,x){x&&(Oa("Patches"),h.u=[],h.s=[],h.v=x)}function Nu(h){Rr(h),h.p.forEach(kE),h.p=null}function Rr(h){h===fs&&(fs=h.l)}function By(h){return fs={p:[],l:fs,h,m:!0,_:0}}function kE(h){var x=h[wi];x.i===0||x.i===1?x.j():x.O=!0}function If(h,x){x._=x.p.length;var D=x.p[0],H=h!==void 0&&h!==D;return x.h.g||Oa("ES5").S(x,h,H),H?(D[wi].P&&(Nu(x),Br(4)),cl(h)&&(h=dc(x,h),x.l||Go(x,h)),x.u&&Oa("Patches").M(D[wi],h,x.u,x.s)):h=dc(x,D,[]),Nu(x),x.u&&x.v(x.u,x.s),h!==Vy?h:void 0}function dc(h,x,D){if(Fy(x))return x;var H=x[wi];if(!H)return wo(x,function(ce,Ce){return Fu(h,H,x,ce,Ce,D)},!0),x;if(H.A!==h)return x;if(!H.P)return Go(h,H.t,!0),H.t;if(!H.I){H.I=!0,H.A._--;var ne=H.i===4||H.i===5?H.o=Bi(H.k):H.o;wo(H.i===3?new Set(ne):ne,function(ce,Ce){return Fu(h,H,ne,ce,Ce,D)}),Go(h,ne,!1),D&&h.u&&Oa("Patches").R(H,D,h.u,h.s)}return H.o}function Fu(h,x,D,H,ne,ce){if(sa(ne)){var Ce=dc(h,ne,ce&&x&&x.i!==3&&!Em(x.D,H)?ce.concat(H):void 0);if(km(D,H,Ce),!sa(Ce))return;h.m=!1}if(cl(ne)&&!Fy(ne)){if(!h.h.F&&h._<1)return;dc(h,ne),x&&x.A.l||Go(h,ne)}}function Go(h,x,D){D===void 0&&(D=!1),h.h.F&&h.m&&Af(x,D)}function la(h,x){var D=h[wi];return(D?So(D):h)[x]}function Df(h,x){if(x in h)for(var D=Object.getPrototypeOf(h);D;){var H=Object.getOwnPropertyDescriptor(D,x);if(H)return H;D=Object.getPrototypeOf(D)}}function Am(h){h.P||(h.P=!0,h.l&&Am(h.l))}function Im(h){h.o||(h.o=Bi(h.t))}function Dm(h,x,D){var H=Tm(x)?Oa("MapSet").N(x,D):Mm(x)?Oa("MapSet").T(x,D):h.g?function(ne,ce){var Ce=Array.isArray(ne),He={i:Ce?1:0,A:ce?ce.A:jy(),P:!1,I:!1,D:{},l:ce,t:ne,k:null,o:null,j:null,C:!1},$e=He,ct=Bu;Ce&&($e=[He],ct=Rf);var It=Proxy.revocable($e,ct),Ot=It.revoke,le=It.proxy;return He.k=le,He.j=Ot,le}(x,D):Oa("ES5").J(x,D);return(D?D.A:jy()).p.push(H),H}function Of(h){return sa(h)||Br(22,h),function x(D){if(!cl(D))return D;var H,ne=D[wi],ce=ul(D);if(ne){if(!ne.P&&(ne.i<4||!Oa("ES5").K(ne)))return ne.t;ne.I=!0,H=ju(D,ce),ne.I=!1}else H=ju(D,ce);return wo(H,function(Ce,He){ne&&SE(ne.t,Ce)===He||km(H,Ce,x(He))}),ce===3?new Set(H):H}(h)}function ju(h,x){switch(x){case 2:return new Map(h);case 3:return Array.from(h)}return Bi(h)}var fc,fs,Om=typeof Symbol!="undefined"&&typeof Symbol("x")=="symbol",TE=typeof Map!="undefined",ME=typeof Set!="undefined",Uy=typeof Proxy!="undefined"&&Proxy.revocable!==void 0&&typeof Reflect!="undefined",Vy=Om?Symbol.for("immer-nothing"):((fc={})["immer-nothing"]=!0,fc),Hy=Om?Symbol.for("immer-draftable"):"__$immer_draftable",wi=Om?Symbol.for("immer-state"):"__$immer_state",Gy=""+Object.prototype.constructor,Rm=typeof Reflect!="undefined"&&Reflect.ownKeys?Reflect.ownKeys:Object.getOwnPropertySymbols!==void 0?function(h){return Object.getOwnPropertyNames(h).concat(Object.getOwnPropertySymbols(h))}:Object.getOwnPropertyNames,PE=Object.getOwnPropertyDescriptors||function(h){var x={};return Rm(h).forEach(function(D){x[D]=Object.getOwnPropertyDescriptor(h,D)}),x},CE={},Bu={get:function(h,x){if(x===wi)return h;var D=So(h);if(!Em(D,x))return function(ne,ce,Ce){var He,$e=Df(ce,Ce);return $e?"value"in $e?$e.value:(He=$e.get)===null||He===void 0?void 0:He.call(ne.k):void 0}(h,D,x);var H=D[x];return h.I||!cl(H)?H:H===la(h.t,x)?(Im(h),h.o[x]=Dm(h.A.h,H,h)):H},has:function(h,x){return x in So(h)},ownKeys:function(h){return Reflect.ownKeys(So(h))},set:function(h,x,D){var H=Df(So(h),x);if(H!=null&&H.set)return H.set.call(h.k,D),!0;if(!h.P){var ne=la(So(h),x),ce=ne==null?void 0:ne[wi];if(ce&&ce.t===D)return h.o[x]=D,h.D[x]=!1,!0;if(EE(D,ne)&&(D!==void 0||Em(h.t,x)))return!0;Im(h),Am(h)}return h.o[x]===D&&typeof D!="number"&&(D!==void 0||x in h.o)||(h.o[x]=D,h.D[x]=!0,!0)},deleteProperty:function(h,x){return la(h.t,x)!==void 0||x in h.t?(h.D[x]=!1,Im(h),Am(h)):delete h.D[x],h.o&&delete h.o[x],!0},getOwnPropertyDescriptor:function(h,x){var D=So(h),H=Reflect.getOwnPropertyDescriptor(D,x);return H&&{writable:!0,configurable:h.i!==1||x!=="length",enumerable:H.enumerable,value:D[x]}},defineProperty:function(){Br(11)},getPrototypeOf:function(h){return Object.getPrototypeOf(h.t)},setPrototypeOf:function(){Br(12)}},Rf={};wo(Bu,function(h,x){Rf[h]=function(){return arguments[0]=arguments[0][0],x.apply(this,arguments)}}),Rf.deleteProperty=function(h,x){return Bu.deleteProperty.call(this,h[0],x)},Rf.set=function(h,x,D){return Bu.set.call(this,h[0],x,D,h[0])};var Uu=function(){function h(D){var H=this;this.g=Uy,this.F=!0,this.produce=function(ne,ce,Ce){if(typeof ne=="function"&&typeof ce!="function"){var He=ce;ce=ne;var $e=H;return function(Xe){var Qt=this;Xe===void 0&&(Xe=He);for(var Nn=arguments.length,Un=Array(Nn>1?Nn-1:0),On=1;On<Nn;On++)Un[On-1]=arguments[On];return $e.produce(Xe,function(Kn){var fi;return(fi=ce).call.apply(fi,[Qt,Kn].concat(Un))})}}var ct;if(typeof ce!="function"&&Br(6),Ce!==void 0&&typeof Ce!="function"&&Br(7),cl(ne)){var It=By(H),Ot=Dm(H,ne,void 0),le=!0;try{ct=ce(Ot),le=!1}finally{le?Nu(It):Rr(It)}return typeof Promise!="undefined"&&ct instanceof Promise?ct.then(function(Xe){return Cm(It,Ce),If(Xe,It)},function(Xe){throw Nu(It),Xe}):(Cm(It,Ce),If(ct,It))}if(!ne||typeof ne!="object")return(ct=ce(ne))===Vy?void 0:(ct===void 0&&(ct=ne),H.F&&Af(ct,!0),ct);Br(21,ne)},this.produceWithPatches=function(ne,ce){return typeof ne=="function"?function($e){for(var ct=arguments.length,It=Array(ct>1?ct-1:0),Ot=1;Ot<ct;Ot++)It[Ot-1]=arguments[Ot];return H.produceWithPatches($e,function(le){return ne.apply(void 0,[le].concat(It))})}:[H.produce(ne,ce,function($e,ct){Ce=$e,He=ct}),Ce,He];var Ce,He},typeof(D==null?void 0:D.useProxies)=="boolean"&&this.setUseProxies(D.useProxies),typeof(D==null?void 0:D.autoFreeze)=="boolean"&&this.setAutoFreeze(D.autoFreeze)}var x=h.prototype;return x.createDraft=function(D){cl(D)||Br(8),sa(D)&&(D=Of(D));var H=By(this),ne=Dm(this,D,void 0);return ne[wi].C=!0,Rr(H),ne},x.finishDraft=function(D,H){var ne=D&&D[wi],ce=ne.A;return Cm(ce,H),If(void 0,ce)},x.setAutoFreeze=function(D){this.F=D},x.setUseProxies=function(D){D&&!Uy&&Br(20),this.g=D},x.applyPatches=function(D,H){var ne;for(ne=H.length-1;ne>=0;ne--){var ce=H[ne];if(ce.path.length===0&&ce.op==="replace"){D=ce.value;break}}var Ce=Oa("Patches").$;return sa(D)?Ce(D,H):this.produce(D,function(He){return Ce(He,H.slice(ne+1))})},h}(),no=new Uu;no.produce,no.produceWithPatches.bind(no),no.setAutoFreeze.bind(no),no.setUseProxies.bind(no),no.applyPatches.bind(no),no.createDraft.bind(no),no.finishDraft.bind(no);var Wy={currentProjectStateDefinitionVersion:"0.4.0"},hs=Wy;async function qy(h,x,D){await iA(0),h.transaction(({drafts:H})=>{var ne;const ce=x.address.projectId;H.ephemeral.coreByProject[ce]={lastExportedObject:null,loadingState:{type:"loading"}},H.ahistoric.coreByProject[ce]={ahistoricStuff:""};function Ce(){H.ephemeral.coreByProject[ce].loadingState={type:"loaded"},H.historic.coreByProject[ce]={sheetsById:{},definitionVersion:hs.currentProjectStateDefinitionVersion,revisionHistory:[]}}function He(Ot){H.ephemeral.coreByProject[ce].loadingState={type:"loaded"},H.historic.coreByProject[ce]=Ot}function $e(){H.ephemeral.coreByProject[ce].loadingState={type:"loaded"}}function ct(Ot){H.ephemeral.coreByProject[ce].loadingState={type:"browserStateIsNotBasedOnDiskState",onDiskState:Ot}}const It=(ne=Ny(H.historic))==null?void 0:ne.coreByProject[x.address.projectId];It?D&&It.revisionHistory.indexOf(D.revisionHistory[0])==-1?ct(D):$e():D?He(D):Ce()})}function Ky(){}function Xy(h){var x,D;const H=(x=h==null?void 0:h.logging)!=null&&x.internal?(D=h.logging.min)!=null?D:256:1/0,ne=H<=128,ce=H<=512,Ce=Ou(void 0,{_debug:ne?console.debug.bind(console,"_coreLogger(TheatreInternalLogger) debug"):Ky,_error:ce?console.error.bind(console,"_coreLogger(TheatreInternalLogger) error"):Ky});if(h){const{logger:He,logging:$e}=h;He&&Ce.configureLogger(He),$e?Ce.configureLogging($e):Ce.configureLogging({dev:!1})}return Ce.getLogger().named("Theatre")}var AE=class{constructor(h,x={},D){this.config=x,this.publicApi=D,se(this,"pointers"),se(this,"_pointerProxies"),se(this,"address"),se(this,"_studioReadyDeferred"),se(this,"_assetStorageReadyDeferred"),se(this,"_readyPromise"),se(this,"_sheetTemplates",new wE.Atom({})),se(this,"sheetTemplatesP",this._sheetTemplates.pointer),se(this,"_studio"),se(this,"assetStorage"),se(this,"type","Theatre_Project"),se(this,"_logger");var H;this._logger=Xy({logging:{dev:!0}}).named("Project",h),this._logger.traceDev("creating project"),this.address={projectId:h};const ne=new wE.Atom({ahistoric:{ahistoricStuff:""},historic:(H=x.state)!=null?H:{sheetsById:{},definitionVersion:hs.currentProjectStateDefinitionVersion,revisionHistory:[]},ephemeral:{loadingState:{type:"loaded"},lastExportedObject:null}});this._assetStorageReadyDeferred=us(),this.assetStorage={getAssetUrl:ce=>{var Ce;return"".concat((Ce=x.assets)==null?void 0:Ce.baseUrl,"/").concat(ce)},createAsset:()=>{throw new Error("Please wait for Project.ready to use assets.")}},this._pointerProxies={historic:new zy.PointerProxy(ne.pointer.historic),ahistoric:new zy.PointerProxy(ne.pointer.ahistoric),ephemeral:new zy.PointerProxy(ne.pointer.ephemeral)},this.pointers={historic:this._pointerProxies.historic.pointer,ahistoric:this._pointerProxies.ahistoric.pointer,ephemeral:this._pointerProxies.ephemeral.pointer},Ke.add(h,this),this._studioReadyDeferred=us(),this._readyPromise=Promise.all([this._studioReadyDeferred.promise,this._assetStorageReadyDeferred.promise]).then(()=>{}),x.state?setTimeout(()=>{this._studio||(this._studioReadyDeferred.resolve(void 0),this._assetStorageReadyDeferred.resolve(void 0),this._logger._trace("ready deferred resolved with no state"))},0):typeof window=="undefined"?console.error('Argument config.state in Theatre.getProject("'.concat(h,'", config) is empty. ')+"You can safely ignore this message if you're developing a Next.js/Remix project in development mode. But if you are shipping to your end-users, then you need to set config.state, otherwise your project's state will be empty and nothing will animate. Learn more at https://www.theatrejs.com/docs/latest/manual/projects#state"):setTimeout(()=>{if(!this._studio)throw new Error('Argument config.state in Theatre.getProject("'.concat(h,'", config) is empty. This is fine ')+"while you are using @theatre/core along with @theatre/studio. But since @theatre/studio "+'is not loaded, the state of project "'.concat(h,`" will be empty.

`)+`To fix this, you need to add @theatre/studio into the bundle and export the project's state. Learn how to do that at https://www.theatrejs.com/docs/latest/manual/projects#state
`)},1e3)}attachToStudio(h){if(this._studio){if(this._studio!==h)throw new Error("Project ".concat(this.address.projectId," is already attached to studio ").concat(this._studio.address.studioId));console.warn("Project ".concat(this.address.projectId," is already attached to studio ").concat(this._studio.address.studioId));return}this._studio=h,h.initialized.then(async()=>{var x;await qy(h,this,this.config.state),this._pointerProxies.historic.setPointer(h.atomP.historic.coreByProject[this.address.projectId]),this._pointerProxies.ahistoric.setPointer(h.atomP.ahistoric.coreByProject[this.address.projectId]),this._pointerProxies.ephemeral.setPointer(h.atomP.ephemeral.coreByProject[this.address.projectId]),await h.createAssetStorage(this,(x=this.config.assets)==null?void 0:x.baseUrl).then(D=>{this.assetStorage=D,this._assetStorageReadyDeferred.resolve(void 0)}),this._studioReadyDeferred.resolve(void 0)}).catch(x=>{throw console.error(x),x})}get isAttachedToStudio(){return!!this._studio}get ready(){return this._readyPromise}isReady(){return this._studioReadyDeferred.status==="resolved"&&this._assetStorageReadyDeferred.status==="resolved"}getOrCreateSheet(h,x="default"){let D=this._sheetTemplates.get()[h];return D||(D=new Ly(this,h),this._sheetTemplates.reduce(H=>te(K({},H),{[h]:D}))),D.getInstance(x)}},IE=class{get type(){return"Theatre_Project_PublicAPI"}constructor(h,x={}){Ge(this,new AE(h,x,this))}get ready(){return Qe(this).ready}get isReady(){return Qe(this).isReady()}get address(){return K({},Qe(this).address)}getAssetUrl(h){if(!this.isReady){console.error("Calling `project.getAssetUrl()` before `project.ready` is resolved, will always return `undefined`. Either use `project.ready.then(() => project.getAssetUrl())` or `await project.ready` before calling `project.getAssetUrl()`.");return}return h.id?Qe(this).assetStorage.getAssetUrl(h.id):void 0}sheet(h,x="default"){const D=Sm(h);return Qe(this).getOrCreateSheet(D,x).publicApi}};we(fe());var Lf=Mt,Vu=Mt;function $y(h,x={}){const D=Ke.get(h);if(D)return D.publicApi;const ne=Xy().named("Project",h);return x.state?(DE(h,x.state),ne._debug("deep validated config.state on disk")):ne._debug("no config.state"),new IE(h,x)}var Lm=(h,x)=>{if(Array.isArray(x)||x==null||x.definitionVersion!==hs.currentProjectStateDefinitionVersion)throw new Tf("Error validating conf.state in Theatre.getProject(".concat(JSON.stringify(h),", conf). The state seems to be formatted in a way that is unreadable to Theatre.js. Read more at https://www.theatrejs.com/docs/latest/manual/projects#state"))},DE=(h,x)=>{Lm(h,x)};function zm(h,x,D){const H=D?Qe(D).ticker:rE();if((0,Lf.isPointer)(h))return(0,Vu.pointerToPrism)(h).onChange(H,x,!0);if((0,Vu.isPrism)(h))return h.onChange(H,x,!0);throw new Error("Called onChange(p) where p is neither a pointer nor a prism.")}function Zy(h){if((0,Lf.isPointer)(h))return(0,Vu.pointerToPrism)(h).getValue();throw new Error("Called val(p) where p is not a pointer.")}var OE=class{constructor(){se(this,"_studio")}get type(){return"Theatre_CoreBundle"}get version(){return"0.7.2"}getBitsForStudio(h,x){if(this._studio)throw new Error("@theatre/core is already attached to @theatre/studio");this._studio=h;const D={projectsP:Ke.atom.pointer.projects,privateAPI:Qe,coreExports:Y,getCoreRafDriver:Ay};x(D)}};RE();function RE(){if(typeof window=="undefined")return;const h=window[bm];if(typeof h!="undefined")throw typeof h=="object"&&h&&typeof h.version=="string"?new Error(`It seems that the module '@theatre/core' is loaded more than once. This could have two possible causes:
1. You might have two separate versions of Theatre.js in node_modules.
2. Or this might be a bundling misconfiguration, in case you're using a bundler like Webpack/ESBuild/Rollup.

Note that it **is okay** to import '@theatre/core' multiple times. But those imports should point to the same module.`):new Error("The variable window.".concat(bm," seems to be already set by a module other than @theatre/core."));const x=new OE;window[bm]=x;const D=window[q3];D&&D!==null&&D.type==="Theatre_StudioBundle"&&D.registerCoreBundle(x)}/*! Bundled license information:

lodash-es/lodash.js:
  (**
   * @license
   * Lodash (Custom Build) <https://lodash.com/>
   * Build: `lodash modularize exports="es" -o ./`
   * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
   * Released under MIT license <https://lodash.com/license>
   * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
   * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
   *)
*/})($n,$n.exports);const Z_e={"Animated scene":{staticOverrides:{byObject:{"Torus Knot":{rotation:{x:-.07595312268209464,y:-1.291203085595609}},Camera:{position:{x:-50,y:0,z:55.70390149829402},rotation:{x:0,y:0,z:0},target:{x:18.98828067052366,y:26645352591003757e-31,z:-18.988280670523647}},"Position Container":{position:{x:0,y:0,z:-50},rotation:{x:0,y:0,z:0}},"GLTF Model":{scale:{x:10,y:10,z:10},position:{y:-17.089452603471294,x:-5.6964842011571,z:-29.112891262423986}}}},sequence:{subUnitsPerUnit:30,length:10,type:"PositionalSequence",tracksByObject:{"Torus Knot":{trackData:{ABRNHZQIz2:{type:"BasicKeyframedTrack",__debugName:'Torus Knot:["rotation","x"]',keyframes:[{id:"aYq9qj33cS",position:0,connectedRight:!0,handles:[.5,1,.5,0],type:"bezier",value:-.07595312268209464},{id:"T9FCadiiVq",position:1.5,connectedRight:!0,handles:[.5,1,.5,0],type:"bezier",value:1.291203085595609},{id:"8hLMX26OYg",position:3.6,connectedRight:!0,handles:[.5,1,.5,0],type:"bezier",value:-.07595312268209464}]},"0c6Io7cx8i":{type:"BasicKeyframedTrack",__debugName:'Torus Knot:["rotation","y"]',keyframes:[{id:"qOdrJnZsTL",position:0,connectedRight:!0,handles:[.5,1,.5,0],type:"bezier",value:.11843616759723163},{id:"DuYLx9-kqY",position:2.267,connectedRight:!0,handles:[.5,1,.5,0],type:"bezier",value:-1.856345022137229},{id:"sgylf6pL1j",position:3.6,connectedRight:!0,handles:[.5,1,.5,0],type:"bezier",value:.11843616759723163}]},kt_RghLNEg:{type:"BasicKeyframedTrack",__debugName:'Torus Knot:["rotation","z"]',keyframes:[]}},trackIdByPropPath:{'["rotation","x"]':"ABRNHZQIz2",'["rotation","y"]':"0c6Io7cx8i",'["rotation","z"]':"kt_RghLNEg"}},Camera:{trackData:{"7jLSLKKE52":{type:"BasicKeyframedTrack",__debugName:'Camera:["position","z"]',keyframes:[{id:"FSNh2LaPhG",position:0,connectedRight:!0,handles:[.5,1,.5,0],type:"bezier",value:55.70390149829402},{id:"PwOcM8bZqO",position:3.6,connectedRight:!0,handles:[.5,1,.5,0],type:"bezier",value:-100}]}},trackIdByPropPath:{'["position","z"]':"7jLSLKKE52"}}}}}},Y_e="0.4.0",J_e=["LgAia9hD9OukNLYv"];var Q_e={sheetsById:Z_e,definitionVersion:Y_e,revisionHistory:J_e};$_e.initialize();const e1e=$n.exports.getProject("THREE.js x Theatre.js",{state:Q_e}),B0=e1e.sheet("Animated scene");let VL=0,HL=0;const t1e=3;let v1="mandatory",y1=!0;const k0=document.getElementById("scroll-content"),n1e=document.getElementById("status"),qre=document.getElementById("snap-toggle"),GL=document.getElementById("sync-toggle"),r1e=document.getElementById("animated-box");k0.style.scrollSnapType=`y ${v1}`;const i1e=B0.object("Animated Box",{x:$n.exports.types.number(0,{range:[0,window.innerWidth-100]}),y:$n.exports.types.number(80,{range:[0,window.innerHeight-100]})});i1e.onValuesChange(w=>{r1e.style.transform=`translate(${w.x}px, ${w.y}px)`});function o1e(){VL=k0.scrollTop/(k0.scrollHeight-k0.clientHeight),n1e.textContent=`Scroll: ${VL.toFixed(2)}, Sequence: ${HL.toFixed(2)}`}function a1e(){v1=v1==="proximity"?"mandatory":"proximity",k0.style.scrollSnapType=`y ${v1}`,qre.textContent=`Snap Mode: ${v1}`}function s1e(){y1=!y1,GL.textContent=`Sync: ${y1?"ON":"OFF"}`,GL.style.backgroundColor=y1?"#333":"#833"}function Kre(){y1&&(HL=VL*t1e,B0.sequence.position=HL),requestAnimationFrame(Kre)}k0.addEventListener("scroll",o1e);qre.addEventListener("click",a1e);GL.addEventListener("click",s1e);Kre();const aP=[];let w0=!0;const Ys=new Rbe,eo=new zo(70,window.innerWidth/window.innerHeight,10,200);eo.position.z=50;eo.rotation.z=Math.PI/4;const l1e=B0.object("Camera",{position:$n.exports.types.compound({x:$n.exports.types.number(eo.position.x,{range:[-100,100]}),y:$n.exports.types.number(eo.position.y,{range:[-100,100]}),z:$n.exports.types.number(eo.position.z,{range:[-100,100]})}),rotation:$n.exports.types.compound({x:$n.exports.types.number(eo.rotation.x,{range:[-Math.PI,Math.PI]}),y:$n.exports.types.number(eo.rotation.y,{range:[-Math.PI,Math.PI]}),z:$n.exports.types.number(eo.rotation.z,{range:[-Math.PI,Math.PI]})})});l1e.onValuesChange(w=>{const{x:t,y:i,z:l}=w.position,{x:d,y:g,z:_}=w.rotation;eo.position.set(t,i,l),eo.rotation.set(d,g,_)});const c1e=new uP(100,100),u1e=new Kd({color:"#666666",roughness:.7,metalness:.1}),fP=new vo(c1e,u1e);fP.rotation.x=-Math.PI/2;fP.position.y=-20;fP.receiveShadow=!0;Ys.add(fP);const d1e=new z0(10,10,10),f1e=new Kd({color:"#ff6b6b",roughness:.5,metalness:.1}),hP=new vo(d1e,f1e);hP.position.set(-20,-15,-20);hP.castShadow=!0;hP.receiveShadow=!0;Ys.add(hP);const h1e=new nz(5,15,32),p1e=new Kd({color:"#4ecdc4",roughness:.3,metalness:.2}),pP=new vo(h1e,p1e);pP.position.set(20,-12.5,-15);pP.castShadow=!0;pP.receiveShadow=!0;Ys.add(pP);const m1e=new rz(10,3,300,16),sz=new Kd({color:"#f00"});sz.color=new Fn("#049ef4");sz.roughness=.5;const $h=new vo(m1e,sz);$h.castShadow=!0;$h.receiveShadow=!0;const qs=new Wd;qs.add($h);Ys.add(qs);const g1e=B0.object("Position Container",{position:$n.exports.types.compound({x:$n.exports.types.number(qs.position.x,{range:[-50,50]}),y:$n.exports.types.number(qs.position.y,{range:[-50,50]}),z:$n.exports.types.number(qs.position.z,{range:[-50,50]})}),rotation:$n.exports.types.compound({x:$n.exports.types.number(qs.rotation.x,{range:[-Math.PI,Math.PI]}),y:$n.exports.types.number(qs.rotation.y,{range:[-Math.PI,Math.PI]}),z:$n.exports.types.number(qs.rotation.z,{range:[-Math.PI,Math.PI]})})});g1e.onValuesChange(w=>{const{x:t,y:i,z:l}=w.position,{x:d,y:g,z:_}=w.rotation;qs.position.set(t,i,l),qs.rotation.set(d,g,_)});const v1e=B0.object("Torus Knot",{rotation:$n.exports.types.compound({x:$n.exports.types.number($h.rotation.x,{range:[-2,2]}),y:$n.exports.types.number($h.rotation.y,{range:[-2,2]}),z:$n.exports.types.number($h.rotation.z,{range:[-2,2]})})});v1e.onValuesChange(w=>{const{x:t,y:i,z:l}=w.rotation;$h.rotation.set(t*Math.PI,i*Math.PI,l*Math.PI)});const y1e=new o_e("#ffffff",.5);Ys.add(y1e);const ts=new Vre("#ff9755",1.5);ts.position.y=20;ts.position.z=20;ts.castShadow=!0;ts.shadow.mapSize.width=2048;ts.shadow.mapSize.height=2048;ts.shadow.camera.far=50;ts.shadow.camera.near=1;ts.shadow.camera.top=20;ts.shadow.camera.right=20;ts.shadow.camera.bottom=-20;ts.shadow.camera.left=-20;Ys.add(ts);const D1=new a_e("#ff0",1,50,50);D1.position.z=10;D1.position.y=-40;D1.position.x=-20;D1.lookAt(new Ne(0,0,0));Ys.add(D1);const Hl=new zre({antialias:!0});Hl.shadowMap.enabled=!0;Hl.shadowMap.type=dre;Hl.setSize(window.innerWidth,window.innerHeight);Hl.setPixelRatio(Math.min(window.devicePixelRatio,2));Hl.render(Ys,eo);document.body.appendChild(Hl.domElement);console.log("camera",eo);const O1=new v_e(eo,Hl.domElement);console.log("controls",O1);O1.enableDamping=!0;O1.dampingFactor=.05;O1.enablePan=!0;O1.enableZoom=!0;function Xre(){eo.lookAt(qs.position),Hl.render(Ys,eo),window.requestAnimationFrame(Xre)}Xre();window.addEventListener("resize",function(){eo.aspect=window.innerWidth/window.innerHeight,eo.updateProjectionMatrix(),Hl.setSize(window.innerWidth,window.innerHeight),Hl.setPixelRatio(Math.min(window.devicePixelRatio,2))},!1);function b1e(w){new y_e().load(w,i=>{const l=i.scene;l.traverse(F=>{if(F instanceof vo){const j=F.clone();j.visible=!w0,Ys.add(j);const B=F.material.clone();B.wireframe=!0,B.wireframeLinewidth=1,B.needsUpdate=!0,B.transparent=!1,B.depthWrite=!0,B.depthTest=!0;const K=new vo(F.geometry,B);K.visible=w0,K.position.copy(F.position),K.rotation.copy(F.rotation),K.scale.copy(F.scale),Ys.add(K),aP.push({original:j,wireframe:K})}});const d=new rp().setFromObject(l),g=d.getCenter(new Ne),_=d.getSize(new Ne),b=Math.max(_.x,_.y,_.z),M=2/b;aP.forEach(F=>{F.original.position.sub(g),F.original.scale.multiplyScalar(M),F.wireframe.position.sub(g),F.wireframe.scale.multiplyScalar(M)}),B0.object("GLTF Model",{position:$n.exports.types.compound({x:$n.exports.types.number(0,{range:[-50,50]}),y:$n.exports.types.number(0,{range:[-50,50]}),z:$n.exports.types.number(0,{range:[-50,50]})}),rotation:$n.exports.types.compound({x:$n.exports.types.number(0,{range:[-Math.PI,Math.PI]}),y:$n.exports.types.number(0,{range:[-Math.PI,Math.PI]}),z:$n.exports.types.number(0,{range:[-Math.PI,Math.PI]})}),scale:$n.exports.types.compound({x:$n.exports.types.number(M,{range:[.1,10]}),y:$n.exports.types.number(M,{range:[.1,10]}),z:$n.exports.types.number(M,{range:[.1,10]})})}).onValuesChange(F=>{aP.forEach(j=>{j.original.position.set(F.position.x,F.position.y,F.position.z),j.wireframe.position.set(F.position.x,F.position.y,F.position.z),j.original.rotation.set(F.rotation.x,F.rotation.y,F.rotation.z),j.wireframe.rotation.set(F.rotation.x,F.rotation.y,F.rotation.z),j.original.scale.set(F.scale.x,F.scale.y,F.scale.z),j.wireframe.scale.set(F.scale.x,F.scale.y,F.scale.z)})})},void 0,i=>{console.error("An error occurred loading the model:",i)})}function _1e(){w0=!w0,aP.forEach(w=>{w.original.visible=!w0,w.wireframe.visible=w0})}window.addEventListener("keydown",w=>{w.code==="Space"&&_1e()});b1e("./assets/sc-scan.gltf");
